<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://www.paypal.com/sdk/js?client-id=BAAL3mQ2rcEbdanwe3KkE5sbDUnKmaU01_QmtfijMRtf8ykcqndGsMpUAvsCBHOGqmjjsf2aOkS_PDWb-8&components=hosted-buttons&disable-funding=venmo&currency=USD">
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Berlin Store - Gaming shop & Products</title>

    <link rel="icon" type="image/png" href="./images/BerlinStoreff.png">
    <link rel="apple-touch-icon" href="./images/BerlinStoreff.png">

    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <style>


        .header-inline-container {
    display: flex !important;
    flex-direction: row !important; /* ترتيب أفقي */
    align-items: center !important; /* محاذاة عمودية في المنتصف */
    justify-content: center !important; /* التوسيط في نص الصفحة */
    gap: 15px !important; /* المسافة بين النص واللوجو */
    margin-bottom: 20px !important;
    flex-wrap: nowrap !important; /* منع اللوجو من النزول لسطر جديد */
}

.glow-text-rtl-inline {
    margin: 0 !important; /* إلغاء الهوامش الافتراضية لضبط المحاذاة */
    font-size: 1.8rem !important;
    white-space: nowrap !important; /* لضمان بقاء النص على سطر واحد */
}

.logo-inline {
    height: 50px !important; /* يمكنك تكبير أو تصغير اللوجو من هنا */
    width: auto !important;
    object-fit: contain !important;
}

/* تعديل للموبايل لضمان عدم خروج النص عن الشاشة */
@media (max-width: 600px) {
    .glow-text-rtl-inline {
        font-size: 1.3rem !important;
    }
    .logo-inline {
        height: 35px !important;
    }
    .header-inline-container {
        gap: 8px !important;
    }
}

        /* حاوية الإعلان المركزية - النسخة المصغرة */
        .main-ad-banner {
            width: 70%; /* تقليل العرض من 90% إلى 70% */
            max-width: 450px; /* تقليل الحد الأقصى من 750px إلى 450px */
            margin: 15px auto; /* تقليل المسافات حولها قليلاً */
            border-radius: 15px; /* زوايا أصغر لتناسب الحجم الجديد */
            overflow: hidden;
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
            transition: all 0.3s ease;
        }

        /* تنسيق صورة Reze */
        .hero-ad-img {
            width: 100%;
            height: auto;
            display: block;
            object-fit: contain;
        }

        /* الموبايل فيو - لجعلها مناسبة لشاشة الهاتف */
        @media (max-width: 992px) {
            .main-ad-banner {
                width: 85%; /* في الموبايل نجعلها أكبر قليلاً من الكمبيوتر لتكون واضحة */
                max-width: 300px; /* حد أقصى صغير للموبايل */
            }
        }

        @media (max-width: 768px) {
            /* 1. ضبط الحاوية لتقليل المسافات بين العناصر */
            .trust-badges-container {
                gap: 15px !important; /* تقليل المسافة بين كل بادج والآخر */
                margin: 10px auto !important; /* تقليل الهوامش الخارجية */
                padding-bottom: 15px !important;
            }

            /* 2. تصغير حجم البادج بالكامل */
            .trust-badge {
                gap: 6px !important; /* المسافة بين الأيقونة والكلام */
            }

                /* 3. تصغير حجم الأيقونات (SVG) */
                .trust-badge svg {
                    width: 18px !important; /* الحجم الأصلي كان 24px أو 28px */
                    height: 18px !important;
                }

                /* 4. تصغير حجم النص */
                .trust-badge span {
                    font-size: 11px !important; /* تصغير خط الكتابة */
                    white-space: nowrap; /* منع النص من النزول لسطر جديد */
                }
        }

        /* للشاشات الصغيرة جداً (أقل من 380px) لضمان عدم خروجهم عن الشاشة */
        @media (max-width: 380px) {
            .trust-badges-container {
                gap: 8px !important;
            }

            .trust-badge span {
                font-size: 10px !important;
            }

            .trust-badge svg {
                width: 16px !important;
                height: 16px !important;
            }
        }
        /* تنسيق الدارك مود لبطاقات الآراء المتحركة */

        /* 1. الحاوية الرئيسية (التراك) لضمان وضوح العناصر */
        .testimonials-track {
            background: transparent;
        }

        /* 2. تحويل البطاقة إلى دارك مود */
        .testimonial-card-wide.glass {
            /* خلفية داكنة جداً مع شفافية بسيطة (Glassmorphism داكن) */
            background: rgba(15, 10, 25, 0.8) !important;
            /* إطار بنفسجي خفيف ليتماشى مع هوية الموقع */
            border: 1px solid rgba(142, 106, 191, 0.3) !important;
            /* بلور للخلفية */
            backdrop-filter: blur(10px) !important;
            -webkit-backdrop-filter: blur(10px) !important;
            /* ظل ناعم للعمق */
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5) !important;
            color: #ffffff !important;
        }

        /* 3. تعديل نصوص المراجعة */
        .testimonial-card-wide .review-content {
            color: #e0e0e0 !important; /* لون رمادي فاتح مريح للعين */
            font-weight: 400;
        }

        /* 4. تعديل أسماء العملاء */
        .testimonial-card-wide h5 {
            color: #ffffff !important;
            font-weight: 700;
        }

        /* 5. تحسين شكل الأفاتار الدائري (الدوائر اللي فيها الحروف) */
        .testimonial-card-wide .mini-avatar {
            border: 2px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }

        /* 6. تأثير التوهج عند مرور الماوس (اختياري) */
        .testimonial-card-wide.glass:hover {
            border-color: #8e6abf !important;
            box-shadow: 0 10px 40px rgba(142, 106, 191, 0.2) !important;
            transform: translateY(-5px);
        }

        /* ========================================= */
        /* ⚡ تحسينات الأداء القصوى للموبايل ⚡ */
        /* ========================================= */
        @media (max-width: 768px) {
            /* 1. إلغاء البلور الثقيل واستبداله بلون مصمت شفاف */
            .glass-card,
            .modal,
            .product-item,
            #navbar,
            .service-offer-card {
                backdrop-filter: none !important;
                -webkit-backdrop-filter: none !important;
                /* لون بديل يعطي نفس الإحساس بس خفيف جداً على الجهاز */
                background: rgba(20, 15, 30, 0.95) !important;
            }

            /* 2. إلغاء الظلال الثقيلة */
            * {
                box-shadow: none !important;
                text-shadow: none !important; /* ظل النصوص بيتقل الرندر جداً */
            }

            /* 3. إعادة تفعيل ظلال خفيفة جداً للعناصر المهمة بس (اختياري) */
            .btn-primary-v2, .buy-btn {
                box-shadow: 0 2px 5px rgba(0,0,0,0.5) !important;
            }

            /* 4. إجبار المتصفح على استخدام GPU للأوراق */
            .crimson-leaf {
                transform: translateZ(0);
            }
        }


        /* تنسيق الورقة المتساقطة */
        .crimson-leaf {
            position: fixed;
            top: -150px;
            z-index: 9999;
            /* ✅ ضروري عشان الماوس يحس بيها */
            pointer-events: auto !important;
            cursor: crosshair; /* شكل الماوس يتحول لعلامة + كأنك بتنشن عليها */

            object-fit: contain;
            /* الحركة الأساسية (السقوط) */
            animation-name: fall, swayRotate;
            animation-timing-function: linear, ease-in-out;
            animation-fill-mode: forwards;
            /* ✅ تجهيز حركة الطيران عند اللمس (نعومة الحركة) */
            transition: transform 0.6s cubic-bezier(0.25, 1, 0.5, 1), opacity 0.6s ease-out;
        }

        /* حركة السقوط من الأعلى للأسفل */
        @keyframes fall {
            0% {
                top: -150px;
                opacity: 0;
            }

            10% {
                opacity: 1;
            }

            90% {
                opacity: 1;
            }

            100% {
                top: 110vh; /* تنزل تحت الشاشة تماماً */
                opacity: 0;
            }
        }

        /* حركة الدوران والتمايل (نسخة محسنة لحركة طبيعية) */
        @keyframes swayRotate {
            0% {
                transform: translateX(0px) rotate(0deg);
            }

            25% {
                transform: translateX(30px) rotate(45deg);
            }

            50% {
                transform: translateX(0px) rotate(180deg);
            }

            75% {
                transform: translateX(-30px) rotate(220deg);
            }

            100% {
                transform: translateX(0px) rotate(360deg);
            }
        }

        /* ========================================= */
        /* 💳 تنسيق الفوتر (نص في المنتصف - صور يسار ومنزلة تحت) */
        /* ========================================= */

        .main-footer-bottom {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            padding: 25px 20px;
            margin-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            /* زودنا الارتفاع شوية عشان يستوعب النزول */
            min-height: 80px;
        }

        #copyright {
            margin: 0;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.5);
            text-align: center;
        }

        .payment-icons-corner {
            position: absolute;
            left: 20px;
            /* ✅ التعديل هنا: نزلناها تحت */
            top: auto; /* الغاء التمركز */
            bottom: 15px; /* تثبيت في الأسفل بمسافة 15 بيكسل من القاع */

            display: flex;
            align-items: center;
            gap: 10px;
        }

        .pay-img-corner {
            height: 25px !important;
            width: auto !important;
            cursor: pointer;
            opacity: 0.8;
            transition: 0.3s;
        }

            .pay-img-corner:hover {
                transform: scale(1.1);
                opacity: 1;
            }

        /* 📱 للموبايل */
        @media (max-width: 768px) {
            .main-footer-bottom {
                flex-direction: column-reverse;
                gap: 15px;
                /* نرجع الارتفاع طبيعي في الموبايل */
                min-height: auto;
            }

            .payment-icons-corner {
                position: static;
                bottom: auto;
                justify-content: center;
            }
        }


        /* تنسيق الحاوية التي تحمل الكروت لجعلها بجانب بعضها */
        .testimonials-track {
            display: flex;
            flex-wrap: wrap; /* يجعل الكروت تنزل للأسفل لو مفيش مكان */
            gap: 15px; /* المسافة بين كل كارد والآخر */
            justify-content: center; /* توسيط الكروت */
            padding: 10px 0;
            margin-bottom: 0; /* إلغاء المساحة تحت التراك */
        }

        /* تصميم الكارد نفسه */
        .testimonial-card-wide.glass {
            background: rgba(255, 255, 255, 0.05); /* خلفية شفافة */
            backdrop-filter: blur(10px); /* تأثير الزجاج */
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1); /* حدود خفيفة */
            border-radius: 15px; /* حواف دائرية */
            padding: 15px;
            width: 100%; /* يأخذ العرض المتاح */
            max-width: 300px; /* أقصى عرض للكارد الواحد */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* ظل خفيف */
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            transition: transform 0.3s ease;
            margin-bottom: 5px; /* تقليل المساحة تحت كل كارد */
        }

            /* تأثير عند مرور الماوس على الكارد */
            .testimonial-card-wide.glass:hover {
                transform: translateY(-2px);
                border-color: rgba(255, 255, 255, 0.3);
            }

        /* تنسيق النجوم */
        .stars {
            font-size: 0.8rem;
        }

        /* تنسيق نص التعليق */
        .review-content {
            font-size: 0.9rem;
            color: #eee; /* لون النص فاتح ليناسب الخلفية الداكنة */
            margin: 10px 0;
            line-height: 1.4;
            font-weight: 500;
        }

        /* تنسيق الجزء الخاص بصورة واسم العميل */
        .client-mini-info {
            display: flex;
            align-items: center;
            gap: 10px;
            border-top: 1px solid rgba(255, 255, 255, 0.1); /* خط فاصل خفيف */
            padding-top: 10px;
            margin-top: auto;
        }

        /* تنسيق الدائرة (الأفاتار) */
        .mini-avatar {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
            color: white;
            /* الألوان الخلفية موجودة بالفعل في الـ HTML (inline style) */
        }

        /* تقليل المساحات العامة في السيكشن الكبير */
        #feedback-section {
            padding-bottom: 10px !important; /* فرض تقليل المساحة السفلية */
        }

        .reviews-carousel-container {
            margin-bottom: 10px; /* تقليل المساحة تحت الكاروسيل */
        }

        /* 1. إزالة المسافات من سكشن التعليقات نفسه */
        .testimonials-marquee-section {
            margin-bottom: 0 !important;
            padding-bottom: 0 !important;
            height: auto !important;
        }

        /* 2. إزالة المسافات من حاوية الكروت */
        .testimonials-track {
            margin-bottom: 5px !important; /* مسافة صغيرة جداً عشان الظل ميتشالش */
            padding-bottom: 0 !important;
        }

        /* 3. ضغط المساحة الخاصة بالكاروسيل الفارغ اللي تحته */
        .reviews-carousel-container {
            margin: 0 !important;
            padding: 0 !important;
            height: 0 !important; /* لو مفيش محتوى جواه نخفي طوله */
            overflow: hidden;
        }

        /* 4. تقليل المسافات بين حقول الإدخال والزرار */
        #rating-name,
        .rating-input,
        #rating-text,
        button {
            margin-top: 5px !important;
            margin-bottom: 5px !important;
        }

        /* 5. التحكم في جملة sohayl عشان متعملش مسافة كبيرة */
        #itakura-trick-text {
            margin-top: 0 !important;
            margin-bottom: 5px !important;
            padding: 0 !important;
            line-height: 1;
        }

        /* 6. تقليل الحشو الداخلي للكارد الكبير الأساسي من تحت */
        #feedback-section {
            padding-bottom: 10px !important;
        }


        html, body {
            overflow-x: hidden !important; /* هذا السطر يخفي أي محتوى زائد أفقياً */
            width: 100% !important; /* لضمان أن الجسم لا يتمدد */
        }

        @media (max-width: 768px) {

            /* ... باقي أكواد الموبايل هنا ... */

            body {
                /* 🛑 الحل: حذف هذا السطر الذي كسر الـ position: fixed */
                /* transform: translateX(8px); ⬅️ قم بحذفه */
                /* ✅ الاحتفاظ بخاصية السكرول العادية */
                background-attachment: scroll !important;
                /* 💡 إذا لم تعد بحاجة للنكزة، لا تضيف أي شيء هنا */
            }

            /* ... باقي أكواد الموبايل هنا ... */
        }

        @media (max-width: 768px) {
            body {
                /* ✅ النكزة البديلة: استخدام margin-left بسيط */
                margin-right: -11px !important; /* لموازنة الـ margin-left */
                background-attachment: scroll !important;
            }
        }
        /* ==================================================== */
        /* ✅ إصلاح الترتيب: تطبيق Grid على الموبايل (أقصى تباعد) */
        /* ==================================================== */

        @media (max-width: 768px) {

            /* 1. ✅ زيادة المسافة بين الكروت (Increased Gap) */
            .products-container,
            #gamesContainer,
            #homeTvSubscriptionsContainer,
            #homeSoftwareSubscriptionsContainer {
                /* 🛑 زيادة الـ Gap لـ 30px (لأقصى تباعد بين الكروت) */
                grid-template-columns: 1fr 1fr !important;
                gap: 30px !important;
                /* زيادة الـ Padding الأفقي لتبعد الكروت عن حواف الشاشة */
                padding: 0 15px !important;
                justify-content: center;
            }

            /* 2. تصغير الكارت داخلياً (للحفاظ على الحجم الكلي) */
            .product-item,
            .subscription-item,
            .rental-card,
            .service-offer-card {
                width: 100% !important;
                min-width: unset !important;
                margin: 0 !important;
                height: auto !important;
                padding: 8px !important;
                min-height: 230px;
            }

                /* 3. تصغير حجم خط العنوان والسعر (كما تم في الخطوة السابقة) */
                .product-item h3, .subscription-item h3 {
                    font-size: 12px !important;
                    min-height: 30px;
                }

                .product-item .product-price, .subscription-item .sub-price {
                    font-size: 13px !important;
                }

                /* 4. تعديل زر الشراء ليناسب الحجم الأصغر */
                .product-item .buy-btn, .subscription-item .buy-btn {
                    font-size: 11px !important;
                    padding: 6px 8px !important;
                }
        }

        @media (max-width: 768px) {

            /* 1. ✅ زيادة المسافة وتفعيل GRID على كل حاويات المنتجات */
            .products-container,
            .wishlist-grid,
            #gameTopupContainer,
            #xboxGiftCardsContainer,
            #steamPointsPageContainer,
            #discordDecorationsPageContainer {
                display: grid !important;
                grid-template-columns: 1fr 1fr !important;
                /* 🛑 زيادة الـ Gap لـ 30px لتباعد واضح */
                gap: 30px !important;
                padding: 0 15px !important;
                justify-content: center;
            }

            @media (max-width: 768px) {

                /* 1. ✅ تطبيق Grid و Gap 30px على كل حاويات المنتجات الرئيسية */
                .products-container,
                .wishlist-grid,
                #gameTopupContainer,
                #xboxGiftCardsContainer,
                #steamPointsPageContainer,
                #discordDecorationsPageContainer,
                #fortniteContainer,
                #robloxContainer,
                #genshinImpactContainer,
                #rocketleagueContainer,
                #marvelRivalsContainer {
                    /* إعداد عمودين بمسافات متساوية */
                    display: grid !important;
                    grid-template-columns: 1fr 1fr !important;
                    /* 🛑 المسافة البينية المطلوبة (30px) */
                    gap: 30px !important;
                    padding: 0 15px !important;
                    justify-content: center;
                }

                /* 2. ✅ ضمان أن كل كارت يملأ مساحته ويتخذ الحجم المصغر */
                .product-item,
                .subscription-item,
                .rental-card,
                .service-offer-card,
                .psn-gift-card-item,
                .gaming-key-card {
                    width: 100% !important;
                    min-width: unset !important;
                    margin: 0 !important;
                    height: auto !important;
                    /* الحجم المصغر: 8px padding وارتفاع موحد */
                    padding: 8px !important;
                    min-height: 220px !important;
                }

                    /* 3. ✅ توحيد حجم خطوط المنتجات المصغرة */
                    .product-item h3, .subscription-item h3, .rental-card h3, .psn-gift-card-item h3, .gaming-key-card h3 {
                        font-size: 12px !important;
                        min-height: 30px;
                    }

                    .product-item .product-price, .subscription-item .sub-price, .rental-card p, .gaming-key-card p {
                        font-size: 13px !important;
                    }

                    .product-item .buy-btn, .subscription-item .buy-btn, .rental-card .buy-btn {
                        font-size: 11px !important;
                        padding: 6px 8px !important;
                    }
            }
            /* 2. ✅ تصغير الكارت داخلياً وتوحيد حجمه عالمياً */
            .product-item,
            .subscription-item,
            .rental-card,
            .service-offer-card,
            .psn-gift-card-item,
            .gaming-key-card {
                width: 100% !important;
                min-width: unset !important;
                margin: 0 !important;
                height: auto !important;
                /* تصغير حجم الكارت */
                padding: 8px !important;
                min-height: 220px !important; /* ارتفاع موحد تقريبي */
            }

                /* 3. ✅ تصغير حجم خط العنوان والسعر عالمياً */
                .product-item h3, .subscription-item h3, .rental-card h3, .psn-gift-card-item h3, .gaming-key-card h3 {
                    font-size: 12px !important;
                    min-height: 30px;
                }

                .product-item .product-price, .subscription-item .sub-price, .rental-card p, .gaming-key-card p {
                    font-size: 13px !important;
                }

                /* 4. تعديل زر الشراء عالمياً */
                .product-item .buy-btn, .subscription-item .buy-btn, .rental-card .buy-btn {
                    font-size: 11px !important;
                    padding: 6px 8px !important;
                }
        }

        /* ========================================= */
        /* 📱 Hero Image للموبايل فقط (#mobile-hero-image) */
        /* ========================================= */

        /* الإعداد الافتراضي: إخفاء على الديسكتوب */
        #mobile-hero-image {
            display: none;
            width: 100%;
            height: 0;
        }

        /* إظهار الصورة على شاشات الموبايل والتابلت */
        @media (max-width: 992px) {
            #mobile-hero-image {
                display: block !important;
                height: 220px; /* ✅ ارتفاع مناسب للموبايل (يمكنك تعديله) */
                margin-bottom: 20px;
                /* خصائص الخلفية */
                /* 🛑🛑 ضع هنا رابط أو مسار الصورة الجديدة 🛑🛑 */
                background-image: url('./images/mcberlinsohayl.png');
                background-size: cover;
                background-position: center;
                background-repeat: no-repeat;
                border-radius: 12px;
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
            }
        }
        /* ========================================= */
        /* ✅ ضبط ديكورات الديسكورد للموبايل (Mobile Fix) */
        /* ========================================= */
        @media (max-width: 768px) {

            /* 1. جعل القسمين (الصورة والآلة الحاسبة) فوق بعض */
            #discord-calculator-card {
                flex-direction: column !important; /* تحويل الترتيب لعمودي */
                max-width: 95% !important;
                padding: 20px 15px !important;
                gap: 20px !important;
            }

                /* 2. تصغير الأيقونة وإلغاء الرفع السلبي (Margin-Top) */
                #discord-calculator-card .card-icon {
                    width: 150px !important;
                    height: 150px !important;
                    margin-top: 0 !important; /* إلغاء الرفع الذي يخرج الصورة من الإطار */
                    margin-bottom: 10px !important;
                }

                /* 3. جعل حقول الإدخال والنتائج تملأ العرض */
                #discord-calculator-card .card-info-section,
                #discord-calculator-card .card-form-section {
                    width: 100% !important;
                }

                /* 4. تعديل تنسيق عناصر الآلة الحاسبة لملء العرض */
                #discord-calculator-card .calculator-controls {
                    flex-direction: column;
                    align-items: center;
                    gap: 15px;
                    width: 100% !important;
                }

                /* 5. جعل الـ Select والـ Input يملآن المساحة بشكل متساوٍ */
                #discord-calculator-card select,
                #discord-calculator-card .input-wrapper {
                    width: 100% !important;
                    max-width: 100% !important;
                    margin-left: 0 !important;
                    margin-right: 0 !important;
                }

                /* 6. توحيد عرض زر الشراء */
                #discord-calculator-card .buy-btn,
                #discord-price-display {
                    width: 100% !important;
                    max-width: 100% !important;
                }
        }

        /* ========================================= */
        /* ✅ تقليل حجم نافذة تفاصيل الطلب (#orderDetailModal) */
        /* ========================================= */

        #orderDetailModal {
            /* 1. تقليل أقصى عرض للنافذة قليلاً */
            max-width: 450px !important;
        }

            /* 2. تقليل المساحات الداخلية في الهيدر */
            #orderDetailModal .order-receipt-header {
                padding: 20px !important; /* تقليل الحشو الرأسي */
            }

                /* 3. تقليل حجم العنوان لتقليل الارتفاع */
                #orderDetailModal .order-receipt-header h2 {
                    font-size: 2rem !important;
                }

            /* 4. تقليل المساحات الداخلية في جسم الإيصال */
            #orderDetailModal .order-receipt-body {
                padding: 15px !important; /* تقليل الحشو الرأسي */
            }

            /* 5. تقليل المسافات بين أسطر المعلومات (التاريخ) */
            #orderDetailModal .receipt-info-row {
                margin-bottom: 5px !important; /* تقليل المسافة أسفل السطر */
            }

            /* 6. تقليل المسافات بين الخطوط الفاصلة */
            #orderDetailModal .receipt-divider {
                margin: 15px 0 !important; /* تقليل المسافة الرأسية للخط الفاصل */
            }

        /* 7. تقليل المساحات الداخلية لقسم المنتج */
        #detail-items-container .receipt-item {
            padding: 8px !important; /* تقليل الحشو داخل كارد المنتج */
            margin-bottom: 10px !important;
        }

        /* 8. تقليل المساحة السفلية لزر الإغلاق */
        #orderDetailModal > .modal-body > div:last-child {
            padding: 15px !important; /* تقليل الحشو أسفل زر الإغلاق */
        }
        /* ========================================= */
        /* 🆕 إطارات جديدة (NEW FRAMES) */
        /* ========================================= */

        .frame-toxic {
            /* حدود أساسية */
            border: 3px solid #39ff14 !important;
            border-radius: 50%;
            /* ظلال متعددة الطبقات لخلق عمق إشعاعي */
            box-shadow: 0 0 10px #39ff14, /* وهج قريب */
            inset 0 0 20px #39ff14, /* وهج داخلي عميق */
            0 0 25px rgba(57, 255, 20, 0.6), /* هالة متوسطة */
            0 0 50px rgba(57, 255, 20, 0.3) !important; /* هالة بعيدة */
            /* الأنيميشن المطور */
            animation: toxic-reactor 2s infinite alternate ease-in-out;
            /* لضمان نعومة الحركة */
            transition: all 0.3s ease;
        }

        @keyframes toxic-reactor {
            0% {
                /* الحالة الهادئة - أخضر نيون */
                border-color: #39ff14;
                box-shadow: 0 0 10px #39ff14, inset 0 0 10px #39ff14, 0 0 15px rgba(57, 255, 20, 0.4);
                transform: scale(1); /* حجم طبيعي */
            }

            100% {
                /* حالة النشاط القصوى - يميل للأصفر المشع (Toxic Yellow) */
                border-color: #ccff00;
                box-shadow: 0 0 25px #39ff14, /* وهج خارجي قوي */
                inset 0 0 30px #39ff14, /* وهج داخلي يغطي الحواف */
                0 0 60px #ccff00, /* إشعاع أصفر بعيد */
                0 0 10px #ffffff; /* لمعة بيضاء صغيرة تدل على القوة */
                transform: scale(1.03); /* تكبير بسيط جداً (تأثير النبض) */
            }
        }

        /* 4. إطار المجرة (Galaxy) - بنفسجي وأزرق */
        /* 4. إطار المجرة (Galaxy) - المصحح */
        .frame-galaxy {
            /* 1. أساسيات لضمان عمل الحركة */
            display: inline-block !important; /* ✅ ضروري جداً للدوران */
            box-sizing: border-box !important; /* لضمان أن الإطار لا يغير حجم الصورة */
            /* 2. الإطار والظلال */
            border: 3px solid rgba(199, 125, 255, 0.6) !important;
            border-radius: 50%; /* يجعلها دائرية تماماً */
            /* 3. تأثيرات التوهج العميق (Deep Space Glow) */
            box-shadow: 0 0 15px #7b2cbf, /* توهج داخلي */
            0 0 30px #3a0ca3, /* هالة متوسطة */
            0 0 50px rgba(118, 44, 191, 0.5), /* هالة بعيدة */
            inset 0 0 20px rgba(0, 180, 216, 0.4) !important; /* عمق داخلي */
            /* 4. الحركات (الدوران + النبض) */
            animation: galaxy-spin 20s linear infinite, /* دوران مستمر */
            galaxy-pulse 4s ease-in-out infinite alternate !important; /* تغير الألوان */
            /* تحسين الأداء */
            will-change: transform, box-shadow, border-color;
        }

        /* حركة الدوران (360 درجة) */
        @keyframes galaxy-spin {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }

        /* حركة نبض الألوان (تغير ألوان المجرة) */

        @keyframes galaxy-pulse {

            0% {
                border-color: #c77dff; /* بنفسجي فاتح */

                box-shadow: 0 0 15px #7b2cbf, 0 0 30px #3a0ca3, 0 0 50px rgba(199, 125, 255, 0.4), inset 0 0 10px #3a0ca3;
            }



            50% {
                border-color: #fff; /* لمعة بيضاء كالنجوم */
            }



            100% {
                border-color: #00b4d8; /* سماوي */

                box-shadow: 0 0 20px #00b4d8, 0 0 40px #0077b6, 0 0 60px rgba(0, 180, 216, 0.4), inset 0 0 20px #0077b6;
            }
        }

        .glowing-divider {
            border: 0;
            height: 1px;
            background-color: rgba(255, 255, 255, 0.5);
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
            margin: 25px auto;
            width: 80%; /* يفضل أن لا يلمس الحواف */
            border-radius: 50%; /* حواف ناعمة */
        }
        /* ✅ فاصل أبيض رفيع عصري مع أطراف شفافة */
        .modern-thin-divider {
            border: 0;
            height: 1px;
            /* التدرج: يبدأ شفاف -> يصبح أبيض في المنتصف -> يعود شفاف */
            background-image: linear-gradient(to right, rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.75), rgba(255, 255, 255, 0));
            margin: 20px 0; /* مسافة من فوق وتحت */
            width: 100%;
            opacity: 0.6; /* شفافية عامة ليكون هادئاً */
        }
        /* تنسيق زر تغيير الأفاتار الجديد */
        .change-avatar-btn-styled {
            background: rgba(255, 255, 255, 0.05); /* خلفية شفافة */
            border: 1px solid var(--accent-yellow); /* إطار أصفر */
            color: var(--accent-yellow); /* نص أصفر */
            padding: 10px 25px;
            border-radius: 50px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            max-width: 250px; /* عرض مناسب */
        }

            .change-avatar-btn-styled:hover {
                background: var(--accent-yellow);
                color: #000; /* نص أسود عند التحويم */
                transform: translateY(-2px);
                box-shadow: 0 0 15px rgba(255, 204, 0, 0.3); /* توهج */
            }

            .change-avatar-btn-styled:active {
                transform: scale(0.95);
            }
        /* ========================================= */
        /* 🖼️ AVATAR FRAMES STYLES */
        /* ========================================= */

        /* 1. إطار الجحيم (Inferno) */
        .frame-inferno {
            border: 3px solid #ff4500 !important;
            box-shadow: 0 0 10px #ff4500, 0 0 20px #ffcc00, inset 0 0 10px #ff4500 !important;
            animation: inferno-pulse 1.5s infinite alternate;
            border-radius: 50%; /* ضمان دائرية الإطار */
        }

        @keyframes inferno-pulse {
            0% {
                box-shadow: 0 0 10px #ff4500, 0 0 20px #ff8800;
                border-color: #ff4500;
            }

            100% {
                box-shadow: 0 0 15px #ff0000, 0 0 30px #ffcc00;
                border-color: #ffcc00;
            }
        }

        /* 2. إطار السايبر (Cyberpunk) */
        .frame-cyber {
            border: 3px solid #00e5ff !important;
            box-shadow: 0 0 10px #00e5ff, 0 0 20px #bf00ff !important;
            animation: cyber-glow 2s infinite alternate;
            border-radius: 50%;
        }

        @keyframes cyber-glow {
            0% {
                box-shadow: 0 0 5px #00e5ff, 0 0 10px #00e5ff;
                border-color: #00e5ff;
            }

            50% {
                box-shadow: 0 0 15px #bf00ff, 0 0 25px #bf00ff;
                border-color: #bf00ff;
            }

            100% {
                box-shadow: 0 0 5px #00e5ff, 0 0 10px #00e5ff;
                border-color: #00e5ff;
            }
        }

        /* تنسيق منطقة اختيار الإطارات (دوائر ملونة) */
        .frames-selection-grid {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 10px;
            padding: 15px;
            background: rgba(0,0,0,0.2);
            border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .frame-option-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.2s;
            position: relative;
            border: 2px solid transparent;
        }

            .frame-option-btn:hover {
                transform: scale(1.1);
            }

            .frame-option-btn.active-frame {
                transform: scale(1.1);
                box-shadow: 0 0 0 2px #fff; /* حلقة بيضاء حول المختار */
            }

            /* علامة القفل */
            .frame-option-btn.locked {
                filter: grayscale(100%);
                opacity: 0.5;
                cursor: not-allowed;
            }

                .frame-option-btn.locked::after {
                    content: '🔒';
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    font-size: 16px;
                }
        /* ✅ إصلاح اختفاء الكروت عند الهوفر */
        .product-item--offline:hover {
            transform: translateY(-8px) scale(1.03); /* حركة الرفع */
            border-color: #90d8f8;
            box-shadow: 0 8px 25px rgba(102, 192, 244, 0.3), 0 0 10px rgba(102, 192, 244, 0.5);
            /* 🛑 احذف سطر animation: none !important; لو موجود */
            /* ✅ ضيف السطر ده ضروري جداً */
            opacity: 1 !important;
            visibility: visible !important;
        }
        /* صندوق المعاينة العائم */
        .preview-games-floating {
            position: absolute;
            bottom: 120%; /* يظهر فوق الزرار */
            left: 50%;
            transform: translateX(-50%) translateY(10px);
            display: flex;
            gap: 10px;
            background: rgba(20, 20, 30, 0.9);
            padding: 10px;
            border-radius: 12px;
            border: 1px solid #66c0f4; /* لون ستيم الأزرق */
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 10;
            pointer-events: none; /* عشان الماوس مايعلقش عليه */
        }

            /* حالة الظهور */
            .preview-games-floating.active {
                opacity: 1;
                visibility: visible;
                transform: translateX(-50%) translateY(0);
            }

            /* السهم الصغير تحت الصندوق */
            .preview-games-floating::after {
                content: '';
                position: absolute;
                bottom: -6px;
                left: 50%;
                transform: translateX(-50%) rotate(45deg);
                width: 12px;
                height: 12px;
                background: #66c0f4; /* نفس لون الإطار */
                z-index: -1;
            }

        /* تنسيق الصور الصغيرة */
        .mini-preview-img {
            width: 60px;
            height: 80px;
            object-fit: cover;
            border-radius: 6px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            transform: scale(0.8);
            transition: transform 0.3s ease;
        }

        /* حركة تتابع للصور (Staggered Animation) */
        .preview-games-floating.active .mini-preview-img {
            transform: scale(1);
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
                opacity: 1;
            }

            50% {
                transform: scale(1.2);
                opacity: 0.8;
            }

            100% {
                transform: scale(1);
                opacity: 1;
            }
        }
        /* بادج المخزون العام */
        .stock-badge {
            display: inline-block;
            font-size: 11px;
            font-weight: bold;
            padding: 3px 8px;
            border-radius: 4px;
            margin-top: 5px;
            margin-bottom: 5px;
            letter-spacing: 0.5px;
        }

        /* 🟢 حالة متوفر (أخضر) */
        .stock-high {
            color: #2ecc71;
            border: 1px solid #2ecc71;
            background: rgba(46, 204, 113, 0.1);
        }

        /* 🔴 حالة نفذت الكمية (رمادي/أحمر) */
        .stock-out {
            color: #e74c3c;
            border: 1px solid #e74c3c;
            background: rgba(231, 76, 60, 0.1);
            text-decoration: line-through;
        }

        /* 🔥 حالة الخطر (أصفر/برتقالي) - متبقى عدد قليل */
        .stock-low {
            color: #ff9f43;
            border: 1px solid #ff9f43;
            background: rgba(255, 159, 67, 0.1);
            animation: stock-pulse 1.5s infinite; /* أنيميشن النبض */
        }

        /* أنيميشن النبض للفت الانتباه */
        @keyframes stock-pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(255, 159, 67, 0.4);
            }

            70% {
                box-shadow: 0 0 0 6px rgba(255, 159, 67, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(255, 159, 67, 0);
            }
        }

        /* 2. تنسيق رسالة الحالة الجديدة (المربع الملون) */
        .status-message-box {
            background: rgba(255, 193, 7, 0.15); /* خلفية صفراء شفافة */
            border: 1px solid #ffc107; /* إطار أصفر */
            color: #ffc107; /* نص أصفر */
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-size: 13px;
            font-weight: bold;
            margin: 15px 0;
            line-height: 1.6;
        }

        /* 3. تعديل بسيط للهيدر عشان يناسب الحجم الصغير */
        .order-receipt-header {
            padding: 20px 15px;
        }

            .order-receipt-header h2 {
                font-size: 1.5rem !important;
            }
        /* تصميم نافذة تفاصيل الطلب */
        .order-receipt-header {
            background: linear-gradient(145deg, #1e0b3c, #000);
            padding: 25px;
            text-align: center;
            border-bottom: 2px dashed rgba(255, 255, 255, 0.1); /* خط متقطع مثل الفاتورة */
            border-radius: 15px 15px 0 0;
        }

        .order-status-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 50px;
            font-size: 12px;
            font-weight: bold;
            margin-top: 10px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

            .order-status-badge.completed {
                background: rgba(40, 167, 69, 0.2);
                color: #28a745;
                border-color: #28a745;
            }

            .order-status-badge.pending {
                background: rgba(255, 193, 7, 0.2);
                color: #ffc107;
                border-color: #ffc107;
            }

        .order-receipt-body {
            padding: 25px;
            background: rgba(0, 0, 0, 0.2);
        }

        .receipt-info-row {
            display: flex;
            justify-content: space-between;
            color: #ccc;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .receipt-divider {
            border: 0;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin: 15px 0;
        }

        /* تنسيق عنصر المنتج داخل الفاتورة */
        .receipt-item {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
            background: rgba(255, 255, 255, 0.03);
            padding: 10px;
            border-radius: 8px;
        }

            .receipt-item img {
                width: 50px;
                height: 50px;
                border-radius: 6px;
                object-fit: cover;
            }

        .receipt-item-details {
            flex-grow: 1;
            text-align: right;
        }

        .receipt-item-title {
            color: #fff;
            font-weight: bold;
            font-size: 14px;
            display: block;
        }

        .receipt-item-price {
            color: var(--accent-yellow);
            font-size: 13px;
        }

        .receipt-total-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 18px;
            font-weight: bold;
            margin-top: 10px;
        }
        /* كلاس خاص بكارد الباندل */
        .bundle-offer-card {
            /* زيادة الحجم بشكل مستطيل */
            width: 95%; /* يخلي الكارد يأخذ عرض أكبر */
            min-height: 250px; /* ارتفاع أكبر ليعطي إحساس الباندل */
            /* تنسيقات الباندل */
            display: flex;
            flex-direction: row; /* ترتيب المحتوى أفقيًا داخل الكارد */
            align-items: center;
            justify-content: space-between;
            padding: 20px;
            /* ظل أو حدود مميزة */
            border: 3px solid #ffd700; /* إضافة حدود بلون مميز لجذب الانتباه */
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
            transition: transform 0.3s ease;
            margin-bottom: 25px; /* عشان يفصل عن باقي الكروت */
        }

            /* تنسيق لعناصر الكارد داخل الباندل (لو احتاجت تعديل إضافي) */
            .bundle-offer-card .product-title {
                font-size: 1.8em;
                font-weight: bold;
                color: #fff;
            }

        /* حاوية العجلة */
        .wheel-container {
            position: relative;
            width: 300px;
            height: 300px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px auto;
        }

        /* العجلة نفسها */
        .the-wheel {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #333;
            border-radius: 50%;
            border: 5px solid #ffd700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
            overflow: hidden;
            transition: transform 5s cubic-bezier(0.17, 0.67, 0.83, 0.67); /* حركة العجلة */
        }

        /* القطاعات (مثلثات) */
        .segment {
            position: absolute;
            width: 50%;
            height: 50%;
            background: var(--clr);
            transform-origin: bottom right;
            transform: rotate(calc(45deg * (var(--i) - 1)));
            clip-path: polygon(0 0, 56% 0, 100% 100%, 0 56%);
            display: flex;
            justify-content: center;
            align-items: center;
            top: 0;
            left: 0;
        }

            /* النصوص جوه القطاعات */
            .segment span {
                position: absolute;
                transform: rotate(45deg);
                margin-top: 40px;
                margin-left: 40px;
                font-size: 12px;
                font-weight: bold;
                color: white;
                text-shadow: 1px 1px 2px black;
                width: 70px;
                text-align: center;
            }

        /* المؤشر (السهم) */
        .wheel-pointer {
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 30px;
            background: #fff;
            clip-path: polygon(50% 100%, 0 0, 100% 0);
            z-index: 10;
            filter: drop-shadow(0 2px 2px rgba(0,0,0,0.5));
        }

        /* زرار الـ SPIN في النص */
        .wheel-center {
            position: absolute;
            width: 60px;
            height: 60px;
            background: #fff;
            border-radius: 50%;
            z-index: 10;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 4px solid #1a0b2e;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
        }

        .spin-btn {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: #ff4757;
            color: white;
            font-weight: bold;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            user-select: none;
            font-size: 14px;
        }

            .spin-btn:active {
                transform: scale(0.9);
            }
        /* تنسيق رسالة الخطأ (Toast Error) */
        .toast-notification.error {
            background: rgba(50, 0, 0, 0.95) !important; /* خلفية حمراء غامقة */
            border: 1px solid #ff4757 !important; /* إطار أحمر فاتح */
            color: #ff4757 !important; /* لون النص */
            box-shadow: 0 5px 20px rgba(255, 71, 87, 0.3);
        }

        /* أنيميشن الهزة للزر (عشان يحس إن فيه غلط) */
        @keyframes shake {
            0% {
                transform: translateX(0);
            }

            25% {
                transform: translateX(-5px);
            }

            50% {
                transform: translateX(5px);
            }

            75% {
                transform: translateX(-5px);
            }

            100% {
                transform: translateX(0);
            }
        }
        /* زر المكافأة اليومية في الناف بار */
        .daily-reward-trigger {
            background: linear-gradient(45deg, #FFD700, #FFA500); /* تدرج ذهبي */
            color: #000 !important; /* نص أسود للتباين */
            padding: 8px 20px;
            border-radius: 50px; /* حواف دائرية بالكامل */
            font-weight: 900;
            font-size: 14px;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.4); /* توهج ذهبي */
            transition: all 0.3s ease;
            position: relative;
            border: 2px solid #fff; /* إطار أبيض رفيع */
            animation: gold-pulse 2s infinite; /* حركة النبض */
        }

            /* تأثير عند مرور الماوس */
            .daily-reward-trigger:hover {
                transform: translateY(-3px) scale(1.05);
                box-shadow: 0 0 25px rgba(255, 215, 0, 0.8);
                background: linear-gradient(45deg, #FFA500, #FFD700);
            }

            /* علامة تنبيه حمراء صغيرة (Notification Badge) */
            .daily-reward-trigger .badge-notification {
                position: absolute;
                top: -5px;
                right: -5px;
                background: #ff4757;
                color: white;
                width: 18px;
                height: 18px;
                border-radius: 50%;
                font-size: 12px;
                display: flex;
                align-items: center;
                justify-content: center;
                border: 2px solid #fff;
                animation: bounce-badge 1s infinite;
            }

        /* أنيميشن النبض للزر */
        @keyframes gold-pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(255, 215, 0, 0.7);
            }

            70% {
                box-shadow: 0 0 0 10px rgba(255, 215, 0, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(255, 215, 0, 0);
            }
        }

        #daily-reward-section {
            /*
            السطر ده بيعمل حاجتين:
            1. linear-gradient: طبقة سوداء شفافة (0.7) عشان تغمق الصورة.
            2. url: مسار الصورة بتاعتك (غير الاسم لو مختلف).
         */
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url('./images/mc.gif') !important; /* 👈 غير اسم الصورة هنا */
            /* عشان الصورة تغطي المساحة بالكامل بدون تكرار */
            background-size: cover !important;
            background-position: center center !important;
            background-repeat: no-repeat !important;
            /* عشان لو الصورة فيها أطراف فاتحة، نضمن إن الحواف لسه مدورة */
            overflow: hidden;
            /* إضافة تأثير ظل خارجي عشان يفصلها عن باقي الموقع */
            box-shadow: 0 0 50px rgba(0, 0, 0, 0.8) !important;
            border: 1px solid rgba(255, 255, 255, 0.1); /* إطار خفيف */
        }
        /* تأثير الزوم البطيء للخلفية */
        #daily-reward-section {
            animation: backgroundZoom 20s infinite alternate ease-in-out;
        }

        @keyframes backgroundZoom {
            0% {
                background-size: 100% auto !important; /* حجم طبيعي */
            }

            100% {
                background-size: 110% auto !important; /* زوم خفيف جداً بنسبة 10% */
            }
        }
        /* أنيميشن لعلامة التنبيه */
        @keyframes bounce-badge {
            0%, 100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-3px);
            }
        }
        /* حاوية الأيام */
        .daily-days-container {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        /* تصميم كارت اليوم الواحد */
        .daily-day-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            width: 80px;
            padding: 10px 5px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            opacity: 0.6;
            transition: all 0.3s ease;
        }

            /* أيقونة النقاط */
            .daily-day-card i {
                font-size: 20px;
                margin: 8px 0;
                color: #ccc;
            }

            /* اليوم النشط (اليوم الحالي المتاح للاستلام) */
            .daily-day-card.active {
                opacity: 1;
                border-color: #ffd700;
                background: rgba(255, 215, 0, 0.1);
                box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
                transform: scale(1.1);
            }

                .daily-day-card.active i {
                    color: #ffd700;
                    animation: bounce 1s infinite;
                }

            /* اليوم المستلم (Claimed) */
            .daily-day-card.claimed {
                opacity: 1;
                background: rgba(40, 167, 69, 0.2);
                border-color: #28a745;
            }

                .daily-day-card.claimed i {
                    color: #28a745;
                }

            /* اليوم السابع المميز */
            .daily-day-card.big-reward {
                width: 100px;
                border-color: #00e5ff;
            }

                .daily-day-card.big-reward i {
                    color: #00e5ff;
                    font-size: 28px;
                }

        @keyframes bounce {
            0%, 100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-5px);
            }
        }

        /* كلاس الإظهار */
        .toast-notification.show {
            opacity: 1;
            transform: translateY(0);
        }

        /* ألوان حسب النوع */
        .toast-notification.success {
            border-color: #2ecc71;
            color: #2ecc71;
        }

        .toast-notification.error {
            border-color: #ff4757;
            color: #ff4757;
        }
        /* ========================================= */
        /* 🛍️ REWARD SHOP STYLES (PRO DESIGN)      */
        /* ========================================= */

        /* 1. خلفية القسم المخصصة */
        #reward-shop-section {
            /* ⚠️ ضع رابط صورتك هنا بدلاً من الرابط المؤقت */
            background-image: linear-gradient(to bottom, rgba(15, 10, 30, 0.9), rgba(44, 26, 64, 0.85)), url('./images/P97JL4qb6z2ofr_OgOOH30QggmrvQWMhEYPrUJZaHw4.gif') !important;
            background-size: cover !important;
            background-position: center !important;
            background-attachment: fixed !important;
            border: 1px solid #ffd700; /* إطار ذهبي يليق بالجوائز */
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.1);
            border-radius: 20px;
            padding: 30px;
            position: relative;
            overflow: hidden;
        }

            /* عنوان المتجر */
            #reward-shop-section h2 {
                font-size: 2.5rem !important;
                margin-bottom: 10px !important;
                text-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
                display: block !important;
            }

            #reward-shop-section p {
                font-size: 1.1rem;
                color: #e0e0e0;
                max-width: 600px;
                margin: 0 auto 40px auto;
            }

        /* 2. هيدر المتجر (رصيد النقاط) */
        .shop-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 215, 0, 0.2);
        }

        .shop-balance {
            font-size: 1.4rem;
            font-weight: 900;
            background: linear-gradient(90deg, rgba(0,0,0,0.6), rgba(44, 26, 64, 0.6));
            padding: 10px 25px;
            border-radius: 50px;
            border: 2px solid var(--accent-yellow);
            box-shadow: 0 0 15px rgba(255, 204, 0, 0.3);
            display: flex;
            align-items: center;
            gap: 10px;
        }

            .shop-balance::before {
                font-size: 1.2rem;
            }

        /* 3. شبكة الكروت (Grid) */
        .shop-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); /* تكبير عرض الكروت قليلاً */
            gap: 25px;
            padding: 10px;
        }

        /* 4. كارت الجائزة (Pro Design) */
        .reward-card {
            background: linear-gradient(145deg, #1a1a2e, #16213e);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            overflow: hidden;
            position: relative;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            display: flex;
            flex-direction: column;
        }

            /* تأثير التوهج عند الهوفر */
            .reward-card:hover {
                transform: translateY(-10px) scale(1.02);
                border-color: var(--accent-yellow);
                box-shadow: 0 15px 30px rgba(0, 0, 0, 0.5), 0 0 20px rgba(255, 215, 0, 0.2);
            }

            /* شريط لامع يمر عبر الكارت */
            .reward-card::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 50%;
                height: 100%;
                background: linear-gradient(to right, transparent, rgba(255,255,255,0.1), transparent);
                transform: skewX(-25deg);
                transition: 0.5s;
                z-index: 1;
            }

            .reward-card:hover::before {
                left: 150%;
                transition: 0.7s;
            }

        /* حاوية الصورة داخل الكارت */
        .reward-image-box {
            height: 140px;
            background: radial-gradient(circle at center, rgba(255, 215, 0, 0.15), transparent 70%);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 15px;
            position: relative;
        }

            .reward-image-box img {
                max-height: 100px;
                max-width: 80%;
                filter: drop-shadow(0 5px 15px rgba(0,0,0,0.5));
                transition: transform 0.4s ease;
                z-index: 2;
            }

        .reward-card:hover .reward-image-box img {
            transform: scale(1.15) rotate(5deg);
        }

        /* محتوى الكارت */
        .reward-info {
            padding: 20px;
            text-align: center;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            z-index: 2;
        }

            .reward-info h3 {
                font-size: 1.2rem;
                font-weight: bold;
                color: #fff;
                margin: 0 0 8px 0;
                text-shadow: 0 2px 4px rgba(0,0,0,0.5);
            }

            .reward-info p.reward-desc { /* كلاس افتراضي للوصف */
                font-size: 0.9rem;
                color: #aaa;
                margin-bottom: 15px;
                line-height: 1.4;
                min-height: 40px;
            }

        /* السعر والزر */
        .reward-price {
            font-size: 1.3rem;
            font-weight: 800;
            color: var(--accent-yellow);
            margin: 10px 0;
            display: block;
            text-shadow: 0 0 10px rgba(255, 204, 0, 0.3);
        }

        .buy-reward-btn {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 50px;
            background: linear-gradient(45deg, var(--accent-yellow), #ffaa00);
            color: #000;
            font-weight: bold;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 204, 0, 0.3);
        }

            .buy-reward-btn:hover {
                background: linear-gradient(45deg, #ffaa00, var(--accent-yellow));
                transform: translateY(-2px);
                box-shadow: 0 6px 20px rgba(255, 204, 0, 0.5);
            }

            .buy-reward-btn:active {
                transform: scale(0.98);
            }

        /* تحسينات للموبايل */
        @media (max-width: 768px) {
            #reward-shop-section {
                padding: 20px 15px;
            }

            .shop-grid {
                grid-template-columns: 1fr 1fr; /* عمودين في الموبايل */
                gap: 15px;
            }

            .reward-card {
                min-height: auto;
            }

            .reward-image-box {
                height: 110px;
            }

                .reward-image-box img {
                    max-height: 70px;
                }

            .reward-info h3 {
                font-size: 1rem;
            }

            .reward-price {
                font-size: 1.1rem;
            }

            .buy-reward-btn {
                font-size: 13px;
                padding: 8px;
            }
        }

        /* تصميم كبسولة النقاط الجديد */
        .points-pill {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px; /* مسافة بين الرقم والأيقونة */
            padding: 6px 18px; /* حجم الحشو صغير ومناسب */
            background: rgba(0, 0, 0, 0.4); /* خلفية داكنة شفافة */
            border: 1px solid #ffcc00; /* ✅ البوردر الذهبي */
            border-radius: 50px; /* حواف دائرية بالكامل */
            color: #fff;
            font-size: 13px; /* ✅ حجم خط أصغر */
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 15px; /* مسافة من الأعلى */
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2); /* ظل خفيف */
        }

            /* تأثير عند مرور الماوس */
            .points-pill:hover {
                transform: translateY(-2px);
                background: rgba(255, 204, 0, 0.15); /* خلفية ذهبية خفيفة جداً */
                box-shadow: 0 0 15px rgba(255, 204, 0, 0.3); /* توهج بسيط */
            }

            /* تنسيق أيقونة النقاط */
            .points-pill i {
                color: #ffcc00; /* لون الأيقونة ذهبي */
                font-size: 14px;
            }

            /* تنسيق الرقم */
            .points-pill span {
                font-family: 'Tajawal', sans-serif; /* ضمان الخط */
                letter-spacing: 1px;
            }
        /* ✅ تصحيح ألوان بوردر صورة الدروب داون حسب الرتبة */
        #dropdown-user-img.rank-bronze {
            border-color: #cd7f32 !important; /* لون نحاسي */
            box-shadow: none !important; /* البرونز ملهوش وهج */
        }

        #dropdown-user-img.rank-gold {
            border-color: #ffd700 !important; /* لون ذهبي */
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.6) !important;
        }

        #dropdown-user-img.rank-diamond {
            border-color: #00e5ff !important; /* لون سماوي */
            box-shadow: 0 0 20px rgba(0, 229, 255, 0.8) !important;
        }
        /* تنسيق شارة الملك الخاصة */
        .user-badge.king {
            border-color: #ffd700 !important; /* إطار ذهبي */
            color: #ffd700 !important; /* نص ذهبي */
            background: rgba(255, 215, 0, 0.15) !important; /* خلفية ذهبية خفيفة */
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.3); /* توهج */
            animation: kingPulse 2s infinite alternate; /* نبض خفيف */
        }

        /* حركة نبض بسيطة للشارة */
        @keyframes kingPulse {
            from {
                box-shadow: 0 0 5px rgba(255, 215, 0, 0.3);
            }

            to {
                box-shadow: 0 0 15px rgba(255, 215, 0, 0.6);
            }
        }

        /* 👑 تنسيق لقب الملك */
        .king-title-badge {
            color: #ffd700 !important; /* لون ذهبي */
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5); /* توهج */
            font-weight: bold;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }

            /* إضافة التاج تلقائياً بعد الاسم */
            .king-title-badge::after {
                content: "👑"; /* أيقونة التاج */
                font-size: 1.2em;
                margin-right: 5px;
                filter: drop-shadow(0 0 5px gold);
                animation: floatTitle 2s infinite ease-in-out;
            }

        /* حركة بسيطة للتاج */
        @keyframes floatTitle {
            0%, 100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-3px);
            }
        }

        /* تنسيق صندوق الكود */
        .code-box {
            position: relative;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            /* الحفاظ على التنسيق القديم */
            background: #000;
            color: #ffd700;
            padding: 15px;
            font-size: 18px; /* تصغير الخط قليلاً ليناسب الإيميلات الطويلة */
            border: 2px dashed #ffd700;
            margin: 15px 0;
            cursor: pointer;
            border-radius: 10px;
            font-family: monospace;
            direction: ltr; /* مهم عشان الإنجليزي يظهر صح */
            word-break: break-all; /* عشان لو الإيميل طويل ينزل سطر */
        }

            .code-box.copied {
                border-color: #2ecc71 !important; /* إطار أخضر */
                color: #2ecc71 !important; /* نص أخضر */
                background: rgba(46, 204, 113, 0.1) !important; /* خلفية خضراء خفيفة */
                border-style: solid !important; /* تحويل الخط المقطع لخط متصل */
                box-shadow: 0 0 15px rgba(46, 204, 113, 0.4); /* توهج أخضر */
                transform: scale(1.02);
            }

            .code-box i {
                transition: all 0.3s ease;
            }

            .code-box:active {
                transform: scale(0.98);
                background: #222;
            }

        #reward-success-modal {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100% !important;
            height: 100% !important;
            z-index: 2147483647 !important; /* أعلى رقم ممكن في المتصفح */
            background: rgba(0, 0, 0, 0.9) !important; /* خلفية داكنة جداً للتركيز */
            backdrop-filter: blur(10px);
            display: none; /* مخفية افتراضياً */
            justify-content: center; /* توسيط */
            align-items: center; /* توسيط */
        }

            /* تنسيق محتوى النافذة */
            #reward-success-modal .modal-body {
                background: #1a1a2e; /* لون خلفية الكارت */
                border: 2px solid #ffd700; /* إطار ذهبي */
                padding: 30px;
                border-radius: 20px;
                width: 90%;
                max-width: 400px;
                position: relative;
                box-shadow: 0 0 50px rgba(255, 215, 0, 0.3); /* توهج */
                display: flex;
                flex-direction: column;
                align-items: center;
            }
        /* حاوية ملخص الطلب عشان نقدر نتحكم في اللي جواها */
        .payment-header-box {
            position: relative; /* ضروري عشان القائمة تظهر بالنسبة له */
            overflow: visible !important; /* السماح بالخروج عن الإطار */
        }

        /* تصميم القائمة المنبثقة */
        .detailed-summary-tooltip {
            visibility: hidden;
            opacity: 0;
            position: absolute;
            top: 110%; /* تظهر تحت العنصر مباشرة */
            left: 50%;
            transform: translateX(-50%) translateY(-10px);
            width: 280px; /* عرض القائمة */
            background: rgba(20, 20, 30, 0.95); /* لون خلفية داكن وشفاف */
            border: 1px solid var(--accent-yellow);
            border-radius: 8px;
            padding: 15px;
            z-index: 1000;
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
            backdrop-filter: blur(10px);
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            text-align: right;
            pointer-events: none; /* عشان متضايقش الماوس */
        }

            /* سهم صغير فوق القائمة */
            .detailed-summary-tooltip::after {
                content: "";
                position: absolute;
                bottom: 100%;
                left: 50%;
                margin-left: -5px;
                border-width: 5px;
                border-style: solid;
                border-color: transparent transparent var(--accent-yellow) transparent;
            }

        /* إظهار القائمة عند الهوفر */
        .payment-header-box:hover .detailed-summary-tooltip {
            visibility: visible;
            opacity: 1;
            transform: translateX(-50%) translateY(0);
            pointer-events: auto;
        }

        /* تنسيق العناصر داخل القائمة */
        .summary-tooltip-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            padding: 8px 0;
            font-size: 12px;
            color: #eee;
        }

            .summary-tooltip-item:last-child {
                border-bottom: none;
            }

            .summary-tooltip-item span.qty {
                background: var(--main-purple);
                padding: 2px 6px;
                border-radius: 4px;
                font-size: 10px;
                margin-left: 5px;
            }

        .summary-tooltip-total {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px dashed #555;
            text-align: center;
            font-weight: bold;
            color: var(--accent-yellow);
        }

        .wishlist-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            padding: 10px;
            /* التحكم في السكرول: مسموح عمودي، ممنوع أفقي */
            max-height: 60vh;
            overflow-y: auto;
            overflow-x: hidden; /* ⛔ يمنع السكرول يمين وشمال */
            width: 100%; /* لضمان عدم تمدده أكثر من النافذة */
            box-sizing: border-box;
        }

            .wishlist-grid .product-item {
                width: 100% !important;
                min-width: 0 !important;
                margin: 0 !important;
                position: relative; /* ضروري عشان زر الحذف يتموضع بالنسبة للكارت */
                border: 1px solid rgba(255, 255, 255, 0.1);
            }

        .wishlist-remove-btn {
            position: absolute;
            top: 5px;
            right: 5px; /* يظهر في الركن العلوي */
            width: 25px;
            height: 25px;
            background-color: rgba(255, 0, 0, 0.7); /* خلفية حمراء شفافة */
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10;
            font-size: 14px;
            transition: all 0.2s ease;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

            .wishlist-remove-btn:hover {
                background-color: red;
                transform: scale(1.1);
            }
        /* تصغير الصورة داخل الويش ليست */
        .wishlist-grid .product-image-wrapper {
            height: 100px !important; /* ارتفاع أصغر للصورة */
        }

        /* تصغير الخطوط داخل الويش ليست */
        .wishlist-grid h3 {
            font-size: 13px !important;
            min-height: 35px !important;
            margin: 5px 0 !important;
        }

        .wishlist-grid .product-price {
            font-size: 14px !important;
            margin-bottom: 5px !important;
        }

        /* تنسيق زر الإضافة للسلة ليكون صغيراً */
        .wishlist-grid .buy-btn {
            font-size: 12px !important;
            padding: 5px 10px !important;
            width: 100% !important;
        }
        /* تنسيق زر الويش ليست في صفحة المنتج الكبيرة */
        .big-wishlist-btn {
            position: absolute;
            top: 20px;
            left: 20px; /* يظهر على اليسار (مناسب للـ RTL) */
            z-index: 10;
            width: 50px;
            height: 50px;
            background-color: rgba(0, 0, 0, 0.6); /* خلفية داكنة شفافة */
            backdrop-filter: blur(5px);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

            .big-wishlist-btn i {
                font-size: 24px; /* أيقونة كبيرة */
                color: #ccc;
                transition: color 0.3s;
            }

            .big-wishlist-btn:hover {
                background-color: rgba(255, 255, 255, 0.1);
                transform: scale(1.1);
            }

            /* حالة التفعيل (لما يكون مضاف للمفضلة) */
            .big-wishlist-btn.active {
                background-color: rgba(255, 71, 87, 0.15);
                border-color: #ff4757;
                animation: heartBeat 0.5s;
            }

                .big-wishlist-btn.active i {
                    color: #ff4757; /* لون القلب الأحمر */
                    font-weight: 900; /* يخلي الأيقونة Solid */
                }

        @keyframes heartBeat {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.2);
            }

            100% {
                transform: scale(1);
            }
        }

        /* ====================================================== */
        /* ✅ توسيع حقول الإدخال في نافذة الدفع (Steam Points & Others) */
        /* ====================================================== */

        /* 1. جعل حاوية الحقل تأخذ العرض الكامل */
        #paymentModal .input-wrapper {
            max-width: 100% !important; /* إلغاء القيد القديم (كان 350px) */
            width: 100% !important; /* ملء المساحة المتاحة */
        }

            /* 2. جعل حقل الكتابة نفسه يملأ الحاوية */
            #paymentModal .input-wrapper input {
                width: 100% !important;
                flex-grow: 1; /* لضمان تمدده بجانب الأيقونات */
            }

        /* 3. إذا كان هناك مجموعات متوازية (مثل Genshin ID)، اجعلها تتمدد أيضاً */
        #form-parallel-group {
            width: 100% !important;
            max-width: 100% !important;
        }

        /* تنسيق صندوق الضمان الأمني */
        .security-guarantee-box {
            background: rgba(40, 167, 69, 0.1); /* خلفية خضراء شفافة */
            border: 1px solid #28a745; /* إطار أخضر */
            border-radius: 10px;
            padding: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            text-align: right;
        }

            .security-guarantee-box .icon-check {
                font-size: 30px;
                color: #28a745;
            }

            .security-guarantee-box h4 {
                color: #28a745; /* لون أخضر */
                margin: 0 0 5px 0;
                font-size: 16px;
                font-weight: bold;
            }

            .security-guarantee-box p {
                color: #e0e0e0;
                margin: 0;
                font-size: 13px;
                line-height: 1.4;
            }

        /* تحسينات لقائمة الخطوات */
        .offline-steps-container .step-item {
            background: rgba(27, 40, 56, 0.8); /* لون ستيم الغامق */
            border-left: 3px solid #66c0f4; /* لون ستيم الأزرق */
            margin-bottom: 12px;
            padding: 12px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .offline-steps-container .step-num {
            background-color: #66c0f4;
            color: #000;
            font-weight: bold;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .offline-steps-container p {
            margin: 0;
            color: #c7d5e0;
            font-size: 14px;
            text-align: right;
        }

        /* ========================================= */
        /* 🎁 ULTIMATE BUNDLE CARD STYLES */
        /* ========================================= */

        .ultimate-bundle-card {
            position: relative;
            width: 100%;
            max-width: 900px;
            margin: 40px auto;
            border-radius: 20px;
            background: #101010; /* لون الخلفية الداخلي */
            overflow: hidden;
            cursor: pointer;
            z-index: 1;
            transform: scale(1);
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

            .ultimate-bundle-card:hover {
                transform: scale(1.02);
            }

        /* --- 🌈 حركة حدود الـ RGB --- */
        .animated-border-box, .animated-border-box-glow {
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient( transparent, transparent, transparent, #ff00ff, /* لون 1 */
            #00ffff, /* لون 2 */
            #ffcc00, /* لون 3 */
            transparent );
            animation: rotate-border 4s linear infinite;
            z-index: -2;
        }

        .animated-border-box-glow {
            filter: blur(20px);
            opacity: 0.6;
            z-index: -3;
        }

        @keyframes rotate-border {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        /* طبقة داخلية لتغطية الوسط وإظهار الحواف فقط */
        .ultimate-bundle-card::after {
            content: '';
            position: absolute;
            inset: 3px; /* سمك الإطار الملون */
            background: linear-gradient(145deg, #1a1a2e, #16213e);
            border-radius: 18px;
            z-index: -1;
        }

        /* --- 📦 المحتوى الداخلي --- */
        /* هذا الكلاس تضعه للـ body أو للـ Section الأب */
        .page-background {
            position: relative;
            width: 100%;
            min-height: 100vh;
            /* 👇 رابط الـ GIF الخاص بك */
            background-image: url('images/P97JL4qb6z2ofr_OgOOH30QggmrvQWMhEYPrUJZaHw4.gif');
            background-size: cover; /* تغطية الشاشة بالكامل */
            background-position: center; /* توسيط الفيديو/الصورة */
            background-repeat: no-repeat;
            background-attachment: fixed; /* 💡 تثبيت الخلفية أثناء السكرول */
            background-color: #000; /* لون أسود احتياطي قبل التحميل */
        }

            /* --- طبقة التعتيم (Overlay) --- */
            /* ضرورية جداً مع الـ GIF عشان الكلام يوضح */
            .page-background::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8); /* 🌑 نسبة التعتيم 80% (عدلها لو عايز أفتح/أغمق) */
                z-index: 0; /* خلف المحتوى */
            }

            /* التأكد أن المحتوى يظهر فوق طبقة التعتيم */
            .page-background > * {
                position: relative;
                z-index: 2;
            }

        .bundle-content-wrapper {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 30px 40px;
            position: relative;
            z-index: 2;
        }

        /* القسم الأيمن (النصوص) */
        .bundle-left {
            flex: 1;
            text-align: right;
        }

        .special-badge {
            display: inline-block;
            background: linear-gradient(90deg, #ff0055, #ff5500);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            margin-bottom: 10px;
            box-shadow: 0 0 10px rgba(255, 0, 85, 0.5);
            animation: pulse-red 2s infinite;
        }

        @keyframes pulse-red {
            0% {
                box-shadow: 0 0 0 0 rgba(255, 0, 85, 0.7);
            }

            70% {
                box-shadow: 0 0 0 10px rgba(255, 0, 85, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(255, 0, 85, 0);
            }
        }

        .bundle-title {
            font-size: 2.5rem;
            color: white;
            margin: 0 0 15px 0;
            border: none !important; /* إلغاء ستايلات العناوين القديمة */
            padding: 0 !important;
            line-height: 1.2;
        }

        .highlight-text {
            color: transparent;
            background: linear-gradient(to right, #00c6ff, #0072ff);
            -webkit-background-clip: text;
            background-clip: text;
            font-weight: 900;
        }

        .bundle-desc {
            font-size: 1.1rem;
            color: #ccc;
            line-height: 1.6;
            margin-bottom: 25px;
        }

        .number-pop {
            color: #ffcc00;
            font-size: 1.4rem;
            font-weight: bold;
        }

        .price-pop {
            color: #00ff9d;
            font-size: 1.5rem;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(0, 255, 157, 0.3);
        }

        /* الزر */
        .bundle-cta-btn {
            background: linear-gradient(45deg, #ffcc00, #ff9900);
            border: none;
            padding: 12px 35px;
            border-radius: 50px;
            font-size: 18px;
            font-weight: bold;
            color: #1a0b2e;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(255, 204, 0, 0.3);
        }

            .bundle-cta-btn:hover {
                transform: translateX(-5px);
                box-shadow: 0 8px 20px rgba(255, 204, 0, 0.5);
                background: linear-gradient(45deg, #ff9900, #ffcc00);
            }

            .bundle-cta-btn svg {
                transition: transform 0.3s ease;
            }

        .ultimate-bundle-card:hover .bundle-cta-btn svg {
            transform: translateX(-5px); /* حركة السهم لليسار (RTL) */
        }

        /* القسم الأيسر (الصورة والعناصر العائمة) */
        .bundle-right {
            flex: 0.8;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .bundle-main-image {
            /* 👇 هنا التغيير: كانت 200px، خليناها 280px (أو جرب 300px لو عايزها أكبر) */
            width: 280px;
            height: auto;
            z-index: 2;
            filter: drop-shadow(0 0 20px rgba(0, 198, 255, 0.4));
            animation: float-img 4s ease-in-out infinite;
        }



        @keyframes float-img {
            0%, 100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-15px) rotate(3deg);
            }
        }

        /* دوائر خلفية عائمة */
        .floating-circle {
            position: absolute;
            border-radius: 50%;
            opacity: 0.4;
            z-index: 1;
        }

        .circle-1 {
            width: 150px;
            height: 150px;
            background: radial-gradient(circle, rgba(142, 106, 191, 0.5), transparent);
            top: -20px;
            right: 20px;
            animation: pulse-glow 4s infinite alternate;
        }
        /* --- ✅ تنسيقات حالة الاختيار (Selected State) --- */

        /* 1. تثبيت التكبير وإضافة توهج أخضر حول الكارد */
        .ultimate-bundle-card.selected {
            transform: scale(1.02) !important; /* تثبيت التكبير */
            box-shadow: 0 0 30px rgba(0, 255, 157, 0.3); /* توهج أخضر بدل الظل الأسود */
        }

            /* 2. تصميم دائرة علامة الصح */
            .ultimate-bundle-card.selected::before {
                content: '✔';
                position: absolute;
                top: 20px;
                left: 20px; /* مكان العلامة (يسار علوي) */
                width: 40px;
                height: 40px;
                background: #00ff9d; /* نفس لون السعر الأخضر */
                color: #101010; /* لون العلامة غامق */
                border-radius: 50%;
                display: flex;
                justify-content: center;
                align-items: center;
                font-size: 22px;
                font-weight: 900;
                z-index: 10; /* لتظهر فوق كل العناصر */
                box-shadow: 0 5px 15px rgba(0, 255, 157, 0.4);
                animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            }

        /* 3. حركة ظهور العلامة (Pop Effect) */
        @keyframes popIn {
            0% {
                transform: scale(0) rotate(-45deg);
                opacity: 0;
            }

            100% {
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }
        }

        /* 4. تغيير لون الحدود الداخلية إلى الأخضر عند الاختيار */
        .ultimate-bundle-card.selected::after {
            background: linear-gradient(145deg, #102a20, #0a1f18); /* خلفية خضراء غامقة جداً */
            border: 2px solid #00ff9d; /* إطار أخضر صريح */
        }

        .circle-2 {
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, rgba(0, 255, 255, 0.4), transparent);
            bottom: -10px;
            left: 10px;
            animation: pulse-glow 3s infinite alternate-reverse;
        }

        /* --- 📱 تحسينات الموبايل --- */
        @media (max-width: 768px) {
            .bundle-content-wrapper {
                flex-direction: column-reverse; /* الصورة فوق والنص تحت */
                text-align: center;
                padding: 20px;
            }

            .bundle-left {
                text-align: center;
                margin-top: 20px;
            }

            .bundle-title {
                font-size: 1.8rem;
            }

            .bundle-main-image {
                width: 150px;
            }

            .ultimate-bundle-card::after {
                inset: 2px; /* تصغير سمك الإطار في الموبايل */
            }
        }

        /* ========================================= */
        /* 🛍️ REWARD SHOP STYLES */
        /* ========================================= */

        .shop-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .shop-balance {
            font-size: 1.2rem;
            font-weight: bold;
            background: rgba(0,0,0,0.3);
            padding: 8px 15px;
            border-radius: 20px;
            border: 1px solid var(--accent-yellow);
        }

        .shop-grid {
            display: flex; /* استخدام Flexbox للتوسيط */
            flex-wrap: wrap; /* السماح بنزول الكروت للسطر التالي */
            justify-content: center; /* ✅ هذا الأمر هو المسؤول عن توسيط الكروت في الصفحة */
            gap: 25px; /* مسافة بين الكروت */
            padding: 10px;
            width: 100%; /* ضمان أخذ العرض الكامل */
        }

        .reward-card {
            background: linear-gradient(145deg, #1a1a2e, #16213e);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            overflow: hidden;
            position: relative;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            display: flex;
            flex-direction: column;
            /* ✅ الإضافات الجديدة لضبط الحجم عند التوسيط */
            width: 100%;
            max-width: 260px; /* أقصى عرض للكارت عشان ميكبرش زيادة عن اللزوم */
            min-width: 220px; /* أقل عرض عشان ميبقاش رفيع أوي في الموبايل */
            flex-grow: 1; /* يسمح بتمدد بسيط لملء الفراغات بشكل متناسق */
        }

            .reward-card:hover {
                transform: translateY(-5px);
                border-color: var(--accent-yellow);
                box-shadow: 0 0 15px rgba(255, 204, 0, 0.2);
            }

        .reward-image-box {
            height: 120px;
            background: rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px;
        }

            .reward-image-box img {
                max-height: 90px;
                filter: drop-shadow(0 0 10px rgba(255,255,255,0.2));
                transition: transform 0.3s;
            }

        .reward-card:hover .reward-image-box img {
            transform: scale(1.1) rotate(5deg);
        }

        .reward-info {
            padding: 15px;
            text-align: center;
        }

            .reward-info h3 {
                font-size: 1.1rem;
                margin: 0 0 5px 0;
                color: white;
                border: none;
            }

            .reward-info p {
                font-size: 0.85rem;
                color: #aaa;
                margin-bottom: 15px;
                min-height: 40px; /* لتوحيد الارتفاع */
            }

        .reward-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            background: rgba(0,0,0,0.2);
            padding: 5px 10px;
            border-radius: 8px;
        }

        .price-tag {
            color: var(--accent-yellow);
            font-weight: bold;
        }

        .rank-req {
            font-size: 0.75rem;
            color: #8e6abf;
            border: 1px solid #8e6abf;
            padding: 2px 6px;
            border-radius: 4px;
        }

        .buy-reward-btn {
            position: relative;
            width: 100%;
            padding: 12px;
            /* تدرج لوني ذهبي هادئ وفخم */
            background: linear-gradient(to bottom, #ffcc00, #ffaa00);
            /* لون النص داكن لتباين ممتاز */
            color: #1a0b2e;
            font-weight: 900;
            font-size: 16px;
            border: none;
            border-radius: 12px; /* حواف ناعمة */
            cursor: pointer;
            overflow: hidden; /* عشان اللمعة متخرجش بره */
            transition: all 0.2s ease;
            /* ✅ السر هنا: ظل صلب (Solid) يعطي شكل مجسم 3D بدلاً من الجلو */
            box-shadow: 0 5px 0 #b37700;
            margin-top: auto; /* لضمان بقاء الزر في الأسفل */
        }

            .buy-reward-btn::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(to right, transparent, rgba(255, 255, 255, 0.4), transparent);
                transform: skewX(-20deg);
                transition: 0.5s;
            }

            .buy-reward-btn:hover::before {
                left: 150%; /* تحريك اللمعة من اليسار لليمين */
            }

            /* 2. تأثير الهوفر (يرتفع قليلاً) */
            .buy-reward-btn:hover {
                transform: translateY(-2px);
                background: linear-gradient(to bottom, #ffd700, #ffbb00); /* تفتيح اللون قليلاً */
                box-shadow: 0 7px 0 #b37700; /* الظل يطول ليعطي إحساس الارتفاع */
            }

            /* 3. تأثير الضغط (ينضغط للأسفل) */
            .buy-reward-btn:active {
                transform: translateY(5px); /* ينزل لمستوى الظل */
                box-shadow: 0 0 0 #b37700; /* الظل يختفي كأنه انضغط */
                background: #ff9900;
            }

            .buy-reward-btn:hover {
                background: linear-gradient(45deg, var(--accent-yellow), #ff9900);
                color: black;
                box-shadow: 0 0 10px rgba(255, 204, 0, 0.5);
            }

        /* صندوق الكود في النافذة المنبثقة */
        .code-box {
            background: #000;
            border: 2px dashed var(--accent-yellow);
            color: var(--accent-yellow);
            font-family: monospace;
            font-size: 1.5rem;
            padding: 10px;
            margin: 15px 0;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.2s;
        }

            .code-box:active {
                transform: scale(0.98);
                background: #111;
            }

        /* ========================================= */
        /* 🎮 GAMIFICATION V2.0 STYLES */
        /* ========================================= */

        /* الحاوية الرئيسية للوحة التحكم */
        .gamification-dashboard {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 20px;
            margin: 20px 0;
            backdrop-filter: blur(10px);
        }

        /* كارت الرتبة */
        .rank-display-card {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .rank-icon-large {
            font-size: 3rem;
            filter: drop-shadow(0 0 15px rgba(255,255,255,0.2));
            animation: floatRank 3s ease-in-out infinite;
        }

        @keyframes floatRank {
            0%, 100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-5px);
            }
        }

        .rank-info h3 {
            margin: 0;
            font-size: 1.8rem;
            font-weight: 900;
            letter-spacing: 2px;
            /* التوهج يتم تطبيقه بالجافاسكريبت حسب اللون */
        }

        /* شريط التقدم */
        .rank-progress-container {
            margin-bottom: 25px;
        }

        .progress-bar-track {
            width: 100%;
            height: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            overflow: hidden;
            position: relative;
        }

        .progress-bar-fill {
            height: 100%;
            width: 0%; /* يتغير بالجافاسكريبت */
            background: linear-gradient(90deg, #00c0ff, #00ff00);
            border-radius: 20px;
            transition: width 1.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }

            /* لمعة متحركة داخل الشريط */
            .progress-bar-fill::after {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                bottom: 0;
                right: 0;
                background: linear-gradient(90deg, transparent, rgba(255,255,255,0.5), transparent);
                transform: translateX(-100%);
                animation: shimmer 2s infinite;
            }

        /* صف الإحصائيات */
        .stats-row {
            display: flex;
            justify-content: space-around;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 15px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-label {
            display: block;
            font-size: 0.9rem;
            color: #aaa;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 1.4rem;
            font-weight: bold;
            color: white;
        }

        /* بادج الناف بار */
        .nav-rank-badge {
            font-size: 10px;
            padding: 2px 8px;
            border-radius: 10px;
            margin-left: 5px;
            font-weight: bold;
            vertical-align: middle;
            transition: all 0.3s ease;
        }

        /* ========================================= */
        /* 📦 تصميم كارت الباندل (Purple Glass Style) */
        /* ========================================= */

        #home-bundle-promo {
            /* الخلفية والتأثيرات الزجاجية */
            background: linear-gradient(135deg, rgba(44, 26, 64, 0.7), rgba(13, 6, 28, 0.85));
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(142, 106, 191, 0.5);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5), inset 0 0 20px rgba(142, 106, 191, 0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
            /* --- جعل الكارت أعرض وأقصر --- */
            padding: 5px 40px; /* 5px فقط من فوق وتحت (أقصر) و 40px من اليمين واليسار (أعرض) */
            margin: 15px auto;
            max-width: 950px; /* زيادة العرض ليكون ممتداً على الشاشة */
            min-height: 50px; /* ضمان أن الارتفاع يظل نحيفاً */
            border-radius: 10px; /* حواف بسيطة تتناسب مع الشكل العريض */

            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

            /* تأثير الهوفر */
            #home-bundle-promo:hover {
                transform: scale(1.01); /* اكتفينا بالتكبير البسيط بدون الرفع للأعلى ليناسب الشكل العريض */
                border-color: #cda1ff;
                box-shadow: 0 5px 20px rgba(142, 106, 191, 0.3);
            }

        /* النصوص */
        .promo-content {
            z-index: 2;
            flex: 1;
            text-align: right;
        }

        .promo-badge {
            /* بادج بنفسجي متوهج */
            background: linear-gradient(45deg, #8e6abf, #6a4f8a);
            color: #fff;
            font-weight: bold;
            padding: 6px 15px;
            border-radius: 20px;
            display: inline-block;
            font-size: 12px;
            margin-bottom: 15px;
            box-shadow: 0 0 15px rgba(142, 106, 191, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        #home-bundle-promo h2 {
            color: #fff;
            font-size: 2.2rem !important;
            margin: 5px 0 10px 0 !important;
            border: none !important;
            padding: 0 !important;
            /* ظل نصي بنفسجي خفيف */
            text-shadow: 0 0 20px rgba(142, 106, 191, 0.6);
        }

        #home-bundle-promo p {
            color: #e0e0e0; /* لون رمادي فاتح جداً للقراءة */
            font-size: 1.1rem;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .price-highlight {
            color: #cda1ff; /* بنفسجي فاتح جداً للسعر */
            font-weight: bold;
            font-size: 1.4rem;
            text-shadow: 0 0 10px rgba(205, 161, 255, 0.5);
        }

        /* الزر الداخلي */
        .promo-btn {
            background: rgba(255, 255, 255, 0.05);
            color: #fff;
            border: 1px solid #cda1ff;
            padding: 12px 30px;
            border-radius: 50px;
            font-weight: bold;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
        }

        #home-bundle-promo:hover .promo-btn {
            background: #cda1ff;
            color: #1a0b2e; /* نص داكن على خلفية فاتحة */
            box-shadow: 0 0 25px rgba(205, 161, 255, 0.6);
        }

        /* الصورة (تطفو وتتحرك) */
        .promo-image img {
            width: 180px;
            height: auto;
            /* ظل بنفسجي للصورة */
            filter: drop-shadow(0 0 20px rgba(142, 106, 191, 0.4));
            animation: floatImage 4s ease-in-out infinite;
            transition: transform 0.3s;
        }

        #home-bundle-promo:hover .promo-image img {
            transform: scale(1.1) rotate(5deg);
            filter: drop-shadow(0 0 30px rgba(142, 106, 191, 0.6));
        }

        @keyframes floatImage {
            0%, 100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-15px);
            }
        }

        /* تأثير شعاع الضوء في الخلفية */
        .glow-effect {
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(142, 106, 191, 0.15) 0%, transparent 60%);
            z-index: 0;
            pointer-events: none;
            animation: rotateGlow 10s linear infinite;
        }

        @keyframes rotateGlow {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }

        /* 📱 تحسينات للموبايل */
        @media (max-width: 768px) {
            #home-bundle-promo {
                flex-direction: column-reverse;
                text-align: center;
                padding: 25px;
            }

            .promo-content {
                text-align: center;
                width: 100%;
            }

            .promo-image img {
                width: 150px;
                margin-bottom: 20px;
            }

            #home-bundle-promo h2 {
                font-size: 1.8rem !important;
            }

            .promo-btn {
                width: 100%;
            }
        }

        @keyframes floatImage {
            0%, 100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        /* تأثير الخط المتحرك في الخلفية (Scanner Effect) */
        .glow-effect {
            position: absolute;
            top: 0;
            left: -100%;
            width: 50%;
            height: 100%;
            background: linear-gradient(to right, transparent, rgba(0, 255, 0, 0.1), transparent);
            transform: skewX(-25deg);
            transition: 0.5s;
            pointer-events: none;
        }

        #home-bundle-promo:hover .glow-effect {
            animation: scanEffect 1s linear infinite;
        }

        @keyframes scanEffect {
            0% {
                left: -100%;
            }

            100% {
                left: 200%;
            }
        }

        /* 📱 تحسينات للموبايل */
        @media (max-width: 768px) {
            #home-bundle-promo {
                flex-direction: column-reverse; /* الصورة فوق والنص تحت */
                text-align: center;
                padding: 20px;
            }

            .promo-content {
                text-align: center;
                width: 100%;
            }

            .promo-image img {
                width: 140px;
                margin-bottom: 20px;
            }

            #home-bundle-promo h2 {
                font-size: 1.5rem !important;
            }

            .promo-btn {
                width: 100%;
            }
        }
        /* ========================================= */
        /* 📦 تصميم قسم "اصنع الباندل" الجديد (Neon Tech) */
        /* ========================================= */

        #build-bundle-section {
            position: relative; /* ضروري عشان الطبقة السوداء تثبت عليه */
            background-image: url('images/ac-shadows-background.jpg ');
            background-size: cover; /* يملأ القسم بالكامل */
            background-position: center; /* يسنتر الفيديو */
            background-repeat: no-repeat;
            overflow: hidden; /* عشان زوايا الـ border-radius تفضل مضبوطة */
            /* إلغاء أي لون خلفية سابق من كلاس glass-card عشان الـ GIF يظهر */
            background-color: transparent !important;
            border: 1px solid rgba(255, 255, 255, 0.1); /* حدود خفيفة */
        }

            /* 2. طبقة التعتيم السوداء (Overlay) */
            #build-bundle-section::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.85); /* 🌑 نسبة التعتيم 85% (عدلها لو حابب) */
                z-index: 1; /* تكون فوق الخلفية مباشرة */
            }

            /* 3. رفع المحتوى (النصوص والأزرار) فوق الطبقة السوداء */
            #build-bundle-section > * {
                position: relative;
                z-index: 2; /* تكون فوق طبقة التعتيم */
            }

        /* 🎮 تصميم كروت الألعاب داخل الباندل */
        #bundle-games-grid .product-item {
            background: rgba(255, 255, 255, 0.03) !important;
            border: 1px solid rgba(255, 255, 255, 0.1) !important;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            position: relative;
            z-index: 1;
        }

            /* عند مرور الماوس (Hover) */
            #bundle-games-grid .product-item:hover {
                transform: translateY(-5px);
                border-color: #00ff00 !important;
                box-shadow: 0 0 15px rgba(0, 255, 0, 0.3) !important;
            }

        /* ✅ عند اختيار اللعبة (Selected) */
        .product-item.selected-in-bundle {
            border: 2px solid #00ff00 !important;
            background: rgba(0, 255, 0, 0.05) !important;
            box-shadow: 0 0 25px rgba(0, 255, 0, 0.5), inset 0 0 15px rgba(0, 255, 0, 0.2) !important;
            transform: scale(1.02);
        }

            /* علامة الصح الخضراء */
            .product-item.selected-in-bundle::after {
                content: '✔';
                position: absolute;
                top: -10px;
                right: -10px;
                background: #00ff00;
                color: #000;
                width: 30px;
                height: 30px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                font-weight: bold;
                font-size: 16px;
                box-shadow: 0 0 10px rgba(0, 255, 0, 0.8);
                z-index: 10;
                animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            }

        @keyframes popIn {
            0% {
                transform: scale(0);
            }

            100% {
                transform: scale(1);
            }
        }

        /* 📊 الشريط السفلي العائم (HUD Style) */
        #bundle-floating-bar {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            max-width: 700px;
            /* تصميم زجاجي داكن */
            background: rgba(10, 10, 15, 0.9);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-bottom: 4px solid #00ff00; /* خط نيون سفلي */
            border-radius: 16px;
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.8);
            z-index: 9999;
            transition: transform 0.3s ease;
        }

        /* عداد الألعاب */
        .bundle-status {
            font-size: 1.1rem;
            color: #fff;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        #bundle-counter {
            background: #00ff00;
            color: #000;
            padding: 2px 10px;
            border-radius: 12px;
            font-weight: bold;
            font-size: 1.2rem;
        }

        /* السعر */
        .bundle-price {
            font-size: 1.2rem;
            font-weight: bold;
            color: #ddd;
            text-shadow: 0 2px 5px rgba(0,0,0,0.5);
        }

        /* زر الإضافة للسلة (Disabled) */
        #add-bundle-btn:disabled {
            background: #333 !important;
            color: #777 !important;
            border: 1px solid #444 !important;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }

        /* زر الإضافة للسلة (Active) */
        #add-bundle-btn:not(:disabled) {
            background: #00ff00 !important;
            color: #000 !important;
            border: none !important;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.6) !important;
            animation: pulse-green 2s infinite;
        }

        @keyframes pulse-green {
            0% {
                box-shadow: 0 0 0 0 rgba(0, 255, 0, 0.7);
            }

            70% {
                box-shadow: 0 0 0 10px rgba(0, 255, 0, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(0, 255, 0, 0);
            }
        }

        /* 📱 تحسينات الموبايل */
        @media (max-width: 768px) {
            #bundle-floating-bar {
                bottom: 80px; /* رفع الشريط فوق ناف بار الموبايل */
                flex-direction: column;
                gap: 15px;
                padding: 15px;
                border-radius: 15px;
                width: 85%;
            }

            .bundle-status, .bundle-price {
                width: 100%;
                justify-content: space-between;
                display: flex;
            }

            #add-bundle-btn {
                width: 100%;
                padding: 12px !important;
            }
        }

        /* ✅ طريقة الإخفاء الصحيحة (Zero Size) لمنع مشاكل العرض */
        #google_translate_element {
            position: absolute;
            top: 0;
            left: 0;
            width: 0px; /* العرض صفر */
            height: 0px; /* الطول صفر */
            overflow: hidden; /* إخفاء المحتوى الداخلي */
            visibility: hidden; /* غير مرئي */
            z-index: -1; /* خلف المحتوى */
            opacity: 0;
        }

        /* إخفاء شريط جوجل العلوي تماماً */
        .goog-te-banner-frame.skiptranslate {
            display: none !important;
        }

        /* منع جوجل من إزاحة الموقع للأسفل */
        body {
            top: 0px !important;
            position: static !important;
        }

        /* إخفاء التلميحات المزعجة */
        .goog-tooltip,
        .goog-tooltip:hover {
            display: none !important;
        }

        .goog-text-highlight {
            background-color: transparent !important;
            box-shadow: none !important;
        }

        .info-tooltip-container {
            position: relative;
            /* 🛑 التعديل الرئيسي: إجبار العنصر على التوسيط العمودي في Flexbox (داخل input-wrapper) */
            align-self: center;
            /* إزالة خاصية order و margin-right التي كانت تسبب الإزاحة غير المرغوبة */
            order: unset; /* الاعتماد على الترتيب في كود HTML */
            margin-right: 0; /* إزالة الهامش المربك */
        }

        .tooltip-trigger {
            color: #00c0ff; /* لون أيقونة السؤال */
            font-size: 16px;
            cursor: pointer;
            transition: color 0.2s ease;
        }

            .tooltip-trigger:hover {
                color: #fff;
            }

        .tooltip-content {
            /* 1. الإخفاء الافتراضي */
            visibility: hidden;
            opacity: 0;
            /* 2. التموضع: وضعها بشكل مطلق */
            position: absolute;
            top: 50%;
            /* 🛑 الموقع: لضمان الظهور على يسار خانة الإدخال (RTL) */
            /* 100% يعني أن الحافة اليسرى للتلميح تبدأ عند الحافة اليسرى للعنصر الأب (info-tooltip-container) */
            right: 100%;
            /* 3. تنسيق النافذة */
            width: 250px;
            background: linear-gradient(145deg, #1f1133, #0d061c);
            border: 1px solid var(--main-purple);
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
            /* 4. إعدادات النص */
            color: var(--light-text);
            font-size: 12px;
            text-align: right;
            line-height: 1.5;
            /* 5. الحركة والانتقال: يبدأ بعيداً عن اليسار بمقدار 10px (في RTL) */
            transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease-out;
            transform: translateY(-50%) translateX(10px);
            z-index: 2005; /* لضمان ظهوره فوق كل شيء */
            /* 💡 إضافة: لضمان عدم تداخل التلميح مع الأيقونة */
            margin-right: 10px;
        }

            .tooltip-content h4 {
                color: var(--accent-yellow);
                font-size: 14px;
                margin-top: 0;
                margin-bottom: 10px;
                border-bottom: 1px solid rgba(255, 204, 0, 0.2);
                padding-bottom: 5px;
            }

        /* 🖱️ كود إظهار النافذة عند المرور بالماوس */
        .info-tooltip-container:hover .tooltip-content {
            visibility: visible;
            opacity: 1;
            /* 🛑 إظهار النافذة في مكانها النهائي (سحبها لليسار) */
            transform: translateY(-50%) translateX(0);
        }
        /* ========================================= */
        /* 🔒 تنسيق مؤشر الأمان (Security Note) */
        /* ========================================= */
        .security-note-wrapper {
            display: flex;
            align-items: center;
            justify-content: center; /* لتوسيط النص في النموذج */
            margin: -10px auto 15px auto; /* لرفعه قليلاً فوق الحقل التالي */
            max-width: 350px;
        }

            .security-note-wrapper .security-text {
                font-size: 12px;
                font-weight: 500;
                color: #90ee90; /* أخضر فاتح */
                opacity: 0.9;
            }

        /* ========================================= */
        /* 💡 تنسيق نافذة التلميح (Tooltip Styles) */
        /* ========================================= */



        /* ====================================================== */
        /* 🎨 UPGRADE 1: إعداد الخلفية الزجاجية والـ Parallax */
        /* ====================================================== */

        /* 1. تعريف متغير للخلفية الجديدة (المسار الذي ستضعه) */
        :root {
            /* 🛑🛑 قم بتغيير مسار الصورة هنا إلى مسار خلفيتك الجديدة 🛑🛑 */
            --loot-bg-image: url('./images/P97JL4qb6z2ofr_OgOOH30QggmrvQWMhEYPrUJZaHw4.gif');
        }


        /* 2. تنسيق العنصر الأساسي (النص) */
        #game-topup-section h2 {
            position: relative; /* ضروري عشان الوهج يكون بالنسبة للكلمة */
            display: inline-block; /* مهم جداً: عشان الوهج يكون على قد الكلمة مش بعرض الشاشة */
            z-index: 1; /* عشان النص يظهر فوق الوهج */
            color: #ffffff; /* لون النص أبيض */
            text-shadow: 0 2px 4px rgba(0,0,0,0.5); /* ظل خفيف للنص للقراءة */
        }

            /* 3. طبقة الوهج الخلفية (الـ RGB) */
            #game-topup-section h2::before {
                content: '';
                position: absolute;
                z-index: -1; /* وضع الوهج خلف النص */
                /* الأبعاد: أكبر قليلاً من النص ليمتد الوهج للخارج */
                top: -15px;
                left: -15px;
                right: -15px;
                bottom: -15px;
                /* تدرج ألوان الـ RGB */
                background: linear-gradient( 45deg, #ff0000, #ff7300, #fffb00, #48ff00, #00ffd5, #002bff, #7a00ff, #ff00c8, #ff0000 );
                background-size: 400%; /* تكبير الخلفية لعمل حركة انسيابية */
                border-radius: 50px; /* حواف دائرية ناعمة للوهج */
                filter: blur(25px); /* أهم سطر: التغبيش اللي بيعمل شكل الضوء */
                opacity: 0.7; /* شفافية عشان ميكونش فاقع زيادة */
                /* تشغيل الحركة */
                animation: rgb-title-glow 20s linear infinite;
            }
        /* تنسيق صورة البروفايل داخل القائمة المنسدلة */
        .dropdown-profile-pic {
            width: 70px; /* حجم الصورة */
            height: 70px;
            border-radius: 50%; /* دائرية */
            object-fit: cover;
            border: 3px solid var(--accent-yellow); /* إطار أصفر */
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
            transition: all 0.3s ease;
        }

            /* تأثير عند مرور الماوس */
            .dropdown-profile-pic:hover {
                transform: scale(1.1); /* تكبير بسيط */
                box-shadow: 0 0 20px var(--accent-yellow); /* توهج */
                border-color: #fff;
            }
        /* ========================================= */
        /* 🎮 NEW GAMING DASHBOARD STYLE */
        /* ========================================= */

        /* حاوية لوحة التحكم */
        .dashboard-container {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 20px;
            margin-top: 20px;
            position: relative;
            overflow: hidden;
        }

        /* 📊 1. تصميم شريط الرانك (المطور) */
        .rank-section {
            margin-bottom: 25px;
            position: relative;
            z-index: 2;
        }

        .rank-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin-bottom: 10px;
        }

        .current-rank-badge {
            font-size: 14px;
            font-weight: 900;
            color: #fff;
            text-transform: uppercase;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .next-rank-info {
            font-size: 11px;
            color: #aaa;
            background: rgba(0,0,0,0.3);
            padding: 4px 10px;
            border-radius: 20px;
        }

        .progress-track {
            width: 100%;
            height: 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ffcc00, #ff9900);
            border-radius: 10px;
            width: 0%;
            position: relative;
            box-shadow: 0 0 15px rgba(255, 204, 0, 0.4);
            transition: width 1.5s cubic-bezier(0.22, 1, 0.36, 1);
        }

            /* لمعة متحركة داخل الشريط */
            .progress-fill::after {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                bottom: 0;
                right: 0;
                background: linear-gradient( 90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.4) 50%, rgba(255,255,255,0) 100% );
                transform: translateX(-100%);
                animation: shimmer 2s infinite;
            }

        @keyframes shimmer {
            100% {
                transform: translateX(100%);
            }
        }

        /* 🔢 2. شبكة الإحصائيات (Modern Stats) */
        .stats-grid-modern {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .stat-box-modern {
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.03), rgba(255, 255, 255, 0.01));
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 15px;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            overflow: hidden;
        }

            .stat-box-modern:hover {
                background: rgba(255, 255, 255, 0.07);
                transform: translateY(-2px);
                border-color: rgba(255, 204, 0, 0.3);
            }

        /* الأيقونة الخلفية الكبيرة */
        .stat-bg-icon {
            position: absolute;
            right: -10px;
            bottom: -10px;
            font-size: 60px;
            opacity: 0.05;
            color: #fff;
            transform: rotate(-15deg);
            pointer-events: none;
        }

        .stat-value {
            font-size: 24px;
            font-weight: 900;
            color: #fff;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 12px;
            color: #bbb;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* لون مميز للأرقام */
        .stat-value.gold {
            color: var(--accent-yellow);
            text-shadow: 0 0 10px rgba(255, 204, 0, 0.4);
        }

        .stat-value.blue {
            color: #00e5ff;
            text-shadow: 0 0 10px rgba(0, 229, 255, 0.4);
        }

        /* خط فاصل عمودي جميل (اختياري) */
        .dashboard-divider {
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            margin: 20px 0;
        }
        /* ========================================= */
        /* 📊 1. تصميم بطاقات الإحصائيات (Stats Grid) */
        /* ========================================= */
        .profile-stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: transform 0.3s ease;
        }

            .stat-card:hover {
                transform: translateY(-3px);
                background: rgba(255, 255, 255, 0.08);
                border-color: var(--accent-yellow);
            }

        .stat-icon-wrapper {
            width: 45px;
            height: 45px;
            border-radius: 10px;
            background: rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: var(--accent-yellow);
        }

        .stat-info h4 {
            margin: 0;
            font-size: 18px;
            color: white;
        }

        .stat-info span {
            font-size: 12px;
            color: #ccc;
        }

        /* ========================================= */
        /* 📊 2. شريط التقدم (Rank Progress Bar) */
        /* ========================================= */
        .rank-progress-wrapper {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 16px;
            margin: 25px 0;
            border: 1px solid rgba(255, 204, 0, 0.1);
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 14px;
            font-weight: bold;
        }

        .progress-bar-bg {
            width: 100%;
            height: 10px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 50px;
            overflow: hidden;
            position: relative;
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-yellow), #ff9900);
            width: 0%; /* سيتم تغييرها بالجافاسكريبت */
            border-radius: 50px;
            transition: width 1.5s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 0 10px rgba(255, 204, 0, 0.5);
        }

        /* ========================================= */
        /* 🎖️ 3. الشارات والأوسمة (Badges) */
        /* ========================================= */
        .badges-container {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 10px;
        }

        .user-badge {
            font-size: 11px;
            padding: 4px 10px;
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            gap: 5px;
            color: #eee;
            transition: all 0.3s;
        }

            .user-badge:hover {
                transform: scale(1.05);
                background: rgba(255, 255, 255, 0.2);
            }

            .user-badge.vip {
                border-color: #00e5ff;
                color: #00e5ff;
                box-shadow: 0 0 5px rgba(0, 229, 255, 0.2);
            }

            .user-badge.early {
                border-color: #ff4757;
                color: #ff4757;
            }

            .user-badge.verified {
                border-color: var(--accent-yellow);
                color: var(--accent-yellow);
            }
        /* تصميم زر التعديل في الزاوية */
        .edit-profile-trigger-corner {
            position: absolute;
            top: 25px; /* المسافة من الأعلى */
            left: 25px; /* المسافة من اليسار (لأن الموقع عربي RTL) */
            width: 45px; /* ✅ تكبير العرض */
            height: 45px; /* ✅ تكبير الطول */
            background: rgba(255, 204, 0, 0.15);
            border: 2px solid var(--accent-yellow);
            color: var(--accent-yellow);
            border-radius: 50%; /* شكل دائري */
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 20px; /* ✅ تكبير الأيقونة */
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 10;
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
        }

            .edit-profile-trigger-corner:hover {
                background: var(--accent-yellow);
                color: #000;
                transform: scale(1.15) rotate(10deg);
                box-shadow: 0 0 20px rgba(255, 204, 0, 0.6);
            }

        /* إخفاء الزر عندما نكون في وضع التعديل (اختياري، لو حابب يختفي) */
        /* #profile-edit-mode[style*="block"] ~ .edit-profile-trigger-corner {
                 display: none;
             } */
        /* ========================================= */
        /* ✅ START: تحسينات صفحة البروفايل الجديدة */
        /* ========================================= */

        /* 1. أنيميشن الظهور السلس */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* 2. تنسيق زر التعديل (أيقونة القلم) */
        .edit-profile-trigger {
            cursor: pointer;
            background: rgba(255, 204, 0, 0.1);
            border: 1px solid var(--accent-yellow);
            color: var(--accent-yellow);
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

            .edit-profile-trigger:hover {
                background: var(--accent-yellow);
                color: #000; /* يتحول للأبيض أو الأسود حسب التباين */
                transform: scale(1.15) rotate(15deg);
                box-shadow: 0 0 15px rgba(255, 204, 0, 0.4);
            }

        /* 3. تحسين صورة البروفايل عند التعديل */
        /* عندما يكون وضع التعديل مفعل، نضيف توهج للصورة */
        #profile-edit-mode .profile-avatar-large {
            border-color: #fff;
            filter: brightness(0.8); /* تغميق بسيط للتركيز على أيقونة الكاميرا */
        }

        /* 4. أيقونة الكاميرا فوق الصورة */
        #avatar-edit-trigger {
            cursor: pointer;
            background: var(--main-purple); /* أو أي لون مميز */
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: absolute;
            bottom: 0;
            right: 0;
            border: 2px solid #fff;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            transition: transform 0.2s ease;
            z-index: 10;
        }

            #avatar-edit-trigger:hover {
                transform: scale(1.1);
                background: var(--accent-yellow);
                color: black;
            }

        /* 5. تنسيق حقل الإدخال في وضع التعديل */
        #name-input-wrapper-center {
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

            #name-input-wrapper-center:focus-within {
                border-color: var(--accent-yellow) !important;
                box-shadow: 0 0 15px rgba(255, 204, 0, 0.2);
                transform: translateY(-2px);
            }

        /* 6. أزرار الحفظ والإلغاء */
        .profile-actions-container button {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

            .profile-actions-container button:active {
                transform: scale(0.95);
            }

        /* ========================================= */
        /* ✅ END: تحسينات صفحة البروفايل الجديدة */
        /* ========================================= */

        /* ====================================================== */
        /* 💎 START: ULTRA MODERN CLEAN DROPDOWN MENU 💎 */
        /* ====================================================== */

        /* 1. الحاوية الرئيسية للقائمة (خلفية داكنة زجاجية) */
        #user-dropdown-menu {
            /* خلفية داكنة متدرجة لتعطي عمقاً */
            background: linear-gradient(145deg, rgba(20, 15, 35, 0.95), rgba(10, 5, 20, 0.98)) !important;
            /* تأثير الزجاج */
            backdrop-filter: blur(20px) !important;
            -webkit-backdrop-filter: blur(20px) !important;
            /* حدود وإطار */
            border-radius: 16px !important;
            border: 1px solid rgba(255, 255, 255, 0.08) !important;
            /* ظل للعمق فقط وليس توهجاً */
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6) !important;
            padding: 10px !important;
            min-width: 250px !important;
            overflow: hidden;
            transform-origin: top center;
            animation: menuSlideDown 0.25s ease-out;
        }

        /* أنيميشن الظهور */
        @keyframes menuSlideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* 2. منطقة الرانك (الجزء العلوي) */
        #user-dropdown-menu > div:first-child {
            background: rgba(255, 255, 255, 0.03) !important;
            border-radius: 12px !important;
            margin-bottom: 10px !important;
            padding: 15px !important;
            border: 1px dashed rgba(255, 255, 255, 0.1) !important;
            text-align: center;
        }

        /* ------------------------------------------------------ */
        /* 3. تصميم الروابط (Clean White - بدون جلو) */
        /* ------------------------------------------------------ */
        #user-dropdown-menu a.nav-link {
            display: flex !important;
            align-items: center !important;
            /* ترتيب: الأيقونة يمين والنص يسار */
            flex-direction: row !important;
            justify-content: flex-start !important;
            gap: 15px !important; /* مسافة مريحة */
            /* لون النص أبيض هادئ (فضي) */
            color: #eeeeee !important;
            /* خلفية شفافة تماماً في العادي */
            background-color: transparent !important;
            padding: 12px 16px !important;
            margin-bottom: 4px !important;
            /* حواف دائرية ناعمة */
            border-radius: 12px !important;
            border: none !important;
            font-weight: 700 !important;
            font-size: 15px !important;
            /* إلغاء أي تأثيرات ظل أو توهج قديمة */
            text-shadow: none !important;
            box-shadow: none !important;
            transition: all 0.2s ease-out !important;
        }

            /* ✨ تأثير الهوفر: هنا فقط يظهر التفاعل ✨ */
            #user-dropdown-menu a.nav-link:not(.logout-btn):hover {
                /* خلفية بيضاء شفافة ناعمة */
                background-color: rgba(255, 255, 255, 0.1) !important;
                /* النص يصبح أبيض ناصع */
                color: #ffffff !important;
                /* حركة خفيفة لليسار */
                transform: translateX(-4px);
                /* ظل خفيف جداً لإبراز الزر (ليس جلو قوي) */
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2) !important;
            }

            /* ------------------------------------------------------ */
            /* 4. تصميم الأيقونات (بيضاء نقية) */
            /* ------------------------------------------------------ */

            /* أيقونات FontAwesome */
            #user-dropdown-menu a.nav-link i {
                font-size: 18px !important;
                width: 24px !important;
                text-align: center;
                margin: 0 !important;
                /* لون أبيض ناصع */
                color: #ffffff !important;
                opacity: 0.8; /* شفافية بسيطة للهدوء */
                /* إلغاء الجلو تماماً */
                text-shadow: none !important;
                filter: none !important;
                transition: transform 0.2s ease, opacity 0.2s ease;
            }

            /* حركة الأيقونة عند الهوفر */
            #user-dropdown-menu a.nav-link:not(.logout-btn):hover i {
                opacity: 1;
                transform: scale(1.1); /* تكبير بسيط */
                /* هنا فقط ممكن نضيف لمسة لمعان خفيفة جداً للأيقونة لو حابب */
                text-shadow: 0 0 5px rgba(255, 255, 255, 0.4) !important;
            }

        /* أيقونات الصور (user icons) */
        .user-dropdown-icon {
            width: 20px !important;
            height: 20px !important;
            object-fit: contain;
            margin: 0 !important;
            /* تحويل الصورة للأبيض الناصع */
            filter: brightness(0) invert(1) !important;
            opacity: 0.8;
            transition: transform 0.2s ease, opacity 0.2s ease;
        }

        #user-dropdown-menu a.nav-link:hover .user-dropdown-icon {
            opacity: 1;
            transform: scale(1.1);
        }

        /* ------------------------------------------------------ */
        /* 5. الخط الفاصل (Minimalist) */
        /* ------------------------------------------------------ */
        .dropdown-divider {
            height: 1px !important;
            background: rgba(255, 255, 255, 0.1) !important; /* خط رفيع وهادئ */
            margin: 8px 10px !important;
            border: none !important;
        }

        /* ------------------------------------------------------ */
        /* 6. زر تسجيل الخروج */
        /* ------------------------------------------------------ */
        #user-dropdown-menu a.logout-btn {
            margin-top: 10px !important;
            color: #ff5c5c !important; /* لون أحمر فاتح */
            background-color: rgba(255, 92, 92, 0.05) !important;
        }

            #user-dropdown-menu a.logout-btn:hover {
                background-color: rgba(255, 92, 92, 0.15) !important;
                color: #ff2e2e !important;
                transform: none !important;
                box-shadow: none !important;
            }

            #user-dropdown-menu a.logout-btn i {
                color: #ff5c5c !important;
                text-shadow: none !important;
            }

        /* ------------------------------------------------------ */
        /* 🎯 توسيط القائمة (Desktop Center Logic) 🎯 */
        /* ------------------------------------------------------ */
        @media (min-width: 769px) {
            #user-dropdown-menu {
                right: auto !important;
                left: 50% !important;
                transform: translateX(-50%) translateY(10px) !important; /* البداية */
                margin-top: 12px !important;
            }

                /* وضع الظهور */
                .dropdown:hover #user-dropdown-menu,
                #user-dropdown-menu[style*="visibility: visible"] {
                    transform: translateX(-50%) translateY(0) !important; /* النهاية */
                    opacity: 1 !important;
                    visibility: visible !important;
                }

                /* السهم العلوي */
                #user-dropdown-menu::before {
                    right: auto !important;
                    left: 50% !important;
                    transform: translateX(-50%) rotate(45deg) !important;
                }
        }
        /* ====================================================== */
        /* ⚡ MOBILE PERFORMANCE BOOSTER (تخفيف الموقع للموبايل) ⚡ */
        /* ====================================================== */

        @media (max-width: 768px) {

            /* 1. 🚫 إلغاء تأثير الزجاج (Blur) الثقيل جداً */
            .glass-card,
            #user-dropdown-menu,
            .modal,
            .product-item,
            .subscription-item,
            #navbar,
            .service-offer-card {
                backdrop-filter: none !important;
                -webkit-backdrop-filter: none !important;
                /* استبدال الزجاج بلون داكن مصمت وخفيف */
                background: #151020 !important;
                border: 1px solid rgba(255,255,255,0.1) !important;
            }

            /* 2. 🚫 إلغاء تثبيت الخلفيات (يسبب تقطيع في السكرول) */
            body,
            .section,
            #playstation-section,
            #xbox-gifting-section,
            #designs,
            #steam-gift-cards-section {
                background-attachment: scroll !important;
                background-position: center top !important;
            }

            /* 3. 🚫 إيقاف الأنيميشن المستمر (توفير البطارية) */
            .fire-particles-container,
            .product-image-wrapper::before,
            .main-image-placeholder::before,
            #valorant-boosting::before {
                animation: none !important;
                display: none !important; /* إخفاء العناصر الجمالية الزائدة */
            }

            /* 4. ⚡ تبسيط الظلال (Glow) لتكون خفيفة */
            .product-item,
            .subscription-item,
            .service-offer-card {
                box-shadow: 0 2px 5px rgba(0,0,0,0.3) !important; /* ظل بسيط جداً */
                transition: none !important; /* إلغاء حركات الترانزيشن الثقيلة */
            }

                /* إلغاء تأثير الهوفر (لأن الموبايل مفيهوش ماوس) */
                .product-item:hover,
                .subscription-item:hover {
                    transform: none !important;
                    box-shadow: 0 2px 5px rgba(0,0,0,0.3) !important;
                    border-color: rgba(255, 255, 255, 0.1) !important;
                }

            /* 5. ⚡ تحسين القائمة المنسدلة للموبايل */
            #user-dropdown-menu {
                background: #1a1525 !important; /* لون ثابت */
                box-shadow: 0 10px 30px rgba(0,0,0,0.8) !important;
            }

            /* 6. تقليل حجم الصور الثقيلة */
            .product-image-wrapper img,
            .service-card-image {
                will-change: transform; /* تحسين الأداء */
            }
        }
        /* ====================================================== */
        /* 📱 MOBILE VIEW: "Out of Layer" Style with Outlines 📱 */
        /* ====================================================== */

        @media (max-width: 768px) {

            /* 1. تفريغ جميع حاويات الأقسام من الخلفيات والحدود */
            .section,
            .glass-card,
            .main-products-section,
            #games-section,
            #subscriptions-section,
            #game-topup-section,
            #software-keys-section,
            #steam-gift-cards-section,
            #steam-points-section,
            #discord-decorations-section,
            #game-rentals-section,
            #xbox-gifting-section,
            #designs,
            #developing,
            #playstation-section,
            #marvelRivals,
            #fortnite,
            #roblox,
            #rocketleague {
                background: transparent !important;
                background-image: none !important;
                background-color: transparent !important;
                border: none !important;
                box-shadow: none !important;
                backdrop-filter: none !important;
                -webkit-backdrop-filter: none !important;
                padding: 0 !important;
                margin: 20px 0 !important;
                border-radius: 0 !important;
                animation: none !important;
            }

                /* 2. إخفاء العناصر الوهمية (الخلفيات المضببة وتأثيرات RGB) */
                .section::before, .section::after,
                .glass-card::before, .glass-card::after,
                .main-products-section::before, .main-products-section::after,
                #games-section::before, #games-section::after,
                #subscriptions-section::before,
                #game-topup-section::before,
                #software-keys-section::before,
                #steam-gift-cards-section::before,
                #steam-points-section::before,
                #discord-decorations-section::before,
                #game-rentals-section::before,
                #xbox-gifting-section::before,
                #designs::before,
                #developing::before,
                #playstation-section::before,
                #marvelRivals::before,
                #fortnite::before,
                #roblox::before,
                #rocketleague::before {
                    display: none !important;
                    content: none !important;
                    background: none !important;
                    animation: none !important;
                }

                /* 3. تحسين عناوين الأقسام */
                h2, .main-products-section h2, #games-section h2 {
                    text-align: right !important;
                    margin-right: 15px !important;
                    margin-bottom: 15px !important;
                    font-size: 1.4rem !important;
                    color: var(--white-text) !important;
                    text-shadow: 0 2px 5px rgba(0,0,0,0.8) !important;
                    border-right: 4px solid var(--accent-yellow) !important;
                    padding-right: 10px !important;
                    display: inline-block !important;
                }

            /* 4. تنسيق عام لحاويات المنتجات (الشبكة) */
            .products-container,
            #softwareKeysContainer,
            #xboxGiftCardsContainer,
            #xboxPopularGamesContainer,
            #homeTvSubscriptionsContainer,
            #homeSoftwareSubscriptionsContainer {
                width: 100% !important;
                padding: 0 10px !important;
                box-sizing: border-box !important;
                display: grid !important;
                grid-template-columns: 1fr 1fr !important; /* عمودين متساويين */
                gap: 10px !important;
                overflow: visible !important;
            }

            /* 5. تنسيق موحد لجميع الكروت (إطار + خلفية داكنة) */
            .product-item,
            .subscription-item,
            .rental-card,
            .service-offer-card,
            .custom-order-card,
            .software-card-unique,
            .gaming-key-card {
                width: 100% !important;
                min-width: 0 !important;
                margin: 0 !important;
                /* ✅ خلفية داكنة للكارت نفسه */
                background: linear-gradient(145deg, #150a25, #08050e) !important;
                /* ✅ الإطار (Outline) المطلوب */
                border: 1px solid rgba(142, 106, 191, 0.5) !important; /* إطار بنفسجي خفيف */
                /* ظل خفيف للفصل */
                box-shadow: 0 4px 10px rgba(0,0,0,0.4) !important;
                border-radius: 12px !important;
                display: flex !important;
                flex-direction: column !important;
                align-items: center !important;
                justify-content: space-between !important;
                padding: 10px !important;
            }

            /* 6. تحسينات خاصة لبطاقات الاشتراكات لتظهر بجانب بعضها */
            .subscription-item {
                min-height: 220px !important; /* تقليل الارتفاع */
            }

                .subscription-item .product-image-wrapper,
                .subscription-item .sub-image-wrapper {
                    height: 90px !important; /* تصغير الصورة */
                    width: 100% !important;
                }

                .subscription-item img {
                    object-fit: cover !important;
                }

                .subscription-item h3 {
                    font-size: 13px !important; /* تصغير العنوان */
                    min-height: 30px !important;
                    margin: 5px 0 !important;
                }

                .subscription-item .sub-description,
                .subscription-item .product-description-text {
                    display: none !important; /* إخفاء الوصف لتوفير المساحة */
                }

                .subscription-item .sub-price {
                    font-size: 14px !important;
                    margin: 5px 0 !important;
                }

                .subscription-item .buy-btn {
                    font-size: 12px !important;
                    padding: 6px 10px !important;
                    width: 100% !important;
                }

            /* استثناء: قسم Xbox Gift Cards (يظل كما هو مضغوط) */
            #xboxGiftCardsContainer .product-item {
                min-height: 140px !important;
                padding: 5px !important;
            }

            /* استثناء: قسم المفاتيح (Keys) - سكرول أفقي */
            #softwareKeysContainer {
                display: flex !important;
                overflow-x: auto !important;
                justify-content: flex-start !important;
                padding-bottom: 15px !important;
                grid-template-columns: none !important; /* إلغاء الشبكة هنا */
            }

            .gaming-key-card {
                min-width: 200px !important;
                width: 200px !important;
            }
        }



        /* ------------------------------------------------------ */
        /* 6. تنظيف التأثيرات العامة (Fixes) */
        /* ------------------------------------------------------ */

        /* الخط الفاصل */
        .dropdown-divider {
            height: 1px !important;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent) !important;
            margin: 8px 0 !important;
            border: none !important;
        }

        /* إزالة الوهج اللوني العام عن الروابط داخل القائمة لضمان دقة الألوان */
        .dropdown-content a:hover {
            box-shadow: none !important;
            filter: brightness(1) !important;
        }

        /* ====================================================== */
        /* 📱 7. تحسين الموبايل (Mobile Center Floating Card) 📱 */
        /* ====================================================== */
        @media (max-width: 768px) {
            #user-dropdown-menu {
                position: fixed !important;
                top: 75px !important;
                left: 50% !important;
                right: auto !important;
                /* توسيط القائمة في الشاشة */
                transform: translateX(-50%) translateY(10px);
                width: 90% !important;
                max-width: 350px !important;
                z-index: 99999 !important;
            }

                /* تصحيح وضع الظهور في الجافاسكريبت */
                #user-dropdown-menu[style*="visibility: visible"] {
                    transform: translateX(-50%) translateY(0) !important;
                    opacity: 1 !important;
                }

                /* تحسين حجم الروابط للمس */
                #user-dropdown-menu a.nav-link {
                    padding: 15px 20px !important;
                    font-size: 16px !important;
                    justify-content: space-between !important;
                    flex-direction: row-reverse !important;
                }

                    #user-dropdown-menu a.nav-link span {
                        font-weight: bold !important;
                    }
        }

        /* ====================================================== */
        /* ✅ تحسين شكل قائمة المستخدم على الموبايل (Mobile Dropdown) ✅ */
        /* ====================================================== */

        @media (max-width: 768px) {

            /* 1. تحويل القائمة لبطاقة عائمة في المنتصف */
            #user-dropdown-menu {
                position: fixed !important; /* تثبيت القائمة بالنسبة للشاشة */
                top: 75px !important; /* المسافة من أعلى الشاشة (تحت الناف بار) */
                left: 50% !important; /* وضعها في منتصف الشاشة */
                right: auto !important; /* إلغاء المحاذاة لليمين */
                /* معادلة التوسيط + حركة بسيطة للأسفل في البداية */
                transform: translateX(-50%) translateY(10px);
                width: 90% !important; /* العرض 90% من الشاشة */
                max-width: 350px !important; /* أقصى عرض لكي لا تكون عريضة جداً */
                /* التصميم الزجاجي واللون */
                background: linear-gradient(145deg, rgba(29, 16, 51, 0.95), rgba(11, 7, 20, 0.98)) !important;
                backdrop-filter: blur(15px) !important;
                -webkit-backdrop-filter: blur(15px) !important;
                /* الحواف والظلال */
                border-radius: 20px !important;
                border: 1px solid rgba(255, 204, 0, 0.3) !important; /* إطار ذهبي خفيف */
                box-shadow: 0 10px 40px rgba(0, 0, 0, 0.8) !important;
                padding: 10px !important;
                z-index: 99999 !important;
                transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55) !important; /* حركة "نطاطة" ناعمة */
            }

                /* 2. تعديل الحالة عند الظهور (تعديل الـ JS style) */
                /* هذا الكود يضمن أن القائمة تظهر في المكان الصحيح عندما يفتحها الجافاسكريبت */
                #user-dropdown-menu[style*="visibility: visible"] {
                    transform: translateX(-50%) translateY(0) !important;
                    opacity: 1 !important;
                }

                /* 3. تحسين الروابط والأزرار داخل القائمة */
                #user-dropdown-menu a.nav-link {
                    padding: 15px 20px !important; /* مساحة أكبر للمس */
                    margin: 5px 0 !important;
                    border-radius: 12px !important;
                    background-color: rgba(255, 255, 255, 0.03) !important;
                    justify-content: space-between !important; /* جعل الأيقونة والنص متباعدين */
                    flex-direction: row-reverse !important; /* عكس الاتجاه لتناسق العربي */
                    border: 1px solid transparent;
                }

                    /* 4. تأثير عند الضغط على الرابط */
                    #user-dropdown-menu a.nav-link:active {
                        background-color: rgba(255, 204, 0, 0.1) !important;
                        border-color: var(--accent-yellow) !important;
                        transform: scale(0.98);
                    }

                    /* 5. تكبير الأيقونات والنصوص */
                    #user-dropdown-menu a.nav-link span {
                        font-size: 16px !important;
                        font-weight: bold !important;
                    }

                    #user-dropdown-menu a.nav-link i {
                        font-size: 20px !important;
                        margin: 0 !important;
                    }

                /* 6. تحسين قسم الرانك في الأعلى */
                #user-dropdown-menu > div:first-child {
                    background: rgba(255, 255, 255, 0.05) !important;
                    border-radius: 15px !important;
                    margin-bottom: 15px !important;
                    padding: 15px !important;
                    border: 1px dashed rgba(255, 255, 255, 0.1);
                }

                /* 7. تنسيق خاص لزر تسجيل الخروج */
                #user-dropdown-menu a.logout-btn {
                    background-color: rgba(255, 71, 87, 0.1) !important;
                    color: #ff4757 !important;
                    border: 1px solid rgba(255, 71, 87, 0.2) !important;
                    margin-top: 15px !important;
                }

                    #user-dropdown-menu a.logout-btn i {
                        color: #ff4757 !important;
                    }
        }
        /* تنسيق الكبسولات التفاعلية */
        .interactive-pill {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0); /* البداية مخفية وصغيرة */
            width: 150px; /* حجم الصورة */
            height: auto;
            z-index: 2147483647; /* فوق كل شيء */
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); /* حركة ناعمة "Pop" */
            filter: drop-shadow(0 0 20px rgba(255, 0, 0, 0.5)); /* توهج */
            display: none; /* مخفية في البداية */
        }

            /* كلاس التفعيل للظهور */
            .interactive-pill.show {
                display: block;
                transform: translate(-50%, -50%) scale(1);
            }

                /* تأثير عند مرور الماوس */
                .interactive-pill.show:hover {
                    transform: translate(-50%, -50%) scale(1.1) rotate(10deg);
                    filter: drop-shadow(0 0 30px rgba(255, 0, 0, 0.8));
                }
        /* ========================================= */
        /* 🏆 PLAYSTATION TROPHY STYLE 🏆 */
        /* ========================================= */
        .ps-trophy-alert {
            position: fixed;
            top: 20px; /* يظهر من أعلى اليسار */
            left: 20px;
            z-index: 100000;
            background: rgba(15, 15, 20, 0.95); /* خلفية داكنة */
            border-radius: 30px; /* شكل بيضاوي */
            padding: 10px 25px 10px 10px; /* مساحات داخلية */
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
            min-width: 250px;
            /* أنيميشن الدخول */
            animation: trophy-slide-in 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }

        /* النصوص داخل التروفي */
        .trophy-details {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            line-height: 1.2;
        }

        .trophy-subtitle {
            font-size: 10px;
            color: #ccc;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .trophy-title {
            font-size: 14px;
            font-weight: bold;
            color: white;
        }

        /* حركة الدخول */
        @keyframes trophy-slide-in {
            0% {
                transform: translateX(-150%);
                opacity: 0;
            }

            100% {
                transform: translateX(0);
                opacity: 1;
            }
        }
        /* ========================================= */
        /* 🏆 تعديل طبقة التروفي لتظهر فوق المذكرة 🏆 */
        /* ========================================= */

        .ps-trophy-alert {
            /* ... باقي التنسيقات ... */
            z-index: 2147483647 !important; /* أهم سطر عشان يظهر فوق المذكرة */
        }
            /* كلاس الاختفاء */
            .ps-trophy-alert.hide {
                animation: trophy-slide-out 0.5s forwards;
            }

        /* حركة الخروج */
        @keyframes trophy-slide-out {
            0% {
                transform: translateX(0);
                opacity: 1;
            }

            100% {
                transform: translateX(-150%);
                opacity: 0;
            }
        }
        /* ====================================================== */
        /* ✅ تنسيق كبسولة رقم فودافون (Compact Silver Glow) ✅ */
        /* ====================================================== */

        /* تعديل التنسيق ليكون عمودي ومتوسط */
        .transfer-instruction-line {
            display: flex;
            flex-direction: column; /* يرص العناصر فوق بعض */
            align-items: center; /* ✅ ده اللي بيخلي العناصر تيجي في النص */
            justify-content: center;
            gap: 10px; /* مسافة بين سطر الكلام وسطر الرقم */
            width: 100%;
            margin-bottom: 10px;
            font-size: 14px;
            color: var(--light-text);
            text-align: center; /* عشان لو الكلام نزل على سطرين يبقى متوسط برضه */
        }

        /* تنسيق الكبسولة نفسها */
        .number-copy-capsule {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 4px 12px;
            border-radius: 50px; /* حواف دائرية كاملة */
            /* الخلفية والإطار الفضي */
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid #C0C0C0; /* فضي */
            /* تأثير التوهج الفضي الخفيف */
            box-shadow: 0 0 5px rgba(192, 192, 192, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
        }

            /* تأثير عند مرور الماوس على الكبسولة */
            .number-copy-capsule:hover {
                background: rgba(255, 255, 255, 0.15);
                box-shadow: 0 0 10px rgba(192, 192, 192, 0.6); /* زيادة التوهج */
                transform: translateY(-1px);
            }

            /* تنسيق الرقم */
            .number-copy-capsule .vodafone-number {
                color: var(--accent-yellow);
                font-weight: bold;
                font-family: 'Tajawal', sans-serif; /* أو أي خط أرقام تفضله */
                letter-spacing: 1px;
                line-height: 1;
            }

            /* تنسيق أيقونة النسخ */
            .number-copy-capsule .copy-icon {
                font-size: 14px;
                color: #C0C0C0; /* لون فضي للأيقونة */
                transition: color 0.3s;
            }

            /* تغيير لون الأيقونة عند النسخ (سيتم تفعيل هذا الكلاس بالـ JS) */
            .number-copy-capsule.copied {
                border-color: #2ecc71; /* يتحول للأخضر عند النسخ */
                box-shadow: 0 0 10px rgba(46, 204, 113, 0.4);
            }

                .number-copy-capsule.copied .copy-icon {
                    color: #2ecc71; /* خضراء */
                }
        /* ====================================================== */
        /* ✅ MASTERPIECE SUPPORT MODAL STYLES 🛠️ */
        /* ====================================================== */



        /* 2. العنوان والوصف */
        .support-title {
            font-size: 2rem !important;
            color: #fff;
            margin-bottom: 5px !important;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.1);
        }

        .support-subtitle {
            color: #ccc;
            font-size: 0.9rem;
            margin-bottom: 30px;
            opacity: 0.8;
        }

        /* 3. حاوية البطاقات */
        .support-cards-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
            width: 100%;
            max-width: 450px;
            margin: 0 auto;
        }

        /* 4. التصميم الأساسي لبطاقة التواصل */
        .support-card {
            display: flex;
            align-items: center;
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.05), rgba(0, 0, 0, 0.2));
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 15px 20px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            position: relative;
            overflow: hidden;
            text-decoration: none; /* للروابط */
        }

            /* 5. أيقونة الخدمة (يسار/يمين) */
            .support-card .icon-wrapper {
                width: 50px;
                height: 50px;
                background: rgba(0, 0, 0, 0.3);
                border-radius: 12px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 24px;
                margin-left: 15px; /* مسافة في العربي */
                transition: transform 0.3s ease;
            }

            /* 6. النصوص داخل البطاقة */
            .support-card .text-wrapper {
                flex-grow: 1;
                text-align: right;
                display: flex;
                flex-direction: column;
            }

                .support-card .text-wrapper .label {
                    font-size: 12px;
                    color: #aaa;
                    margin-bottom: 2px;
                }

                .support-card .text-wrapper .value {
                    font-size: 15px;
                    font-weight: bold;
                    color: #fff;
                    font-family: 'Cairo', sans-serif; /* أو خط الإنجليزي للأرقام */
                    direction: ltr; /* عشان الإيميل يظهر صح */
                    text-align: right;
                }

            /* 7. أيقونة الإجراء (نسخ/فتح) */
            .support-card .action-icon {
                color: #666;
                font-size: 18px;
                transition: color 0.3s ease;
                position: relative;
            }

        /* --- تخصيص بطاقة الإيميل --- */
        .email-card:hover {
            border-color: var(--accent-yellow);
            box-shadow: 0 0 25px rgba(255, 204, 0, 0.15);
            transform: translateY(-3px);
        }

        .email-card .icon-wrapper {
            color: var(--accent-yellow);
        }

        .email-card:hover .icon-wrapper {
            background: var(--accent-yellow);
            color: #000;
            transform: scale(1.1) rotate(-10deg);
        }

        /* --- تخصيص بطاقة الديسكورد --- */
        .discord-card:hover {
            border-color: #5865F2;
            box-shadow: 0 0 25px rgba(88, 101, 242, 0.25);
            transform: translateY(-3px);
        }

        .discord-card .icon-wrapper {
            color: #5865F2;
        }

        .discord-card:hover .icon-wrapper {
            background: #5865F2;
            color: #fff;
            transform: scale(1.1) rotate(10deg);
        }

        /* 8. تولتيب النسخ */
        .tooltip {
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--green-buy-btn);
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 10px;
            opacity: 0;
            transition: opacity 0.2s;
            pointer-events: none;
            white-space: nowrap;
        }

        .copied .tooltip {
            opacity: 1;
            top: -35px;
        }

        .support-footer {
            margin-top: 20px; /* قللت المسافة العلوية سنة بسيطة كمان */
            font-size: 12px;
            /* ✅ اللون بقى أبيض فاتح مع شفافية بسيطة جداً عشان يبقى مريح للعين */
            color: rgba(255, 255, 255, 0.9) !important;
            border-top: 1px solid rgba(255,255,255,0.05);
            padding-top: 10px;
        }
        /* ====================================================== */
        /* 🎧 تنسيق أيقونة الدعم الفني (Headset Icon) 🎧 */
        /* ====================================================== */

        .support-header-icon {
            color: var(--accent-yellow); /* لون أصفر مميز */
            margin-left: 10px; /* مسافة بينها وبين الكلمة */
            font-size: 1.2em; /* حجم أكبر سنة من الكلام */
            vertical-align: middle; /* محاذاة في النص */
            /* وهج خفيف */
            text-shadow: 0 0 10px rgba(255, 204, 0, 0.4);
            /* حركة نبض هادية (Breathing) */
            animation: support-icon-pulse 2s infinite ease-in-out;
        }

        @keyframes support-icon-pulse {
            0%, 100% {
                transform: scale(1);
                text-shadow: 0 0 10px rgba(255, 204, 0, 0.4);
            }

            50% {
                transform: scale(1.1); /* تكبير بسيط */
                text-shadow: 0 0 20px rgba(255, 204, 0, 0.8); /* الوهج يزيد */
            }
        }
        /* ====================================================== */
        /* ✅ تنسيق نص "رانكك الحالي" (White Neon Gaming Style) ✅ */
        /* ====================================================== */

        .rank-label {
            margin: 0 0 8px 0 !important;
            padding: 0 !important;
            font-size: 12px !important; /* كبرناه سنة عشان الوهج يبان */
            font-weight: bold !important; /* لازم يكون عريض عشان الإضاءة تبان */

            color: #ffffff !important; /* لون النص أبيض */
            letter-spacing: 1px; /* مسافة بين الحروف لستايل الجيمنج */
            text-transform: uppercase; /* حروف كبيرة (لو انجليزي) */
            /* ✅ بداية الوهج الثابت */
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.6);
            /* ✅ تشغيل أنيميشن النبض (Breathing Effect) */
            animation: white-gaming-pulse 1.5s ease-in-out infinite alternate;
        }

        /* ====================================================== */
        /* 🔥 أنيميشن النبض الأبيض (Gaming White Pulse) 🔥 */
        /* ====================================================== */

        @keyframes white-gaming-pulse {
            from {
                /* حالة الهدوء: وهج بسيط */
                text-shadow: 0 0 4px rgba(255, 255, 255, 0.4), 0 0 8px rgba(255, 255, 255, 0.2);
                opacity: 0.8;
                transform: scale(1);
            }

            to {
                /* حالة التوهج: وهج قوي وناصع */
                text-shadow: 0 0 8px rgba(255, 255, 255, 1), 0 0 15px rgba(255, 255, 255, 0.8), 0 0 20px rgba(255, 255, 255, 0.6);
                opacity: 1;
                transform: scale(1.05); /* تكبير بسيط جداً مع التوهج */
            }
        }
        /* ====================================================== */
        /* ✅ START: AVATAR SELECTION STYLES (إطار أبيض عند التحديد) ✅ */
        /* ====================================================== */

        /* 1. التنسيق الأساسي لصور الأفاتار داخل الشبكة */
        #avatar-selection-area .avatars-grid img {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            cursor: pointer;
            /* 🛑 الإطار الافتراضي شفاف (لإظهار الرتبة إن وجدت أو لإظهار الأبيض) */
            border: 3px solid transparent;
            transition: all 0.3s;
            box-sizing: border-box; /* للتأكد من أن البوردر لا يغير حجم الصورة */
        }

            /* 2. تأثير عند مرور الماوس (Hover) */
            #avatar-selection-area .avatars-grid img:hover {
                transform: scale(1.15);
                /* 🚀 التعديل الرئيسي: إطار أبيض ناصع عند المرور */
                border-color: #ffffff !important;
                box-shadow: 0 0 10px rgba(255, 255, 255, 0.7); /* وهج أبيض خفيف */
            }

            /* 3. الإطار عند التحديد (Selected) */
            /* هذا الكود هو المسؤول عن الإطار الأصفر عند اختيار الصورة */
            #avatar-selection-area .avatars-grid img.selected-avatar {
                /* الإطار الأصفر الثابت عند التحديد */
                border-color: var(--accent-yellow) !important;
                box-shadow: 0 0 15px var(--accent-yellow);
                transform: scale(1.1);
            }

                /* 4. تعديل الإطار في حالة المرور على الصورة المُختارة (لتجنب تضارب الألوان) */
                #avatar-selection-area .avatars-grid img.selected-avatar:hover {
                    /* نُبقي على الأصفر ونزيد الوهج قليلاً */
                    box-shadow: 0 0 20px var(--accent-yellow), 0 0 5px rgba(255, 255, 255, 0.8);
                }

        /* ====================================================== */
        /* ✅ END: AVATAR SELECTION STYLES ✅ */
        /* ====================================================== */
        /* ====================================================== */
        /* ✅ تنسيق زر الحفظ في حالة التعطيل (Disabled) ✅ */
        /* ====================================================== */
        .confirm-payment-btn:disabled {
            /* تغيير الخلفية إلى لون رمادي باهت */
            background: #44475a !important;
            /* جعل الحدود باهتة أيضاً */
            border-color: #44475a !important;
            /* تقليل الشفافية لجعل المظهر باهتاً */
            opacity: 0.65;
            /* إزالة تأثير الحركة عند مرور الماوس */
            transform: none !important;
            box-shadow: none !important;
            /* تغيير مؤشر الماوس */
            cursor: not-allowed !important;
        }
        /* ====================================================== */
        /* ✅ تنسيق اللودر الصغير داخل الأزرار (Small Spinner) ✅ */
        /* ====================================================== */
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--accent-yellow);
            animation: spin 1s ease-in-out infinite;
            /* لضمان ظهوره بجانب النص بشكل سليم */
            vertical-align: middle;
            margin-left: 8px; /* مسافة بسيطة من النص */
        }
        /* ====================================================== */
        /* ✅ START: تحسين تنسيق أزرار الحفظ وتغيير كلمة المرور ✅ */
        /* ====================================================== */

        /* 1. تنسيقات عامة لحاوية الأزرار */
        .profile-actions-container {
            display: flex; /* لعرض الأزرار بجانب بعضها */
            flex-wrap: wrap; /* للسماح لها بالانتقال لسطر جديد في الشاشات الصغيرة */
            gap: 15px; /* مسافة بين الأزرار */
            justify-content: flex-end; /* محاذاة الأزرار لليمين (لأن الموقع RTL) */
            align-items: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.08); /* خط فاصل خفيف */
        }

        /* 2. تنسيقات زر "حفظ التغييرات" (confirm-payment-btn) */
        .confirm-payment-btn {
            /* الشكل الأساسي */
            background: linear-gradient(135deg, var(--green-buy-btn) 0%, #208e40 100%) !important; /* تدرج لوني أخضر */
            color: #fff !important;
            font-size: 15px !important;
            font-weight: bold !important;
            padding: 12px 30px !important;
            border: 2px solid var(--green-buy-btn) !important; /* بوردر بنفس اللون */
            border-radius: 50px !important; /* حواف دائرية */
            cursor: pointer !important;
            transition: all 0.3s ease !important; /* حركة سلسة عند التفاعل */
            box-shadow: 0 5px 15px rgba(33, 150, 83, 0.4) !important; /* ظل أخضر */
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px; /* مسافة بين الأيقونة والنص */
            min-width: 180px; /* عرض أدنى للزر */
        }

            /* تأثير Hover لزر "حفظ التغييرات" */
            .confirm-payment-btn:hover {
                transform: translateY(-3px) scale(1.02); /* رفع وتكبير بسيط */
                box-shadow: 0 8px 20px rgba(33, 150, 83, 0.6) !important; /* ظل أقوى */
                filter: brightness(1.1); /* تفتيح بسيط */
            }

        /* 3. تنسيقات زر "تغيير كلمة المرور" (buy-btn) */
        .profile-actions-container .buy-btn {
            /* الشكل الأساسي */
            background: linear-gradient(135deg, #ff4757 0%, #e63946 100%) !important; /* تدرج لوني أحمر */
            color: #fff !important;
            font-size: 15px !important;
            font-weight: bold !important;
            padding: 12px 25px !important;
            border: 2px solid #ff4757 !important; /* بوردر بنفس اللون */
            border-radius: 50px !important; /* حواف دائرية */
            cursor: pointer !important;
            transition: all 0.3s ease !important; /* حركة سلسة عند التفاعل */
            box-shadow: 0 5px 15px rgba(255, 71, 87, 0.4) !important; /* ظل أحمر */
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px; /* مسافة بين الأيقونة والنص */
            min-width: 180px; /* عرض أدنى للزر */
        }

            /* تأثير Hover لزر "تغيير كلمة المرور" */
            .profile-actions-container .buy-btn:hover {
                transform: translateY(-3px) scale(1.02); /* رفع وتكبير بسيط */
                box-shadow: 0 8px 20px rgba(255, 71, 87, 0.6) !important; /* ظل أقوى */
                filter: brightness(1.1); /* تفتيح بسيط */
            }

        /* استجابة الأزرار للشاشات الصغيرة */
        @media (max-width: 768px) {
            .profile-actions-container {
                flex-direction: column; /* عرض الأزرار فوق بعضها */
                align-items: stretch; /* تمتد الأزرار على كامل العرض */
            }

                .profile-actions-container button {
                    width: 100%; /* جعل الأزرار تأخذ عرض 100% */
                    margin-right: 0 !important; /* إزالة الهوامش الجانبية */
                }
        }

        /* ====================================================== */
        /* ✅ END: تحسين تنسيق أزرار الحفظ وتغيير كلمة المرور ✅ */
        /* ====================================================== */
        /* ====================================================== */
        /* ✅ START: تعديل لون البوردر والأيقونة إلى الأبيض ✅ */
        /* ====================================================== */

        /* 1. تعديل الإطار إلى الأبيض وإزالة اللون البنفسجي الأساسي من الأيقونة */
        #profile-settings-page .input-wrapper#name-input-wrapper-center {
            /* تغيير لون الإطار (الحد) إلى الأبيض */
            border: 1px solid #ffffff !important;
            /* إضافة توهج أبيض خفيف لجعلها تبرز */
            box-shadow: 0 0 8px rgba(255, 255, 255, 0.4) !important;
        }

            /* 2. تغيير لون أيقونة الشخص إلى الأبيض */
            #profile-settings-page .input-wrapper#name-input-wrapper-center i.fas.fa-user {
                /* تغيير لون الأيقونة إلى الأبيض */
                color: #ffffff !important;
                /* إزالة أي ظل نصي أو تأثير قديم */
                text-shadow: none !important;
            }

            /* 3. تأثير الـ Focus (لتغيير التوهج إلى لون مميز عند الضغط/الكتابة) */
            #profile-settings-page .input-wrapper#name-input-wrapper-center:focus-within {
                /* عند التركيز: نرجع للون المميز (الذهبي مثلاً) لتمييز الحقل النشط */
                border-color: var(--accent-yellow) !important;
                box-shadow: 0 0 10px rgba(255, 204, 0, 0.6) !important;
            }

                /* 4. تغيير لون الأيقونة أيضاً عند التركيز */
                #profile-settings-page .input-wrapper#name-input-wrapper-center:focus-within i.fas.fa-user {
                    color: var(--accent-yellow) !important;
                }
        /* ====================================================== */
        /* ✅ END: تعديل لون البوردر والأيقونة إلى الأبيض ✅ */
        /* ====================================================== */
        /* ====================================================== */
        /* ✅ التعديلات على حاوية الأزرار داخل اختيار الأفاتار ✅ */
        /* ====================================================== */

        /* 1. تنسيق حاوية الأزرار لتكون Flexbox في المنتصف */
        .avatar-action-buttons {
            display: flex;
            justify-content: center; /* توسيط الأزرار */
            gap: 15px; /* مسافة بين زر الحفظ وزر الإلغاء */
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1); /* خط فاصل بسيط */
        }

            /* 2. تنسيق زر الحفظ الجديد */
            .avatar-action-buttons .save-avatar-btn {
                background-color: var(--green-buy-btn); /* لون أخضر للحفظ */
                color: white;
                font-weight: bold;
                padding: 10px 25px;
                border-radius: 50px;
                border: none;
                cursor: pointer;
                transition: transform 0.2s;
            }

            /* 3. تنسيق زر الإلغاء (لجعله بنفس الحجم واللون الرمادي) */
            .avatar-action-buttons .cancel-avatar-btn {
                background-color: #6c757d; /* لون رمادي للإلغاء */
                color: white;
                font-weight: bold;
                padding: 10px 25px;
                border-radius: 50px;
                border: none;
                cursor: pointer;
                transition: transform 0.2s;
            }

            .avatar-action-buttons button:hover {
                transform: translateY(-2px);
            }
        /* ====================================================== */
        /* ✅ التعديلات على حاوية الأزرار داخل اختيار الأفاتار ✅ */
        /* ====================================================== */

        /* 1. تنسيق حاوية الأزرار لتكون Flexbox في المنتصف */
        .avatar-action-buttons {
            display: flex;
            justify-content: center; /* توسيط الأزرار */
            gap: 15px; /* مسافة بين زر الحفظ وزر الإلغاء */
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1); /* خط فاصل بسيط */
        }

            /* 2. تنسيق زر الحفظ الجديد */
            .avatar-action-buttons .save-avatar-btn {
                background-color: var(--green-buy-btn); /* لون أخضر للحفظ */
                color: white;
                font-weight: bold;
                padding: 10px 25px;
                border-radius: 50px;
                border: none;
                cursor: pointer;
                transition: transform 0.2s;
            }

            /* 3. تنسيق زر الإلغاء (لجعله بنفس الحجم واللون الرمادي) */
            .avatar-action-buttons .cancel-avatar-btn {
                background-color: #6c757d; /* لون رمادي للإلغاء */
                color: white;
                font-weight: bold;
                padding: 10px 25px;
                border-radius: 50px;
                border: none;
                cursor: pointer;
                transition: transform 0.2s;
            }

            .avatar-action-buttons button:hover {
                transform: translateY(-2px);
            }
        /* ========================================= */
        /* ✅ START: TROPHY ALERT (PS Style) ✅ */
        /* ========================================= */

        @keyframes trophy-slide-in {
            0% {
                transform: translate(120%, -50%);
            }

            20% {
                transform: translate(-10%, -50%);
            }

            100% {
                transform: translate(0, -50%);
            }
        }

        .ps-trophy-alert {
            position: fixed;
            top: 50px;
            left: 0px; /* يبدأ من اليسار (خارج الشاشة) */
            transform: translate(-120%, 0); /* مخفي في البداية */
            z-index: 10002;
            background: linear-gradient(90deg, #0070D1 0%, #00457C 100%); /* أزرق بلايستيشن */
            color: white;
            padding: 10px 15px;
            border-radius: 0 8px 8px 0;
            box-shadow: 0 0 15px rgba(0, 112, 209, 0.8);
            font-family: 'Arial', sans-serif;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 12px;
            animation: trophy-slide-in 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }

            .ps-trophy-alert .trophy-icon {
                font-size: 20px;
                color: #FFD700; /* لون التروفي (ذهبي) */
                text-shadow: 0 0 5px #ffcc00;
            }

            .ps-trophy-alert .trophy-text {
                font-weight: bold;
                direction: ltr;
            }

            /* حركة الإخفاء (Fade Out) */
            .ps-trophy-alert.hide {
                animation: none;
                opacity: 0;
                transform: translate(0, -50%);
                transition: opacity 0.5s ease-out 1s, transform 0.5s ease-out 1s; /* تأخير قبل الاختفاء */
            }
        /* ====================================================== */
        /* ✅ التعديلات على صندوق ملخص الطلبات (#my-orders-page) ✅ */
        /* ====================================================== */

        /* 1. تنسيق قيمة العداد (لرفعها للأعلى) */
        #my-orders-page .summary-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--accent-yellow);
            line-height: 1;
            /* 🛑 التعديل الرئيسي لرفع العنصر وتقليل المسافة العلوية */
            margin-top: -10px !important;
            margin-bottom: 5px !important;
        }

        /* 2. تنسيق الرتبة الجديدة (تحت العداد) */
        #my-orders-page .user-rank-display-small {
            font-size: 14px;
            font-weight: bold;
            color: #00e5ff; /* لون سماوي ليتناسب مع الدايموند */
            text-shadow: 0 0 5px rgba(0, 229, 255, 0.4);
            margin-top: -5px !important; /* لتقريبها أكثر من العدد */
        }
        /* ====================================================== */
        /* ✅ تنسيقات نافذة الشكر (#confirmationMessage) باللون الأخضر النيون ✅ */
        /* ====================================================== */

        /* 1. تنسيق أيقونة علامة الصح (Fa-Check-Circle) */
        .checkmark-icon {
            font-size: 5rem;
            /* حجم كبير */
            color: #0f0 !important; /* ✅ اللون الأخضر النيون القوي */
            margin-bottom: 25px;
            /* لإضافة التوهج النيون */
            text-shadow: 0 0 15px rgba(0, 255, 0, 0.7), 0 0 30px rgba(0, 255, 0, 0.5);
            animation: pulse-checkmark 1.5s infinite alternate;
            /* أنيميشن نبض خفيف */
        }

        /* 2. تنسيق عنوان الشكر */
        .thank-you-title {
            font-size: 2.2rem !important;
            /* حجم الخط */
            color: #0f0 !important;
            /* ✅ لون أخضر نيون */
            margin: 0 !important;
            text-shadow: 0 0 8px rgba(0, 255, 0, 0.7);
            /* توهج أخضر خفيف */
            font-weight: bold;
        }

        /* 3. تنسيق الخط الفاصل */
        .thank-you-divider {
            border: none;
            border-top: 2px solid rgba(0, 255, 0, 0.4); /* ✅ خط أخضر نيون */
            width: 60%;
            /* عرض الخط */
            margin: 15px auto 25px auto;
            /* توسيط الخط مع مسافة كافية */
        }

        /* 4. تنسيق نص الرسالة التفصيلي */
        .thank-you-text {
            font-size: 1.3rem !important;
            /* حجم الخط */
            color: #c0f0c0 !important; /* لون فاتح متناسق */
            line-height: 1.6;
            margin-top: 0 !important;
        }

        /* 5. إزالة التوهج النيون من النافذة نفسها (لتحقيق التباين الذي طلبته) */
        #paymentModal.is-visible {
            border: 1px solid var(--main-purple) !important; /* إرجاع للإطار البنفسجي الأساسي */
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4) !important; /* إرجاع للظل الداكن القياسي */
            border-radius: 25px !important;
        }

        #my-orders-page .page-header-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 10px 0;
        }

        #my-orders-page #orders-page-icon {
            max-width: 120px;
            height: auto;
            filter: drop-shadow(0 0 8px rgba(255, 204, 0, 0.6));
            margin: 0;
            flex-shrink: 0;
        }

        #my-orders-page #orders-summary-box {
            text-align: left;
            padding-left: 15px;
        }

        #my-orders-page .thin-divider {
            border: none;
            border-top: 1px solid rgba(255, 255, 255, 0.15);
            /* خط رفيع باللون الأبيض الشفاف */
            margin: 0 0 30px 0;
            /* مسافة فاصلة عن القائمة */
        }

        /* 5. تنسيق الأرقام والنصوص داخل العداد */
        #my-orders-page .summary-label {
            font-size: 14px;
            color: #ccc;
            margin: 0 0 5px 0;
        }

        #my-orders-page .summary-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--accent-yellow);
            /* اللون الذهبي المميز */
            line-height: 1;
        }
        /* ====================================================== */
        /* ✅ إضافة CSS: توسيط حقل إدخال الاسم (Final Center) ✅ */
        /* ====================================================== */

        #name-input-wrapper-center {
            /* الخصائص المسؤولة عن التوسيط */
            margin: 0 auto !important; /* توسيط أفقي */
            /* تحديد عرض مناسب لكي يتمكن من التوسيط */
            width: 100% !important;
            max-width: 400px !important; /* عرض أقصى للحقل */
        }

        /* ====================================================== */
        /* ✅ إضافة CSS: محاذاة حقل تعديل الاسم على سطر واحد ✅ */
        /* ====================================================== */
        .input-label-group {
            display: flex;
            align-items: center; /* توسيط عمودي */
            justify-content: space-between; /* توزيع العناصر على الأطراف */
            gap: 15px; /* مسافة بين الليبل وحقل الإدخال */
            width: 100%;
        }

            .input-label-group .input-label-text {
                /* السماح لليبل بأخذ المساحة الكافية (وليس سطر كامل) */
                flex-shrink: 0;
                font-weight: bold;
                /* ✅ إزالة الـ display: block الموروث من الليبل */
                display: inline-block !important;
            }

            .input-label-group .input-wrapper {
                /* جعل حقل الإدخال يأخذ المساحة المتبقية كاملة */
                flex-grow: 1;
                /* تحديد أقصى عرض لحقل الإدخال ليبقى أنيقاً */
                max-width: 350px;
            }

        .profile-actions-container {
            display: flex;
            justify-content: center; /* توسيط المجموعة بالكامل */
            gap: 15px; /* تقليل المسافة بين الزرين */
            margin-top: 35px; /* زيادة الهامش العلوي للفصل عن حقل الاسم */
            flex-wrap: wrap;
        }

            .profile-actions-container button {
                /* تحديد عرض موحد (اختياري لكن يفضل للمظهر) */
                width: 180px !important;
                /* جعل النص والأيقونة في المنتصف تمامًا داخل الزر */
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                /* توحيد الـ Padding */
                padding: 12px 15px !important;
                font-size: 15px !important;
            }

            /* 3. تعديل الأيقونة في زر تغيير كلمة المرور لتبتعد قليلاً عن النص */
            .profile-actions-container .buy-btn i {
                /* ✅ السطر المضاف لضبط المسافة على اليمين */
                margin-left: 8px !important;
                margin-right: 0 !important;
            }

            /* 4. تعديل الأيقونة في زر حفظ التغييرات لتبتعد قليلاً عن النص */
            .profile-actions-container .confirm-payment-btn i {
                /* ✅ السطر المضاف لضبط المسافة على اليسار */
                margin-right: 8px !important;
                margin-left: 0 !important;
            }
        /* ====================================================== */
        /* ✅ START: AVATAR SELECTION ANIMATION (انسدال سلس) ✅ */
        /* ====================================================== */

        #profile-settings-page::after {
            content: '';
            position: absolute;
            inset: 3px;
            background-image: linear-gradient(rgba(30, 17, 50, 0.7), rgba(17, 10, 26, 0.9)), url('./images/my-keys-bg.png') !important;
            background-size: cover !important;
            background-position: center !important;
            border-radius: 18px;
            z-index: -1;
            /* ✅ التعديل هنا: زيادة البلور لـ 15px */
            filter: blur(15px);
            transition: filter 0.5s ease-in-out;
            /* ✅ الإضافة: توهج ناعم للخلفية */
            box-shadow: 0 0 50px rgba(205, 161, 255, 0.2); /* توهج بنفسجي خفيف */
        }

        /* 2. تنسيق الخطوط الفاصلة الجديدة */
        .avatar-category-divider {
            border-bottom: 1px solid rgba(255, 255, 255, 0.15); /* خط فاصل خفيف */
            padding-bottom: 20px;
            margin-bottom: 20px;
        }

        /* 3. تطبيق انيميشن الانسدال (Max-Height + Opacity) */
        #avatar-selection-area {
            /* الحالة الافتراضية: مخفية */
            max-height: 0;
            opacity: 0;
            overflow: hidden;
            transition: max-height 0.4s cubic-bezier(0.23, 1, 0.32, 1), opacity 0.3s ease-in-out;
            padding: 0 15px; /* نحافظ على البادينج الأفقي لكي لا يؤثر على الارتفاع، وسنضيفه في كلاس الإظهار */
            margin: 0 auto;
            border-bottom: 1px solid transparent;
        }

            /* 4. كلاس الإظهار (يتم إضافته بواسطة JS عند النقر) */
            #avatar-selection-area.open-dropdown {
                /* قيمة كبيرة تكفي لاحتواء كل الصور */
                max-height: 800px;
                opacity: 1;
                /* نضيف البادينج والخط الفاصل هنا فقط عندما تكون مفتوحة */
                padding: 15px 15px 25px 15px;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
                margin-bottom: 20px;
            }

        /* ====================================================== */
        /* ✅ END: AVATAR SELECTION ANIMATION ✅ */
        /* ====================================================== */
        @media (max-width: 992px) {

            /* 1. إخفاء شريط البحث بالكامل */

            .navbar-search-container {
                display: none !important;
            }



            /* 2. إعادة هيكلة شريط التنقل ليتناسب مع صف واحد */

            #navbar {
                flex-wrap: nowrap !important;
                justify-content: space-between !important; /* لتوزيع العناصر على الطرفين */

                padding: 4px 10px !important;
                height: auto !important; /* لكي لا يتمدد الشريط عمودياً */
            }



                /* 3. إخفاء الروابط الرئيسية (التي كانت تظهر في صف منفصل) */

                #navbar .nav-middle-section {
                    display: none !important;
                }



            /* 4. التأكد من أن قسم الحساب (Utility Section) يظهر على الطرف */

            .nav-utility-section {
                display: flex !important;
                order: 2 !important; /* وضعه في الطرف الأيمن/الأيسر حسب الـ RTL/LTR */

                align-items: center !important;
                gap: 10px !important;
            }



            /* 5. تثبيت عنصر الصورة/الاسم ليكون مرئياً ومضغوطاً */

            #user-account-btn {
                display: flex !important;
                padding: 0 !important;
                margin: 0 !important;
            }



            /* 6. إزالة أي حشو علوي زائد من الجسم (Body) */

            body {
                padding-top: 55px !important; /* مسافة بسيطة كافية لإزاحة المحتوى تحت الناف بار */
            }
        }
        /* ====================================================== */
        /* ✅ ITAKURA TRICK STYLING (الخدعة البرمجية) ✅ */
        /* ====================================================== */

        #itakura-trick-text {
            /* ✅✅ الحل الحاسم: نستخدم متغير لون الخلفية الأساسي لضمان التطابق التام ✅✅ */
            color: var(--dark-bg) !important;
            font-size: 10px;
            font-weight: normal;
            text-shadow: none !important; /* نلغي أي ظل نصي يجعله يلمع */
        }

            /* باقي كود الإظهار عند التحديد يبقى كما هو */
            #itakura-trick-text::selection {
                background: var(--accent-yellow);
                color: #000000;
            }

            #itakura-trick-text::-moz-selection {
                background: var(--accent-yellow);
                color: #000000;
            }

        /* ====================================================== */
        /* ✅ START: FINAL STORE REVIEWS STYLING (المُصحح) ✅ */
        /* ====================================================== */

        /* 1. تنسيق الحاوية الرئيسية للتقييمات (قائمة مرتبة) */
        #store-reviews-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-width: 600px;
            /* ✅✅ التعديل الحاسم: تقليل الهامش السفلي إلى 10px فقط ✅✅ */
            margin: 20px auto 10px auto !important;
        }

            /* 2. تصميم بطاقة التقييم الواحدة (Comment Card) */
            #store-reviews-list .comment-card {
                background: rgba(44, 26, 64, 0.4); /* خلفية زجاجية شفافة وداكنة */
                padding: 15px 20px;
                border-radius: 10px;
                border: 1px solid rgba(142, 106, 191, 0.5);
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
                transition: transform 0.2s ease-in-out;
            }

                /* تأثير الرفع عند مرور الماوس */
                #store-reviews-list .comment-card:hover {
                    transform: translateY(-3px);
                    border-color: var(--accent-yellow);
                    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
                }

            /* 3. تنسيق رأس البطاقة (الاسم والتاريخ) */
            #store-reviews-list .comment-card-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 10px;
            }

            /* تنسيق اسم الكاتب */
            #store-reviews-list .comment-author {
                font-size: 16px;
                font-weight: bold;
                color: var(--accent-yellow);
            }

            /* 4. تصميم النجوم داخل البطاقة (إعدادات الجلو) */
            #store-reviews-list .comment-rating,
            #store-average-rating-display .stars {
                font-size: 18px;
                direction: ltr;
            }
                /* ====================================================== */
                /* ✅ FINAL FIX: GLOWING STARS STYLING (الدمج) ✅ */
                /* ====================================================== */

                /* 1. تنسيق النجمة نفسها */
                #store-reviews-list .comment-rating .star,
                #store-average-rating-display .stars .star {
                    font-size: 24px;
                    transition: all 0.2s ease;
                }

                    /* 2. تطبيق تأثير الوهج على النجوم الممتلئة فقط */
                    #store-reviews-list .comment-rating .star.filled,
                    #store-average-rating-display .stars .star.filled {
                        color: var(--accent-yellow) !important;
                        text-shadow: 0 0 5px rgba(255, 204, 0, 0.7), /* ظل خفيف وواضح */
                        0 0 10px rgba(255, 204, 0, 0.5), /* ظل أوسع */
                        0 0 15px rgba(255, 204, 0, 0.3); /* ظل منتشر لخلق الوهج */
                    }

                    /* 3. تنسيق النجوم الفارغة (لتكون هادئة) */
                    #store-reviews-list .comment-rating .star.empty,
                    #store-average-rating-display .stars .star.empty {
                        color: #444; /* لون رمادي داكن وهادئ */
                        text-shadow: none;
                    }

            /* 5. تنسيق نص التعليق */
            #store-reviews-list .comment-text {
                font-size: 15px;
                color: var(--light-text);
                line-height: 1.6;
                margin: 0;
            }

        /* 6. تنسيق قسم التقييم الرئيسي في صفحة الإعدادات/المتوسط */
        #store-average-rating-display {
            padding: 20px;
            border-radius: 15px;
            background: linear-gradient(145deg, #1f1133, #110e1a);
            border: 1px solid var(--accent-yellow);
            box-shadow: 0 0 25px rgba(255, 204, 0, 0.3); /* وهج قوي لشريط المتوسط */
            /* ✅ التعديل هنا: تقليل الهامش العلوي والسفلي لصندوق المتوسط */
            margin-top: 5px !important;
            margin-bottom: 10px !important;
        }
        /* هذا الكود يضمن إلغاء أي هامش سفلي موروث على آخر عنصر في قسم التقييمات */
        #feedback-section > *:last-child {
            margin-bottom: 0 !important;
        }

        #store-average-rating-display .stars {
            font-size: 2.5rem;
            color: var(--accent-yellow);
            margin-bottom: 10px;
        }

        #store-average-rating-display .summary-text {
            color: #fff;
            font-size: 1.1rem;
        }

        /* ====================================================== */
        /* ✅ END: FINAL STORE REVIEWS STYLING (المُصحح) ✅ */
        /* ====================================================== */
        /* هذا الكود يستهدف زر الخروج تحديداً ويزيل أي وهج نصي أو ظل خارجي منه */


        /* ========================================= */
        /* 🎮 GAMIFICATION: User Ranks Styles */
        /* ========================================= */

        /* 1. الانتقال السلس لتغيير اللون */
        .profile-avatar-large,
        #nav-user-img {
            transition: all 0.5s ease-in-out;
            box-sizing: border-box; /* عشان البوردر مايكبرش الصورة */
        }

        #avatar-selection-area .avatars-grid img.selected-avatar {
            /* الإطار الأصفر الثابت عند التحديد */
            border-color: var(--accent-yellow) !important;
            box-shadow: 0 0 15px var(--accent-yellow);
            transform: scale(1.1);
        }
        /* 🥉 رتبة البرونز (الافتراضي) */
        .rank-bronze {
            border: 3px solid #cd7f32 !important; /* لون نحاسي */
            filter: grayscale(0.2);
            box-shadow: none !important; /* إزالة الوهج القوي للبرونز */
        }

        /* إزالة تأثير الهوفر الافتراضي للصورة داخل القائمة إذا كان يتعارض */
        .dropdown-profile-pic {
            transition: all 0.3s ease;
        }

        /* 🥇 رتبة الجولد (بعد أول شراء) */
        .rank-gold {
            border: 3px solid #ffd700 !important; /* لون ذهبي */
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.6); /* وهج ذهبي */
        }

        /* 💎 رتبة الدايموند (للكبار فقط) */
        .rank-diamond {
            border: 3px solid #00e5ff !important; /* سماوي */
            box-shadow: 0 0 20px rgba(0, 229, 255, 0.8); /* وهج أزرق قوي */
            animation: diamond-pulse 2s infinite alternate; /* حركة تنفس */
        }

        /* حركة النبض للدايموند */
        @keyframes diamond-pulse {
            0% {
                box-shadow: 0 0 15px rgba(0, 229, 255, 0.5);
                border-color: #00e5ff;
            }

            100% {
                box-shadow: 0 0 30px rgba(0, 229, 255, 1);
                border-color: #fff;
            }
        }

        /* بادج اسم الرتبة (يظهر تحت الاسم) */
        .user-rank-badge {
            font-size: 10px;
            font-weight: bold;
            padding: 2px 8px;
            border-radius: 10px;
            margin-top: 3px;
            display: inline-block;
            color: #110e1a; /* لون النص أسود */
        }

        .auth-modal-body {
            display: flex !important;
            flex-direction: column !important;
            align-items: center !important;
            justify-content: center !important;
            gap: 15px !important; /* مسافة موحدة بين كل العناصر */
            padding: 40px 30px !important;
            width: 100% !important;
            max-width: 400px !important; /* عرض مثالي */
            margin: 0 auto !important;
        }

            .auth-modal-body h2 {
                color: white !important;
                margin: 0 0 10px 0 !important;
                font-size: 24px !important;
                border: none !important;
            }

        /* 2. حاوية الحقول (لضمان العرض الكامل) */
        .auth-fields-container {
            width: 100% !important;
            display: flex !important;
            flex-direction: column !important;
            gap: 12px !important; /* مسافة بين الايميل والباسورد */
        }

        .auth-input-group {
            width: 100% !important;
            margin: 0 !important;
        }

        /* 3. توحيد شكل الحقول */
        .auth-field {
            width: 100% !important;
            height: 50px !important;
            padding: 0 15px !important;
            border-radius: 10px !important;
            border: 1px solid #8e6abf !important;
            background: rgba(255, 255, 255, 0.05) !important;
            color: white !important;
            font-size: 16px !important;
            text-align: center !important;
            box-sizing: border-box !important;
            transition: all 0.3s ease !important;
        }

            .auth-field:focus {
                border-color: var(--accent-yellow) !important;
                background: rgba(255, 255, 255, 0.1) !important;
                box-shadow: 0 0 10px rgba(255, 204, 0, 0.2) !important;
                outline: none !important;
            }

        /* 4. توحيد شكل الأزرار (زر الدخول وزر جوجل) */
        .modal-submit-btn, .google-auth-btn {
            width: 100% !important;
            height: 50px !important; /* نفس ارتفاع الحقول */
            display: flex !important;
            align-items: center !important; /* توسيط عمودي */
            justify-content: center !important; /* توسيط أفقي (أهم سطر) */
            border-radius: 10px !important;
            font-size: 16px !important;
            font-weight: bold !important;
            cursor: pointer !important;
            margin: 0 !important;
            transition: transform 0.2s !important;
            padding: 0 !important; /* إزالة أي حشو قد يؤثر على التوسيط */
        }

        /* زر الدخول */
        .modal-submit-btn {
            background-color: var(--accent-yellow) !important;
            color: var(--black-text) !important;
            border: none !important;
        }

        /* زر جوجل */
        .google-auth-btn {
            background-color: white !important;
            color: #333 !important;
            gap: 10px !important; /* مسافة ثابتة بين اللوجو والنص */
            border: none !important;
        }

            /* ✅ إضافة هامة: ضمان عدم تمدد الصورة أو النص للأطراف */
            .google-auth-btn img,
            .google-auth-btn span {
                flex-grow: 0 !important; /* يمنع العنصر من أخذ مساحة فارغة */
                margin: 0 !important;
            }

            .modal-submit-btn:hover, .google-auth-btn:hover {
                transform: translateY(-2px) !important;
                filter: brightness(1.1);
            }

        /* 5. تنسيق الفاصل (أو) */
        .auth-separator {
            width: 100% !important;
            display: flex !important;
            align-items: center !important;
            color: rgba(255,255,255,0.5) !important;
            font-size: 14px !important;
            margin: 5px 0 !important;
        }

            .auth-separator::before, .auth-separator::after {
                content: "";
                flex: 1 !important;
                height: 1px !important;
                background: rgba(255,255,255,0.2) !important;
            }

            .auth-separator span {
                padding: 0 10px !important;
            }

        /* 6. النصوص السفلية */
        .auth-footer-text {
            margin-top: 10px !important;
            color: #ccc !important;
            font-size: 14px !important;
            line-height: 1.6 !important;
        }

        .auth-toggle-btn {
            color: var(--accent-yellow) !important;
            font-weight: bold !important;
            cursor: pointer !important;
            text-decoration: underline !important;
            display: inline-block !important;
            margin-right: 5px !important;
        }

        /* ========================================= */
        /* ✅ تنسيقات زر جوجل والفاصل */
        /* ========================================= */

        /* 1. تنسيق الفاصل (كلمة "أو") */
        .auth-separator {
            display: flex;
            align-items: center;
            text-align: center;
            margin: 15px 0;
            color: #aaa;
            font-size: 14px;
            width: 100%;
        }

            .auth-separator::before,
            .auth-separator::after {
                content: '';
                flex: 1;
                border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            }

            .auth-separator span {
                padding: 0 10px;
            }

        /* 2. تنسيق زر جوجل */
        .google-auth-btn {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            background-color: white !important; /* لون أبيض */
            color: #333 !important; /* نص غامق */
            border: none !important;
            border-radius: 8px !important;
            padding: 12px !important;
            font-size: 16px !important;
            font-weight: bold !important;
            cursor: pointer !important;
            transition: transform 0.2s, box-shadow 0.2s !important;
            margin-top: 0 !important; /* إلغاء الهامش العلوي الافتراضي للأزرار */
        }

            .google-auth-btn img {
                width: 20px;
                height: 20px;
            }

            .google-auth-btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 4px 15px rgba(255, 255, 255, 0.3) !important;
                background-color: #f1f1f1 !important;
            }

            .google-auth-btn:active {
                transform: scale(0.98);
            }



        #my-orders-auth-page,
        #my-orders-page {
            /* ✅ نضبط الهامش العلوي لـ 'صفر' لمنع تضاعف الفجوات */
            margin-top: 0 !important;
            /* نضبط الهامش السفلي لمسافة مناسبة */
            margin-bottom: 40px !important;
            /* نلغي أي بادينج علوي داخلي قد يتعارض */
            padding-top: 0 !important;
        }


        /* ====================================================== */
        /* ✅ إصلاح الفراغ العلوي لصفحات الطلبات والتسجيل */
        /* ====================================================== */

        #my-orders-auth-page,
        #my-orders-page {
            /* نلغي أي هامش علوي مبالغ فيه (نعتمد على Body Padding فقط) */
            margin-top: 20px !important;
            /* إذا كنت قد وضعت قيمة كبيرة مثل 80px في الـ HTML،
                     استبدلها بـ 20px أو أقل لترك مسافة تنفس بسيطة تحت الناف بار */
            padding-top: 0 !important;
        }

        /* لضمان ثبات النافذة المنبثقة وعدم تأثرها بالـ body padding */
        .modal {
            margin-top: 0 !important;
        }

        /* لضمان أن الروابط الرئيسية في الناف بار لا تحتوي على هامش علوي يدفعها لأسفل */
        .nav-link {
            margin-top: 0 !important;
        }
        /* ====================================================== */
        /* ✅ START: تنسيقات نافذة تسجيل الدخول (#authModal) */
        /* ====================================================== */

        /* تنسيق جسم النافذة ليكون متناسق */
        #authModal .modal-body {
            max-width: 450px !important; /* زيادة العرض */
            width: 95% !important;
            padding: 40px 30px !important; /* زيادة المساحة الداخلية */
            display: flex !important;
            flex-direction: column !important;
            align-items: center !important;
        }

        /* 1. ضبط الحاوية الخاصة بالحقول */
        #authModal .auth-input-group {
            width: 100% !important;
            display: block !important;
            margin-bottom: 15px !important;
        }

        /* 2. تنسيق حقل الإدخال (عريض وشكله مودرن) */
        #authModal input.auth-field {
            width: 100% !important;
            min-width: 100% !important;
            max-width: 100% !important;
            box-sizing: border-box !important; /* لضمان احتساب الحواف والمسافات داخل العرض */
            padding: 15px !important;
            height: 55px !important; /* ارتفاع ثابت ومريح */
            font-size: 16px !important;
            text-align: center !important;
            /* تنسيق الشكل */
            background: rgba(255, 255, 255, 0.05) !important;
            border: 1px solid #8e6abf !important;
            border-radius: 10px !important;
            color: white !important;
            margin: 0 !important;
            transition: all 0.3s ease !important;
        }

        /* تنسيق الـ Placeholder */
        #authModal .auth-field::placeholder {
            color: #cccccc;
            text-align: center;
            opacity: 0.7;
            font-size: 14px;
        }

        /* تأثير التركيز (Focus) */
        #authModal input.auth-field:focus {
            border-color: var(--accent-yellow) !important;
            background-color: rgba(255, 255, 255, 0.1) !important;
            outline: none !important;
            box-shadow: 0 0 15px rgba(255, 204, 0, 0.15) !important; /* إضافة توهج خفيف */
        }

        /* 3. تنسيق زر التنفيذ (عريض ومميز) */
        #authModal .modal-submit-btn {
            width: 100% !important;
            padding: 15px !important;
            font-size: 18px !important;
            margin-top: 15px !important;
            background-color: var(--accent-yellow) !important;
            color: var(--black-text) !important;
            border: none !important;
            border-radius: 10px !important;
            font-weight: bold !important;
            cursor: pointer !important;
            box-shadow: 0 4px 15px rgba(255, 204, 0, 0.3);
            transition: transform 0.2s, box-shadow 0.2s;
        }

            #authModal .modal-submit-btn:hover {
                box-shadow: 0 6px 20px rgba(255, 204, 0, 0.5);
                transform: translateY(-2px);
                background-color: #e6b800 !important;
            }

        /* 4. تنسيق رابط تبديل الوضع */
        .auth-toggle-btn {
            color: var(--accent-yellow) !important;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.1rem; /* تكبير الخط قليلاً */
            text-decoration: underline;
            transition: color 0.2s ease;
        }

            .auth-toggle-btn:hover {
                color: #ffffff !important;
            }

        /* ====================================================== */
        /* ✅ END: تنسيقات نافذة تسجيل الدخول (#authModal) */
        /* ====================================================== */

        /* تنسيقات مجموعة الأزرار */
        .auth-buttons-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
            width: 100%;
            max-width: 300px; /* عرض موحد للأزرار */
            margin: 20px auto 0 auto;
        }

            .auth-buttons-group .auth-action-btn {
                width: 100%;
                padding: 12px 0;
                font-size: 16px;
                font-weight: bold;
                border-radius: 8px;
                transition: all 0.3s ease;
            }

            .auth-buttons-group .btn-signup {
                background-color: var(--accent-yellow);
                color: var(--black-text);
                border: none;
                box-shadow: 0 4px 10px rgba(255, 204, 0, 0.4);
            }

            .auth-buttons-group .btn-login {
                background: transparent;
                color: var(--light-text);
                /* ✅✅ التعديل هنا: استخدام اللون الأبيض (#FFFFFF) للإطار ✅✅ */
                border: 2px solid white;
            }

                .auth-buttons-group .btn-login:hover {
                    border-color: var(--accent-yellow); /* يتحول إلى الذهبي عند المرور */
                    color: var(--accent-yellow);
                    transform: translateY(-2px);
                }

            .auth-buttons-group .btn-signup:hover {
                box-shadow: 0 6px 15px rgba(255, 204, 0, 0.6);
                transform: translateY(-2px);
            }

        /* ====================================================== */
        /* ✅ START: تنسيقات صفحة تسجيل الدخول الجديدة (#my-orders-auth-page) */
        /* ====================================================== */

        /* 1. ضبط الحاوية الرئيسية لتكون في المنتصف بأبعاد محددة */
        #my-orders-auth-page {
            /* تقليل أقصى عرض و إضافة هوامش علوية لتحسين المظهر */
            max-width: 500px !important;
            padding: 40px 25px !important;
            margin-top: 80px !important;
        }

        /* 2. تنسيق مجموعة الأزرار (لضمان العرض المتساوي والمسافة) */
        .auth-buttons-group {
            display: flex;
            flex-direction: column;
            gap: 12px; /* مسافة بين الأزرار */
            width: 100%;
            max-width: 300px; /* عرض موحد للأزرار */
            margin: 20px auto 0 auto; /* توسيط المجموعة */
        }

            /* 3. تنسيق الأزرار المشتركة (الحجم والحواف) */
            .auth-buttons-group .auth-action-btn {
                width: 100%;
                padding: 12px 0;
                font-size: 16px;
                font-weight: bold;
                border-radius: 8px;
                transition: all 0.3s ease;
            }

            /* 4. تنسيق زر التسجيل (الأساسي - الأصفر) */
            .auth-buttons-group .btn-signup {
                background-color: var(--accent-yellow);
                color: var(--black-text);
                border: none;
                box-shadow: 0 4px 10px rgba(255, 204, 0, 0.4);
            }

            .auth-buttons-group .btn-login {
                background: transparent;
                color: var(--light-text);
                /* ✅✅ التعديل هنا: استخدام اللون الأبيض (#FFFFFF) للإطار ✅✅ */
                border: 2px solid white;
            }

                .auth-buttons-group .btn-login:hover {
                    border-color: var(--accent-yellow); /* يتحول إلى الذهبي عند المرور */
                    color: var(--accent-yellow);
                    transform: translateY(-2px);
                }

            .auth-buttons-group .btn-signup:hover {
                box-shadow: 0 6px 15px rgba(255, 204, 0, 0.6);
                transform: translateY(-2px);
            }
        /* ====================================================== */
        /* ✅ END: تنسيقات صفحة تسجيل الدخول الجديدة */
        /* ====================================================== */

        #user-account-btn {
            /* المسافة دي هتدفع الزر بالكامل مسافة 20 بيكسل لليسار */
            margin-right: 20px !important;
            /* لو حابب تزود المسافة اكتر خليها 30px مثلاً */
        }

            /* عشان نلغي أي تضارب محتمل من أكواد قديمة */
            #user-account-btn span {
                margin-right: 0 !important;
                margin-left: 0 !important;
            }

        /* تنسيق صفحة البروفايل */
        .current-avatar-wrapper {
            position: relative;
            display: inline-block;
            width: 120px;
            height: 120px;
        }
        /* ====================================================== */
        /* 7. تنسيق صور البروفايل (Avatar Selection) */
        /* ====================================================== */

        .current-avatar-wrapper {
            position: relative;
            display: inline-block;
            width: 120px;
            height: 120px;
            margin-bottom: 15px;
        }

        .profile-avatar-large {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
            border: 3px solid var(--accent-yellow);
            box-shadow: 0 0 20px rgba(255, 204, 0, 0.4);
        }

        .edit-avatar-icon {
            position: absolute;
            bottom: 5px;
            right: 5px;
            background: var(--main-purple);
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border: 2px solid white;
            font-size: 14px;
            transition: transform 0.2s;
        }

            .edit-avatar-icon:hover {
                transform: scale(1.1);
                background-color: var(--accent-yellow);
                color: black;
            }

        .avatars-grid {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            padding: 10px;
        }

            .avatars-grid img {
                width: 60px;
                height: 60px;
                border-radius: 50%;
                cursor: pointer;
                border: 3px solid transparent;
                transition: all 0.3s;
            }

        #profile-settings-page {
            position: relative !important; /* ضروري جداً */
            overflow: hidden !important; /* عشان البلور مايخرجش بره الحواف */
            border-radius: 24px !important;
            border: 1px solid rgba(255, 255, 255, 0.15) !important;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.6) !important;
            padding: 40px 30px !important;
            background: transparent !important; /* خلينا الخلفية شفافة عشان الصورة اللي ورا تبان */
            z-index: 1; /* عشان نضمن انه فوق أي حاجة تانية */
        }

            /* 2. ده الكود المسؤول عن الصورة والبلور (بيتحط في طبقة ورا الكلام) */
            #profile-settings-page::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                z-index: -1; /* أهم سطر: بيرجع الصورة ورا الكلام */
                /* الصورة وطبقة تغميق خفيفة */
                background-image: linear-gradient(rgba(20, 10, 30, 0.4), rgba(20, 10, 30, 0.4)), url('./images/my-keys-bg.png') !important;
                background-size: cover !important;
                background-position: center !important;
                /* سحر البلور */
                filter: blur(20px) !important; /* زود أو قلل الرقم براحتك */
                transform: scale(1.1); /* تكبير بسيط عشان حواف البلور متبقاش بيضا */
            }

        .avatars-grid img:hover {
            transform: scale(1.15);
            border-color: var(--accent-yellow);
            box-shadow: 0 0 15px rgba(255, 204, 0, 0.5);
        }

        /* تنسيق خاص بصفحة طلباتي عشان تظهر بشكل سليم */
        #my-orders-page {
            margin-top: 100px !important; /* عشان تنزل تحت الناف بار */
            margin-bottom: 50px !important; /* مسافة فوق الفوتر */
            min-height: 60vh; /* عشان الفوتر ميعلاش لفوق لو مفيش طلبات */
            width: 90%;
            max-width: 800px; /* عرض مناسب للكروت */
            margin-left: auto;
            margin-right: auto;
            display: none; /* مخفية افتراضياً */
            flex-direction: column;
        }

        /* تغيير خلفية قسم الطلبات وتسجيل الدخول */
        /* 1. صفحة "تسجيل الدخول" (فيها الصورة) */
        #my-orders-auth-page {
            /* ✅ الصورة هنا */
            background-image: linear-gradient(rgba(20, 10, 30, 0.85), rgba(20, 10, 30, 0.85)), url('./images/mcberlinsohayl.png') !important;
            background-size: cover !important;
            background-position: center !important;
            background-color: transparent !important;
            /* تنسيقات الشكل */
            margin-top: 0 !important;
            padding-top: 40px !important; /* مساحة من فوق */
            border: 1px solid #8e6abf !important;
            border-radius: 12px;
        }

        #my-orders-page {
            /* 🛑 هنا غير اسم الصورة لاسم الصورة الجديدة اللي انت عايزها */
            background-image: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/PUT_YOUR_NEW_IMAGE_HERE.png') !important;
            /* خصائص العرض (كاملة وفي المنتصف) */
            background-size: contain !important;
            background-attachment: fixed !important;
            background-repeat: no-repeat !important;
            background-position: center !important;
            background-color: #1a1a2e !important; /* لون الخلفية للفراغات */
            /* تنسيقات الشكل */
            margin-top: 0 !important;
            padding-top: 0 !important;
            border: 1px solid #8e6abf !important;
            border-radius: 12px;
            min-height: 500px;
        }

        #my-orders-auth-page {
            /* 1. إلغاء الهامش العلوي المبالغ فيه (لو كان هناك هامش كبير في كود آخر) */
            margin-top: 0 !important;
            /* 2. ✅✅ السطر الحاسم: إضافة حشو علوي لضمان نزول الصفحة تحت الناف بار الثابت */
            padding-top: 70px !important;
            /* 3. الإبقاء على التوسيط الأفقي */
            margin-left: auto !important;
            margin-right: auto !important;
        }

        /* تنسيق كارت الطلب في صفحة طلباتي */
        /* 1. تنسيق البطاقة الأساسي (نظيف كما هو) */
        .order-history-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

            /* 2. تأثير التحويم (Hover - سواد ناعم وجلو أبيض) */
            .order-history-card:hover {
                /* 🛑 إحساس السواد والعمق: خلفية داكنة شفافة */
                background: rgba(0, 0, 0, 0.25) !important;
                /* الحفاظ على الإطار بلون أبيض واضح */
                border-color: rgba(255, 255, 255, 0.8) !important;
                /* رفع الكارد للأعلى */
                transform: translateY(-5px);
                /* ✅ الجلو الأبيض الناعم (Soft White Glow) */
                box-shadow: 0 5px 20px rgba(0, 0, 0, 0.6), /* ظل عميق (Deep Shadow) */
                0 0 10px rgba(255, 255, 255, 0.4); /* توهج أبيض ناعم وخفيف */
                /* التأكد من عدم وجود أي فلاتر قديمة */
                filter: none !important;
            }

        .order-card-img {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            object-fit: cover;
        }

        .order-card-info {
            flex-grow: 1;
            text-align: right;
        }

        .order-card-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }

        .order-id {
            font-size: 12px;
            color: #aaa;
            font-family: monospace;
        }

        .order-date {
            font-size: 12px;
            color: #aaa;
        }

        .order-product-name {
            font-size: 16px;
            font-weight: bold;
            color: white;
            margin: 0;
        }

        .order-card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 8px;
        }

        .order-price {
            color: var(--accent-yellow);
            font-weight: bold;
        }

        .order-status {
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: bold;
        }

        .status-pending {
            background: rgba(255, 165, 0, 0.2);
            color: orange;
        }

        .status-completed {
            background: rgba(40, 167, 69, 0.2);
            color: #28a745;
        }

        .status-rejected {
            background: rgba(220, 53, 69, 0.2);
            color: #dc3545;
        }

        /* ========================================= */
        /* 🎩 KAITO KID EASTER EGG STYLES */
        /* ========================================= */

        /* 1. تصميم بطاقة كايتو كيد */
        #kaito-card {
            position: fixed;
            z-index: 9999; /* فوق كل شيء */
            width: 60px; /* حجم تقريبي لنفس حجم اللوجو */
            height: auto;
            display: none; /* مخفي في البداية */
            /* تأثير الظل عشان يبان طاير */
            filter: drop-shadow(5px 10px 10px rgba(0,0,0,0.5));
            /* الحركة الانتقالية للطيران */
            transition: all 1s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

            #kaito-card img {
                width: 100%;
                height: auto;
                background-color: white; /* خلفية بيضاء للكارت */
                padding: 2px;
                border-radius: 4px;
                border: 1px solid #ccc;
            }

        /* تنسيق الدخان */
        #kid-smoke {
            position: fixed;
            z-index: 10001;
            width: 120px;
            height: 120px;
            background: radial-gradient(circle, #ffffff 0%, transparent 70%);
            border-radius: 50%;
            opacity: 0;
            pointer-events: none;
            transform: scale(0.1);
        }

        /* حركة انفجار الدخان */
        @keyframes smokePoof {
            0% {
                opacity: 0.9;
                transform: scale(0.1);
            }

            50% {
                opacity: 0.7;
                transform: scale(1.5);
            }

            100% {
                opacity: 0;
                transform: scale(2.5);
            }
        }

        .poof-effect {
            animation: smokePoof 0.6s ease-out forwards;
        }


        /* ========================================= */
        /* 🕵️‍♂️ SOHAYL'S DIARY (NEW) STYLES */
        /* ========================================= */

        #sohayl-diary-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            /* خلفية مختلفة للتمييز - مثلاً لون فاتح أو سكري */
            background-color: #f8f8e8;
            z-index: 99999;
            display: none; /* مخفية بشكل افتراضي */
            overflow-y: auto;
            padding: 50px;
            box-sizing: border-box;
            direction: rtl;
            text-align: right;
            cursor: text;
            /* خط هادئ يناسب مذكراتك */
            font-family: 'Tajawal', sans-serif;
            color: #303030;
        }

        /* 1. ستايل الأكواد المخفية */
        .hidden-sohayl-line {
            /* لون النص مطابق للخلفية */
            color: #f8f8e8 !important;
            display: block;
            font-weight: bold;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 2.5;
        }

        /* 2. ستايل التظليل (Highlighting) للكشف عن النص المخفي */
        #sohayl-diary-overlay ::selection {
            /* لون تظليل مختلف عن مذكرة إيتاكورا (أصفر قوي مثلاً) */
            background-color: #ffcc00 !important;
            color: #000000 !important;
        }

        /* دعم متصفح فايرفوكس */
        #sohayl-diary-overlay ::-moz-selection {
            background-color: #ffcc00 !important;
            color: #000000 !important;
        }

        /* 3. تنسيق زر الإغلاق ليتناسب مع الخلفية الفاتحة */
        #sohayl-diary-overlay .close-diary-btn {
            color: #000000;
        }


        /* ========================================= */
        /* ✅ إصلاح النافذة المنبثقة في وضع التقلص */
        /* ========================================= */

        /* -------------------------------------------------------------------------- */
        /* القاعدة الموحدة للكمبيوتر (Default body.aptx-child-mode)                   */
        /* التصغير: scale(0.60) / التعويض: scale(1 / 0.60 = 1.666)                   */
        /* -------------------------------------------------------------------------- */
        body.aptx-child-mode {
            /* غيرنا الوقت من 2s لـ 8s (ثماني ثواني كاملة) */
            transition: transform 8s cubic-bezier(0.68, -0.55, 0.27, 1.55) !important;
            /* باقي الخصائص زي ما هي */
            transform: scale(0.8);
            transform-origin: center top;
            border: 15px solid #111;
            border-radius: 30px;
            box-shadow: 0 0 100px rgba(0,0,0,0.9);
            margin: 20px auto;
            height: 100vh;
            overflow-y: auto !important;
            overflow-x: hidden;
            background-color: #1e1132;
            width: 90%;
        }

        @media (max-width: 768px) {
            body.aptx-child-mode .modal {
                transform: translate(-50%, -50%) scale(1.176) !important;
            }
        }
        /* -------------------------------------------------------------------------- */
        /* القاعدة الموحدة للإصلاح العام لطبقات Fixed & Overlay                       */
        /* -------------------------------------------------------------------------- */
        body.aptx-child-mode .overlay,
        body.aptx-child-mode .modal {
            /* نضمن أن هذه العناصر تعود لتثبت على الـ Viewport الحقيقي */
            position: fixed !important;
            perspective: none !important;
            transform-style: flat !important;
            transform-origin: center !important;
        }

        body.aptx-child-mode .overlay {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100vw !important; /* عرض الشاشة بالكامل */
            height: 100vh !important; /* ارتفاع الشاشة بالكامل */
            transform: none !important; /* إلغاء أي تصغير موروث */
            z-index: 2147483646 !important;
        }

        @media (max-width: 768px) {
            body.aptx-child-mode {
                transform: scale(0.85) !important;
                transform-origin: center center;
            }

                /* ✅ تعويض التصغير في الموبايل (1 / 0.85 ≈ 1.176) */
                body.aptx-child-mode .modal {
                    transform: translate(-50%, -50%) scale(1.176) !important;
                }
        }
        /* 3. منع التمرير في الخلفية تماماً عند فتح النافذة في هذا الوضع */
        body.aptx-child-mode.modal-open {
            overflow: hidden !important;
        }

        /* 4. التأكد من أن نافذة الدفع (paymentModal) تظهر في أعلى طبقة */
        #paymentModal.is-visible {
            z-index: 9999999 !important;
        }

        /* ========================================= */
        /* 📱 APTX 4869: Responsive Shrink Mode */
        /* (هذه القواعد تبقى كما هي - مسؤولة عن تصغير الجسم) */
        /* ========================================= */
        body.aptx-child-mode {
            /* ❌ هذا السطر يسبب المشكلة - الحل هو جعله ينشئ سياق تكديس جديد */
            /* ✅ الحل: إضافة خاصية 'isolation: isolate' */
            isolation: isolate;
            transform: scale(0.60) !important;
            transform-origin: top center;
            /* ✅ تم تعديل زمن الانيميشن ليصبح 1.5 ثانية */
            transition: transform 1.5s ease-in-out;
            border: 15px solid #000;
            border-radius: 25px;
            box-shadow: 0 0 100px rgba(0,0,0,0.9), 0 0 0 1000px #100a1c;
            height: 100vh;
            width: 100%;
            overflow-y: scroll !important;
            overflow-x: hidden;
            background-color: #1e1132;
            pointer-events: auto !important;
            cursor: auto !important;
        }

        @media (max-width: 768px) {
            body.aptx-child-mode {
                /* ✅ تصغير للموبايل إلى 85% */
                transform: scale(0.85) !important;
                transform-origin: center center;
                border: 5px solid #000;
                border-radius: 15px;
                height: 98vh;
                margin-top: 1vh;
            }

                /* -------------------------------------------------------------------------- */
                /* ✅ تصحيح التعويض في الموبايل (1 / 0.85 = 1.176) */
                /* -------------------------------------------------------------------------- */
                body.aptx-child-mode .modal {
                    /* ✅ هذا هو مفتاح الحل: position: fixed يعمل الآن بالنسبة لشاشة العرض */
                    position: fixed !important;
                    top: 50% !important;
                    left: 50% !important;
                    /* ✅ تعويض التصغير (1 / 0.60 ≈ 1.66) لتبدو بحجمها الطبيعي */
                    transform: translate(-50%, -50%) scale(1.66) !important;
                    /* خصائص لضمان عدم وجود أي تشويه موروث */
                    z-index: 2147483647 !important;
                    transform-style: flat !important;
                    transform-origin: center !important;
                    /* إعدادات الحجم والسكرول */
                    width: 90% !important;
                    max-width: 600px !important;
                    max-height: 85vh !important;
                    overflow-y: auto !important;
                }
        }

        /* 3. إصلاح العناصر المثبتة (Navbar & Cart) */
        body.aptx-child-mode #navbar,
        body.aptx-child-mode .fixed-cart-button,
        body.aptx-child-mode #theme-toggle-btn,
        body.aptx-child-mode #mobile-nav {
            position: absolute !important;
            width: 100%;
            left: 0;
            right: 0;
        }

        /* ================================================== */
        /* 1. Global Highlight (لباقي الموقع بالكامل)         */
        /* ================================================== */
        ::selection {
            /* لون بنفسجي فاتح جداً وشفاف */
            background-color: rgba(200, 180, 255, 0.5);
            color: inherit; /* يحافظ على لون النص الأصلي */
        }

        ::-moz-selection {
            background-color: rgba(200, 180, 255, 0.5);
            color: inherit;
        }

        /* ================================================== */
        /* 2. Itakura Diary Highlight (خاص بصفحة المذكرات فقط) */
        /* ================================================== */

        /* نستخدم ID المذكرات لضمان أن هذا اللون يظهر هناك فقط */
        #itakura-diary-overlay ::selection {
            background-color: #3B6298 !important; /* ⬅️ الأزرق الخاص بالأنمي */
            color: #ffffff !important; /* النص يتحول للأبيض */
        }

        /* دعم متصفح فايرفوكس للمذكرات */
        #itakura-diary-overlay ::-moz-selection {
            background-color: #3B6298 !important;
            color: #ffffff !important;
        }
        /* ========================================= */
        /* 🛒 إصلاح زر كود الخصم (مربع ثابت) */
        /* ========================================= */

        /* 1. الحاوية: تضمن أن العناصر بجانب بعضها في اليسار */
        #cartModal .discount-code-container {
            display: flex !important;
            flex-wrap: nowrap !important;
            align-items: center !important;
            justify-content: flex-end !important; /* محاذاة لليسار في RTL */
            gap: 8px !important;
            width: 100% !important;
        }

            /* 2. حقل الإدخال: يأخذ مساحة مناسبة */
            #cartModal .discount-code-container input {
                width: 140px !important; /* عرض مناسب للكود */
                height: 38px !important; /* ارتفاع موحد */
                padding: 0 10px !important;
                font-size: 13px !important;
                margin: 0 !important;
                border-radius: 6px !important;
                text-align: center !important;
            }

            /* 3. الزر: مربع صغير وثابت لا ينضغط */
            #cartModal .discount-code-container button {
                width: 38px !important; /* العرض */
                height: 38px !important; /* الارتفاع (نفس حقل الإدخال) */
                min-width: 38px !important; /* ⛔ هذا السطر يمنع الانكماش */
                flex-shrink: 0 !important; /* ⛔ وهذا السطر يؤكد منع الانكماش */

                padding: 0 !important;
                margin: 0 !important;
                border-radius: 6px !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                font-size: 18px !important;
                font-weight: bold !important;
                line-height: 1 !important;
            }

        #xboxPopularGamesContainer {
            animation: none !important; /* إيقاف الحركة */
            transform: none !important; /* إلغاء التحويل */
            display: flex;
            flex-wrap: wrap !important; /* السماح للمنتجات بالنزول لسطر جديد */
            justify-content: center !important; /* توسيط المنتجات في الصفحة */
            width: 100% !important; /* العرض يملأ المساحة المتاحة فقط */
        }

            /* إلغاء التوقف عند الهوفر لأنه لم يعد يتحرك أصلاً */
            #xboxPopularGamesContainer:hover {
                animation-play-state: running;
            }

        /* ========================================= */
        /* 💊 APTX 4869: Intense Poison & Shrink */
        /* ========================================= */

        /* 1. الأنيميشن القوي (فترة الألم - أول 10 ثواني) */
        @keyframes poison-pulse {
            0% {
                transform: scale(1);
                filter: sepia(0) hue-rotate(0) blur(0);
            }

            10% {
                transform: scale(1.01) translate(1px, 1px);
                filter: sepia(1) hue-rotate(-50deg) blur(2px) contrast(1.2);
            }

            20% {
                transform: scale(0.99) translate(-1px, -1px);
                filter: sepia(1) hue-rotate(-50deg) blur(4px) contrast(1.5);
            }

            30% {
                transform: scale(1.02) translate(-2px, 2px);
                filter: sepia(1) hue-rotate(-50deg) blur(6px) contrast(2);
            }

            40% {
                transform: scale(0.98) translate(2px, -2px);
                filter: sepia(1) hue-rotate(-50deg) blur(3px) contrast(1.5);
            }

            50% {
                transform: scale(1.01);
                filter: sepia(1) hue-rotate(-50deg) blur(10px) contrast(2);
            }

            100% {
                transform: scale(1);
                filter: sepia(0) hue-rotate(0) blur(0);
            }
        }

        /* كلاس التسمم (يعمل لمدة 10 ثواني) */
        body.aptx-poisoned {
            animation: poison-pulse 4s ease-in-out infinite;
            overflow: hidden; /* منع الحركة أثناء الألم */
            pointer-events: none;
        }

        /* 2. وضع الطفل (الوضع الدائم بعد التقلص) */
        body.aptx-child-mode {
            transform: scale(0.8); /* تصغير لـ 80% عشان يبقى مقروء */
            transform-origin: center top; /* التثبيت من المنتصف بالأعلى */
            transition: transform 2s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            /* إطار وتنسيق ليوحي بأنه شاشة صغيرة */
            border: 15px solid #111;
            border-radius: 30px;
            box-shadow: 0 0 100px rgba(0,0,0,0.9);
            margin: 20px auto; /* توسيط */
            /* أهم خصائص عشان السكرول يشتغل */
            height: 100vh;
            overflow-y: auto !important; /* إجبار السكرول */
            overflow-x: hidden;
            background-color: #1e1132;
            width: 90%; /* تقليل العرض شوية عشان يبان في النص */
        }

            /* ✅ إصلاح العناصر المثبتة (Navbar & Cart) عشان متبوظش */
            body.aptx-child-mode #navbar,
            body.aptx-child-mode .fixed-cart-button,
            body.aptx-child-mode #theme-toggle-btn,
            body.aptx-child-mode #mobile-nav {
                position: absolute !important; /* تتحول من fixed لـ absolute */
                width: 100%; /* عشان تفضل مالية العرض */
                top: auto;
                left: 0;
                right: 0;
            }

            /* إصلاح خاص للناف بار عشان يفضل فوق */
            body.aptx-child-mode #navbar {
                top: 0;
            }

        #aptx-overlay {
            position: fixed;
            /* نبدأ من خارج الشاشة لضمان التغطية الكاملة */
            top: -50vh;
            left: -50vw;
            /* حجم مضاعف للشاشة */
            width: 200vw;
            height: 200vh;
            background: black;
            z-index: 2147483647; /* أقصى طبقة ممكنة */
            display: none;
            opacity: 0;
            pointer-events: none;
            /* انتقال ناعم جداً للظهور والاختفاء */
            transition: opacity 3.5s cubic-bezier(0.4, 0, 0.2, 1);
            /* خدعة لضمان بقائها ثابتة بصرياً حتى لو الأب تحرك */
            transform: translate3d(0,0,0);
        }

        @keyframes blackout {
            from {
                opacity: 0.3;
            }

            to {
                opacity: 0.9;
            }
        }

        /* رسالة التحذير */
        #aptx-warning {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #ff0000;
            font-family: 'Courier New', monospace;
            font-size: 2.5rem;
            font-weight: bold;
            text-align: center;
            z-index: 200001;
            display: none;
            text-shadow: 0 0 20px black, 0 0 10px red;
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border: 2px solid red;
        }

        /* ================================================== */
        /* 2. Itakura Diary Highlight (خاص بالمذكرات فقط - أزرق) */
        /* ================================================== */

        /* نستخدم !important لضمان عدم تأثر المذكرات باللون البنفسجي العام */
        #itakura-diary-overlay .diary-paper div::selection,
        #itakura-diary-overlay .diary-paper p::selection,
        #itakura-diary-overlay .diary-paper span::selection,
        #itakura-diary-overlay .diary-paper .hidden-line::selection {
            background-color: #3B6298 !important; /* ⬅️ الأزرق الخاص بالأنمي */
            color: #ffffff !important; /* النص يتحول للأبيض */
        }

        /* دعم متصفح فايرفوكس للمذكرات */
        #itakura-diary-overlay .diary-paper div::-moz-selection,
        #itakura-diary-overlay .diary-paper p::-moz-selection,
        #itakura-diary-overlay .diary-paper span::-moz-selection,
        #itakura-diary-overlay .diary-paper .hidden-line::-moz-selection {
            background-color: #3B6298 !important;
            color: #ffffff !important;
        }

        /* ========================================= */
        /* 🕵️‍♂️ Itakura Diary: Anime Accurate (Japanese) */
        /* ========================================= */

        #itakura-diary-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #fdfdf5; /* لون الورق الكريمي الفاتح */
            z-index: 99999;
            display: none;
            overflow-y: auto;
            padding: 50px;
            box-sizing: border-box;
            direction: ltr;
            text-align: left;
            cursor: text;
        }

            #itakura-diary-overlay.active {
                display: block;
            }

        .diary-paper {
            max-width: 800px;
            margin: 0 auto;
            padding-bottom: 150px;
            /* خط ياباني يشبه الويندوز القديم */
            font-family: 'MS Gothic', 'Hiragino Kaku Gothic ProN', sans-serif;
            font-weight: 500;
            font-size: 20px;
            line-height: 1.8;
        }

        /* التواريخ */
        .diary-date {
            font-weight: bold;
            margin-top: 40px;
            margin-bottom: 10px;
            color: #000;
            display: block;
        }

        /* النصوص الظاهرة (التمويه - بالأسود) */
        .visible-line {
            color: #000000;
            display: block;
            margin-bottom: 5px;
        }

        /* النصوص المخفية (نفس لون الخلفية - لا تظهر إلا بالهايلايت) */
        .hidden-line {
            color: #fdfdf5; /* نفس لون الخلفية بالظبط */
            display: inline;
        }



        /* الجملة الإنجليزية في النهاية (مخفية أيضاً) */
        .english-quote {
            font-family: 'Courier New', monospace;
            font-weight: bold;
            margin-top: 20px;
            display: block;
            direction: ltr;
        }

        /* شاشة الهاكينج */
        #itakura-console-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #000000;
            z-index: 100000;
            display: none;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            font-family: 'Courier New', monospace;
            overflow: hidden;
            cursor: none;
        }

        .console-text {
            color: #fff;
            font-size: 22px;
            font-weight: bold;
            text-align: left;
            white-space: pre-wrap;
            max-width: 800px;
            padding: 20px;
        }

        .console-highlight {
            color: #ff0000;
            text-shadow: 0 0 15px #ff0000;
        }

        .blinking-cursor {
            display: inline-block;
            width: 12px;
            height: 24px;
            background-color: #fff;
            animation: blink 0.8s infinite;
        }

        @keyframes blink {
            0%, 100% {
                opacity: 1;
            }

            50% {
                opacity: 0;
            }
        }

        .close-diary-btn {
            position: fixed;
            top: 20px;
            right: 30px;
            font-size: 30px;
            color: #000;
            cursor: pointer;
            z-index: 100001;
            font-weight: bold;
        }


        /* ========================================= */
        /* ✅ START: نظام إشعارات الجيمنج المخصص 🔔 */
        /* ========================================= */
        .game-alert-box {
            position: fixed;
            top: -100px; /* مخفية في الأعلى */
            left: 50%;
            transform: translateX(-50%);
            background: rgba(20, 10, 30, 0.95); /* خلفية بنفسجي غامق جداً */
            color: #fff;
            padding: 15px 30px;
            border-radius: 12px;
            border: 2px solid #ffcc00; /* إطار أصفر */
            box-shadow: 0 0 25px rgba(255, 204, 0, 0.4); /* توهج أصفر */
            z-index: 10000; /* فوق كل شيء */
            font-family: 'Tajawal', sans-serif;
            font-weight: bold;
            font-size: 16px;
            text-align: center;
            min-width: 300px;
            transition: top 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55); /* حركة بوب ناعمة */
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

            /* تنسيق الأيقونة داخل الرسالة */
            .game-alert-box i {
                font-size: 20px;
                color: #ffcc00;
            }

            /* كلاس لتفعيل الظهور */
            .game-alert-box.show {
                top: 30px; /* تنزل لمستوى الرؤية */
            }

            /* ألوان مختلفة حسب نوع الرسالة (اختياري) */
            .game-alert-box.error {
                border-color: #ff4757;
                box-shadow: 0 0 25px rgba(255, 71, 87, 0.4);
            }

            .game-alert-box.success {
                border-color: #2ecc71;
                box-shadow: 0 0 25px rgba(46, 204, 113, 0.4);
            }
        /* ========================================= */
        /* END: نظام إشعارات الجيمنج */
        /* ========================================= */

        /* ========================================= */
        /* ✅ START: Hacker Mode (Matrix Effect) 🕵️‍♂️ */
        /* ========================================= */
        body.hacker-mode {
            background: black !important;
            color: #00ff00 !important;
            font-family: 'Courier New', monospace !important;
            background-image: none !important; /* إلغاء خلفيات الصور */
        }

            /* تلوين كل العناصر بالأخضر والأسود */
            body.hacker-mode * {
                background-color: black !important;
                background-image: none !important;
                color: #00ff00 !important;
                border-color: #00ff00 !important;
                box-shadow: none !important;
                text-shadow: none !important;
            }

            /* تعديل الصور لتبدو خضراء (اختياري) */
            body.hacker-mode img {
                filter: grayscale(100%) sepia(100%) hue-rotate(50deg) saturate(500%) !important;
            }
        /* ========================================= */
        /* END: Hacker Mode */
        /* ========================================= */

        @media (max-width: 768px) {

            /* 1. إخفاء جملة "السعر يبدأ من" داخل كروت الاشتراكات */
            .subscription-item .sub-price {
                display: none !important;
            }

            /* 2. إخفاء زر "أضف إلى السلة" (أيقونة السلة) داخل كروت الاشتراكات */
            .subscription-item .add-to-cart-btn {
                display: none !important;
            }

            /* 3. تحسين شكل زر "اشتري الآن" ليأخذ العرض الكامل بعد اختفاء زر السلة */
            .subscription-item .buy-btn {
                width: 100% !important;
                margin: 0 !important;
            }
        }
        /* ====================================================== */
        /* ✅ تحسين وتنسيق كروت الإيجار (CO-OP) للموبايل */
        /* ====================================================== */

        @media (max-width: 768px) {

            /* 1. تحويل الكارت ليصبح عمودي (الصورة فوق والتفاصيل تحت) */
            .rental-card {
                flex-direction: column !important;
                height: auto !important;
                min-height: auto !important;
                width: 100% !important;
                max-width: 100% !important;
                margin-bottom: 20px !important;
            }

            /* 2. ضبط الصورة لتأخذ العرض الكامل وارتفاع مناسب */
            .rental-card-image {
                width: 100% !important;
                flex: none !important; /* إلغاء التمدد */
                height: 180px !important; /* ارتفاع ثابت للصورة */
                border-left: none !important;
                border-bottom: 1px solid rgba(166, 123, 91, 0.4) !important; /* خط فاصل تحت الصورة */
            }

            /* 3. ضبط شارة "ختمها الآن" */
            .rental-badge {
                top: 10px !important;
                right: -35px !important;
                font-size: 12px !important;
                padding: 4px 35px !important;
            }

            /* 4. تنسيق قسم التفاصيل (النص والأزرار) */
            .rental-card-details {
                text-align: center !important; /* توسيط الكلام */
                padding: 15px !important;
            }

                .rental-card-details h3 {
                    font-size: 1.3rem !important;
                    margin-bottom: 5px !important;
                }

                .rental-card-details p {
                    font-size: 0.9rem !important;
                    margin-bottom: 15px !important;
                    min-height: auto !important; /* إلغاء الطول الثابت للوصف */
                }

            /* 5. تنظيم أزرار المدة لتكون 2 في كل صف */
            .duration-selector-buttons {
                display: grid !important;
                grid-template-columns: 1fr 1fr; /* عمودين متساويين */
                gap: 8px !important;
                justify-content: center !important;
            }

            .duration-btn {
                width: 100% !important;
                font-size: 13px !important;
                padding: 8px 5px !important;
                margin: 0 !important;
            }

            /* 6. ضبط السعر وزر الإضافة للسلة */
            .rental-price-display {
                font-size: 1.4rem !important;
                margin: 15px 0 10px 0 !important;
            }

            .rental-card .buy-btn {
                width: 100% !important;
                padding: 12px !important;
                font-size: 16px !important;
            }

            /* 7. التأكد من ظهور قسم التحكم في الأسفل */
            .rental-controls {
                padding-top: 0 !important;
                margin-top: 0 !important;
            }
        }
        /* ====================================================== */
        /* ✅ تحسين كروت Steam Gift Cards للموبايل (شبكة ثنائية) */
        /* ====================================================== */

        @media (max-width: 768px) {

            /* 1. تحويل الحاوية إلى شبكة (Grid) من عمودين */
            #steamGiftCardsHomeContainer,
            #steamGiftCardsPageContainer {
                display: grid !important;
                grid-template-columns: 1fr 1fr !important; /* عمودين متساويين */
                gap: 10px !important; /* مسافة صغيرة بين الكروت */
                justify-content: center !important;
            }

                /* 2. ضبط أبعاد الكارت ليكون مرناً */
                #steamGiftCardsHomeContainer .product-item,
                #steamGiftCardsPageContainer .product-item {
                    width: 100% !important; /* يملأ العمود الخاص به */
                    min-width: 0 !important; /* منع التمدد الزائد */
                    margin: 0 !important;
                    padding: 8px !important; /* تقليل الحشو الداخلي */
                    min-height: auto !important; /* الارتفاع حسب المحتوى */
                }

                /* 3. تصغير ارتفاع الصورة لتناسب الكارت الصغير */
                #steamGiftCardsHomeContainer .product-image-wrapper,
                #steamGiftCardsPageContainer .product-image-wrapper {
                    height: 90px !important; /* ارتفاع مناسب للموبايل */
                    margin-bottom: 5px !important;
                }

                /* 4. ضبط حجم الخطوط (العنوان والسعر) */
                #steamGiftCardsHomeContainer h3,
                #steamGiftCardsPageContainer h3 {
                    font-size: 13px !important;
                    min-height: 25px !important; /* مسافة أمان للعنوان */
                    margin: 5px 0 !important;
                }

                #steamGiftCardsHomeContainer .product-price,
                #steamGiftCardsPageContainer .product-price {
                    font-size: 14px !important;
                    margin-bottom: 5px !important;
                }

                /* 5. تحسين الأزرار (إخفاء زر السلة الصغير وجعل زر الشراء يملأ العرض) */
                #steamGiftCardsHomeContainer .add-to-cart-btn,
                #steamGiftCardsPageContainer .add-to-cart-btn {
                    display: none !important; /* إخفاء زر السلة لتوفير مساحة */
                }

                #steamGiftCardsHomeContainer .buy-btn,
                #steamGiftCardsPageContainer .buy-btn {
                    width: 100% !important;
                    font-size: 12px !important;
                    padding: 6px !important;
                    margin-top: 0 !important;
                }

                /* 6. إخفاء أي نصوص وصفية إضافية قد تشوه الشكل */
                #steamGiftCardsHomeContainer .product-description-text,
                #steamGiftCardsPageContainer .product-description-text {
                    display: none !important;
                }
        }

        @keyframes soft-smooth-shake {
            0% {
                /* تقليل الرفع لـ -5px بدل -8px */
                transform: translateY(-5px) rotate(0deg);
            }

            25% {
                /* تقليل زاوية الدوران لـ 0.5 درجة فقط (هزة خفيفة جداً) */
                transform: translateY(-5px) rotate(0.5deg);
            }

            75% {
                transform: translateY(-5px) rotate(-0.5deg);
            }

            100% {
                transform: translateY(-5px) rotate(0deg);
            }
        }

        /* 2. التطبيق على قسم الأكثر مبيعاً */
        #gamesContainer .product-item:hover {
            /* جعلنا المدة 0.5s ليكون أبطأ وأهدأ */
            animation: soft-smooth-shake 0.5s ease-in-out infinite !important;
        }

        html {
            scroll-behavior: smooth; /* يجعل السكرول ناعم عند الضغط على الروابط */
        }



        /* تنسيق اللمعة الهادئة (Soft Glow) - النسخة المحسنة */
        .glow-text-rtl {
            /* 1. الألوان: جعلنا التدرج أوسع قليلاً (30% - 70%) لتكون اللمعة أنعم وأكثر واقعية */
            background: linear-gradient(to left, #e6e6e6 30%, #ffffff 50%, #e6e6e6 70%);
            background-size: 200% auto;
            /* 2. قص الخلفية على النص */
            color: transparent; /* لضمان الشفافية في كل المتصفحات */
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            /* 3. التوهج: ناعم وهادئ */
            filter: drop-shadow(0 0 2px rgba(255, 255, 255, 0.5));
            /* 4. إعدادات الحركة */
            animation: glow-move 3s linear infinite;
            display: inline-block;
            font-weight: bold;
            /* تحسين الأداء */
            will-change: background-position;
        }

        /* 1. إعداد اللوجو ليكون ناعم في الحركة */
        #navbar .logo-area img {
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94); /* حركة ناعمة جداً */
            filter: drop-shadow(0 0 0 rgba(255, 255, 255, 0)); /* بداية بدون توهج */
            cursor: pointer;
            /* هذا السطر يمنع التفاعل مع المساحات الفارغة حول الصورة */
            pointer-events: auto;
        }

        /* 2. تعريف حركة "النبض الأبيض" الهادئة */
        @keyframes distinct-white-glow {
            0% {
                filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.6));
                transform: scale(1.08);
            }

            50% {
                /* التوهج يزيد في المنتصف */
                filter: drop-shadow(0 0 20px rgba(255, 255, 255, 1));
                transform: scale(1.12);
            }

            100% {
                filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.6));
                transform: scale(1.08);
            }
        }

        /* 3. التشغيل فقط عند لمس "الصورة" نفسها */
        #navbar .logo-area img:hover {
            /* تشغيل الأنيميشن */
            animation: distinct-white-glow 2s infinite ease-in-out;
        }
        /* تعريف الحركة (من اليمين لليسار) */
        @keyframes glow-move {
            0% {
                background-position: 200% center; /* تبدأ من أقصى اليمين */
            }

            100% {
                background-position: -200% center; /* تنتهي في أقصى اليسار */
            }
        }
        /* ====================================================== */
        /* ✅ START: تعديل توهج خيارات الاشتراك (بنفسجي ثابت) */
        /* ====================================================== */

        /* 1. هذا الكود يبقى كما هو (الكارت في وضعه الطبيعي) */
        .subscription-option-card {
            background-image: linear-gradient(135deg, #2c1a40, #1a2a40);
            border: 2px solid #8e6abf; /* الإطار البنفسجي الأساسي */
            border-radius: 8px;
            padding: 12px;
            text-align: center;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: none;
            animation: none;
        }

            /* 2. (لا تغيير) تنسيق النصوص الداخلية */
            .subscription-option-card .period {
                display: block;
                font-size: 16px;
                color: var(--white-text);
                transition: color 0.3s ease;
            }

            .subscription-option-card .price {
                display: block;
                font-size: 14px;
                color: var(--accent-yellow);
                margin-top: 5px;
                transition: color 0.3s ease;
            }

        /* 3. ✅ التعديل الأهم: التوهج البنفسجي عند الـ Hover (بدلاً من RGB) */
        .subscription-option-label:hover .subscription-option-card {
            transform: translateY(-3px);
            /* استبدال الأنيميشن بتوهج بنفسجي ثابت */
            border-color: #cda1ff; /* إطار بنفسجي فاتح */
            box-shadow: 0 0 20px rgba(170, 100, 255, 0.7); /* توهج بنفسجي */
            animation: none; /* إلغاء حركة RGB القديمة */
        }

        /* 4. (لا تغيير) حالة الاختيار (Checked) - إطار أصفر بدون توهج */
        .subscription-option-label input[type="radio"]:checked + .subscription-option-card {
            border-color: var(--accent-yellow);
            box-shadow: none;
            animation: none;
        }

        /* 5. ✅ التعديل الثاني: حالة الاختيار + الـ Hover في نفس الوقت */
        .subscription-option-label:hover input[type="radio"]:checked + .subscription-option-card {
            /* نحافظ على الإطار الأصفر (لأنه مختار) */
            border-color: var(--accent-yellow);
            /* نضيف التوهج البنفسجي (لأنه hover) */
            box-shadow: 0 0 20px rgba(170, 100, 255, 0.7);
            animation: none; /* إلغاء حركة RGB */
        }

        /* 6. (لا تغيير) تغيير لون السعر عند الاختيار */
        .subscription-option-label input[type="radio"]:checked + .subscription-option-card .price {
            color: #ffffff;
        }

        /* ====================================================== */
        /* ✅ END: تعديل توهج خيارات الاشتراك */
        /* ====================================================== */

        /* هذا الكود يبقى كما هو إذا كان موجوداً لديك */
        .dropdown-logo {
            display: inline-block;
            vertical-align: middle;
            width: 16px;
            height: 16px;
            margin-right: 5px;
            fill: currentColor;
        }



        /* ====================================================== */
        /* ✅ START: تصميم اختيارات نوع الموقع (Website Options) ✅ */
        /* ====================================================== */

        .site-type-grid {
            display: grid;
            grid-template-columns: 1fr 1fr; /* عمودين متساويين */
            gap: 15px;
            width: 100%;
        }

        .site-type-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            /* 💡 التعديل هنا: تقليل الـ padding من 15px 10px إلى 12px 8px */
            padding: 12px 8px;
            border-radius: 10px;
            border: 2px solid #8e6abf;
            background-color: rgba(255, 255, 255, 0.05);
            color: var(--white-text);
            font-weight: bold;
            /* 💡 التعديل هنا: تقليل حجم الخط من 14px إلى 13px */
            font-size: 13px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            /* 💡 التعديل هنا: تقليل الـ min-height من 100px إلى 90px */
            min-height: 90px;
        }

            .site-type-option:hover {
                transform: translateY(-5px);
                border-color: var(--accent-yellow);
                box-shadow: 0 0 15px rgba(255, 204, 0, 0.5);
            }

            /* تغيير لون عند التحديد أو الضغط */
            .site-type-option:active {
                background-color: #3c1870;
                transform: scale(0.98);
                box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
            }

            /* تنسيق الخيار المخصص (الأصغر والمستطيل) */
            .site-type-option.custom-order-type {
                grid-column: 1 / span 2; /* يمتد على عمودين */
                max-width: 60%; /* ليصبح مستطيل وأصغر أفقياً */
                justify-self: center; /* يتوسط في شبكة الـ grid */
                /* 💡 التعديل هنا: تقليل الـ padding ليناسب التنسيق الجديد */
                padding: 8px 15px;
                margin-top: 10px;
                font-size: 13px;
                min-height: auto;
            }

                .site-type-option.custom-order-type svg {
                    /* 💡 التعديل هنا: تقليل حجم أيقونة SVG الخاصة بالخيار المخصص */
                    width: 25px;
                    height: 25px;
                }

                .site-type-option.custom-order-type small {
                    font-size: 11px;
                }

            .site-type-option svg {
                /* 💡 التعديل هنا: تقليل المسافة أسفل الأيقونة */
                margin-bottom: 5px;
                color: currentColor;
                /* 💡 التعديل هنا: تصغير حجم أيقونات SVG لباقي الخيارات */
                width: 25px;
                height: 25px;
            }

            .site-type-option:hover svg {
                color: var(--accent-yellow);
            }

        /* ====================================================== */
        /* ✅ END: تنسيق أيقونات SVG داخل الأزرار الجديدة ✅ */
        /* ====================================================== */

        /* توحيد تنسيق الزر داخل الـ overlay ليكون أكبر */
        #developing .offer-overlay .offer-order-btn {
            font-size: 16px;
            padding: 12px 30px;
        }

        /* ====================================================== */
        /* ✅ START: توسيط نص اختيار طريقة الدفع */
        /* ====================================================== */

        /* هذا الكود يستهدف النص داخل زر اختيار الدفع،
                            يمنحه العرض الكامل، ويقوم بتوسيط النص بداخله.
                          */
        .custom-select-selected span {
            width: 100%;
            text-align: center;
        }

        /* ====================================================== */
        /* ✅ END: توسيط نص اختيار طريقة الدفع */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅ START: التوهج البنفسجي (خلف الصورة) */
        /* ====================================================== */

        /* 1. (التوهج الخارجي) الظل الخفيف حول الكارت */
        .product-item:hover,
        .subscription-item:hover {
            transform: translateY(-8px);
            /* 💡 التعديل هنا: تقليل الظل الخارجي لجعله أخف وأقل انتشارًا */
            /* القيمة القديمة: 0 10px 25px rgba(170, 100, 255, 0.4) */
            /* القيمة الجديدة: 0 8px 15px rgba(170, 100, 255, 0.3) */
            box-shadow: 0 8px 40px rgba(170, 100, 255, 0.3); /* توهج أقل عمقًا وأكثر نعومة */
        }

        /* 2. (التوهج الداخلي) إضافة عنصر التوهج الداخلي (خلف الصورة) */
        .product-item::after,
        .subscription-item::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient( circle at center, rgba(170, 100, 255, 0.3) 0%, /* بنفسجي (30% شفافية) في المنتصف */
            rgba(170, 100, 255, 0.0) 70% /* شفاف تماماً في الأطراف */
            );
            border-radius: 12px;
            opacity: 0;
            transition: opacity 0.4s ease-in-out;
            /* ✅✅ التعديل الأهم: وضع التوهج خلف الصورة (z-index: 0) ✅✅ */
            /* الصورة في الكود الأصلي z-index: 1 */
            z-index: 0;
            pointer-events: none;
        }

        /* 3. إظهار التوهج الداخلي عند مرور الماوس */
        .product-item:hover::after,
        .subscription-item:hover::after {
            opacity: 1;
        }

        /* 4. (استثناءات) إلغاء هذا التوهج من الكروت المخصصة */
        /* هذا يمنع التوهج البنفسجي من الظهور على كروت ستيم وكود وإكسبوكس... إلخ */
        #all-cod-games-container .product-item::after,
        #steamGiftCardsHomeContainer .product-item::after,
        #steamGiftCardsPageContainer .product-item::after,
        #xboxGiftCardsContainer .product-item::after,
        #xboxPopularGamesContainer .product-item::after,
        #psn-gift-cards-container .product-item::after,
        .ps-plus-card.subscription-item::after {
            background: none !important; /* إلغاء الخلفية الشعاعية */
        }

        /* 5. (استثناءات) إلغاء التوهج الخارجي البنفسجي من الكروت المخصصة */
        .ps-plus-card.subscription-item:hover {
            box-shadow: 0 10px 25px rgba(0, 112, 209, 0.5) !important; /* إبقاء التوهج الأزرق الخاص بها */
            animation: none !important;
        }
        /* ====================================================== */
        /* ✅ END: التوهج البنفسجي (خلف الصورة) */
        /* ====================================================== */



        /* ====================================================== */
        /* ✅ START: تنسيق زر اختيار العملة في نافذة Xbox */
        /* ====================================================== */

        /* 1. تعديل الحاوية لتقبل الحقل والزر */
        #xbox-price-wrapper {
            padding-right: 15px; /* الحفاظ على مسافة للأيقونة اليمنى */
            padding-left: 8px; /* إضافة مسافة للزر الجديد على اليسار */
            gap: 8px; /* مسافة بسيطة بين الحقل والزر */
        }

            /* 2. جعل حقل الإدخال يملأ المساحة المتبقية */
            #xbox-price-wrapper input {
                flex-grow: 1; /* هذا هو الأهم: يجعل الحقل يتمدد */
                width: auto; /* إلغاء العرض الثابت */
            }

        /* 3. تنسيق زر اختيار العملة الجديد */
        #xboxGameCurrency {
            flex-shrink: 0; /* منع الزر من الانكماش */
            width: 70px; /* عرض ثابت للزر */
            padding: 8px 5px; /* تقليل الحشو ليتناسب */
            font-size: 14px;
            font-weight: bold;
            background-color: var(--main-purple); /* لون بنفسجي غامق */
            color: var(--accent-yellow); /* لون أصفر */
            border: 1px solid var(--border-color);
            border-radius: 6px;
            margin-top: 0; /* إلغاء أي هوامش افتراضية */
            cursor: pointer;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            text-align: center; /* توسيط النص (EGP/USD) */
        }

            #xboxGameCurrency:focus {
                outline: none;
                border-color: var(--accent-yellow);
                box-shadow: 0 0 8px rgba(255, 204, 0, 0.5);
            }

        /* ====================================================== */
        /* ✅ END: تنسيق زر اختيار العملة في نافذة Xbox */
        /* ====================================================== */

        /* =================================================================== */
        /* ✅ START: [الكود الموحد والنهائي] لجميع تنسيقات الموبايل والتابلت ✅ */
        /* =================================================================== */

        /* --- 1. تعريف شريط التنقل السفلي (للموبايل) --- */
        /* (يتم تعريفه هنا ليصبح متاحًا) */
        #mobile-nav {
            display: none; /* مخفي على الكمبيوتر */
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: linear-gradient(145deg, #1d1033, #0b0714);
            border-top: 1px solid var(--border-color);
            box-shadow: 0 -2px 15px rgba(0, 0, 0, 0.4);
            z-index: 1999;
            align-items: center;
            justify-content: space-around;
        }

        @media (max-width: 768px) {
            /* 💡 الأهم: إيقاف تأثير اللمعان التفاعلي على كل الكروت */
            .product-item::before,
            .subscription-item::before,
            .service-offer-card::before,
            .rental-card::before {
                /* يجعل التوهج يظل مخفيًا ولا يظهر عند حركة الإصبع */
                opacity: 0 !important;
                background: none !important;
                /* نلغي أي انبعاث دائري */
                content: none !important;
            }
        }

        .mobile-nav-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: var(--light-text);
            text-decoration: none;
            font-size: 11px;
            font-weight: bold;
            flex-grow: 1;
            height: 100%;
            opacity: 0.7;
            transition: opacity 0.2s, color 0.2s;
            position: relative; /* لوضع رقم السلة */
        }

        @media (max-width: 768px) {
            /* يستهدف الفقرات التي تحمل الكلاس 'hide-on-mobile' ويخفيها */
            .calculator-card .hide-on-mobile {
                display: none !important;
            }
        }



        .mobile-nav-btn:hover,
        .mobile-nav-btn.active {
            color: var(--accent-yellow);
            opacity: 1;
        }

        .mobile-nav-btn svg {
            width: 24px;
            height: 24px;
            margin-bottom: 2px;
        }

        .mobile-nav-btn .cart-count {
            position: absolute;
            top: 5px;
            right: 20px;
            background-color: red;
            color: white;
            border-radius: 50%;
            padding: 2px 6px;
            font-size: 11px;
            border: 1px solid white;
        }

        /* --- 2. تنسيقات الشاشات المتوسطة (التابلت) --- */
        @media (max-width: 992px) {
            /* 2.1. تعديل الشريط العلوي (Navbar) - مع السيرش بار */
            #navbar {
                flex-direction: row;
                flex-wrap: wrap;
                align-items: center;
                justify-content: space-between;
                padding: 10px 20px;
                height: auto;
            }

                #navbar .logo-area {
                    order: 1;
                }

            .navbar-search-container {
                display: flex !important; /* إظهار السيرش بار */
                order: 2; /* وضعه بعد اللوجو */
                flex-grow: 1; /* جعله يأخذ المساحة المتبقية */
                margin: 0 15px; /* هوامش ليفصله */
            }

            .navbar-search-input {
                width: 100% !important; /* جعل حقل الإدخال يملأ الحاوية */
            }

            #navbar .support-button {
                order: 3;
                display: none; /* إخفاء زر الدعم العلوي */
            }

            @media (max-width: 768px) {

                /* يستهدف كل المنتجات التي لديها هذا الكلاس لإخفاء الوصف القصير */
                .product-item .product-description-text,
                .subscription-item .product-description-text,
                .product-item p:has(.product-description-text) {
                    display: none !important;
                }

                .subscription-item .sub-content p.sub-description {
                    display: none !important;
                }
            }

            #navbar .nav-middle-section {
                margin-top: 15px;
                order: 4; /* الروابط تنزل السطر الثاني */
                width: 100%;
                flex-wrap: wrap;
                justify-content: center;
                flex-grow: 1;
                gap: 15px 20px;
            }

            body {
                padding-top: 70px;
            }

            /* 2.2. تعديل تخطيط الأقسام المعقدة */
            .product-main-view,
            .ps-grid-container,
            .payment-layout,
            #discord-calculator-card {
                flex-direction: column;
                align-items: center;
            }

                #discord-calculator-card .card-icon {
                    margin-top: -50px;
                    width: 220px;
                    height: 220px;
                }

            /* 2.3. تعديل حجم الخطوط الرئيسية */
            h1, #productPageTitle {
                font-size: 2rem !important;
            }

            h2 {
                font-size: 1.6rem !important;
            }

            /* 2.4. تعديل عرض كروت الخدمات */
            .service-offer-card,
            .custom-order-card {
                width: calc(50% - 30px);
                min-width: 300px;
            }
        }


        /* --- 3. تنسيقات الشاشات الصغيرة (الموبايل) --- */
        @media (max-width: 768px) {

            /* 3.1. إصلاحات عامة للموبايل */
            .glass-card {
                margin: 15px;
                padding: 15px;
            }

            /* 3.2. (الأهم) إصلاح النوافذ المنبثقة (Modals) */
            .modal {
                width: 95% !important;
                max-width: 95% !important;
                max-height: 90vh !important; /* 90% من ارتفاع الشاشة */
                padding: 15px !important;
                box-sizing: border-box !important;
            }

                .modal .modal-body {
                    overflow-y: auto !important; /* ✅ إضافة سكرول (شريط تمرير) عمودي عند الحاجة */
                    overflow-x: hidden !important; /* منع السكرول الأفقي */
                    flex-grow: 1 !important;
                    padding: 10px !important;
                    display: flex !important;
                    flex-direction: column !important;
                }

            /* 3.3. (الأهم) وضع منتجين جنب بعض */
            .products-container {
                display: grid !important;
                grid-template-columns: 1fr 1fr !important; /* إنشاء عمودين متساويين */
                gap: 15px;
            }

            /* توحيد شكل جميع الكروت لتناسب الشبكة الجديدة */
            .product-item,
            .subscription-item,
            .rental-card,
            .psn-gift-card-item,
            .service-offer-card,
            .custom-order-card {
                width: 100% !important;
                min-width: unset !important;
                height: auto !important;
                margin: 0 !important;
            }

            /* تعديل خاص لكروت CoD */
            #all-cod-games-container .product-item {
                width: 100% !important;
                aspect-ratio: 2 / 3;
                height: auto !important;
            }

            /* 3.4. تصغير الخطوط والأزرار */
            .product-item h3, .subscription-item h3 {
                font-size: 14px !important;
                min-height: 40px;
            }

            .product-item p, .subscription-item p, .product-description-text {
                font-size: 12px !important;
            }

            .product-item .buy-btn, .subscription-item .buy-btn {
                font-size: 13px !important;
                padding: 8px 10px !important;
            }

            h1, #productPageTitle {
                font-size: 1.8rem !important;
            }

            h2 {
                font-size: 1.5rem !important;
            }

            /* 3.5. ضغط نافذة الدفع */
            #paymentModal .payment-header-container {
                margin-bottom: 15px !important;
                flex-direction: column !important;
                gap: 8px !important;
            }

            #vodafoneDetails .qr-code-container {
                padding: 10px !important;
                gap: 10px !important;
                flex-direction: column-reverse !important;
            }

            #vodafoneDetails .qr-text-content p {
                margin: 5px 0 !important;
            }

            #vodafoneForm .input-wrapper {
                margin: 0 auto 8px auto !important;
            }

            #vodafoneForm .button-container {
                gap: 5px !important;
            }

            #vodafoneForm .discount-code-container {
                margin-top: 5px !important;
            }

            /* 3.6. إصلاح سكرول السلة */
            #cartModal .modal-body {
                height: calc(90vh - 100px) !important;
            }

            #cartItemsContainer {
                flex-grow: 1 !important;
                overflow-y: auto !important;
                padding-right: 10px !important;
                margin-right: -10px !important;
            }

            /* 3.7. تفعيل شريط التنقل السفلي */
            #mobile-nav {
                display: flex; /* إظهار الشريط السفلي */
            }

            .fixed-cart-button,
            #theme-toggle-btn {
                display: none !important; /* إخفاء الأزرار العائمة القديمة */
            }

            body {
                /* 60px (الشريط السفلي) + 10px (هامش أمان) */
                padding-bottom: 70px !important;
            }

            #backToTopBtn {
                bottom: 80px; /* 60px (الشريط) + 20px (هامش) */
                left: 20px;
                right: auto;
            }

            /* 3.8. تحسين مساحة النقر */
            .toggle-discount {
                padding: 10px 15px;
                display: inline-block;
            }
        }

        /* --- 4. تنسيقات الشاشات الصغيرة جدًا --- */
        @media (max-width: 400px) {
            .products-container {
                gap: 10px;
            }

            .product-item h3, .subscription-item h3 {
                font-size: 12px !important;
            }

            .product-item p, .subscription-item p, .product-description-text {
                font-size: 11px !important;
            }
        }
        /* =================================================================== */
        /* ✅ END: [الكود الموحد والنهائي] لجميع تنسيقات الموبايل والتابلت ✅ */
        /* =================================================================== */

        /* ====================================================== */
        /* ✅ START: إضافة إطار أزرق متوهج لقسم ستيم بالكامل */
        /* ====================================================== */

        @keyframes steam-section-glow {
            0% {
                border-color: rgba(0, 192, 255, 0.6);
                box-shadow: 0 0 15px rgba(0, 192, 255, 0.3);
            }

            50% {
                border-color: rgba(0, 192, 255, 1);
                box-shadow: 0 0 25px rgba(0, 192, 255, 0.6), 0 0 10px rgba(0, 192, 255, 0.4) inset;
            }

            100% {
                border-color: rgba(0, 192, 255, 0.6);
                box-shadow: 0 0 15px rgba(0, 192, 255, 0.3);
            }
        }

        #steam-gift-cards-section {
            /* (الخصائص الحالية للخلفية تبقى كما هي) */
            background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('./images/steamwallpaper.png');
            background-size: cover;
            background-position: center;
            position: relative;
            z-index: 1;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(6px);
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            /* --- ✅✅ التعديلات الجديدة هنا ✅✅ --- */
            /* 1. إرجاع الحواف الدائرية */
            border-radius: 15px;
            /* 2. إضافة الإطار الأزرق */
            border: 1px solid #00c0ff;
            /* 3. إضافة حركة التوهج الأزرق */
            animation: steam-section-glow 3s infinite linear;
        }

        /* ====================================================== */
        /* ✅ END: إضافة إطار أزرق متوهج لقسم ستيم */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅ START: Steam Gift Cards Blue Theme (FINAL v4) */
        /* ====================================================== */

        /* 1. استهداف الحاويات المخصصة لبطاقات ستيم لضمان تطبيق الثيم الأزرق */
        #steamGiftCardsHomeContainer .product-item,
        #steamGiftCardsPageContainer .product-item {
            background: linear-gradient(145deg, #1A283B, #101822) !important;
            box-shadow: 0 6px 20px rgba(0, 102, 255, 0.4), 0 0 12px rgba(0, 102, 255, 0.5) inset !important;
            border: 1px solid rgba(0, 102, 255, 0.6) !important;
        }

            /* 2. تأثير اللمعان الأزرق عند مرور الماوس */
            #steamGiftCardsHomeContainer .product-item::before,
            #steamGiftCardsPageContainer .product-item::before {
                background: radial-gradient(circle at var(--mouse-x) var(--mouse-y), rgba(0, 102, 255, 0.6) 0%, transparent 75%) !important;
            }

            /* 3. وميض الصورة الأزرق */
            #steamGiftCardsHomeContainer .product-item .product-image-wrapper::before,
            #steamGiftCardsPageContainer .product-item .product-image-wrapper::before {
                background: linear-gradient(90deg, transparent, rgba(0, 102, 255, 0.4) 30%, transparent 70%) !important;
            }

            /* 4. لون العنوان (أزرق سماوي) */
            #steamGiftCardsHomeContainer .product-item h3,
            #steamGiftCardsPageContainer .product-item h3 {
                color: #87CEEB !important;
                text-shadow: 0 0 7px rgba(135, 206, 235, 0.8) !important;
            }

            /* 5. لون نصوص السعر (كلمة "السعر" و "EGP") */
            #steamGiftCardsHomeContainer .product-item p,
            #steamGiftCardsPageContainer .product-item p {
                color: #ccc !important;
                font-size: 13px !important; /* تصغير الخط العادي */
            }

            /* 6. لون أرقام السعر (جعله أزرق ساطع) */
            #steamGiftCardsHomeContainer .product-item .product-price,
            #steamGiftCardsPageContainer .product-item .product-price {
                color: #00BFFF !important;
                font-size: 1.1em !important; /* تكبير الأرقام نسبةً للخط الصغير */
                font-weight: bold;
                text-shadow: 0 0 6px rgba(0, 191, 255, 0.8) !important;
            }

            /* 7. لون العملة (تصغيرها قليلاً) */
            #steamGiftCardsHomeContainer .product-item .currency-symbol,
            #steamGiftCardsPageContainer .product-item .currency-symbol {
                font-size: 0.9em !important;
                opacity: 0.8 !important;
            }

            /* 8. أزرار "أضف إلى السلة" (الخضراء) -> تحويلها للأزرق */
            #steamGiftCardsHomeContainer .product-item .add-to-cart-text-btn,
            #steamGiftCardsPageContainer .product-item .add-to-cart-text-btn {
                background-color: #007ACC !important;
                border-color: #005A9C !important;
                box-shadow: 0 5px 15px rgba(0, 90, 156, 0.6) !important;
                color: #E0F2F7 !important;
            }

                #steamGiftCardsHomeContainer .product-item .add-to-cart-text-btn:hover,
                #steamGiftCardsPageContainer .product-item .add-to-cart-text-btn:hover {
                    background-color: #008DDF !important;
                    border-color: #006BBF !important;
                    box-shadow: 0 8px 20px rgba(0, 107, 191, 0.8) !important;
                    transform: translateY(-4px) !important;
                }

            /* 9. أزرار "شراء الآن" (الخضراء) -> تحويلها للأزرق */
            #steamGiftCardsHomeContainer .product-item .buy-btn,
            #steamGiftCardsPageContainer .product-item .buy-btn {
                background: linear-gradient(145deg, #007ACC, #005A9C) !important;
                border: 1px solid #005A9C !important;
                box-shadow: 0 5px 15px rgba(0, 90, 156, 0.6) !important;
                color: #E0F2F7 !important;
            }

                #steamGiftCardsHomeContainer .product-item .buy-btn:hover,
                #steamGiftCardsPageContainer .product-item .buy-btn:hover {
                    background: linear-gradient(145deg, #008DDF, #006BBF) !important;
                    box-shadow: 0 8px 20px rgba(0, 107, 191, 0.8) !important;
                    transform: translateY(-4px) !important;
                }

            /* 10. تأثير الهوفر على الكارت (توهج أزرق) */
            #steamGiftCardsHomeContainer .product-item:hover,
            #steamGiftCardsPageContainer .product-item:hover {
                transform: translateY(-8px) !important;
                box-shadow: 0 15px 35px rgba(0, 102, 255, 0.6) !important;
            }

        /* ====================================================== */
        /* ✅ END: Steam Gift Cards Blue Theme */
        /* ====================================================== */

        /* ==================================== */
        /* Steam Offer Cards Theme     */
        /* ==================================== */
        .product-item[data-platform="steam"],
        .product-item[data-category="steam-popular"] {
            /* الخلفية الرئيسية للكارت */
            background: linear-gradient(145deg, #1A283B, #101822);
            box-shadow: 0 5px 15px rgba(0, 102, 255, 0.2), 0 0 10px rgba(0, 102, 255, 0.3) inset; /* ظل أزرق وداخلي */
            border: 1px solid rgba(0, 102, 255, 0.4); /* إطار أزرق فاتح */
        }

            .product-item[data-platform="steam"]::before,
            .product-item[data-category="steam-popular"]::before {
                /* تأثير اللمعان الأزرق عند مرور الماوس */
                background: radial-gradient(circle at var(--mouse-x) var(--mouse-y), rgba(0, 102, 255, 0.4) 0%, transparent 70%);
            }

            .product-item[data-platform="steam"] .product-image-container::before,
            .product-item[data-category="steam-popular"] .product-image-container::before {
                /* تأثير الوميض الأزرق على الصورة */
                background: linear-gradient(90deg, transparent, rgba(0, 102, 255, 0.2) 30%, transparent 70%);
            }

            .product-item[data-platform="steam"] .product-title,
            .product-item[data-category="steam-popular"] .product-title {
                color: #87CEEB; /* لون أزرق فاتح للعناوين */
                text-shadow: 0 0 5px rgba(135, 206, 235, 0.5); /* ظل نص أزرق */
            }

            .product-item[data-platform="steam"] .product-price,
            .product-item[data-category="steam-popular"] .product-price {
                color: #4CAF50; /* يمكنك الاحتفاظ بالأخضر للسعر إذا أردت، أو تغيره لأزرق مثل #00BFFF */
                text-shadow: 0 0 4px rgba(76, 175, 80, 0.6);
            }

            /* أزرار ستيم - إضافة للسلة / شراء الآن */
            .product-item[data-platform="steam"] .add-to-cart-button,
            .product-item[data-category="steam-popular"] .buy-now-button {
                background: linear-gradient(145deg, #007ACC, #005A9C); /* تدرج أزرق داكن */
                border: 1px solid #005A9C;
                box-shadow: 0 4px 10px rgba(0, 90, 156, 0.4);
                color: #E0F2F7; /* نص أبيض مائل للزرقة */
            }

                .product-item[data-platform="steam"] .add-to-cart-button:hover,
                .product-item[data-category="steam-popular"] .buy-now-button:hover {
                    background: linear-gradient(145deg, #008DDF, #006BBF);
                    box-shadow: 0 6px 15px rgba(0, 107, 191, 0.6);
                    transform: translateY(-2px);
                }

                .product-item[data-platform="steam"] .add-to-cart-button:active,
                .product-item[data-category="steam-popular"] .buy-now-button:active {
                    transform: scale(0.96);
                    box-shadow: 0 2px 5px rgba(0, 90, 156, 0.4);
                }

            /* شعار ستيم في الزاوية */
            .product-item[data-platform="steam"] .product-header .platform-icon img,
            .product-item[data-category="steam-popular"] .product-header .platform-icon img {
                filter: drop-shadow(0 0 8px rgba(0, 102, 255, 0.8)); /* ظل أزرق للشعار */
            }

            /* التوهج حول الكارت عند الإشارة بالماوس (إذا كان الكارت يتحرك بالـ transform) */
            .product-item[data-platform="steam"]:hover {
                transform: translateY(-5px); /* حركة خفيفة للأعلى */
                box-shadow: 0 10px 25px rgba(0, 102, 255, 0.4); /* ظل أكبر وأزرق */
            }

            /* إذا كان هناك عنصر توهج إضافي (glow-border) */
            .product-item[data-platform="steam"] .glow-border::before,
            .product-item[data-category="steam-popular"] .glow-border::before {
                background: conic-gradient(from var(--angle), transparent, #007ACC, #005A9C, #007ACC, transparent);
            }

            .product-item[data-platform="steam"] .platform-badge,
            .product-item[data-category="steam-popular"] .platform-badge {
                background-color: #007ACC; /* لون الخلفية لشارة المنصة */
                box-shadow: 0 0 8px rgba(0, 102, 255, 0.6);
            }

        #xbox-gifting-section .calculator-card .calculator-card-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            /* ✅ هنا التعديل: زودنا الشفافية من 0.8 إلى 0.9 عشان تبقى أغمق */
            background-image: linear-gradient(rgba(10, 25, 10, 0.9), rgba(0, 0, 0, 0.9)), url('images/image_1651dd.png');
            background-size: cover, cover;
            background-position: center, center;
            background-repeat: no-repeat, no-repeat;
            /* ده البلور اللي إنت كنت ظابطه (ممكن تقلله لو حابب) */
            filter: blur(5px);
            -webkit-filter: blur(5px);
        }

        /* ====================================================== */
        /* ✅ START: إصلاح تأثير الضغط (Active) لأزرار ستيم الزرقاء */
        /* ====================================================== */

        #steamGiftCardsHomeContainer .product-item .add-to-cart-text-btn:active,
        #steamGiftCardsPageContainer .product-item .add-to-cart-text-btn:active,
        #steamGiftCardsHomeContainer .product-item .buy-btn:active,
        #steamGiftCardsPageContainer .product-item .buy-btn:active {
            transform: scale(0.96) translateY(2px) !important;
            box-shadow: inset 0 3px 8px rgba(0, 0, 0, 0.4) !important;
            /* ✅ السطر المعدل: يغمق قليلاً جداً */
            transition: transform 0.1s ease, background 0.1s ease, box-shadow 0.1s ease !important;
        }

        /* ====================================================== */
        /* ✅ END: إصلاح تأثير الضغط (Active) */
        /* ====================================================== */

        /* ================================================================= */
        /* ✅ START: تحويل زر السلة (صورة) إلى زر نصي (كتابة) لـ Xbox */
        /* ================================================================= */

        /* --- الخطوة 1: إخفاء صورة السلة الأصلية من كل كروت الإكسبوكس --- */
        #xboxGiftCardsContainer .product-item .add-to-cart-btn img,
        #xboxPopularGamesContainer .product-item .add-to-cart-btn img {
            display: none !important;
        }

        /* --- الخطوة 2: تحويل الزر الشفاف إلى زر أخضر --- */
        /* (هذا الكود يستهدف الزر في الحاويتين) */
        #xboxGiftCardsContainer .product-item .add-to-cart-btn,
        #xboxPopularGamesContainer .product-item .add-to-cart-btn {
            background-color: #107C10 !important; /* لون الزر الأخضر */
            color: var(--white-text) !important;
            border: 2px solid #107C10 !important;
            border-radius: 8px !important; /* توحيد الحواف */
            width: auto !important; /* ليتمدد حسب النص */
            height: auto !important;
            transition: all 0.3s ease !important;
        }

        /* --- الخطوة 3: إضافة النص وتنسيقه (للكروت الرفيعة) --- */
        #xboxGiftCardsContainer .product-item .add-to-cart-btn {
            padding: 4px 8px !important; /* حجم صغير يناسب الكارت الرفيع */
        }

            #xboxGiftCardsContainer .product-item .add-to-cart-btn::after {
                content: "إضافة"; /* نص قصير يناسب الزر الصغير */
                font-size: 10px !important;
                font-weight: bold;
            }

        /* --- الخطوة 4: إضافة النص وتنسيقه (للكروت العريضة) --- */
        #xboxPopularGamesContainer .product-item .add-to-cart-btn {
            padding: 8px 10px !important; /* حجم أكبر قليلاً */
        }

            #xboxPopularGamesContainer .product-item .add-to-cart-btn::after {
                content: "إضافة للسلة"; /* نص كامل يناسب الزر العريض */
                font-size: 13px !important;
                font-weight: bold;
            }

            /* --- الخطوة 5: إضافة تأثير الـ Hover (موحد للكل) --- */
            #xboxGiftCardsContainer .product-item .add-to-cart-btn:hover,
            #xboxPopularGamesContainer .product-item .add-to-cart-btn:hover {
                background-color: #10E510 !important;
                border-color: #10E510 !important;
                box-shadow: 0 0 15px rgba(16, 229, 16, 0.6) !important;
                transform: scale(1.05); /* حركة بسيطة عند التمرير */
            }

                /* تغيير لون النص عند الـ Hover */
                #xboxGiftCardsContainer .product-item .add-to-cart-btn:hover::after,
                #xboxPopularGamesContainer .product-item .add-to-cart-btn:hover::after {
                    color: var(--black-text) !important;
                }

        /* ================================================================= */
        /* ✅ END: تحويل زر السلة إلى زر نصي */
        /* ================================================================= */

        /* ====================================================== */
        /* ✅ START: أنيميشن الحركة المستمرة لمنتجات Xbox */
        /* ====================================================== */

        @keyframes auto-scroll-rtl {
            0% {
                transform: translateX(0);
            }

            100% {
                /* 500px = (عرض المنتج 230px + المسافة 20px) * 2 */
                transform: translateX(-500px);
            }
        }

        /* 2. نحتاج إلى حاوية "أب" لإخفاء المحتوى الزائد */
        /* هذا الكود يستهدف العمود الذي يحتوي على المنتجات العريضة */
        #xbox-gifting-section .ps-grid-column:nth-child(2) {
            overflow: hidden; /* هذا السطر هو الأهم لإخفاء المنتجات الزائدة */
            position: relative; /* لضمان عمل الإخفاء بشكل سليم */
        }

        #xboxPopularGamesContainer {
            display: flex;
            flex-wrap: nowrap !important; /* منع نزول السطر */
            justify-content: flex-start !important;
            /* جعل العرض يساوي ضعف المحتوى (بعد المضاعفة بالجافاسكريبت) */
            width: max-content;
            /* تطبيق الأنيميشن */
            /* ✅ 1. تم تغيير المدة إلى 10s لتناسب المسافة القصيرة */
            /* ✅ 2. تم إضافة 'alternate' لجعلها تذهب وتعود */
            animation: auto-scroll-rtl 10s linear infinite alternate;
            /* إيقاف الحركة عند تمرير الماوس */
            animation-play-state: running;
        }

            #xboxPopularGamesContainer:hover {
                animation-play-state: paused;
            }

        /* 4. التأكد من أن الكروت الرفيعة لا تتأثر */
        #xboxGiftCardsContainer {
            justify-content: flex-start !important; /* تبدأ من اليمين كالمعتاد */
        }

        /* ====================================================== */
        /* ✅ END: أنيميشن الحركة المستمرة لمنتجات Xbox */
        /* ====================================================== */


        /* ====================================================== */
        /* ✅ START: تنظيم أزرار الدفع (Pay now هو الأكبر - عمودي) */
        /* ====================================================== */

        /* 1. الحاوية الرئيسية: نجعلها عمودية (فوق بعض) */
        .payment-actions-container {
            display: flex;
            flex-direction: column; /* <-- 1. رص العناصر فوق بعض */
            align-items: center; /* 2. توسيط الأزرار في النص */
            gap: 15px; /* 3. مسافة 15px بين الزرين */
            margin-top: 25px;
            width: 100%;
        }

            /* 2. حاوية زر البايبال (الأسود) */
            .payment-actions-container form[action*="paypal.com"] {
                flex: unset; /* <-- إلغاء أي مرونة */
                min-width: unset; /* <-- إلغاء أي عرض أدنى */
                display: inline-grid;
                justify-items: center !important;
                align-content: start;
                gap: 0.5rem;
                margin: 0;
                width: 100%; /* <-- جعل الحاوية تأخذ عرض */
                max-width: 320px; /* <-- تحديد عرض أقصى للحاوية */
            }

        /* 3. الزر الأسود (Pay now) - ليكون هو الأكبر */
        .pp-AB69NXSVUNP78 {
            width: 100% !important; /* <-- جعل الزر يملأ الحاوية بتاعته */
            min-width: unset !important;
            box-sizing: border-box;
        }

        /* 4. الزر الأزرق (لقد قمت بالدفع) - ليكون هو الأصغر */
        .paypal-confirm-btn {
            flex: unset; /* <-- إلغاء أي مرونة */
            min-width: unset; /* <-- إلغاء أي عرض أدنى */
            width: auto; /* <-- العرض على قد الكلام */
            margin-top: 0;
            box-sizing: border-box;
            /* ✅ إرجاع الحجم ليكون "أصغر" */
            height: auto;
            padding: 10px 20px; /* بادينج أصغر */
            font-size: 14px; /* خط أصغر */
            line-height: normal; /* ارتفاع سطر طبيعي */
        }

        /* ====================================================== */
        /* ✅ END: تنظيم أزرار الدفع (عمودي) */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅ START: Custom Dropdown (Payment Method) Styles */
        /* ====================================================== */

        /* 1. الحاوية الرئيسية */
        .custom-select-container {
            position: relative;
            width: 100%;
            max-width: 400px; /* عرض مناسب */
            margin: 0 auto; /* توسيط الحاوية */
            font-family: 'Tajawal', sans-serif;
            font-weight: bold;
        }

        /* 2. الزر المختار (التصميم الزجاجي) */
        .custom-select-selected {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            background-color: rgba(0, 0, 0, 0.2);
            border: 1px solid var(--main-purple);
            border-radius: 8px;
            color: var(--white-text);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        /* 3. السهم المخصص داخل الزر */
        .custom-select-arrow {
            width: 20px;
            height: 20px;
            transition: transform 0.3s ease;
        }

        /* 4. تأثير التوهج عند التمرير أو الفتح */
        .custom-select-container.open .custom-select-selected,
        .custom-select-selected:hover {
            border-color: var(--accent-yellow);
            box-shadow: 0 0 10px rgba(255, 204, 0, 0.5);
        }

        /* 5. قلب السهم عند الفتح */
        .custom-select-container.open .custom-select-arrow {
            transform: rotate(180deg);
        }

        .custom-select-options {
            display: none; /* مخفية افتراضيًا */
            position: absolute;
            top: 110%; /* تظهر أسفل الزر */
            left: 0;
            right: 0;
            /* ✅ 1. تغيير الخلفية لتكون متدرجة ومميزة (مثل الفوتر) */
            background: linear-gradient(145deg, #0b0714, #1d1033);
            border: 1px solid #8e6abf; /* <-- تغيير لون الإطار ليصبح أوضح */
            border-radius: 8px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
            z-index: 2100; /* فوق النافذة المنبثقة */
            overflow: hidden; /* لإخفاء أي زوائد */
            max-height: 200px;
        }

        /* 7. إظهار القائمة عند الفتح */
        .custom-select-container.open .custom-select-options {
            display: block;
        }

        .custom-option {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 12px 15px;
            color: var(--light-text);
            cursor: pointer;
            transition: background-color 0.2s ease, color 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;
            /* border-bottom: 1px solid rgba(255, 255, 255, 0.05); */ /* <-- ✅ امسح السطر ده */
        }


            .custom-option:hover {
                background-color: rgba(142, 106, 191, 0.1); /* ✅ خلفية بنفسجية خفيفة */
                color: #cda1ff; /* ✅ لون بنفسجي فاتح للنص */
                /* ✅ 3. إضافة التوهج (Glow) البنفسجي وحركة بسيطة */
                box-shadow: 0 0 15px rgba(142, 106, 191, 0.6); /* <-- التوهج البنفسجي */
                transform: scale(1.03); /* حركة "pop" بسيطة */
            }
            /* 10. ✅✅ ((--- هذا هو الكود الناقص ---)) ✅✅ */
            /* هذا الكود يلغي الهامش القديم من اللوجو لضمان التوسيط */
            .custom-option .payment-option-logo {
                margin-left: 0 !important;
                margin-right: 0 !important; /* لضمان التوسيط في كل اللغات */
            }
        /* ====================================================== */
        /* ✅ END: Custom Dropdown Styles */
        /* ====================================================== */

        /* ================================================================= */
        /* ✅ START: الكود النهائي والموحد لقسم XBOX بالكامل */
        /* ================================================================= */

        /* 1. تعريف حركة التوهج الأخضر */
        @keyframes smooth-xbox-glow {
            0% {
                box-shadow: 0 0 8px rgba(16, 229, 16, 0.3);
                border-color: rgba(16, 229, 16, 0.5);
            }

            50% {
                box-shadow: 0 0 16px rgba(16, 229, 16, 0.7), 0 0 25px rgba(16, 229, 16, 0.3);
                border-color: rgba(16, 229, 16, 1);
            }

            100% {
                box-shadow: 0 0 8px rgba(16, 229, 16, 0.3);
                border-color: rgba(16, 229, 16, 0.5);
            }
        }

        /* 2. تنسيق خلفية وتخطيط قسم Xbox الرئيسي */
        #xbox-gifting-section {
            background-image: linear-gradient(rgba(10, 25, 10, 0.8), rgba(0, 0, 0, 0.9)), url('./images/xbox-bg.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            border-color: #107C10;
            box-shadow: 0 0 25px rgba(16, 124, 16, 0.3);
            text-align: right !important;
        }

            /* 3. إصلاح محاذاة عمود الحاسبة مع عمود المنتجات */
            #xbox-gifting-section .ps-grid-container {
                align-items: start !important;
            }

            /* 4. تنسيق العناوين الفرعية (موحد) */
            #xbox-gifting-section .playstation-subcategory-label {
                border-bottom: 1px solid rgba(255, 255, 255, 0.2) !important;
                color: #90ee90;
                margin-top: 20px !important;
                margin-bottom: 15px !important;
            }

            /* 5. تنسيق بطاقة حاسبة Xbox (داخل القسم) */
            #xbox-gifting-section .calculator-card {
                background: linear-gradient(145deg, rgba(16, 40, 16, 0.5), rgba(0, 15, 0, 0.6));
                backdrop-filter: blur(12px);
                -webkit-backdrop-filter: blur(12px);
                border: 1px solid rgba(16, 229, 16, 0.5);
                animation: smooth-xbox-glow 2.5s infinite alternate ease-in-out;
                padding: 3px;
            }



                #xbox-gifting-section .calculator-card .calculator-card-icon {
                    filter: drop-shadow(0 0 15px rgba(16, 229, 16, 0.7));
                }

                #xbox-gifting-section .calculator-card h3 {
                    color: #90ee90;
                }

                #xbox-gifting-section .calculator-card .buy-btn {
                    background-color: #107C10;
                    color: var(--white-text);
                    border: 2px solid #107C10;
                }

                    #xbox-gifting-section .calculator-card .buy-btn:hover {
                        background-color: #10E510;
                        border-color: #10E510;
                        color: var(--black-text);
                        box-shadow: 0 0 20px rgba(16, 229, 16, 0.8);
                        transform: translateY(-3px) scale(1.05);
                    }

                #xbox-gifting-section .calculator-card:hover {
                    transform: translateY(-8px);
                    animation-name: none;
                    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5), 0 0 30px rgba(16, 229, 16, 0.6);
                    border-color: #10E510;
                }

        #xboxGiftCardsContainer .product-item {
            width: 90px !important; /* ✅✅ تم التعديل هنا: 90px */
            min-height: 160px !important;
            padding: 6px !important;
            background: linear-gradient(145deg, rgba(16, 40, 16, 0.5), rgba(0, 15, 0, 0.6)) !important;
            border: 1px solid rgba(16, 229, 16, 0.5) !important;
            animation: smooth-xbox-glow 2.5s infinite alternate ease-in-out;
        }

            #xboxGiftCardsContainer .product-item .product-image-wrapper {
                height: 70px !important;
                margin-bottom: 3px;
            }

            #xboxGiftCardsContainer .product-item h3 {
                font-size: 11px !important;
                min-height: 25px !important;
                margin-top: 3px;
                margin-bottom: 2px;
                line-height: 1.2;
            }

            #xboxGiftCardsContainer .product-item .product-description-text {
                display: none !important;
            }

            #xboxGiftCardsContainer .product-item p {
                /* (أوامر لضمان بقاء كل شيء على سطر واحد) */
                white-space: nowrap;
                display: flex;
                justify-content: center;
                align-items: baseline;
                gap: 0.3em;
                /* (تصغير حجم الخط الأساسي لكلمة "السعر" و "EGP") */
                font-size: 10px !important;
                color: #ccc;
            }

        /* 2. استهداف فقرة السعر في الكروت العريضة (ماينكرافت وجيم باس) */
        #xboxPopularGamesContainer .product-item p {
            /* (أوامر لضمان بقاء كل شيء على سطر واحد) */
            white-space: nowrap;
            display: flex;
            justify-content: center;
            align-items: baseline;
            gap: 0.3em;
            /* (تصغير حجم الخط الأساسي لكلمة "السعر" و "EGP") */
            font-size: 12px !important;
            color: #ccc;
        }

            /* 3. لا تقلق بشأن الأرقام. الكود الحالي الخاص بك سيتكفل بتكبيرها:
                             #xboxGiftCardsContainer .product-item .product-price { font-size: 11px !important; }
                             #xboxPopularGamesContainer .product-item .product-price { font-size: 14px !important; }
                          */

            /* 4. (اختياري) تعديل بسيط على العملة "EGP" لجعلها أصغر */
            #xboxGiftCardsContainer .product-item p .currency-symbol,
            #xboxPopularGamesContainer .product-item p .currency-symbol {
                font-size: 0.9em; /* تصغيرها أكثر قليلاً */
                opacity: 0.8;
                padding-top: 1px; /* لضبط المحاذاة العمودية قليلاً */
            }



        #xboxGiftCardsContainer .product-item .product-price {
            font-size: 11px !important;
            margin-top: 0px;
            margin-bottom: 3px;
        }

        #xboxGiftCardsContainer .product-item .buy-btn {
            display: none !important; /* إخفاء زر شراء الآن */
        }

        #xboxGiftCardsContainer .product-item .add-to-cart-btn img {
            width: 20px !important;
            height: 20px !important;
        }

        /* 7. تنسيق الكروت العريضة (ماينكرافت وجيم باس) */
        #xboxPopularGamesContainer .product-item {
            width: 230px !important;
            min-height: 200px !important;
            padding: 10px !important;
            background: linear-gradient(145deg, rgba(16, 40, 16, 0.5), rgba(0, 15, 0, 0.6)) !important;
            border: 1px solid rgba(16, 229, 16, 0.5) !important;
            animation: smooth-xbox-glow 2.5s infinite alternate ease-in-out;
        }

            #xboxPopularGamesContainer .product-item .product-image-wrapper {
                height: 100px !important;
            }

            #xboxPopularGamesContainer .product-item .product-description-text {
                display: none !important; /* إخفاء الوصف لحل تداخل ماينكرافت */
            }

            #xboxPopularGamesContainer .product-item h3 {
                font-size: 14px !important;
                min-height: 35px !important;
                line-height: 1.3;
            }

            #xboxPopularGamesContainer .product-item .product-price {
                font-size: 14px !important;
                margin-bottom: 5px;
            }

            #xboxPopularGamesContainer .product-item .buy-btn {
                font-size: 14px !important;
                padding: 8px 15px !important;
                background-color: #107C10;
                color: var(--white-text);
                border: 2px solid #107C10;
                /* الزر ظاهر هنا بشكل طبيعي */
            }

            #xboxPopularGamesContainer .product-item .add-to-cart-btn img {
                width: 31px !important;
                height: 31px !important;
            }

        /* 8. تنسيق نافذة حاسبة Xbox المنبثقة */
        #xboxGiftingModal h2 {
            color: #10E510;
            border: none;
            text-align: center;
        }

        #xboxFinalPriceDisplay .price-label {
            color: #ccc;
            font-size: 1.1rem;
            font-weight: bold;
            display: block;
            text-align: center;
        }

        #xboxFinalPriceDisplay .price-value {
            display: block;
            font-size: 2.2rem;
            font-weight: bold;
            color: lightgreen;
            margin-top: 5px;
            text-align: center;
        }

        #xboxGiftingModal .button-primary {
            background-color: #107C10;
            color: white;
            border: none;
            animation: none;
        }

            #xboxGiftingModal .button-primary:hover {
                background-color: #10E510;
                color: var(--black-text);
                box-shadow: 0 0 20px rgba(16, 229, 16, 0.8);
            }
        /* ================================================================= */
        /* ✅ END: الكود النهائي والموحد لقسم XBOX بالكامل */
        /* ================================================================= */

        /* ==================================================================== */
        /* ✅ START: تصغير وتوسيط عنوان حاسبة فورتنايت (نسخة مُعززة) ✅ */
        /* ==================================================================== */

        .fn-boosting-content h3 {
            display: block;
            width: 100%;
            text-align: center;
            color: var(--white-text);
            border: none;
            padding: 0;
            margin-right: 0;
            /* ✅ تم تصغير حجم الخط وإضافة !important لضمان تطبيق التعديل */
            font-size: 1rem !important;
        }

        /* ================================================================== */
        /* ✅ END: تصغير وتوسيط عنوان حاسبة فورتنايت (نسخة مُعززة) ✅ */
        /* ================================================================== */

        /* ======================================================== */
        /* ✅ START: زيادة المسافة بين حقول إدخال فورتنايت ✅ */
        /* ======================================================== */

        .fn-calculator {
            display: flex;
            justify-content: center;
            gap: 30px; /* ✅ تم زيادة المسافة هنا من 20px إلى 30px */
            margin: 30px 0;
            flex-wrap: wrap;
        }

        /* ====================================================== */
        /* ✅ END: زيادة المسافة بين حقول إدخال فورتنايت ✅ */
        /* ====================================================== */

        /* ======================================================== */
        /* ✅ START: تصغير حجم حقول إدخال لفل فورتنايت ✅ */
        /* ======================================================== */

        .level-input-group {
            flex: 1;
            min-width: 150px; /* تصغير الحد الأدنى للعرض من 200px إلى 150px */
            max-width: 180px; /* إضافة حد أقصى للعرض لمنعها من التمدد الزائد */
        }

            .level-input-group input {
                padding: 10px; /* تقليل المساحة الداخلية لجعل الحقل أقصر */
                font-size: 1.3rem; /* تصغير حجم الخط داخل الحقل */
            }

        /* ====================================================== */
        /* ✅ END: تصغير حجم حقول إدخال لفل فورتنايت ✅ */
        /* ====================================================== */

        ارفع مستواك الآن في الباتل باس!
        /* ==================================================================== */
        /* ✅ START: توسيط عنوان Fortnite Level Boosting (نسخة مُعززة) ✅ */
        /* ==================================================================== */
        .fn-boosting-title {
            /* خصائص المظهر */
            color: #00c0ff;
            font-size: 2.5rem !important;
            text-shadow: 0 0 15px rgba(0, 192, 255, 0.7);
            border: none !important;
            margin-bottom: 30px;
            direction: ltr;
            /* خصائص لفرض التوسيط بشكل كامل */
            display: block !important; /* للتأكد من أنه يأخذ السطر كاملًا */
            width: 100% !important; /* للتأكد من أنه يملأ عرض البطاقة */
            text-align: center !important; /* لتوسيط النص بداخله */
            margin-right: 0 !important; /* لإلغاء أي هوامش قديمة */
            padding-right: 0 !important; /* لإلغاء أي مسافات داخلية قديمة */
        }

        /* ================================================================== */
        /* ✅ END: توسيط عنوان Fortnite Level Boosting (نسخة مُعززة) ✅ */
        /* ================================================================== */

        /* ================================================================= */
        /* ✅ START: VALORANT BOOSTING SECTION (التعديلات الجديدة بالكامل) ✅ */
        /* ================================================================= */

        /* ✅ التعديل الأول: تعريف حركة دوران الألوان للإطار بشكل سلس */
        @keyframes animated-rgb-border {
            from {
                transform: translate(-50%, -50%) rotate(0deg);
            }

            to {
                transform: translate(-50%, -50%) rotate(360deg);
            }
        }

        /* 1. تنسيق القسم الرئيسي ليعتمد على العناصر الوهمية للإطار والخلفية */
        #valorant-boosting {
            position: relative;
            overflow: hidden;
            padding: 2px; /* مساحة بسمك الإطار */
            border-radius: 17px; /* حواف خارجية أكبر قليلاً */
            border: none; /* إزالة الإطار القديم */
            animation: none; /* إزالة حركة الألوان القديمة */
            /* الخصائص الأخرى تبقى كما هي */
            background-size: cover !important;
            background-position: center !important;
        }

            /* 2. العنصر الوهمي (::before) لإنشاء الإطار المتحرك بالألوان الداكنة */
            #valorant-boosting::before {
                content: '';
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 250%; /* حجم كبير للسماح بالدوران الكامل */
                height: 250%;
                z-index: -1; /* وضعه خلف كل شيء */
                /* تدرج لوني مخروطي (conic) بالألوان الداكنة التي طلبتها */
                background: conic-gradient( #c31432, /* أحمر داكن */
                #8A2BE2, /* بنفسجي */
                #240b36, /* بنفسجي غامق */
                #0D1B2A, /* أزرق داكن */
                #c31432 /* العودة للأحمر لإكمال الدورة */
                );
                /* تطبيق حركة الدوران السلسة التي تعطي تأثير الـ fade */
                animation: animated-rgb-border 6s linear infinite;
            }

            /* 3. العنصر الوهمي (::after) لإنشاء الخلفية الداخلية وتأثير البلور */
            #valorant-boosting::after {
                content: '';
                position: absolute;
                inset: 2px; /* تحديد سمك الإطار (2px) */
                background-image: url('./images/valorantreynass.png') !important;
                background-size: cover !important;
                background-position: center !important;
                border-radius: 15px; /* حواف داخلية */
                z-index: -1;
                /* حركة انتقالية ناعمة لتأثير البلور والتعتيم */
                transition: filter 0.5s ease-in-out;
            }

            /* ✅ التعديل الرابع: تطبيق تأثير السواد والبلور على الخلفية عند الدخول للحاسبة */
            #valorant-boosting.calculator-view-active::after {
                filter: blur(8px) brightness(0.4); /* تطبيق البلور مع تعتيم الصورة */
            }

            /* التأكد من أن محتوى القسم (الكارت) يظهر فوق كل التأثيرات */
            #valorant-boosting > * {
                position: relative;
                z-index: 1;
            }

        /* ✅ التعديل الثالث: إضافة حركة صعود للكارت عند مرور الماوس */
        #boosting-cover {
            transition: transform 0.3s ease-in-out;
        }

        #valorant-boosting:not(.calculator-view-active):hover #boosting-cover {
            transform: translateY(-10px); /* حركة للأعلى بمقدار 10 بكسل */
        }

        /* ✅ التعديل الثاني: تكبير حجم زر "ابدأ الآن" وإضافة توهج قوي عند الـ hover */
        #boosting-cover .start-boosting-btn {
            background-color: #ff4655;
            color: white;
            font-size: 18px; /* تكبير حجم الخط */
            padding: 15px 40px; /* زيادة المساحة الداخلية للزر */
            border-radius: 50px;
            border: 2px solid #ff4655;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.4);
            cursor: pointer;
        }

            #boosting-cover .start-boosting-btn:hover {
                background-color: #e6324b;
                color: #fff;
                /* توهج قوي وواضح باللون الأحمر مع لمسة بيضاء */
                box-shadow: 0 0 25px rgba(255, 70, 85, 0.8), 0 0 10px rgba(255, 255, 255, 0.3);
                transform: translateY(-5px) scale(1.05); /* حركة للأعلى مع تكبير بسيط */
            }

        /* =============================================================== */
        /* ✅ END: VALORANT BOOSTING SECTION (التعديلات الجديدة بالكامل) ✅ */
        /* =============================================================== */

        /* ✅✅ تعريف حركة ألوان RGB ثابتة وهادئة ✅✅ */
        @keyframes static-rgb-calm {
            0%, 100% {
                border-color: #c31432;
            }
            /* أحمر داكن */
            25% {
                border-color: #8A2BE2;
            }
            /* بنفسجي */
            50% {
                border-color: #240b36;
            }
            /* بنفسجي غامق */
            75% {
                border-color: #0D1B2A;
            }
            /* أزرق داكن */
        }

        /* ======================================= */
        /* ✅ START: الحل النهائي لتغيير لون البطاقات ✅ */
        /* ======================================= */

        #designs .custom-order-card {
            /* 1. التدرج اللوني الأحمر الشفاف (مع !important لضمان التطبيق) */
            background: linear-gradient(145deg, rgba(220, 53, 69, 0.25), rgba(100, 15, 25, 0.4)) !important;
            /* 2. الحفاظ على التأثير الزجاجي */
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            /* 3. تغيير لون الإطار (مع !important) */
            border: 1px solid rgba(255, 70, 85, 0.4) !important;
            /* 4. إضافة توهج خفيف باللون الأحمر عند التفاعل */
            transition: transform 0.3s, box-shadow 0.3s;
        }

            #designs .custom-order-card:hover {
                box-shadow: 0 0 25px rgba(255, 70, 85, 0.5);
                transform: translateY(-10px);
            }

        /* ======================================= */
        /* ✅ END: الحل النهائي  ✅ */
        /* ======================================= */

        #designs {
            /* الخصائص الحالية للخلفية تبقى كما هي */
            background-image: linear-gradient(rgba(30, 17, 50, 0.8), rgba(30, 17, 50, 0.8)), url('./images/my-new-gaming-bg.png');
            background-size: cover;
            background-position: center;
            backdrop-filter: none;
            -webkit-backdrop-filter: none;
            /* ✅✅ التعديلات الجديدة هنا ✅✅ */
            border-width: 2px; /* زيادة سمك الإطار قليلاً ليكون أوضح */
            border-style: solid;
            /* تطبيق الأنيميشن الخاص بالـ RGB */
            animation: rgb-outline 4s linear infinite;
        }

        /* ✅✅ START: خلفية جديدة لقسم التقييمات بالكامل ✅✅ */
        #feedback-section {
            /* 1. التدرج اللوني الغامق الجديد */
            background: linear-gradient(145deg, #0b0714, #1d1033, #0b0714);
            /* 2. تعديل الإطار ليتناسب مع الخلفية الداكنة */
            border: 1px solid #4a2f6c; /* إطار بنفسجي أغمق */
            box-shadow: 0 0 25px rgba(44, 26, 64, 0.5); /* توهج بنفسجي خفيف */
            padding-bottom: 30px !important;
        }
        /* ✅✅ END: خلفية قسم التقييمات ✅✅ */

        .comment-card {
            /* ✅✅ هذا هو التدرج اللوني الجديد ✅✅ */
            background: linear-gradient(135deg, #1d2b4a, #1a1a2a);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            /* ✅ قمنا بتغيير لون الخط الجانبي ليتناسب مع الخلفية الجديدة */
            border-right: 3px solid #0070d1; /* يمكنك تغيير هذا اللون للأزرق أو أي لون آخر */
            box-shadow: 0 4px 15px rgba(0,0,0,0.2); /* إضافة ظل خفيف لعمق التصميم */
        }

        /* ✅✅ كود لتقليل البادينج لبطاقة ألعاب بلايستيشن ✅✅ */
        #ps-games-offer-card {
            padding: 5px; /* القيمة الافتراضية كانت 10px، يمكنك تعديل هذا الرقم كما تريد */
        }
        /* ✅✅ START: خلفية قسم ألعاب بلايستيشن ✅✅ */
        #playstation-games-page {
            /* 1. مسار صورة الخلفية مع طبقة تعتيم */
            background-image: linear-gradient(rgba(10, 20, 45, 0.85), rgba(10, 20, 45, 0.85)), url('./images/playstation52253.png');
            /* 2. خصائص لجعل الخلفية تملأ الشاشة وتكون ثابتة */
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            /* 3. تحسينات إضافية للإطار ليتناسب مع هوية بلايستيشن */
            border-color: #0070d1; /* لون PlayStation الأزرق الرسمي */
            box-shadow: 0 0 25px rgba(0, 112, 209, 0.3); /* توهج أزرق خفيف */
        }
        /* ✅✅ END: خلفية قسم ألعاب بلايستيشن ✅✅ */


        /* 1. تعريف الحاوية الرئيسية كـ Grid من عمودين متساويين */
        .ps-grid-container {
            display: grid;
            /* هذا السطر هو الأهم: يقسم المساحة إلى عمودين متساويين تمامًا */
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
            align-items: stretch; /* يجعل طول العمودين متساويًا */
        }
        /* تقليل الهواش والمساحات الزائدة */
        #feedback-section {
            padding-bottom: 20px !important; /* تقليل المساحة السفلية للكارت الكبير */
        }

        .testimonials-marquee-section {
            padding: 10px 0 5px; /* تقليل المساحة حول الشريط المتحرك */
            margin-bottom: 0 !important;
        }

        /* تنسيق الكارت لضمان ظهور القلب والنصوص بشكل سليم */
        .testimonial-card-wide {
            min-width: 300px;
            max-width: 300px;
            margin-right: 20px;
            padding: 20px;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.05); /* خلفية خفيفة للكارت */
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        /* 2. تنسيق بسيط لكل عمود لضمان تمدد المحتوى */
        .ps-grid-column {
            display: flex;
            flex-direction: column;
        }

            .ps-grid-column > .products-container {
                /* flex-grow: 1; */ /* <-- ✅ اتأكد إن السطر ده ملغي أو ممسوح */
            }

        /* 3. جعل حاوية الاشتراكات قابلة للتمرير أفقيًا إذا زاد محتواها */
        #ps-plus-container {
            display: flex;
            overflow-x: auto;
            padding-bottom: 15px; /* مسافة لشريط التمرير */
            scrollbar-width: thin;
            scrollbar-color: #8e6abf var(--main-purple);
        }

            #ps-plus-container::-webkit-scrollbar {
                height: 8px;
            }

            #ps-plus-container::-webkit-scrollbar-thumb {
                background: #8e6abf;
                border-radius: 4px;
            }

        /* 4. كود لضبط العرض في شاشات الموبايل */
        @media (max-width: 768px) {
            .ps-grid-container {
                /* تحويلها إلى عمود واحد فقط في الشاشات الصغيرة */
                grid-template-columns: 1fr;
            }
        }

        /* ✅✅ END: الحل النهائي ✅✅ */

        #subscription-group {
            max-height: 35vh; /* يمكنك تعديل هذا الرقم (مثلاً 40vh) ليناسبك */
            overflow-y: auto; /* يضيف شريط تمرير رأسي عند الحاجة */
            padding: 10px 15px; /* يحسن شكل المحتوى داخل الإطار */
            margin: 20px 0; /* يضيف مسافة قبل وبعد القائمة */
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* ✅✅ START: الحل النهائي لفرض عرض متساوي للبطاقات ✅✅ */

        .playstation-flex-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            align-items: stretch; /* ✅ هذا التعديل سيجعل طول القسمين متساويًا */
            justify-content: center;
            margin-bottom: 30px;
        }

        /* هذا هو التعديل الأهم */
        .playstation-flex-item {
            /* بدلًا من flex: 1، سنعطي كل قسم عرضًا ثابتًا بالنسبة المئوية */
            flex-basis: 45%; /* كل قسم سيأخذ حوالي 45% من عرض الحاوية الرئيسية */
            min-width: 350px; /* مهم للشاشات الصغيرة */
            display: flex; /* ✅ إضافة مهمة لتنظيم المحتوى الداخلي */
            flex-direction: column; /* ✅ لجعل المحتوى ينمو لأسفل */
        }

            /* هذا الكود سيجعل حاويات المنتجات تتمدد لتملأ المساحة المتاحة */
            .playstation-flex-item .products-container {
                flex-grow: 1;
            }

        /* ✅✅ END: الحل النهائي ✅✅ */

        /* ====================================================== */
        /* ✅ START: تعريف حركة توهج الـ RGB للإطار           ✅ */
        /* ====================================================== */
        @keyframes rgb-outline {
            0% {
                border-color: #ff0000;
                box-shadow: 0 0 15px #ff0000;
            }

            16% {
                border-color: #ffff00;
                box-shadow: 0 0 15px #ffff00;
            }

            33% {
                border-color: #00ff00;
                box-shadow: 0 0 15px #00ff00;
            }

            50% {
                border-color: #00ffff;
                box-shadow: 0 0 15px #00ffff;
            }

            66% {
                border-color: #0000ff;
                box-shadow: 0 0 15px #0000ff;
            }

            83% {
                border-color: #ff00ff;
                box-shadow: 0 0 15px #ff00ff;
            }

            100% {
                border-color: #ff0000;
                box-shadow: 0 0 15px #ff0000;
            }
        }
        /* ====================================================== */
        /* ✅ END: تعريف حركة توهج الـ RGB للإطار             ✅ */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅ START: تصميم بطاقات خدمات الجيمنج (RGB & Neon)    ✅ */
        /* ====================================================== */

        /* 1. تعريف حركة دوران ألوان الإطار */
        @keyframes rotate-glow {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        #gaming-services-section .service-offer-card {
            position: relative;
            z-index: 1;
            /* ✅ الخلفية الجديدة المتدرجة */
            background: linear-gradient(145deg, #0c0c0e, #002244, #2c1a40);
            border: 2px solid transparent;
            overflow: hidden;
        }

            /* 3. إنشاء الإطار المتحرك باستخدام عنصر زائف (pseudo-element) */
            #gaming-services-section .service-offer-card::before {
                content: '';
                position: absolute;
                top: -50%;
                left: -50%;
                width: 200%;
                height: 200%;
                z-index: -1; /* وضعه خلف محتوى البطاقة */
                /* تدرج لوني مخروطي (conic) بألوان الجيمنج */
                background: conic-gradient( transparent, #00c0ff, /* أزرق سماوي */
                #ff4655, /* أحمر فالورانت */
                #39FF14, /* أخضر نيون */
                #cda1ff, /* بنفسجي فاتح */
                #00c0ff /* العودة للأزرق لإكمال الدورة */
                );
                /* تطبيق حركة الدوران */
                animation: rotate-glow 4s linear infinite;
            }

            /* ==================================================================== */
            /* ✅ START: FINAL ULTIMATE FIX for Gaming Services Hover Effect ✅ */
            /* ==================================================================== */

            /* --- 1. إعادة تعيين أي تأثيرات قديمة --- */
            #gaming-services-section .service-offer-card:hover {
                transform: translateY(-8px) !important; /* حركة الرفع فقط */
                /* ✅✅ الحل القاطع: إلغاء أي توهج ملون قديم بالقوة */
                box-shadow: 0 12px 30px rgba(0, 0, 0, 0.6) !important;
                /* ✅✅ الحل القاطع: إجبار لون الإطار على الأبيض عند التفاعل */
                border-color: #ffffff !important;
                /* إلغاء أي animations قديمة قد تسبب ألوانًا */
                animation: none !important;
            }

                /* --- 2. إعادة تعيين العنصر الزائف ::before الذي قد يكون سبب التوهج --- */
                #gaming-services-section .service-offer-card:hover::before {
                    opacity: 0 !important;
                    animation: none !important;
                }
            /* ================================================================== */
            /* ✅ END: FINAL ULTIMATE FIX for Gaming Services Hover Effect ✅ */
            /* ================================================================== */

            /* 5. جعل الزر يتفاعل مع التصميم الجديد */
            #gaming-services-section .service-offer-card button {
                border-color: #00c0ff;
                color: #00c0ff;
            }

            #gaming-services-section .service-offer-card:hover button {
                background-color: #00c0ff;
                color: #110e1a;
                box-shadow: 0 0 15px #00c0ff;
            }

        /* ====================================================== */
        /* ✅ END: تصميم بطاقات خدمات الجيمنج (RGB & Neon)      ✅ */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅ START: تصميم نظام التبويب لاشتراكات PS Plus      ✅ */
        /* ====================================================== */

        /* 1. الحاوية الرئيسية لنظام التبويب */
        #subscription-options-container.tabbed-layout {
            display: flex;
            flex-direction: column;
            width: 100%;
            gap: 15px;
        }

        /* 2. شريط الأزرار الخاص بالفئات */
        .tier-tabs {
            display: flex;
            justify-content: center;
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 50px;
            padding: 5px;
            border: 1px solid var(--main-purple);
        }

        /* 3. تصميم كل زر تبويب */
        .tier-tab-button {
            flex: 1; /* لجعل الأزرار متساوية في العرض */
            padding: 10px 15px;
            font-size: 1rem;
            font-weight: bold;
            color: var(--light-text);
            background-color: transparent;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap; /* لمنع نزول النص لسطر جديد */
        }

            /* 4. تصميم الزر النشط (الذي تم الضغط عليه) */
            .tier-tab-button.active {
                background-color: #0070d1; /* لون أزرق بلايستيشن */
                color: white;
                box-shadow: 0 0 10px rgba(0, 112, 209, 0.5);
            }

        /* 5. حاوية عرض الخيارات (المدد) */
        .tier-content-container {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        /* 6. إخفاء جميع الخيارات بشكل افتراضي */
        .tier-content {
            display: none;
            width: 100%;
            animation: fadeIn 0.4s ease;
        }

            /* 7. إظهار الخيارات الخاصة بالتبويب النشط فقط */
            .tier-content.active {
                display: block;
            }

        /* ====================================================== */
        /* ✅ END: تصميم نظام التبويب لاشتراكات PS Plus        ✅ */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅ START: PlayStation Section Styles              ✅ */
        /* ====================================================== */

        #playstation-section {
            /* 1. مسار صورة الخلفية مع فلتر تعتيم أزرق داكن */
            /* ❗ تأكد من وجود صورة باسم 'playstation-bg.jpg' في مجلد images */
            background-image: linear-gradient(rgba(10, 20, 45, 0.85), rgba(10, 20, 45, 0.85)), url('./images/playstation-bg.jpg');
            /* 2. خصائص لجعل الخلفية تملأ الشاشة وتكون ثابتة (تأثير Parallax) */
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            /* 3. خصائص الإطار والتوهج لتتناسب مع هوية بلايستيشن */
            border-color: #0070d1; /* لون PlayStation الأزرق الرسمي */
            box-shadow: 0 0 25px rgba(0, 112, 209, 0.3);
        }

        /* ====================================================== */
        /* ✅ END: PlayStation Section Styles                ✅ */
        /* ====================================================== */

        /* ================================================================= */
        /* ✅ START: PlayStation Gift Card Blue Theme (Final Corrected) ✅ */
        /* ================================================================= */

        /* استهداف كروت المنتجات الموجودة داخل قسم بطاقات الشحن تحديداً */
        #psn-gift-cards-container .product-item {
            background: linear-gradient(145deg, rgba(0, 112, 209, 0.7), rgba(10, 20, 45, 0.9)) !important;
            border-color: #0070d1 !important;
        }

            #psn-gift-cards-container .product-item:hover {
                box-shadow: 0 10px 25px rgba(0, 112, 209, 0.5) !important;
                border-color: #3a9dff !important;
                animation: none !important; /* لمنع أي حركة اهتزاز قديمة */
            }

            /* تعديل الأزرار أيضاً لتكون باللون الأزرق */
            #psn-gift-cards-container .product-item .buy-btn {
                background-color: #0070d1 !important;
                border-color: #3a9dff !important;
            }

                #psn-gift-cards-container .product-item .buy-btn:hover {
                    background-color: #00457c !important;
                    box-shadow: 0 0 15px #3a9dff !important;
                }

        /* ================================================================= */
        /* ✅ END: PlayStation Gift Card Blue Theme (Final Corrected)   ✅ */
        /* ================================================================= */

        /* ====================================================== */
        /* ✅ START: PlayStation Plus Card Blue Theme          ✅ */
        /* ====================================================== */

        .ps-plus-card {
            /* خلفية متدرجة باللون الأزرق الخاص بالبلايستيشن */
            background: linear-gradient(145deg, rgba(0, 112, 209, 0.7), rgba(10, 20, 45, 0.9)) !important;
            /* إطار أزرق */
            border-color: #0070d1 !important;
        }

            .ps-plus-card:hover {
                box-shadow: 0 10px 25px rgba(0, 112, 209, 0.5) !important;
                border-color: #3a9dff !important;
            }

            /* تعديل ألوان الأزرار لتتناسب مع الثيم الأزرق */
            .ps-plus-card .buy-btn {
                background-color: #0070d1 !important;
                color: white !important;
                border-color: #3a9dff !important;
            }

                .ps-plus-card .buy-btn:hover {
                    background-color: #00457c !important;
                    box-shadow: 0 0 15px #3a9dff !important;
                }
        /* ====================================================== */
        /* ✅ END: PlayStation Plus Card Blue Theme            ✅ */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅ START: تصغير حجم بطاقات شحن PlayStation Store     ✅ */
        /* ====================================================== */

        /* 1. استهداف البطاقات داخل حاوية PSN وتقليل حجمها الرئيسي */
        #psn-gift-cards-container .psn-gift-card-item {
            width: 145px !important;
            min-height: 250px !important;
            padding: 10px !important;
        }

            /* 2. تعديل ارتفاع حاوية الصورة بشكل متناسب */
            #psn-gift-cards-container .psn-gift-card-item .product-image-wrapper {
                height: 130px !important;
            }

            /* 3. تعديل حجم خط العنوان والحد الأدنى لارتفاعه */
            #psn-gift-cards-container .psn-gift-card-item h3 {
                font-size: 14px !important;
                min-height: 40px !important;
            }

            /* 4. تعديل حجم خط السعر */
            #psn-gift-cards-container .psn-gift-card-item p {
                font-size: 14px !important;
            }

            /* 5. تعديل حجم زر "شراء الآن" */
            #psn-gift-cards-container .psn-gift-card-item .buy-btn {
                font-size: 13px !important;
                padding: 8px 12px !important;
            }

            /* 6. تعديل حجم أيقونة السلة */
            #psn-gift-cards-container .psn-gift-card-item .add-to-cart-btn img {
                width: 30px !important;
                height: 30px !important;
            }

        /* ====================================================== */
        /* ✅ END: تصغير حجم بطاقات شحن PlayStation Store       ✅ */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅ START: PlayStation Gift Card Styles              ✅ */
        /* ====================================================== */

        .psn-gift-card-item {
            background: linear-gradient(145deg, rgba(0, 112, 209, 0.6), rgba(0, 50, 100, 0.8));
            border-color: #0070d1;
        }

            .psn-gift-card-item:hover {
                transform: translateY(-8px) scale(1.02);
                box-shadow: 0 10px 25px rgba(0, 112, 209, 0.4);
                border-color: #3a9dff;
            }

        /* ====================================================== */
        /* ✅ END: PlayStation Gift Card Styles                ✅ */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅ START: PlayStation Section Styles                ✅ */
        /* ====================================================== */

        #playstation-section {
            /* خلفية مميزة للقسم مع طبقة تعتيم زرقاء داكنة */
            background-image: linear-gradient(rgba(10, 20, 45, 0.85), rgba(10, 20, 45, 0.85)), url('./images/playstation-bg.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            border-color: #0070d1; /* لون PlayStation الأزرق الرسمي */
            box-shadow: 0 0 25px rgba(0, 112, 209, 0.3);
        }

        /* تنسيق العناوين الفرعية داخل القسم */
        .playstation-subcategory-label {
            text-align: center;
            color: #a9c0de; /* لون أزرق فاتح */
            margin-top: 30px;
            margin-bottom: 20px;
            border-bottom: 2px solid #0070d1;
            padding-bottom: 10px;
            display: inline-block;
            width: auto;
            border-right: none;
            padding-right: 0;
        }

        /* ====================================================== */
        /* ✅ END: PlayStation Section Styles                  ✅ */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅ START: Gaming Services Section Background        ✅ */
        /* ====================================================== */

        #gaming-services-section {
            /* ... خصائص الخلفية تبقى كما هي ... */
            background-image: linear-gradient(rgba(30, 17, 50, 0.85), rgba(30, 17, 50, 0.85)), url('./images/my-new-gaming-bg.png');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            /* --- ✅ التعديلات الجديدة تبدأ هنا --- */
            border-width: 2px; /* زيادة سمك الإطار قليلاً */
            border-style: solid;
            /* تطبيق الأنيميشن الذي أنشأناه */
            animation: rgb-outline 4s linear infinite;
        }

        /* ====================================================== */
        /* ✅ END: Gaming Services Section Background          ✅ */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅ START: Custom Order Discord Button Styles        ✅ */
        /* ====================================================== */

        /* 1. حاوية جديدة لتنظيم الأزرار بجانب بعضها */
        .offer-buttons-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px; /* مسافة بين الزرين */
            width: 100%;
            margin-top: 20px; /* مسافة من الأعلى */
        }

            /* 2. تعديل حجم زر "اطلب الآن" ليتناسب مع الزر الجديد */
            .offer-buttons-container .offer-order-btn {
                flex-grow: 1; /* لجعل الزر يأخذ نصف المساحة */
                margin: 0;
                padding: 12px 15px; /* تعديل الحشو ليكون متناسقًا */
                font-size: 16px;
            }

        /* 3. تصميم زر "اطلب عبر ديسكورد" الجديد */
        .offer-discord-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            flex-grow: 1; /* لجعل الزر يأخذ نصف المساحة الآخر */
            padding: 12px 15px;
            font-size: 16px;
            font-weight: bold;
            color: #ffffff;
            background-color: #5865F2; /* لون الديسكورد الرسمي */
            border-radius: 50px;
            text-decoration: none;
            transition: all 0.3s ease;
            border: 2px solid #5865F2;
        }

            .offer-discord-btn:hover {
                background-color: transparent;
                color: #5865F2;
                transform: translateY(-2px);
                box-shadow: 0 0 10px rgba(88, 101, 242, 0.7);
            }

            .offer-discord-btn img {
                width: 20px;
                height: 20px;
            }

        /* ====================================================== */
        /* ✅ END: Custom Order Discord Button Styles          ✅ */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅ START: Black Shadow for CoD Price Text           ✅ */
        /* ====================================================== */

        #all-cod-games-container .product-item p {
            /* ظل أسود ناعم وواضح لتحسين الوضوح فوق الصورة */
            text-shadow: 0px 1px 5px rgba(0, 0, 0, 0.9);
        }

        /* ====================================================== */
        /* ✅ END: Black Shadow for CoD Price Text             ✅ */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅ START: Black Stroke for CoD Price Text           ✅ */
        /* ====================================================== */

        #all-cod-games-container .product-item p {
            /* إنشاء ستروك أسود 1px باستخدام أربعة ظلال للنص */
            text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;
        }

        /* ====================================================== */
        /* ✅ END: Black Stroke for CoD Price Text             ✅ */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅ START: Stylish Price Badge Style                 ✅ */
        /* ====================================================== */

        .stylish-price-badge {
            display: inline-block; /* للسماح بتطبيق الحشو والإطار بشكل صحيح */
            padding: 8px 18px; /* مساحة داخلية حول النص */
            border-radius: 50px; /* لجعل الحواف دائرية بالكامل */
            /* التأثير الزجاجي الشفاف */
            background-color: rgba(0, 0, 0, 0.25); /* خلفية سوداء شفافة */
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            /* 1. البوردر الخفيف */
            border: 1px solid rgba(255, 255, 255, 0.15); /* إطار أبيض شفاف خفيف */
            /* تنسيق النص الداخلي */
            color: #90ee90; /* لون أخضر فاتح للسعر */
            font-weight: bold;
            font-size: 1.1rem; /* يمكنك تعديل حجم الخط حسب رغبتك */
            /* 2. الستروك الخفيف (باستخدام ظل النص) */
            text-shadow: 0px 1px 3px rgba(0, 0, 0, 0.5);
            box-shadow: 0 2px 5px rgba(0,0,0,0.2); /* ظل خفيف للبطاقة نفسها */
        }

        /* ====================================================== */
        /* ✅ END: Stylish Price Badge Style                   ✅ */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅ START: Call of Duty Page Background Style 🎖️      ✅ */
        /* ====================================================== */

        #all-cod-games {
            /* 1. مسار صورة الخلفية مع طبقة تعتيم داكنة */
            background-image: linear-gradient(rgba(10, 10, 15, 0.8), rgba(10, 10, 15, 0.8)), url('./images/cod_background.jpg');
            /* 2. خصائص لجعل الخلفية تملأ الشاشة وتكون ثابتة */
            background-size: cover;
            background-position: center;
            background-attachment: fixed; /* هذا السطر يعطي تأثير الـ Parallax */
            /* 3. تحسينات إضافية للإطار ليتناسب مع التصميم */
            border-color: #7a8d9a; /* نفس لون إطار البطاقات المعدني */
            box-shadow: 0 0 25px rgba(122, 141, 154, 0.3); /* توهج خفيف للإطار */
        }

        /* ====================================================== */
        /* ✅ END: Call of Duty Page Background Style           ✅ */
        /* ====================================================== */

        /* ================================================================= */
        /* ✅ START: Special Call of Duty Card Styles (Final Poster v2) 🎖️ ✅ */
        /* ================================================================= */

        /* 1. تعريف حركة خطوط المسح (Scanlines) تبقى كما هي */
        @keyframes scan-anim {
            0% {
                background-position: 0 0;
            }

            100% {
                background-position: 0 100%;
            }
        }

        /* 2. التصميم الجديد للبطاقة بشكل البوستر الطولي */
        #all-cod-games-container .product-item {
            width: 180px;
            height: 270px;
            padding: 0;
            border: 1px solid #7a8d9a;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: flex-end;
        }

            /* 3. جعل الصورة تملأ البطاقة بالكامل وتكون في الخلفية */
            #all-cod-games-container .product-item .product-image-wrapper {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                z-index: 1;
            }

            /* 4. إخفاء العنوان تمامًا */
            #all-cod-games-container .product-item h3 {
                display: none;
            }

            /* 5. تصميم المحتوى ليظهر فوق الصورة */
            #all-cod-games-container .product-item .product-content-overlay {
                position: relative;
                z-index: 2;
                width: 100%;
                padding: 15px 10px;
                box-sizing: border-box;
                background: transparent;
            }

            /* ✅ 1. إخفاء الوصف الأصفر بالكامل */
            #all-cod-games-container .product-item .product-description-text {
                display: none;
            }

            #all-cod-games-container .product-item .product-price {
                color: #90ee90;
                font-size: 14px;
                text-shadow: 0px 1px 4px rgba(0, 0, 0, 0.9);
            }

            #all-cod-games-container .product-item p {
                margin-bottom: 10px;
                min-height: 0;
            }

            /* ✅ 2. التصميم الجديد لزر الشراء باللون الأزرق الزجاجي */
            #all-cod-games-container .product-item .buy-btn {
                background-color: rgba(98, 125, 143, 0.5); /* لون أزرق معدني شفاف */
                backdrop-filter: blur(5px);
                -webkit-backdrop-filter: blur(5px);
                border: 1px solid rgba(159, 179, 196, 0.8);
                color: #e5e5e5;
                font-weight: bold;
                font-size: 13px;
                padding: 8px 15px;
            }

                #all-cod-games-container .product-item .buy-btn:hover {
                    background-color: rgba(122, 141, 154, 0.7);
                    border-color: #e5e5e5;
                    box-shadow: 0 0 12px rgba(159, 179, 196, 0.7); /* تأثير التوهج */
                }

            #all-cod-games-container .product-item .add-to-cart-btn img {
                width: 28px;
                height: 28px;
            }

            /* 7. تأثير خطوط المسح يبقى كما هو */
            #all-cod-games-container .product-item::after {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: repeating-linear-gradient(0deg, rgba(144, 238, 144, 0) 0px, rgba(144, 238, 144, 0.15) 1px, rgba(144, 238, 144, 0) 2px);
                opacity: 0;
                transition: opacity 0.4s ease-in-out;
                pointer-events: none;
                z-index: 3;
            }

            #all-cod-games-container .product-item:hover::after {
                opacity: 1;
                animation: scan-anim 1s linear infinite;
            }

        /* ================================================================= */
        /* ✅ END: Special Call of Duty Card Styles (Final Poster v2)       ✅ */
        /* ================================================================= */

        /* ✅ START: أيقونات جديدة لروابط الفوتر ✅ */
        .footer-link-icon {
            margin-right: 8px; /* مسافة بين النص والأيقونة في RTL */
            width: 20px; /* حجم الأيقونة */
            height: 20px;
            vertical-align: middle; /* لمحاذاة الأيقونة عموديًا مع النص */
            color: currentColor; /* لكي تأخذ الأيقونة لون النص الحالي */
        }

        html[dir="ltr"] .footer-link-icon {
            margin-right: 0;
            margin-left: 8px; /* مسافة بين النص والأيقونة في LTR */
        }
        /* ✅ END: أيقونات جديدة لروابط الفوتر ✅ */

        /* ====================================================== */
        /* ✅ START: إصلاح بلور خلفية قسم الخدمات (النسخة النهائية) ✅ */
        /* ====================================================== */

        /* الخطوة 1: تجهيز القسم الرئيسي ليكون حاوية للخلفية */
        #services-section {
            position: relative; /* مهم لوضع طبقة الخلفية */
            overflow: hidden; /* لإخفاء أطراف البلور خارج الحواف المستديرة */
            background-color: transparent !important; /* نجعل الخلفية الأساسية شفافة تمامًا */
            z-index: 1; /* لضمان أن المحتوى يظهر فوق الخلفية */
            /* --- أبقِ على هذه الخصائص كما هي --- */
            border: 1px solid #8e6abf;
            padding: 20px;
            margin: 20px;
            border-radius: 15px;
        }

            /* الخطوة 2: إنشاء طبقة الخلفية الضبابية المنفصلة */
            #services-section::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                z-index: -1; /* لوضع هذه الطبقة خلف المحتوى */
                /* خصائص صورة الخلفية */
                background-image: linear-gradient(rgba(30, 17, 50, 0.85), rgba(30, 17, 50, 0.85)), url('./images/services-background.png');
                background-size: cover;
                background-position: center;
                background-attachment: fixed;
                /* ✅ هذا هو السطر الذي يضيف تأثير البلور للخلفية فقط */
                filter: blur(5px);
                /* هذا السطر يكبر الخلفية قليلاً لمنع ظهور حواف باهتة بسبب البلور */
                transform: scale(1.1);
            }

        /* ====================================================== */
        /* ✅ END: إصلاح بلور خلفية قسم الخدمات                 ✅ */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅ START: تأثير لمعان بطاقات الباندل (إصلاح الطبقات) ✅ */
        /* ====================================================== */

        /* 1. إنشاء طبقة اللمعان فوق الصورة */
        .product-item.bundle-card .product-image-wrapper::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 50%;
            height: 100%;
            background: linear-gradient(to right, rgba(255,255,255,0) 0%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0) 100%);
            transform: translateX(-100%) skewX(-25deg);
            /* ✅✅ التعديل الرئيسي: رفع الطبقة لتظهر فوق الصورة وليس خلفها */
            z-index: 2;
        }

        /* 2. التأكد من أن الصورة نفسها في طبقة خلفية */
        .product-item.bundle-card .product-image-wrapper img {
            position: relative;
            z-index: 1;
        }

        /* 3. عند مرور الماوس، يتم تشغيل الأنيميشن (بدون تغيير) */
        .product-item.bundle-card:hover .product-image-wrapper::before {
            animation: shine-effect 0.85s ease-in-out;
        }

        /* ====================================================== */
        /* ✅ END: تأثير لمعان بطاقات الباندل (إصلاح الطبقات) ✅ */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅ START: توحيد حجم بطاقات فورتنايت وفالورانت مع مارفل ✅ */
        /* ====================================================== */

        /* 1. استهداف البطاقات وتحديد الحجم الجديد (145px) */
        #valorantPoints .product-item,
        #fortnite .product-item {
            width: 145px !important;
            min-height: 250px !important;
            padding: 10px !important;
        }

            /* 2. تعديل ارتفاع حاوية الصورة بشكل متناسب */
            #valorantPoints .product-item .product-image-wrapper,
            #fortnite .product-item .product-image-wrapper {
                height: 130px !important;
            }

            /* 3. تعديل حجم خط العنوان */
            #valorantPoints .product-item h3,
            #fortnite .product-item h3 {
                font-size: 14px !important;
                min-height: 40px !important;
            }

            /* 4. تعديل حجم خط السعر والوصف */
            #valorantPoints .product-item p,
            #fortnite .product-item p {
                font-size: 14px !important;
            }

            /* 5. تعديل حجم زر "شراء الآن" */
            #valorantPoints .product-item .buy-btn,
            #fortnite .product-item .buy-btn {
                font-size: 13px !important;
                padding: 8px 12px !important;
            }

            /* 6. تعديل حجم أيقونة السلة */
            #valorantPoints .product-item .add-to-cart-btn img,
            #fortnite .product-item .add-to-cart-btn img {
                width: 30px !important;
                height: 30px !important;
            }

        /* ====================================================== */
        /* ✅ END: توحيد حجم بطاقات فورتنايت وفالورانت مع مارفل ✅ */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅ START: تأثير النار المتطايرة (النسخة النهائية باللون البنفسجي) ✅ */
        /* ====================================================== */

        @keyframes fly-up {
            0% {
                transform: translateY(0) scale(1);
                opacity: 1;
            }

            100% {
                transform: translateY(-180px) scale(0);
                opacity: 0;
            }
        }

        /* 1. حاوية النار تكون في الطبقة الوسطى */
        .fire-particles-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
            z-index: 2;
        }

            /* 2. التنسيق المبدئي لكل شرارة مع اللون البنفسجي */
            .fire-particles-container i {
                position: absolute;
                bottom: -10px;
                /* ✅ تم تغيير اللون الأساسي إلى بنفسجي فاتح */
                background: #e0b0ff;
                border-radius: 50%;
                opacity: 0;
                animation: none;
                /* ✅ تم تغيير لون التوهج إلى درجات بنفسجية */
                box-shadow: 0 0 5px #bf00ff, 0 0 10px #9932CC;
                filter: blur(3px);
            }

        /* 3. التأكد من أن حاوية المحتوى هي الطبقة العلوية */
        .product-item .product-content-overlay {
            position: relative;
            z-index: 3;
            display: flex;
            flex-direction: column;
            align-items: center;
            flex-grow: 1;
            width: 100%;
        }

        /* 4. التأكد من أن حاوية الصورة هي الطبقة السفلية */
        .product-item .product-image-wrapper {
            position: relative;
            z-index: 1;
        }

        /* 5. تشغيل الأنيميشن عند مرور الماوس */
        .product-item.bundle-card:hover .fire-particles-container i {
            animation-name: fly-up;
            animation-timing-function: ease-out;
            animation-iteration-count: infinite;
        }

            /* 6. التوزيع العشوائي للشرارات بألوان بنفسجية مختلفة */
            .product-item.bundle-card:hover .fire-particles-container i:nth-child(1) {
                left: 20%;
                animation-delay: 0.2s;
                animation-duration: 2.5s;
                width: 4px;
                height: 4px;
            }

            .product-item.bundle-card:hover .fire-particles-container i:nth-child(2) {
                left: 80%;
                animation-delay: 0.5s;
                animation-duration: 3s;
                width: 5px;
                height: 5px;
                background: #cda1ff;
            }
            /* ✅ بنفسجي أغمق */
            .product-item.bundle-card:hover .fire-particles-container i:nth-child(3) {
                left: 50%;
                animation-delay: 0.1s;
                animation-duration: 2.2s;
                width: 3px;
                height: 3px;
            }

            .product-item.bundle-card:hover .fire-particles-container i:nth-child(4) {
                left: 30%;
                animation-delay: 0.8s;
                animation-duration: 3.5s;
                width: 6px;
                height: 6px;
            }

            .product-item.bundle-card:hover .fire-particles-container i:nth-child(5) {
                left: 70%;
                animation-delay: 1s;
                animation-duration: 2s;
                width: 4px;
                height: 4px;
                background: #a450ff;
            }
            /* ✅ بنفسجي مشبع */
            .product-item.bundle-card:hover .fire-particles-container i:nth-child(6) {
                left: 40%;
                animation-delay: 0.4s;
                animation-duration: 2.8s;
                width: 5px;
                height: 5px;
            }

            .product-item.bundle-card:hover .fire-particles-container i:nth-child(7) {
                left: 60%;
                animation-delay: 1.2s;
                animation-duration: 3.2s;
                width: 3px;
                height: 3px;
            }

            .product-item.bundle-card:hover .fire-particles-container i:nth-child(8) {
                left: 15%;
                animation-delay: 0.6s;
                animation-duration: 2.4s;
                width: 5px;
                height: 5px;
            }

            .product-item.bundle-card:hover .fire-particles-container i:nth-child(9) {
                left: 85%;
                animation-delay: 1.5s;
                animation-duration: 3.8s;
                width: 4px;
                height: 4px;
                background: #cda1ff;
            }
            /* ✅ بنفسجي أغمق */
            .product-item.bundle-card:hover .fire-particles-container i:nth-child(10) {
                left: 55%;
                animation-delay: 0.3s;
                animation-duration: 2.6s;
                width: 6px;
                height: 6px;
            }

            .product-item.bundle-card:hover .fire-particles-container i:nth-child(11) {
                left: 35%;
                animation-delay: 1.1s;
                animation-duration: 3.1s;
                width: 3px;
                height: 3px;
            }

            .product-item.bundle-card:hover .fire-particles-container i:nth-child(12) {
                left: 75%;
                animation-delay: 0.7s;
                animation-duration: 2.3s;
                width: 5px;
                height: 5px;
            }

            .product-item.bundle-card:hover .fire-particles-container i:nth-child(13) {
                left: 25%;
                animation-delay: 1.4s;
                animation-duration: 3.6s;
                width: 4px;
                height: 4px;
            }

            .product-item.bundle-card:hover .fire-particles-container i:nth-child(14) {
                left: 65%;
                animation-delay: 0.9s;
                animation-duration: 2.9s;
                width: 6px;
                height: 6px;
                background: #a450ff;
            }
            /* ✅ بنفسجي مشبع */
            .product-item.bundle-card:hover .fire-particles-container i:nth-child(15) {
                left: 45%;
                animation-delay: 1.3s;
                animation-duration: 3.3s;
                width: 3px;
                height: 3px;
            }

        /* ====================================================== */
        /* ✅ END: تأثير النار المتطايرة ✅ */
        /* ====================================================== */

        /* ✅✅ START: تأثير التوهج لكلمة "باندل" ✅✅ */
        .bundle-glow-effect {
            /* جعل النص بارزًا قليلاً */
            font-weight: bold;
            color: var(--secondary-color); /* يمكن تعديل هذا اللون ليناسب تصميمك، هذا مجرد اقتراح */
            /* تأثير الظل الذي يعطي التوهج */
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.7), /* توهج أبيض خفيف */
            0 0 10px rgba(102, 192, 244, 0.6), /* توهج أزرق متوسط */
            0 0 15px rgba(102, 192, 244, 0.5), /* توهج أزرق أقوى */
            0 0 20px rgba(102, 192, 244, 0.4); /* توهج أزرق منتشر */
            /* إضافة أنيميشن لجعله يتوهج بشكل متقطع أو متحرك */
            animation: pulse-glow 2s infinite alternate ease-in-out;
            display: inline-block; /* لضمان تطبيق الظل بشكل صحيح */
        }

        /* تعريف أنيميشن التوهج المتقطع */
        @keyframes pulse-glow {
            0% {
                text-shadow: 0 0 5px rgba(255, 255, 255, 0.7), 0 0 10px rgba(102, 192, 244, 0.6), 0 0 15px rgba(102, 192, 244, 0.5);
            }

            100% {
                text-shadow: 0 0 8px rgba(255, 255, 255, 0.8), 0 0 15px rgba(102, 192, 244, 0.7), 0 0 25px rgba(102, 192, 244, 0.6), 0 0 35px rgba(102, 192, 244, 0.5);
            }
        }
        /* ✅✅ END: تأثير التوهج لكلمة "باندل" ✅✅ */

        /* ====================================================== */
        /* ✅ START: New Offline Steam Card Styles ✅ */
        /* ====================================================== */

        /* 1. التصميم الأساسي للكارت الجديد */
        .product-item--offline {
            /* خلفية متدرجة بلون ستيم الأزرق الداكن */
            background: linear-gradient(145deg, #1b2838, #0a192f);
            /* إطار بلون أزرق سماوي مميز */
            border: 1px solid #66c0f4;
            box-shadow: 0 4px 15px rgba(102, 192, 244, 0.1); /* ظل خفيف بنفس اللون */
        }

            /* 2. تأثير الـ Hover (عند مرور الماوس) */
            .product-item--offline:hover {
                transform: translateY(-8px) scale(1.03); /* حركة رفع وتكبير بسيطة */
                border-color: #90d8f8; /* جعل الإطار أكثر إشراقًا */
                /* وهج أزرق قوي لإعطاء تأثير جذاب */
                box-shadow: 0 8px 25px rgba(102, 192, 244, 0.3), 0 0 10px rgba(102, 192, 244, 0.5);
                /* ✅ تم إضافة !important لضمان إلغاء الاهتزاز */
                animation: none !important;
            }

            /* 3. تغيير لون السعر ليتناسب مع التصميم الجديد */
            .product-item--offline .product-price {
                color: #66c0f4; /* نفس لون الإطار */
            }

            /* 4. تغيير ألوان أزرار الشراء والإضافة للسلة */
            .product-item--offline .buy-btn {
                background-color: #66c0f4;
                color: #1b2838; /* لون نص داكن ليكون واضحًا */
                border-color: #66c0f4;
            }

                .product-item--offline .buy-btn:hover {
                    background-color: #90d8f8;
                    border-color: #90d8f8;
                    box-shadow: 0 0 12px #90d8f8; /* وهج عند التمرير */
                }

            .product-item--offline .add-to-cart-btn img {
                /* تغيير لون أيقونة السلة باستخدام فلتر CSS */
                filter: brightness(0) saturate(100%) invert(80%) sepia(50%) saturate(500%) hue-rotate(170deg);
            }

            .product-item--offline .add-to-cart-btn:hover img {
                filter: brightness(0) saturate(100%) invert(100%) sepia(0%) saturate(0%) hue-rotate(0deg);
            }


        /* ====================================================== */
        /* ✅ END: New Offline Steam Card Styles ✅ */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅✅ START: Combined & Corrected Product Card Styles ✅✅ */
        /* ====================================================== */

        /* 2. تنسيق خاص ببطاقات الباندل (لتكون أفقية) */
        /* هذا الكود ينطبق فقط على البطاقات التي تحمل كلاس "bundle-card" */
        .product-item.bundle-card .product-image-wrapper {
            position: relative;
            /* النسبة الذهبية للصورة: (الارتفاع / العرض) = (833 / 1024) ≈ 0.813 */
            padding-top: 81.3%;
            overflow: hidden;
            border-radius: 8px;
            margin-bottom: 15px;
            width: 100%;
            /* Override the default square behavior */
            height: auto;
        }


            .product-item.bundle-card .product-image-wrapper img {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                object-fit: cover;
                border-radius: 8px;
                transition: transform 0.4s ease;
            }

        .product-item.bundle-card:hover .product-image-wrapper img {
            transform: scale(1.1);
        }

        /* ====================================================== */
        /* ✅✅ END: Combined & Corrected Product Card Styles ✅✅ */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅✅ START: Bundle Product Card Styles ✅✅ */
        /* ====================================================== */
        /* تنسيق خاص ببطاقات الباندل */
        .product-item.bundle-card {
            position: relative;
            overflow: hidden;
            background: linear-gradient(135deg, #3c1870, #0d061c);
            border: 1px solid var(--accent-yellow);
            box-shadow: 0 0 20px rgba(255, 204, 0, 0.2);
            min-width: 250px;
        }



        /* تصميم الشارة الجديدة الخاصة بكلمة Bundle */
        .bundle-badge {
            position: absolute;
            top: 15px;
            right: -30px;
            background-color: var(--accent-yellow);
            color: var(--black-text);
            padding: 5px 30px;
            font-size: 14px;
            font-weight: bold;
            transform: rotate(45deg);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            text-align: center;
            z-index: 10;
        }

        /* ====================================================== */
        /* ✅✅ END: Bundle Product Card Styles ✅✅ */
        /* ====================================================== */

        /* ======================================= */
        /* START: Product Separator With Text      */
        /* ======================================= */

        /* 1. الحاوية الرئيسية للخط والكلمة */
        .product-separator {
            position: relative; /* ضروري لوضع الكلمة في المنتصف */
            width: 90%;
            height: 1px;
            background-color: rgba(255, 255, 255, 0.2); /* هذا هو الخط نفسه */
            margin: 35px auto 25px auto; /* زيادة المسافة العلوية قليلاً */
            border-radius: 1px;
            text-align: center;
        }

            /* 2. الكلمة التي ستظهر فوق الخط */
            .product-separator::before {
                content: 'Bundles'; /* النص الذي سيظهر */
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                /* هذا اللون يجب أن يتطابق مع لون خلفية القسم لإخفاء الخط خلف الكلمة */
                background-color: var(--main-purple);
                color: rgba(255, 255, 255, 0.6); /* لون رمادي فاتح */
                font-size: 14px;
                font-weight: bold;
                padding: 0 15px; /* مسافة على يمين ويسار الكلمة */
                text-transform: uppercase; /* لجعل الحروف كبيرة لمظهر أفضل */
            }
        /* ======================================= */
        /* END: Product Separator With Text        */
        /* ======================================= */

        /* ✅ إضافة جديدة: زيادة ارتفاع القائمة عند الضغط على Enter */
        #navbar-search-results.expanded {
            max-height: 70vh; /* استخدام 70% من ارتفاع الشاشة كحد أقصى */
        }

        /* ✅✅ الكود الجديد بخلفية الفوتر ✅✅ */
        #navbar-search-results {
            position: absolute;
            top: 110%;
            right: 0;
            width: 350px;
            max-height: 400px;
            overflow-y: auto;
            /* ✅ تم تغيير الخلفية لتطابق الفوتر وإلغاء البلور */
            background: linear-gradient(145deg, #0b0714, #1d1033, #0b0714);
            /* ✅ تم تعديل الإطار ليتطابق مع إطار الفوتر */
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            z-index: 2001;
            opacity: 0;
            transform: translateY(-10px);
            pointer-events: none;
            transition: opacity 0.2s ease-out, transform 0.2s ease-out;
        }

            #navbar-search-results.visible {
                opacity: 1;
                transform: translateY(0);
                pointer-events: auto;
            }

        .search-result-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 15px;
            text-decoration: none;
            color: var(--light-text);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            transition: background-color 0.2s ease;
        }

            .search-result-item:last-child {
                border-bottom: none;
            }

            .search-result-item:hover {
                background-color: rgba(255, 255, 255, 0.1);
            }

            .search-result-item img {
                width: 45px;
                height: 45px;
                object-fit: cover;
                border-radius: 6px;
                flex-shrink: 0;
            }

            .search-result-item .result-details {
                display: flex;
                flex-direction: column;
                text-align: right;
                overflow: hidden;
            }

            .search-result-item .result-title {
                font-weight: bold;
                font-size: 15px;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }

            .search-result-item .result-price {
                font-size: 13px;
                color: var(--accent-yellow);
                font-weight: bold;
            }

        .no-results-item {
            padding: 20px;
            text-align: center;
            color: #ccc;
        }
        /* END: Instant Navbar Search Results Dropdown Styles */

        /* ====================================================== */
        /* START: Instant Navbar Search Results Dropdown Styles */
        /* ====================================================== */

        #navbar-search-results {
            position: absolute;
            top: 110%;
            right: 0;
            width: 350px;
            max-height: 400px;
            overflow-y: auto;
            background-color: rgba(44, 26, 64, 0.8);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            z-index: 2001;
            opacity: 0;
            transform: translateY(-10px);
            pointer-events: none;
            transition: opacity 0.2s ease-out, transform 0.2s ease-out;
        }

            #navbar-search-results.visible {
                opacity: 1;
                transform: translateY(0);
                pointer-events: auto;
            }

        .search-result-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 15px;
            text-decoration: none;
            color: var(--light-text);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            transition: background-color 0.2s ease;
        }

            .search-result-item:last-child {
                border-bottom: none;
            }

            .search-result-item:hover {
                background-color: rgba(255, 255, 255, 0.1);
            }

            .search-result-item img {
                width: 45px;
                height: 45px;
                object-fit: cover;
                border-radius: 6px;
                flex-shrink: 0;
            }

            .search-result-item .result-details {
                display: flex;
                flex-direction: column;
                text-align: right;
                overflow: hidden;
            }

            .search-result-item .result-title {
                font-weight: bold;
                font-size: 15px;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }

            .search-result-item .result-price {
                font-size: 13px;
                color: var(--accent-yellow);
                font-weight: bold;
            }

        .no-results-item {
            padding: 20px;
            text-align: center;
            color: #ccc;
        }
        /* ====================================================== */
        /* END: Instant Navbar Search Results Dropdown Styles   */
        /* ====================================================== */

        /* START: About Us Logo Style */
        #about {
            position: relative; /* ضروري لجعل التموضع المطلق للحاوية نسبةً لهذه البطاقة */
        }

        /* 1. الحاوية الجديدة التي ستضم اللوجوهين معًا */
        .about-us-logos-container {
            position: absolute;
            top: 25px;
            left: 25px; /* في RTL، اليسار هو المكان المناسب في الزاوية العلوية */
            display: flex; /* لجعل اللوجوهات بجانب بعضها */
            align-items: center; /* لمحاذاة اللوجوهات عموديًا */
            gap: 15px; /* مسافة بين اللوجوهين */
            z-index: 5; /* لضمان ظهوره فوق المحتوى */
        }

        /* 2. تعديل بسيط على تنسيق اللوجو الأصلي (إلغاء التموضع المطلق) */
        .about-us-logo {
            /* تم إلغاء التموضع المطلق من هنا ونقله للحاوية */
            width: 100px;
            height: auto;
            opacity: 0.7;
            border-radius: 8px;
            display: block;
        }

        /* 3. إضافة تنسيق للوجو الديسكورد الجديد */
        .about-us-discord-logo {
            width: 50px; /* حجم أصغر ليكون ثانويًا */
            height: auto;
            opacity: 0.8;
            border-radius: 50%; /* لجعله دائريًا */
            transition: all 0.3s ease;
        }

            .about-us-discord-logo:hover {
                opacity: 1;
                transform: scale(1.1);
                box-shadow: 0 0 10px #5865F2; /* توهج بلون الديسكورد */
            }
        /* END: About Us Logo Style */

        /* ✅✅ فيد باك شامل لكل العناصر القابلة للنقر في الموقع ✅✅ */

        /*
                                            هذا الكود يستهدف:
                                            - كل الأزرار (button)
                                            - الروابط في الشريط العلوي (a.nav-link)
                                            - الأزرار العائمة (fixed-cart-button)
                                            - بطاقات المنتجات والاشتراكات والخدمات (product-item, subscription-item, service-offer-card)
                                            - خيارات اختيار الرتب (rank-option)
                                            - خيارات الاشتراكات (subscription-option-label)
                                          */
        button:active,
        a.nav-link:active,
        a.footer-link:active,
        a.discord-button:active,
        .fixed-cart-button:active,
        .product-item:active,
        .subscription-item:active,
        .service-offer-card:active,
        .subscription-option-label:active .subscription-option-card,
        .rank-option:active .rank-icon-wrapper {
            transform: scale(0.96) translateY(2px) !important; /* يصغر العنصر وينزل لأسفل قليلاً */
            box-shadow: inset 0 3px 7px rgba(0, 0, 0, 0.2) !important; /* يضيف ظلًا داخليًا */
            transition: transform 0.1s, box-shadow 0.1s; /* لجعل الحركة سريعة */
        }

        /* تنسيق إضافي لتغميق لون بعض الأزرار عند الضغط */
        .buy-btn:active,
        .add-to-cart-product-page:active,
        .confirm-payment-btn:active {
            background-color: #218838; /* لون أخضر أغمق قليلاً */
        }

        /* تنسيق رابط إظهار الحقل */
        .toggle-discount-container {
            text-align: center;
            margin: 10px 0;
        }

        .toggle-discount {
            color: var(--accent-yellow);
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            text-decoration: underline;
            transition: color 0.3s ease;
        }

            .toggle-discount:hover {
                color: #fff;
            }

        /* تنسيق حاوية الخصم لجعلها مخفية وقابلة للحركة */
        .discount-wrapper {
            max-height: 0;
            overflow: hidden;
            opacity: 0;
            transition: max-height 0.4s ease-in-out, opacity 0.4s ease-in-out, margin-top 0.4s ease-in-out;
        }
            /* ✅ الكود بعد التعديل */
            .discount-wrapper.visible {
                max-height: 150px; /* ✅ قمنا بزيادة الارتفاع للسماح بظهور المحتوى بالكامل */
                opacity: 1;
                margin-top: 15px;
            }

        /* تنسيقات بسيطة لحقل الخصم والزر */
        .discount-code-container {
            display: flex;
            justify-content: center;
            align-items: stretch;
            margin-top: 2px;
            margin-bottom: 5px;
        }

        #discountMessage {
            min-height: 18px; /* لمنع اهتزاز التصميم */
        }

        /* ✅✅ حل مشكلة زر إتمام الشراء في السلة ✅✅ */

        /* 1. نهيئ جسم النافذة ليستخدم Flexbox ويحتوي على العناصر بشكل صحيح */
        #cartModal .modal-body {
            display: flex;
            flex-direction: column;
            /* نحدد ارتفاعًا ليملأ النافذة ويسمح بالتمرير الداخلي */
            /* 90vh هو ارتفاع النافذة، نطرح منه مساحة للعنوان والتذييل */
            height: calc(90vh - 120px);
        }

        /* 2. هذا هو الجزء الأهم: نجعل حاوية المنتجات هي التي تتمدد وتسكرول */
        #cartItemsContainer {
            flex-grow: 1; /* يسمح لهذا العنصر بالتمدد ليملأ المساحة المتاحة */
            overflow-y: auto; /* يضيف شريط تمرير رأسي عند الحاجة فقط */
            padding: 10px; /* يضيف مسافة داخلية بسيطة لراحة العين */
            margin-bottom: 15px; /* يضيف مسافة بين المنتجات والجزء السفلي */
            border-top: 1px solid rgba(255,255,255,0.1);
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        /* 3. نتأكد من أن باقي العناصر (مثل الإجمالي والزر) لا تتمدد */
        #cartModal h2,
        #cartModal .discount-code-container,
        #cartModal #cartTotalContainer,
        #cartModal .checkout-btn-centered {
            flex-shrink: 0; /* يمنع هذه العناصر من الانكماش */
        }



        /* ✅ أضف هذا الكود لرفع القسم بأكمله للأعلى */
        #offline-steam-section {
            padding-top: 5px;
        }

        /* ✅ استبدل الكود القديم بهذا لتعريف حركة التوهج الأبيض */
        @keyframes white-pulse-animation {
            0% {
                box-shadow: 0 0 7px 1px rgba(255, 255, 255, 0.25); /* توهج أبيض خفيف */
            }

            50% {
                box-shadow: 0 0 14px 3px rgba(255, 255, 255, 0.5); /* توهج أبيض أقوى قليلاً */
            }

            100% {
                box-shadow: 0 0 7px 1px rgba(255, 255, 255, 0.25); /* العودة للتوهج الخفيف */
            }
        }

        /* ✅✅ START: تعديل أنيميشن ظهور المنتجات ليكون أكثر سلاسة ✅✅ */
        @keyframes smooth-enter-animation {
            from {
                opacity: 0;
                /* زدنا مسافة الصعود قليلاً */
                transform: scale(0.97) translateY(20px);
            }

            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .card-enter {
            /* زدنا المدة واستخدمنا منحنى تسارع أكثر نعومة */
            animation: smooth-enter-animation 0.6s cubic-bezier(0.23, 1, 0.32, 1) forwards;
        }
        /* ✅✅ END: تعديل أنيميشن ظهور المنتجات ✅✅ */

        /* ✅ تحديث بسيط لكلاس الأنيميشن لزيادة المدة وتحسين الحركة */
        .card-enter {
            animation: smooth-enter-animation 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        }

        /* هذا الكود يبقى كما هو دون تغيير */
        .newly-added {
            /* لا يحتاج أي تنسيقات */
        }

        .category-header {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px !important; /* ✅ تم تقليل المسافة وإضافة !important لضمان تطبيقها */
            margin-bottom: 15px !important;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

            .category-header h2 {
                margin-right: 0;
                border-right: none;
                padding-right: 0;
            }

        .category-search-container {
            position: relative;
        }

            .category-search-container svg {
                position: absolute;
                top: 50%;
                right: 12px;
                transform: translateY(-50%);
                color: rgba(224, 224, 224, 0.6);
            }

        #offlineSearchInput {
            padding: 8px 15px;
            padding-right: 40px;
            font-size: 14px;
            border-radius: 20px;
            /* ✅ تم تعديل شفافية اللون الأبيض إلى 0.3 (أي 30%) */
            border: 1px solid rgba(255, 255, 255, 0.3) !important;
            background-color: rgba(0, 0, 0, 0.2);
            color: var(--white-text);
            font-family: 'Tajawal', sans-serif;
            transition: all 0.3s ease;
            backdrop-filter: blur(1px) !important;
            -webkit-backdrop-filter: blur(1px) !important;
        }

            #offlineSearchInput:focus {
                outline: none;
                border-color: var(--accent-yellow);
                background-color: rgba(0, 0, 0, 0.5);
            }

        .category-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .search-and-filter-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .category-search-container {
            position: relative;
        }

            .category-search-container svg {
                position: absolute;
                top: 50%;
                right: 12px;
                transform: translateY(-50%);
                color: rgba(224, 224, 224, 0.6);
            }

        #offlineSearchInput, #genreFilterSelect {
            padding: 8px 15px;
            font-size: 14px;
            border-radius: 20px;
            border: 1px solid var(--main-purple);
            background-color: rgba(0, 0, 0, 0.3);
            color: var(--white-text);
            font-family: 'Tajawal', sans-serif;
            transition: all 0.3s ease;
        }

        #offlineSearchInput {
            padding-right: 40px; /* لإعطاء مساحة للأيقونة */
        }

            #offlineSearchInput:focus, #genreFilterSelect:focus {
                outline: none;
                border-color: #ffffff;
                box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
                background-color: rgba(0, 0, 0, 0.5);
            }

        .load-more-container {
            text-align: center;
            margin-top: 25px;
        }

        .load-more-btn {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid var(--light-text);
            color: var(--light-text);
            padding: 10px 5px;
            padding-right: 30px;
            width: 210px;
            max-width: 60%;
            border-radius: 40px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 3px;
            backdrop-filter: blur(2px);
            -webkit-backdrop-filter: blur(2px);
            animation: white-pulse-animation 2.5s infinite ease-in-out;
        }

            .load-more-btn:hover {
                background-color: var(--main-purple);
                color: var(--accent-yellow);
                border-color: var(--accent-yellow);
                transform: translateY(-3px);
                box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            }

        .volume-discount-badge {
            background: linear-gradient(45deg, var(--accent-yellow), #ff9900);
            color: var(--black-text);
            padding: 6px 18px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            margin-top: 5px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            animation: gold-pulse 2s infinite alternate; /* لإضافة تأثير نبض جذاب */
        }

        #discord-calculator-card select {
            width: 180px; /* زيادة بسيطة في العرض */
            padding: 10px 15px; /* تحسين المساحة الداخلية */
            text-align: right; /* محاذاة النص لليمين */
            font-size: 1.2rem; /* تعديل حجم الخط ليتناسب */
            font-weight: bold;
            border: 1px solid #7289DA;
            background-color: rgba(17, 14, 26, 0.5); /* خلفية أغمق قليلاً */
            color: white;
            border-radius: 8px;
            font-family: 'Tajawal', sans-serif;
            cursor: pointer;
            transition: all 0.3s ease; /* حركة انتقالية ناعمة */
            /* إخفاء السهم الافتراضي للمتصفح */
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            /* إضافة سهم مخصص باستخدام SVG كخلفية */

            background-repeat: no-repeat;
            background-position: left 15px center;
        }

            /* تأثير توهج عند التركيز على القائمة */
            #discord-calculator-card select:focus {
                border-color: #8a99f5;
                box-shadow: 0 0 10px rgba(88, 101, 242, 0.7);
            }

            /* جعل الخيار الافتراضي يظهر بلون رمادي */
            #discord-calculator-card select option[value=""] {
                color: #888;
            }

        /* ================================================= */
        /* START: New Discord Decoration Calculator Card   */
        /* ================================================= */

        #discordDecorationsPageContainer {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px 0;
        }

        #discord-calculator-card {
            background: linear-gradient(145deg, rgba(88, 101, 242, 0.2), rgba(44, 26, 64, 0.4));
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(88, 101, 242, 0.5);
            border-radius: 20px;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
            padding: 35px;
            max-width: 900px; /* ✅ زيادة عرض البطاقة */
            width: 100%;
            display: flex;
            flex-direction: row; /* ✅ تحويل الاتجاه إلى أفقي */
            align-items: center; /* ✅ محاذاة القسمين رأسيًا */
            gap: 30px; /* ✅ مسافة بين القسمين */
            transition: all 0.3s ease;
        }

        .card-info-section, .card-form-section {
            flex: 1; /* ✅ جعل القسمين يأخذان مساحة متساوية */
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .card-info-section {
            gap: 15px;
        }

        .card-form-section {
            gap: 10px; /* تقليل المسافة بين عناصر الفورم */
        }

        /* ✅ الكود القديم */
        #discord-calculator-card .card-icon {
            width: 200px;
            height: 200px;
            object-fit: contain;
            margin-bottom: 10px;
            filter: drop-shadow(0 0 15px rgba(88, 101, 242, 0.6));
        }

        /* ✅✅ الكود الجديد والمعدل ✅✅ */
        #discord-calculator-card .card-icon {
            width: 280px; /* <-- تم تكبير الحجم أكثر */
            height: 280px; /* <-- تم تكبير الحجم أكثر */
            object-fit: contain;
            filter: drop-shadow(0 0 15px rgba(88, 101, 242, 0.6));
            margin-top: -70px; /* <-- هذا السطر يرفع الصورة للأعلى */
            margin-bottom: -15px; /* <-- لتقليل المسافة الفارغة أسفلها */
        }

        #discord-calculator-card h3 {
            color: #fff;
            font-size: 1.8rem;
            border: none;
            padding: 0;
            margin: 0;
        }

        #discord-calculator-card p {
            color: var(--light-text);
            max-width: 350px;
            line-height: 1.6;
        }

        #discord-calculator-card .input-wrapper textarea {
            background: transparent;
            border: none;
            outline: none;
            width: 100%;
            flex-grow: 1;
            color: white;
            font-size: 14px;
            text-align: right;
            font-family: 'Tajawal', sans-serif;
            resize: vertical;
            min-height: 50px;
        }

        #discord-calculator-card .calculator-controls {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: flex-end; /* محاذاة العناصر للأسفل */
            gap: 20px;
            margin: 10px 0;
        }

        #discord-calculator-card .input-group {
            text-align: center;
        }

            #discord-calculator-card .input-group label {
                display: block;
                font-weight: bold;
                color: #7289DA;
                margin-bottom: 8px;
                font-size: 14px;
            }

        #discord-calculator-card select {
            width: 120px;
            padding: 8px;
            text-align: center;
            font-size: 1.2rem;
            font-weight: bold;
            border: 1px solid #7289DA;
            background-color: #110e1a;
            color: white;
            border-radius: 8px;
            font-family: 'Tajawal', sans-serif;
            cursor: pointer;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-repeat: no-repeat;
            background-position: left 5px center;
        }

        .quantity-selector-inline {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

            .quantity-selector-inline input {
                width: 50px;
                padding: 8px;
                font-size: 1.2rem;
                text-align: center;
                font-weight: bold;
                border: 1px solid #7289DA;
                background-color: #110e1a;
                color: white;
                border-radius: 8px;
                -moz-appearance: textfield;
            }

                .quantity-selector-inline input::-webkit-outer-spin-button,
                .quantity-selector-inline input::-webkit-inner-spin-button {
                    -webkit-appearance: none;
                    margin: 0;
                }

            .quantity-selector-inline button {
                width: 35px;
                height: 35px;
                font-size: 1.5rem;
                font-weight: bold;
                cursor: pointer;
                padding: 0;
                margin: 0;
                line-height: 35px;
                background-color: #5865F2;
                color: white;
                border: none;
                border-radius: 50%;
            }

        #discord-price-display {
            background-color: rgba(0, 0, 0, 0.2);
            border: 1px solid #7289DA;
            border-radius: 12px;
            padding: 10px 20px;
            width: 100%;
            max-width: 300px;
        }

            #discord-price-display .price-label {
                color: #ccc;
                font-size: 0.9rem;
                display: block;
            }

            #discord-price-display .price-value {
                color: lightgreen;
                font-size: 1.8rem;
                font-weight: bold;
            }

        #discord-calculator-card .buy-btn {
            color: white;
            width: 100%;
            max-width: 300px;
            padding: 12px;
            font-size: 1.1rem;
            border: none;
            background-image: linear-gradient(45deg, #5865F2, #9945FF);
            margin-top: 5px;
        }

            #discord-calculator-card .buy-btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 0 20px rgba(153, 69, 255, 0.7);
                background-image: linear-gradient(45deg, #6975f3, #a35aff);
            }

        #discord-calc-error {
            color: #ff4757;
            font-weight: bold;
            min-height: 20px;
            margin-bottom: -5px;
        }
        /* ================================================= */
        /* END: New Discord Decoration Calculator Card     */
        /* ================================================= */



        /* ========================================= */
        /* START: Skeleton Loader Styles             */
        /* ========================================= */
        @keyframes skeleton-glow {
            0% {
                background-position: -200px 0;
            }

            100% {
                background-position: calc(200px + 100%) 0;
            }
        }

        .skeleton-card {
            border-radius: 12px;
            padding: 10px;
            background-color: var(--card-bg); /* يستخدم لون الكارت ليتناسب مع الثيم */
            border: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            gap: 10px;
            width: 180px; /* نفس عرض كارت المنتج العادي */
        }

            .skeleton-card .skeleton-image {
                width: 100%;
                height: 160px;
                border-radius: 8px;
                background-color: var(--skeleton-bg);
                background-image: linear-gradient(90deg, var(--skeleton-bg), var(--skeleton-shimmer), var(--skeleton-bg));
                background-size: 200px 100%;
                background-repeat: no-repeat;
                animation: skeleton-glow 1.5s infinite linear;
            }

            .skeleton-card .skeleton-text {
                height: 20px;
                border-radius: 4px;
                background-color: var(--skeleton-bg);
                background-image: linear-gradient(90deg, var(--skeleton-bg), var(--skeleton-shimmer), var(--skeleton-bg));
                background-size: 200px 100%;
                background-repeat: no-repeat;
                animation: skeleton-glow 1.5s infinite linear;
            }

                .skeleton-card .skeleton-text.short {
                    width: 60%;
                }

            .skeleton-card .skeleton-button {
                height: 38px;
                border-radius: 8px;
                margin-top: auto;
                background-color: var(--skeleton-bg);
                background-image: linear-gradient(90deg, var(--skeleton-bg), var(--skeleton-shimmer), var(--skeleton-bg));
                background-size: 200px 100%;
                background-repeat: no-repeat;
                animation: skeleton-glow 1.5s infinite linear;
            }
        /* ========================================= */
        /* END: Skeleton Loader Styles               */
        /* ========================================= */

        /* ========================================= */
        /* START: Smaller Size for Rental Cards      */
        /* ========================================= */

        .rental-product-item {
            width: 120px !important; /* ✅ تم التصغير أكثر مع إضافة !important */
            min-height: 240px !important; /* تثبيت الطول لمنع التفاوت */
        }

            .rental-product-item .product-image-wrapper {
                height: 100px !important; /* ✅ تصغير ارتفاع الصورة */
            }

            .rental-product-item h3 {
                font-size: 12px !important; /* ✅ تصغير الخطوط */
                min-height: 30px !important;
            }

            .rental-product-item p {
                font-size: 11px !important;
            }

            .rental-product-item .rental-duration-selector {
                font-size: 11px !important; /* ✅ تصغير عناصر التحكم */
                padding: 4px !important;
            }

            .rental-product-item .buy-btn {
                font-size: 12px !important;
                padding: 6px 8px !important;
            }

        /* ========================================= */
        /* END: Smaller Size for Rental Cards        */
        /* ========================================= */

        /* ========================================= */
        /* START: Hide Homepage Review Submission Form */
        /* ========================================= */

        /* إخفاء كل عناصر إدخال التقييم في الصفحة الرئيسية */
        #feedback-section #rating-name,
        #feedback-section .rating-input,
        #feedback-section #rating-text,
        #feedback-section button[onclick="submitStoreRating()"],
        #feedback-section #feedback-message {
            display: none;
        }

        /* ========================================= */
        /* END: Hide Homepage Review Submission Form */
        /* ========================================= */

        /* ========================================= */
        /* START: Hide Comment Submission Form       */
        /* ========================================= */

        /* إخفاء العنوان "اترك تعليقك" */
        #customer-reviews h3:first-of-type {
            display: none;
        }

        /* إخفاء نموذج الإدخال بالكامل (الاسم والنجوم ومربع النص والزر) */
        #customer-reviews .comment-form {
            display: none;
        }

        /* إخفاء الخط الفاصل الذي يقع بعد النموذج مباشرة */
        #customer-reviews hr {
            display: none;
        }

        /* ========================================= */
        /* END: Hide Comment Submission Form         */
        /* ========================================= */

        /* ====================================================== */
        /* START: New "Shatter & Fly" Animation for Rental Cards */
        /* ====================================================== */
        @keyframes shatter-fly-effect {
            0% {
                opacity: 1;
                transform: scale(1) rotate(0deg);
            }

            30% {
                opacity: 0.8;
                transform: scale(1.1) rotate(-5deg);
            }

            100% {
                opacity: 0;
                transform: scale(0.1) rotate(360deg) translate(200px, -100px);
            }
        }

        /* ====================================================== */
        /* START: Intense RGB Glowing Animation                 */
        /* ====================================================== */

        @keyframes rgb-glow-pulse-intense {
            0% {
                box-shadow: 0 0 10px 1px rgba(255, 0, 0, 0.75);
            }
            /* أحمر */
            16% {
                box-shadow: 0 0 10px 1px rgba(255, 255, 0, 0.75);
            }
            /* أصفر */
            33% {
                box-shadow: 0 0 10px 1px rgba(0, 255, 0, 0.75);
            }
            /* أخضر */
            50% {
                box-shadow: 0 0 10px 1px rgba(0, 255, 255, 0.75);
            }
            /* سماوي */
            66% {
                box-shadow: 0 0 10px 1px rgba(0, 0, 255, 0.75);
            }
            /* أزرق */
            83% {
                box-shadow: 0 0 10px 1px rgba(255, 0, 255, 0.75);
            }
            /* بنفسجي */
            100% {
                box-shadow: 0 0 10px 1px rgba(255, 0, 0, 0.75);
            }
            /* العودة إلى الأحمر */
        }

        .main-products-section.glass-card.darker {
            /* الإطار البنفسجي الأصلي */
            border: 1px solid #8e6abf;
            /* ✅ التعديل: تم تغيير لون التوهج إلى بنفسجي داكن (Midnight Purple) */
            box-shadow: 0 0 20px 4px rgba(44, 26, 64, 0.7);
            /* الانتقال السلس يبقى موجودًا */
            transition: all 0.3s ease-in-out;
        }

        /* ====================================================== */
        /* START: RENTAL CARD - (Final Beige Glassmorphism Theme) */
        /* ====================================================== */

        /* 1. تعريف حركة اللمعان */
        @keyframes shine-effect {
            0% {
                transform: translateX(-100%) skewX(-25deg);
            }

            100% {
                transform: translateX(250%) skewX(-25deg);
            }
        }

        .rental-card {
            display: flex;
            flex-direction: row;
            width: 100%;
            max-width: 580px;
            min-height: 210px;
            border-radius: 15px;
            position: relative;
            /* ✅ التعديل: خلفية زجاجية جديدة تمزج بين الأبيض والبني الشفاف */
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.7), rgba(160, 116, 79, 0.7)); /* مزيج أبيض وبني شفاف */
            backdrop-filter: blur(10px); /* تأثير البلور (الضبابية) */
            -webkit-backdrop-filter: blur(10px); /* لدعم متصفح سفاري */
            /* ✅ التعديل: إطار أبيض خفيف لتعزيز التأثير الزجاجي */
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2); /* ظل أغمق قليلاً ليتناسب مع الخلفيات المتنوعة */
            overflow: hidden;
            transition: all 0.4s ease;
        }

            .rental-card:hover {
                transform: translateY(-8px);
                box-shadow: 0 12px 40px rgba(119, 107, 85, 0.25);
                border-color: rgba(166, 123, 91, 1);
            }

        /* 3. قسم الصورة مع البرواز وتأثير اللمعان */
        .rental-card-image {
            flex: 0 0 200px;
            position: relative;
            overflow: hidden;
            padding: 8px;
            box-sizing: border-box;
            background-clip: content-box;
            border-left: 1px solid rgba(166, 123, 91, 0.4);
            background-size: cover;
            background-position: center;
        }

            .rental-card-image::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                width: 50%;
                height: 100%;
                background: linear-gradient(to right, rgba(255,255,255,0) 0%, rgba(255,255,255,0.3) 50%, rgba(255,255,255,0) 100%);
                transform: translateX(-100%) skewX(-25deg);
            }

        .rental-card:hover .rental-card-image::before {
            animation: shine-effect 0.85s ease-in-out;
        }

        /* 4. شارة "العب الآن" */
        .rental-badge {
            position: absolute;
            top: 15px;
            right: -30px;
            background-color: #8C5A3B;
            color: white;
            padding: 5px 30px;
            font-size: 14px;
            font-weight: bold;
            transform: rotate(45deg);
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            text-align: center;
        }

        /* 5. قسم التفاصيل (بألوان بنية داكنة) */
        .rental-card-details {
            display: flex;
            flex-direction: column;
            padding: 20px 25px;
            flex-grow: 1;
            text-align: right;
            color: #4A2C2A;
        }

            .rental-card-details h3 {
                color: #4A2C2A;
                margin: 0 0 10px 0;
                font-size: 1.4rem;
                border: none;
                padding: 0;
            }

            .rental-card-details p {
                font-size: 0.9rem;
                color: #5E454B;
                flex-grow: 1;
                line-height: 1.5;
            }

        /* 6. قسم التحكم والأزرار (بالثيم البني) */
        .rental-controls {
            margin-top: auto;
            padding-top: 15px;
        }

            .rental-controls label {
                font-size: 0.9rem;
                font-weight: bold;
                margin-bottom: 8px;
                color: #8C5A3B;
            }

        .duration-selector-buttons {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }

        .duration-btn {
            flex-grow: 1;
            padding: 8px 10px;
            font-size: 14px;
            font-weight: bold;
            font-family: 'Tajawal', sans-serif;
            border: 1px solid #c8bda5;
            background-color: transparent;
            color: #6e6658;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
            margin: 0;
            position: relative;
            overflow: hidden;
            z-index: 1;
        }

            .duration-btn::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 75%;
                height: 100%;
                background: linear-gradient(to right, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.25) 50%, rgba(255, 255, 255, 0) 100%);
                transform: skewX(-25deg);
                z-index: -1;
                transition: left 0.8s;
            }

            .duration-btn:hover::before {
                left: 125%;
            }

            .duration-btn:hover {
                background-color: rgba(140, 90, 59, 0.1);
                border-color: #8C5A3B;
                color: #8C5A3B;
            }

            .duration-btn.active {
                background-color: #8C5A3B;
                color: white;
                border-color: #8C5A3B;
            }

                .duration-btn.active:hover::before {
                    left: -100%;
                }

        .rental-price-display {
            font-size: 1.5rem;
            font-weight: bold;
            color: #4A2C2A;
            min-height: 30px;
            margin-top: 10px;
        }

        .rental-card .buy-btn {
            width: 100%;
            margin-top: 10px;
            background-color: #6B462D;
            color: white;
            padding: 10px;
            font-size: 1rem;
        }

            .rental-card .buy-btn:hover {
                background-color: #4A2C2A;
                box-shadow: 0 0 15px #6B462D;
            }

        #game-rentals-section {
            /* ❗مهم: غيّر اسم الصورة إلى صورة مناسبة من عندك */
            background-image: url('./images/your-coop-image.png');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            border-color: #8e6abf;
        }


        /* ====================================================== */
        /* START: Lazy Loading Placeholder Effect (Corrected)     */
        /* ====================================================== */

        /* 1. تعريف حركة اللمعان */
        @keyframes placeholder-shine {
            0% {
                background-position: -200% 0;
            }

            100% {
                background-position: 200% 0;
            }
        }

        /* 2. تطبيق التأثير على حاويات الصور (باستثناء الاشتراكات) */
        .product-image-wrapper,
        .main-image-placeholder {
            position: relative;
            overflow: hidden;
            background-color: rgba(0, 0, 0, 0.7);
            background-image: url('./images/minecraft_loading.gif'); /* تأكد من صحة مسار الصورة */
            background-size: 60%;
            background-repeat: no-repeat;
            background-position: center center;
        }

            /* 3. إضافة طبقة اللمعان المتحركة (باستثناء الاشتراكات) */
            .product-image-wrapper::before,
            .main-image-placeholder::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: linear-gradient(to right, transparent 0%, rgba(255,255,255,0.1) 50%, transparent 100%);
                animation: placeholder-shine 1.5s infinite linear;
            }

            /* 4. التأكد من أن الصور الفعلية تظهر فوق التأثير */
            .product-image-wrapper img,
            .sub-image-wrapper img {
                position: relative;
                z-index: 2;
                background-color: transparent;
            }
        /* ====================================================== */
        /* END: Lazy Loading Placeholder Effect                 */
        /* ====================================================== */

        /* =================== START: Fortnite Boosting Section Styles =================== */

        /* خلفية القسم الرئيسي */
        #fortnite-boosting {
            background-image: linear-gradient(rgba(30, 17, 50, 0.85), rgba(30, 17, 50, 0.85)), url('./images/fortnite-boosting-bg.jpg'); /* <-- تأكد من وجود صورة بهذا الاسم */
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            padding: 40px 20px;
        }

        .fn-boosting-title {
            text-align: center !important;
            direction: ltr; /* أضف هذا السطر */
            color: #00c0ff;
            font-size: 2.5rem !important;
            text-shadow: 0 0 15px rgba(0, 192, 255, 0.7);
            border: none !important;
            margin-bottom: 30px;
        }



        /* الكارت العملاق */
        .fn-boosting-card {
            max-width: 700px;
            margin: 0 auto;
            background: rgba(10, 20, 40, 0.6);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 192, 255, 0.5);
            border-radius: 20px;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
            padding: 30px;
        }

        .fn-boosting-content h3 {
            text-align: center;
            font-size: 2rem;
            color: var(--white-text);
            border: none;
            padding: 0;
        }

        .fn-boosting-content p {
            text-align: center;
            color: var(--light-text);
            font-size: 1rem;
            line-height: 1.6;
        }

        /* تصميم الآلة الحاسبة */
        .fn-calculator {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .level-input-group {
            flex: 1;
            min-width: 200px;
        }

            .level-input-group label {
                display: block;
                text-align: center;
                font-weight: bold;
                margin-bottom: 10px;
                color: #00c0ff;
            }

            .level-input-group input {
                width: 100%;
                padding: 12px;
                font-size: 1.5rem;
                text-align: center;
                font-weight: bold;
                border-radius: 8px;
                border: 1px solid var(--main-purple);
            }

        /* تصميم عرض السعر */
        #fn-price-display {
            background-color: rgba(0, 0, 0, 0.2);
            border: 1px solid #00c0ff;
            border-radius: 12px;
            padding: 15px;
            margin: 20px auto;
            max-width: 350px;
            text-align: center;
        }

            #fn-price-display .price-label {
                color: #ccc;
                font-size: 1rem;
            }

            #fn-price-display .price-value {
                display: block;
                font-size: 2.2rem;
                font-weight: bold;
                color: lightgreen;
                margin-top: 5px;
            }

        /* تصميم فورم بيانات المستخدم */
        .fn-user-info-form {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid rgba(0, 192, 255, 0.2);
        }

            .fn-user-info-form .form-step-title {
                text-align: center;
                color: var(--accent-yellow);
                font-weight: bold;
            }

            .fn-user-info-form .input-wrapper {
                max-width: 400px;
            }

        /* رسالة الخطأ */
        #fn-error-message {
            color: #ff4757;
            text-align: center;
            font-weight: bold;
            min-height: 24px;
        }

        /* تصميم زر الطلب */
        #fn-order-btn {
            display: block;
            width: 80%;
            max-width: 400px;
            margin: 20px auto 0 auto;
            padding: 15px;
            font-size: 1.2rem;
            background-color: #00c0ff;
            color: white;
            text-shadow: 1px 1px 5px rgba(0,0,0,0.5);
        }

            #fn-order-btn:hover {
                background-color: #009bcc;
                box-shadow: 0 0 20px rgba(0, 192, 255, 0.7);
            }

        /* =================== END: Fortnite Boosting Section Styles =================== */

        /* === START: Loading Screen Styles === */
        #loading-screen {
            position: fixed; /* لتثبيتها على الشاشة */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #1e1132; /* نفس لون خلفية موقعك */
            z-index: 9999; /* للتأكد من أنها فوق كل شيء */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 0.7s ease-out, visibility 0.7s ease-out; /* لإخفاء ناعم */
            opacity: 1;
            visibility: visible;
        }

        .loading-animation {
            width: 128px; /* يمكنك تعديل حجم الأنيميشن */
            height: 128px;
        }

        .loading-text {
            color: var(--accent-yellow);
            margin-top: 20px;
            font-size: 1.2rem;
            font-weight: bold;
        }

        /* هذا الكلاس سنستخدمه لإخفاء الشاشة بالجافاسكريبت */
        #loading-screen.hidden {
            opacity: 0;
            visibility: hidden;
        }
        /* === END: Loading Screen Styles === */

        /* 1. لتوسيط العنوان الرئيسي (h2) بشكل سليم */
        #cod-services h2 {
            display: block; /* لجعله يأخذ عرض السطر كاملًا */
            text-align: center; /* لتوسيط النص بداخله */
            margin-right: 0; /* لإلغاء أي مسافة جانبية قديمة */
            border-right: none; /* لإلغاء أي خط جانبي قديم */
            padding-right: 0; /* لإلغاء أي حشو جانبي قديم */
        }

        /* 2. لتوسيط قائمة الألعاب (الـ Menu) */
        #cod-services .tab-buttons {
            display: flex;
            justify-content: center; /* هذه الخاصية تقوم بتوسيط الأزرار */
        }

        #cod-services .tabs-container {
            margin-top: 25px;
        }

        /* هذا الكود يجعل الحركة ناعمة */
        .tab-button {
            transition: all 0.3s ease;
        }

        #cod-services {
            /* سنجعل الجافاسكريبت يتحكم في الخلفية الآن */
            transition: background-image 0.5s ease-in-out; /* لجعل تغيير الخلفية ناعمًا */
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }

        /* هذا الكود يضيف تأثير التوهج عند مرور الماوس على الأزرار غير النشطة */
        .tab-button:not(.active):hover {
            color: #ffffff; /* يجعل لون الخط أبيض ناصع */
            opacity: 1; /* يزيل أي شفافية */
            text-shadow: 0 0 8px rgba(255, 255, 255, 0.7); /* هذا هو تأثير التوهج الأبيض */
        }

        /* START: About Us Logo Style */
        #about {
            position: relative; /* ضروري لجعل التموضع المطلق للصورة نسبةً لهذه الحاوية */
        }

        .about-us-logo {
            position: absolute;
            top: 25px; /* المسافة من أعلى الحاوية */
            left: 25px; /* المسافة من يسار الحاوية */
            width: 100px; /* يمكنك تعديل عرض اللوجو حسب رغبتك */
            height: auto; /* للحفاظ على أبعاد الصورة */
            opacity: 0.7; /* شفافية بسيطة لدمج اللوجو مع التصميم */
            border-radius: 8px;
        }
        /* END: About Us Logo Style */

        /* START: تنسيق زر المشاركة فوق الصورة */
        #product-share-btn {
            position: absolute;
            top: 15px;
            right: 15px; /* لوضعه في الزاوية اليمنى العلوية */
            z-index: 10;
            width: 40px;
            height: 40px;
            background-color: rgba(0, 0, 0, 0.5); /* خلفية شبه شفافة */
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%; /* لجعله دائريًا */
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }

            #product-share-btn:hover {
                background-color: rgba(0, 0, 0, 0.7);
                transform: scale(1.1);
                box-shadow: 0 0 10px #39FF14; /* تم التغيير إلى أخضر نيون */
            }

            #product-share-btn svg {
                color: white;
            }
        /* END: تنسيق زر المشاركة */

        /* تنسيق جديد للحاوية عندما يكون هناك خيار واحد فقط */
        #subscription-options-container.single-option {
            display: flex; /* نغير طريقة العرض إلى flex */
            justify-content: center; /* لتوسيط العنصر الوحيد في المنتصف */
        }

            /* تحديد عرض العنصر الوحيد لمنعه من التمدد بشكل كامل */
            #subscription-options-container.single-option .subscription-option-label {
                width: 150px; /* يمكنك تعديل هذا العرض حسب ما تراه مناسبًا */
            }

        .dropdown-divider {
            height: 1px;
            margin: 8px 10px; /* لإضافة مسافة رأسية وأفقية حول الخط */
            background-color: rgba(255, 255, 255, 0.2);
            border: none;
        }

        /* ================================================= */
        /* START: All Discord Decorations Styles (Final & Corrected) */
        /* ================================================= */

        /* 1. خلفية قسم الديكورات في الصفحة الرئيسية */
        #discord-decorations-section {
            background-image: linear-gradient(rgba(30, 17, 50, 0.85), rgba(30, 17, 50, 0.85)), url('./images/discord-background.png');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            border-color: #7289DA;
        }

        /* 2. خلفية صفحة الديكورات الداخلية */
        #discordDecorationsPage {
            background-image: linear-gradient(rgba(30, 17, 50, 0.85), rgba(30, 17, 50, 0.85)), url('./images/discord-background1.png');
            background-size: cover;
            background-position: center;
            border-color: #7289DA;
        }

        /* 3. التنسيق العام المشترك للبطاقتين في الصفحة الرئيسية */
        #discord-decorations-section .service-offer-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            min-height: 380px;
            padding: 20px;
            background: linear-gradient(135deg, #1e0b3c, #0d061c);
            transition: transform 0.3s ease;
        }

            #discord-decorations-section .service-offer-card:hover {
                transform: translateY(-8px) scale(1.02);
            }

        /* 4. إعادة إظهار وتنسيق الصور التي كانت مخفية */
        #discord-decorations-section .service-card-image {
            display: block; /* أهم تعديل: إظهار الصورة */
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid white;
            margin-bottom: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        /* 5. تنسيق النصوص والأزرار */
        #discord-decorations-section .service-offer-card h3,
        #discord-decorations-section .service-offer-card p {
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
            margin: 10px 0;
        }

        #discord-decorations-section .service-offer-card button {
            margin-top: auto; /* يدفع الزر للأسفل */
        }

        /* 6. تحديد الإطار الخاص بكل بطاقة بشكل منفصل */
        #decorations-offer-card {
            border: 1px solid #7289DA; /* لون إطار بطاقة الديكورات */
        }

        #developing-offer-card {
            border: 1px solid #8e6abf; /* لون إطار بطاقة تصميم السيرفرات */
        }

        /* 7. تنسيق كروت المنتجات الصغيرة داخل صفحة الديكورات */
        #discordDecorationsPageContainer .product-item {
            width: 130px !important;
            min-height: 230px !important;
            padding: 8px !important;
        }

        #discordDecorationsPageContainer .product-image-wrapper {
            height: 100px !important;
        }

        #discordDecorationsPageContainer .product-item h3 {
            font-size: 13px !important;
            min-height: 30px !important;
        }

        #discordDecorationsPageContainer .product-item p {
            font-size: 12px !important;
        }

        #discordDecorationsPageContainer .product-item .product-description-text {
            display: none !important;
        }

        /* 1. إعداد طبقة اللمعان (بشفافية أقل) */
        #discord-decorations-section .service-offer-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 70px;
            height: 100%;
            background: rgba(255, 255, 255, 0.2); /* تم تقليل الشفافية هنا */
            transform: skewX(-25deg) translateX(-200px);
            transition: transform 0.7s ease-in-out;
            z-index: 1;
            filter: blur(25px);
        }


        /* 2. عند مرور الماوس، يتم تحريك اللمعة عبر البطاقة */
        #discord-decorations-section .service-offer-card:hover::before {
            transform: skewX(-25deg) translateX(450px); /* تحريكها إلى اليمين لتمر عبر البطاقة */
        }

        /* 3. نتأكد أن محتوى البطاقة (الصورة والنص) يظهر فوق اللمعة */
        #discord-decorations-section .service-offer-card > * {
            position: relative;
            z-index: 2;
        }

        /* 4. إزالة أي تأثيرات توهج قديمة قد تكون متبقية من كود آخر */
        #home-decorations-offer-card:hover,
        #home-developing-offer-card:hover {
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.5); /* ظل بسيط فقط */
        }

        /* ================================================= */
        /* END: All Discord Decorations Styles (Final & Corrected) */
        /* ================================================= */

        /* === START: New Theme Toggle Button CSS === */
        #theme-toggle-btn {
            position: absolute;
            bottom: 25px; /* المسافة من الأسفل */
            right: 25px; /* المسافة من اليمين (أفضل من اليسار في التصميم العربي) */
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

            #theme-toggle-btn:hover {
                transform: translateY(-3px) scale(1.1);
                box-shadow: 0 6px 20px rgba(0,0,0,0.3);
            }

            #theme-toggle-btn svg {
                width: 22px;
                height: 22px;
                transition: all 0.3s ease;
            }

        /* أيقونة الشمس (الوضع المظلم) */
        .sun-icon {
            color: #ffcc00;
        }

        /* أيقونة القمر (الوضع الفاتح) */
        .moon-icon {
            color: #8e6abf;
        }

        /* منطق إظهار وإخفاء الأيقونة الصحيحة */
        body.light-mode #theme-toggle-btn .sun-icon {
            display: none;
        }

        body:not(.light-mode) #theme-toggle-btn .moon-icon {
            display: none;
        }
        /* === END: New Theme Toggle Button CSS === */

        /* ✅ تنسيق جديد لمكان الصورة المؤقت مع تفعيل الأنيميشن */
        .main-image-placeholder {
            width: 100%;
            min-height: 350px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative; /* ضروري للأنيميشن */
            overflow: hidden; /* ضروري للأنيميشن */
        }

        /* لتكبير خط رسالة التحويل في نافذة الدفع */
        .qr-text-content p:nth-child(1) {
            font-size: 16px; /* <-- تكبير حجم الخط */
            line-height: 1.6; /* <-- تحسين المسافة بين السطور */
        }

        /* لإعادة ترتيب مربعات رأس نافذة الدفع */
        /* الخطوة الحالية (المربع الثاني) سيصبح الأول */
        .payment-header-container .payment-header-box:nth-child(2) {
            order: 1;
        }

        /* ملخص المنتج (المربع الأول) سيصبح الثاني */
        .payment-header-container .payment-header-box:nth-child(1) {
            order: 2;
        }

        /* المبلغ المستحق (المربع الثالث) سيظل ترتيبه الثالث */
        .payment-header-container .payment-header-box:nth-child(3) {
            order: 3;
        }

        /* مهلة الدفع (المربع الرابع) سيظل ترتيبه الرابع */
        .payment-header-container .payment-header-box:nth-child(4) {
            order: 4;
        }

        /* التعديل النهائي لتقريب مربعات الإدخال من بعضها */
        #vodafoneForm .input-wrapper {
            box-sizing: border-box;
            width: 320px;
            align-items: center;
            padding-top: 0;
            padding-bottom: 0;
            /* ⬇️ هنا قللنا المسافة بين المربعات ⬇️ */
            margin: 0 auto 5px auto;
        }

            /* ====================================================== */
            /* ✅ START: إصلاح التوهج المزدوج لفورم فودافون */
            /* ====================================================== */

            /* 1. القاعدة دي بتدي الإطار الخارجي (الأوتلاين) التوهج الأبيض */
            #vodafoneForm .input-wrapper:focus-within {
                border-color: #FFFFFF !important; /* <-- الإطار الأبيض */
                box-shadow: 0 0 10px rgba(255, 255, 255, 0.5) !important; /* <-- التوهج الأبيض الخارجي */
            }

                /* 2. ✅✅ القاعدة الجديدة والمهمة ✅✅
                                     القاعدة دي بتلغي أي توهج أو إطار عن حقل الإدخال *الداخلي*
                                  */
                #vodafoneForm .input-wrapper:focus-within input,
                #vodafoneForm .input-wrapper:focus-within textarea {
                    border-color: transparent !important; /* <-- بيخفي إطار الحقل الداخلي */
                    box-shadow: none !important; /* <-- بيمسح أي جلو (أزرق أو غيره) من الحقل الداخلي */
                }

                /* ====================================================== */
                /* ✅ END: إصلاح التوهج المزدوج */
                /* ====================================================== */

                #vodafoneForm .input-wrapper:focus-within svg {
                    color: #FFFFFF; /* الأيقونة البيضاء */
                }

            /* هذا الكود يبقى كما هو لتقليل ارتفاع الحقول */
            #vodafoneForm .input-wrapper input,
            #vodafoneForm .input-wrapper textarea {
                padding-top: 6px;
                padding-bottom: 6px;
            }

            /* لإنزال مربع الإيميل فقط مسافة صغيرة جدًا */
            #vodafoneForm .input-wrapper:has(input[name="email"]) {
                position: relative;
                top: 5px; /* <-- القيمة بالموجب لإنزاله للأسفل */
            }

        /* تنسيق الأيقونات داخل مربعات الإدخال */
        .input-wrapper svg {
            color: #FFFFFF; /* لون الأيقونة أبيض */
            flex-shrink: 0; /* لمنع الأيقونة من الانكماش */
        }

        /* تنسيق خاص بالـ textarea ليتناسب مع التصميم الجديد */
        .input-wrapper textarea {
            background: transparent;
            border: none;
            outline: none;
            width: 100%;
            flex-grow: 1;
            color: white;
            font-size: 16px;
            text-align: right;
            font-family: 'Tajawal', sans-serif;
            resize: vertical;
            min-height: 40px;
        }



        /* ====================================================== */
        /* START: COMPACT PRODUCT SUMMARY STYLE                   */
        /* ====================================================== */

        .payment-summary-value {
            font-size: 12px !important; /* تصغير حجم الخط إلى 11 بكسل */
            font-weight: normal;
            color: #e0e0e0;
            white-space: normal;
            line-height: 1.4;
            overflow-wrap: break-word;
            max-height: 50px;
            overflow-y: auto;
        }

        /* 2. تعديل العنوان فوق الملخص ليتناسب مع الحجم الجديد */
        .payment-header-box h4 {
            font-size: 14px; /* تصغير حجم العنوان قليلاً */
            margin-bottom: 4px; /* تقليل المسافة أسفل العنوان */
        }

        /* ====================================================== */
        /* END: COMPACT PRODUCT SUMMARY STYLE                     */
        /* ====================================================== */

        /* ===== PayPal Hosted Button Style ===== */
        .pp-AB69NXSVUNP78 {
            text-align: center;
            border: none;
            border-radius: 1.5rem;
            min-width: 11.625rem;
            padding: 0 2rem;
            height: 2.625rem;
            font-weight: bold;
            background-color: #000000;
            color: #ffffff;
            font-family: "Helvetica Neue", Arial, sans-serif;
            font-size: 1rem;
            line-height: 1.25rem;
            cursor: pointer;
            transition: all 0.2s ease; /* لتحسين تجربة المستخدم */
        }

            .pp-AB69NXSVUNP78:hover {
                background-color: #333333;
                transform: translateY(-2px);
            }
        /* ===== End PayPal Style ===== */

        #productPage button {
            margin-top: 30px; /* دي القيمة اللي بتحدد المسافة من فوق */
        }

        /* إخفاء المنصة التي تظهر تحت وصف المنتج */
        .modal-product-header .product-platform-info {
            display: none;
        }

        .modal-product-header .product-platform-info {
            visibility: hidden !important;
            opacity: 0 !important;
            height: 0 !important;
            margin: 0 !important;
            padding: 0 !important;
        }

        /* 1. السماح للصورة بأن تكبر طولياً حتى تصل إلى مستوى زر "أضف إلى السلة" */
        .product-image-section img {
            height: auto; /* السماح للصورة بالتمدد عمودياً */
            max-height: 300px; /* تحديد الحد الأقصى لارتفاع الصورة */
            width: 100%; /* ملء العرض بالكامل */
            object-fit: contain; /* التأكد من أن الصورة لا تتشوه */
        }

        /* 2. التأكد من أن الصورة الكبرى لا تتجاوز حجم الزر */
        .product-image-section {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            max-width: 100%; /* التأكد من أن الصورة لا تتجاوز عرض العمود */
            flex: 1.2;
            min-width: 300px;
        }

        /* 3. تأكيد المحاذاة بشكل مناسب للأزرار */
        .product-actions-container {
            display: flex;
            flex-direction: column;
            gap: 15px; /* المسافة بين الأزرار */
            margin-top: auto; /* لضمان أن الأزرار تبقى في أسفل العمود */
        }

        /* 4. التأكد من أن الزر لا يتجاوز المساحة المخصصة له */
        #addToCartBtn {
            margin-top: 10px; /* مسافة من الأعلى للتباعد بين الزر والصورة */
            align-self: flex-start; /* محاذاة الزر لليسار */
        }

        /* 5. التحكم في ارتفاع الصور في الـ gallery */
        .product-image-gallery .thumbnail {
            max-width: 100px; /* عرض الصور داخل المعرض */
            max-height: 100px; /* تحديد الحد الأقصى للارتفاع */
            object-fit: cover; /* التأكد من أن الصورة تملأ الفراغ بشكل جيد */
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

            /* 6. إضافة تأثير التفاعل عند مرور الماوس على الصور في المعرض */
            .product-image-gallery .thumbnail:hover,
            .product-image-gallery .thumbnail.active {
                transform: scale(1.05);
                box-shadow: 0 0 10px rgba(255, 204, 0, 0.5); /* تأثير الظل */
            }


        /* ====================================================== */
        /* START: DESIGNS SECTION BACKGROUND                    */
        /* ====================================================== */
        #designs {
            /* 1. مسار صورة الخلفية مع فلتر تعتيم */
            /* ✅ غيّر 'designs-background.png' إلى اسم الصورة التي تريدها */
            background-image: linear-gradient(rgba(30, 17, 50, 0.8), rgba(30, 17, 50, 0.8)), url('./images/my-new-gaming-bg.png');
            /* 2. خصائص لتثبيت الخلفية وضمان وضوحها */
            background-size: cover;
            background-position: center;
            /* 3. إلغاء تأثير الزجاج الشفاف وتعديل الإطار */
            backdrop-filter: none; /* إلغاء تأثير البلور الخاص بـ .glass-card */
            -webkit-backdrop-filter: none;
            border: 1px solid #cda1ff; /* تغيير لون الإطار ليتناسب مع المظهر الجديد */
        }

        /* ====================================================== */
        /* END: DESIGNS SECTION BACKGROUND                      */
        /* ====================================================== */

        /* ✅✅ START: تعديل إطار قسم فالورانت بوستينج ✅✅ */

        #valorant-boosting {
            /* الخصائص الحالية تبقى كما هي */
            background-size: cover !important;
            background-position: center !important;
            border-radius: 15px;
            position: relative;
            overflow: hidden;
            padding: 15px;
            /* ✅✅ التعديل الرئيسي هنا ✅✅ */
            border: 2px solid; /* تحديد سمك الإطار */
            animation: static-rgb-calm 6s linear infinite; /* تطبيق الحركة الجديدة */
        }

            /* هذا هو الكود الجديد الذي يصنع الإطار المتحرك */
            #valorant-boosting::before {
                content: '';
                position: absolute;
                width: 250%; /* حجم أكبر من العنصر نفسه */
                height: 250%;
                top: -75%; /* توسيط العنصر الزائف */
                left: -75%;
                z-index: -1; /* لوضعه خلف المحتوى */
                /* تدرج لوني مخروطي (conic) بألوان هادئة */
                background: conic-gradient( #c31432, /* أحمر داكن */
                #8A2BE2, /* بنفسجي */
                #240b36, /* بنفسجي غامق */
                #0D1B2A, /* أزرق داكن */
                #c31432 /* العودة للأحمر لإكمال الدورة */
                );
                /* تطبيق حركة الدوران */
                animation: animated-rgb-border 6s linear infinite;
            }

            /* هذا الكود يضيف طبقة داخلية لإخفاء مركز التدرج وإظهار الخلفية الأصلية */
            #valorant-boosting::after {
                content: '';
                position: absolute;
                inset: 2px; /* مسافة الإطار (يمكنك جعلها 3px ليكون أرفع) */
                background-image: url('./images/valorantreynass.png') !important;
                background-size: cover !important;
                background-position: center !important;
                border-radius: 13px; /* أصغر من حواف العنصر الرئيسي */
                z-index: -1;
            }

        /* ✅✅ END: تعديل إطار قسم فالورانت بوستينج ✅✅ */

        #boosting-cover {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 20px 15px; /* ✅ تصغير: تقليل المساحة الداخلية */
            background: linear-gradient(145deg, rgba(10, 10, 10, 0.6), rgba(40, 40, 40, 0.5));
            border-radius: 12px;
            animation: fadeIn 0.8s ease-in-out;
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
            max-width: 550px; /* ✅ تصغير: من 600px إلى 550px */
            margin: 0 auto 20px;
            box-sizing: border-box;
        }


            #boosting-cover.fade-out {
                opacity: 0;
                transform: scale(0.95);
                pointer-events: none;
            }

            #boosting-cover img.cover-image {
                max-width: 200px; /* ✅ تصغير: من 240px إلى 200px */
                width: 100%;
                height: auto;
                margin-bottom: 15px;
                filter: drop-shadow(0 0 15px rgba(255, 70, 85, 0.5));
            }

            #boosting-cover h3 {
                font-size: 1.8rem; /* ✅ تصغير: من 2rem إلى 1.8rem */
                color: #ff4655;
                margin-bottom: 10px;
                border: none;
                padding: 0;
            }

            #boosting-cover p {
                font-size: 0.95rem; /* ✅ تصغير: من 1rem إلى 0.95rem */
                color: #e0d8f0;
                max-width: 500px;
                line-height: 1.6;
                margin-bottom: 15px; /* ✅ تقليل المسافة لجعل الزر أقرب */
            }

            #boosting-cover .start-boosting-btn {
                background-color: #ff4655;
                color: white;
                font-size: 15px; /* ✅ تصغير: من 16px إلى 15px */
                padding: 10px 30px; /* ✅ تصغير حجم الزر */
                border-radius: 50px;
                border: 2px solid #ff4655;
                transition: all 0.3s ease;
            }

                #boosting-cover .start-boosting-btn:hover {
                    background-color: transparent;
                    color: #ff4655;
                    box-shadow: 0 0 15px rgba(255, 70, 85, 0.5);
                    transform: translateY(-3px) scale(1.05);
                }


        /* ====================================================== */
        /* END: VALORANT BOOSTING COVER STYLES (MODIFIED)       */
        /* ====================================================== */


        /* ====================================================== */
        /* FIX: Class-based Visibility for Boosting section       */
        /* ====================================================== */

        /* بشكل افتراضي، قم بإظهار الغلاف */
        #valorant-boosting #boosting-cover {
            display: flex;
        }

        /* بشكل افتراضي، قم بإخفاء الحاسبة */
        #valorant-boosting #boosting-calculator-container {
            display: none;
        }

            /* عندما نضيف كلاس .visible للحاسبة، قم بإظهارها */
            #valorant-boosting #boosting-calculator-container.visible {
                display: flex;
            }

        /* أضف خاصية الانتقال السلس للغلاف */
        #boosting-cover {
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
        }

            /* هذا هو شكل الغلاف عند تطبيق تأثير الاختفاء */
            #boosting-cover.fade-out {
                opacity: 0;
                transform: scale(0.95); /* تأثير تصغير بسيط لجمالية أكبر */
                pointer-events: none; /* لمنع الضغط على الغلاف وهو يختفي */
            }



        #valorant-boosting .close-btn {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 32px;
            font-weight: bold;
            color: #fff;
            cursor: pointer;
            transition: color 0.3s, transform 0.3s;
            z-index: 10;
        }

            #valorant-boosting .close-btn:hover {
                color: var(--accent-yellow);
                transform: scale(1.2);
            }

        #valorant-boosting {
            position: relative;
        }

        /* ====================================================== */
        /* START: BOOSTING SERVICE CARD STYLES                    */
        /* ====================================================== */

        #boosting-offer-card {
            /* تدرج لوني مميز من البنفسجي إلى الأحمر الخاص بفالورانت */
            background: linear-gradient(135deg, #3c1870, #A32D3B);
            border: 1px solid #ff4655; /* لون إطار فالورانت */
        }

        /* ====================================================== */
        /* END: BOOSTING SERVICE CARD STYLES                      */
        /* ====================================================== */

        /* ====================================================== */
        /* START: ORDER SUMMARY STYLES IN PAYMENT MODAL           */
        /* ====================================================== */
        .order-summary-container {
            background-color: rgba(0, 0, 0, 0.25);
            border: 1px solid var(--main-purple);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: right;
        }

        /* ✅ إخفاء ملخص الطلب في نافذة الكريديت كارد فقط */
        #creditcardDetails .order-summary-container {
            display: none;
        }

        .order-summary-container h4 {
            margin-top: 0;
            margin-bottom: 15px;
            color: var(--accent-yellow);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 10px;
            font-size: 1.1rem;
            text-align: center;
            border-right: none;
            padding-right: 0;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            font-size: 0.95rem;
            margin-bottom: 8px;
            padding: 5px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }


            .summary-item:last-child {
                border-bottom: none;
            }

            .summary-item strong {
                color: #ccc;
                font-weight: normal;
            }

            .summary-item span {
                font-weight: bold;
                color: #fff;
                text-align: left;
                direction: ltr;
            }
        /* ====================================================== */
        /* END: ORDER SUMMARY STYLES                              */
        /* ====================================================== */

        #boosting-calculator-container {
            display: flex;
            flex-direction: column;
            gap: 25px;
            max-width: 900px;
            margin: 0 auto;
        }

        .calculator-inputs {
            background: rgba(0, 0, 0, 0.2);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--main-purple);
        }

        .form-step-title {
            text-align: center;
            font-size: 1.1rem;
            font-weight: bold;
            color: var(--accent-yellow);
            margin-top: 0;
            margin-bottom: 15px;
        }

        .rank-selection-area {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            flex-wrap: wrap;
        }

        .rank-selector-column {
            flex: 1;
            min-width: 300px;
            background: rgba(0, 0, 0, 0.2);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--main-purple);
        }

        .rank-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
            gap: 10px;
            max-height: 250px;
            overflow-y: auto;
            padding: 5px;
        }

        .rank-option {
            position: relative;
        }

            .rank-option input[type="radio"] {
                appearance: none;
                -webkit-appearance: none;
                position: absolute;
                opacity: 0;
                width: 100%;
                height: 100%;
                cursor: pointer;
            }

            .rank-option .rank-icon-wrapper {
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                padding: 5px;
                border-radius: 8px;
                background-color: rgba(255, 255, 255, 0.05);
                border: 2px solid transparent;
                transition: all 0.2s ease-in-out;
                opacity: 1; /* ✅ تم التعديل هنا لتصبح الأيقونات واضحة بالكامل */
            }

                .rank-option .rank-icon-wrapper img {
                    width: 50px;
                    height: 50px;
                    object-fit: contain;
                }

            .rank-option .rank-name {
                font-size: 10px;
                font-weight: bold;
                color: #ccc;
                margin-top: 4px;
                white-space: nowrap;
            }

            .rank-option input[type="radio"]:checked + .rank-icon-wrapper {
                background-color: rgba(255, 204, 0, 0.2);
                border-color: var(--accent-yellow);
                transform: scale(1.05);
                opacity: 1;
            }

            .rank-option input[type="radio"]:hover + .rank-icon-wrapper {
                opacity: 1;
                border-color: rgba(255, 255, 255, 0.5);
            }

            .rank-option.disabled .rank-icon-wrapper {
                filter: grayscale(100%);
                opacity: 0.2;
                cursor: not-allowed;
            }

        .boosting-summary {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            margin-top: 10px;
        }

        #boosting-price-display {
            background-color: rgba(0, 0, 0, 0.2);
            border: 1px solid var(--main-purple);
            border-radius: 8px;
            padding: 15px;
            width: 100%;
            max-width: 350px;
            min-height: 4em;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

            #boosting-price-display .price-label {
                font-size: 1.1rem;
                color: #ccc;
                font-weight: bold;
            }

            #boosting-price-display .price-value {
                font-size: 1.8rem;
                font-weight: bold;
                color: lightgreen;
            }

        #boosting-error-message {
            color: #ff4655; /* Valorant Red */
            font-weight: bold;
            min-height: 20px;
        }

        /* Styling for the large Valorant coaching card */
        .valorant-coaching-card {
            display: flex;
            flex-direction: column;
            width: 100%;
            max-width: 800px; /* ✅ زيادة أقصى عرض للبطاقة */
            min-height: 500px;
            background: linear-gradient(135deg, #3c1870, #0d061c);
            border-radius: 12px;
            border: 1px solid #ff4655; /* لون فالورانت */
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4);
            transition: transform 0.3s ease-out;
            padding: 20px;
            margin: 20px auto;
            text-align: right;
            overflow: hidden; /* لإخفاء أي جزء من الصورة يخرج عن الحدود */
            position: relative;
        }

            .valorant-coaching-card:hover {
                transform: translateY(-10px);
                box-shadow: 0 12px 40px rgba(0, 0, 0, 0.6);
            }

            .valorant-coaching-card .card-image-full {
                width: 100%;
                height: 250px; /* ✅ ارتفاع ثابت للصورة لتكون بارزة */
                object-fit: cover; /* لضمان أن الصورة تغطي المساحة المحددة دون تشوه */
                border-radius: 8px;
                margin-bottom: 20px;
            }

            .valorant-coaching-card .card-content {
                flex-grow: 1; /* لجعل المحتوى يملأ المساحة المتبقية */
            }

            .valorant-coaching-card .card-title {
                font-size: 2.2rem;
                color: #ff4655; /* لون فالورانت */
                border-right: 4px solid #ffcc00;
                padding-right: 10px;
                margin-bottom: 10px;
                display: inline-block;
            }

            .valorant-coaching-card .card-description {
                font-size: 1.1rem;
                color: #e0d8f0;
                line-height: 1.6;
                margin-bottom: 20px;
            }

            .valorant-coaching-card .card-features {
                list-style: none;
                padding: 0;
                margin-bottom: 20px;
            }

                .valorant-coaching-card .card-features li {
                    display: flex;
                    align-items: center;
                    gap: 10px;
                    margin-bottom: 8px;
                    font-size: 1rem;
                    color: #ffcc00; /* لون أصفر مميز */
                }

                    .valorant-coaching-card .card-features li svg {
                        color: #28a745; /* لون أيقونة الصح */
                    }

            .valorant-coaching-card .buy-btn {
                background-color: #ff4655;
                color: white;
                font-size: 18px;
                padding: 12px 35px;
                border-radius: 50px;
                border: 2px solid #ff4655;
                margin-top: auto; /* يدفع الزر لأسفل البطاقة */
                align-self: center; /* لتوسيط الزر */
            }

                .valorant-coaching-card .buy-btn:hover {
                    background-color: transparent;
                    color: #ff4655;
                    box-shadow: 0 0 15px rgba(255, 70, 85, 0.5);
                    transform: translateY(-3px) scale(1.05);
                }
        /* Styling for the new custom offer card */
        .custom-offer-card {
            display: flex;
            flex-direction: column;
            width: 100%;
            max-width: 350px;
            background: linear-gradient(145deg, #1f1133, #0d061c);
            border-radius: 12px;
            border: 1px solid #8e6abf;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
            transition: transform 0.3s ease-out;
            padding: 20px;
            margin: 20px auto;
            text-align: right;
        }

        .calculator-card:hover {
            transform: translateY(-10px) scale(1.03); /* هذا السطر هو سبب التكبير */
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .custom-offer-card:hover .offer-order-btn,
        .custom-offer-card:hover .offer-price-range {
            transform: translateY(0); /* يعود لمكانه الطبيعي */
            opacity: 1;
        }

        .custom-offer-card .offer-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .custom-offer-card .offer-image {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid #ff4655; /* لون فالورانت */
        }

        .custom-offer-card .offer-title {
            font-size: 1.5rem;
            color: white;
            margin: 0;
            flex-grow: 1;
        }

        .custom-offer-card .offer-description {
            font-size: 1rem;
            color: var(--light-text);
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .custom-offer-card .offer-features {
            list-style: none;
            padding: 0;
            margin: 0 0 20px 0;
        }

            .custom-offer-card .offer-features li {
                display: flex;
                align-items: center;
                gap: 10px;
                margin-bottom: 8px;
                font-size: 0.95rem;
                color: var(--accent-yellow);
            }

                .custom-offer-card .offer-features li svg {
                    color: #28a745; /* لون أيقونة الصح */
                }

        .custom-offer-card .offer-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: auto;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .custom-offer-card .offer-price {
            font-size: 1.8rem;
            font-weight: bold;
            color: #ff4655; /* لون فالورانت */
        }

        .custom-offer-card .buy-btn {
            background-color: #ff4655; /* لون فالورانت */
            color: white;
            font-size: 16px;
            padding: 10px 25px;
            border-radius: 50px;
            border: 2px solid #ff4655;
        }

            .custom-offer-card .buy-btn:hover {
                background-color: transparent;
                color: #ff4655;
                box-shadow: 0 0 15px rgba(255, 70, 85, 0.5);
                transform: translateY(-3px) scale(1.05);
            }

        /* START: Smaller Cards for Software Subscriptions (Updated Size) */

        #homeSoftwareSubscriptionsContainer .subscription-item {
            width: 220px; /* التعديل: تم تصغير العرض أكثر إلى 220px */
            min-height: auto;
        }

            #homeSoftwareSubscriptionsContainer .subscription-item .sub-image-wrapper img {
                height: 100px; /* التعديل: تم تصغير ارتفاع الصورة */
            }

            #homeSoftwareSubscriptionsContainer .subscription-item .sub-content {
                padding: 12px; /* التعديل: تم تقليل الحشوة الداخلية */
            }

                #homeSoftwareSubscriptionsContainer .subscription-item .sub-content h3 {
                    font-size: 1rem; /* التعديل: تم تصغير حجم العنوان */
                }

                #homeSoftwareSubscriptionsContainer .subscription-item .sub-content p {
                    font-size: 0.85rem; /* تصغير خط الوصف ليتناسب */
                    min-height: 30px;
                }

            #homeSoftwareSubscriptionsContainer .subscription-item .sub-price {
                font-size: 1.2rem; /* التعديل: تم تصغير حجم السعر */
            }

            #homeSoftwareSubscriptionsContainer .subscription-item .buy-btn {
                font-size: 13px; /* التعديل: تم تصغير حجم خط الزر */
                padding: 8px 12px; /* التعديل: تم تقليل حجم الزر */
            }

        /* END: Smaller Cards for Software Subscriptions (Updated Size) */
        /* Styling for Subscription Subcategory Labels */
        .subscription-subcategory-label {
            text-align: center;
            color: var(--accent-yellow);
            margin-top: 25px;
            margin-bottom: 15px;
            border-bottom: 2px solid var(--main-purple);
            padding-bottom: 8px;
            display: inline-block;
        }

        /* ====================================================== */
        /* ✅ START: إضافة خلفية لصورة قسم Keys & Codes ✅ */
        /* ====================================================== */

        #software-keys-section {
            /* 1. حذف التدرج اللوني القديم */
            /* background: linear-gradient(145deg, #3c1870, #A32D3B); */ /* <-- هذا السطر يتم إلغاؤه */
            /* 2. إضافة صورة الخلفية الجديدة مع طبقة تعتيم بنفسجية */
            /* ❗❗ غيّر 'my-keys-bg.png' إلى اسم الصورة التي ستضعها في مجلد 'images' ❗❗ */
            background-image: linear-gradient(rgba(30, 17, 50, 0.85), rgba(30, 17, 50, 0.85)), url('./images/my-keys-bg.png');
            /* 3. خصائص لجعل الخلفية تملأ الشاشة وتكون ثابتة (تأثير Parallax) */
            background-size: cover;
            background-position: center;
            background-attachment: fixed; /* هذا يجعل الخلفية ثابتة أثناء التمرير */
            /* 4. الحفاظ على الإطار البنفسجي الموجود */
            border-color: #8e6abf;
        }

        /* ====================================================== */
        /* ✅ END: إضافة خلفية لصورة قسم Keys & Codes ✅ */
        /* ====================================================== */

        /* END: Custom Gradient for Keys & Codes Section Background */

        /* 3. تنسيق عرض السعر النهائي */
        #giftingFinalPriceDisplay {
            background-color: rgba(0, 0, 0, 0.2);
            border: 1px solid var(--main-purple);
            border-radius: 8px;
            padding: 15px;
            margin: 20px auto 0 auto;
            width: 100%;
            max-width: 350px;
            min-height: 4em;
            display: flex;
            flex-direction: column; /* يجعل العنوان والسعر تحت بعض */
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            gap: 5px; /* مسافة بسيطة بين العنوان والسعر */
        }

            /* تنسيق جديد لكلمة "المبلغ المطلوب" */
            #giftingFinalPriceDisplay .price-label {
                font-size: 1.1rem; /* حجم خط أكبر قليلاً للعنوان */
                color: #ccc;
                font-weight: bold;
            }

            /* تنسيق جديد لقيمة السعر */
            #giftingFinalPriceDisplay .price-value {
                font-size: 1.8rem;
                font-weight: bold;
                color: lightgreen;
            }

        /* ======================================= */
        /* ✅ START: Gifting Modal Inputs (Side Icons) */
        /* ======================================= */

        /* 2. تنسيق حقول الإدخال مع الأيقونات (بجانب الحقل) */
        .input-wrapper {
            display: flex; /* <-- جعل العناصر متجاورة */
            align-items: center; /* <-- توسيط العناصر عموديًا */
            gap: 12px; /* <-- مسافة بين الأيقونة والحقل */
            background-color: rgba(0, 0, 0, 0.2);
            border: 1px solid var(--main-purple);
            border-radius: 8px;
            padding: 8px 15px;
            width: 100%;
            max-width: 350px;
            margin: 0 auto 15px auto;
            transition: all 0.3s ease;
        }

            /* تأثير التوهج عند التركيز على الحقل (باستخدام focus-within) */
            /* تأثير التوهج عند التركيز على الحقل (باللون الأزرق) */
            .input-wrapper:focus-within {
                border-color: #00c0ff; /* ✅ تغيير اللون إلى الأزرق الفاتح */
                box-shadow: 0 0 10px rgba(0, 192, 255, 0.5); /* ✅ تغيير لون التوهج إلى الأزرق */
            }

                /* تغيير لون الأيقونة عند التركيز على الحقل */
                .input-wrapper:focus-within svg {
                    color: #00c0ff; /* ✅ تغيير اللون إلى الأزرق الفاتح */
                }

                /* تغيير لون الأيقونة عند التركيز على الحقل */
                .input-wrapper:focus-within svg {
                    color: var(--accent-yellow);
                }

            .input-wrapper input {
                /* جعل الحقل يملأ المساحة المتاحة ويبدو شفافًا */
                background: transparent;
                border: none;
                outline: none;
                width: 100%;
                flex-grow: 1;
                color: white; /* لون النص */
                font-size: 16px;
                padding: 5px 0; /* إزالة الـ padding القديم */
                text-align: right;
            }

        /* ======================================= */
        /* END: Gifting Modal Inputs (Side Icons) */
        /* ======================================= */

        /* ======================================= */
        /* ✅ START: Gifting Card Glow Animation    */
        /* ======================================= */

        @keyframes gifting-card-glow {
            0% {
                /* ✅ تقليل الشفافية (الرقم الأخير) وحجم التوهج هنا */
                box-shadow: 0 0 8px rgba(101, 73, 140, 0.4), 0 0 16px rgba(60, 24, 112, 0.4);
            }

            50% {
                /* ✅ تقليل الشفافية (الرقم الأخير) وحجم التوهج هنا أيضًا */
                box-shadow: 0 0 16px rgba(138, 111, 185, 0.6), 0 0 32px rgba(101, 73, 140, 0.6);
            }

            100% {
                /* ✅ تقليل الشفافية (الرقم الأخير) وحجم التوهج هنا */
                box-shadow: 0 0 8px rgba(101, 73, 140, 0.4), 0 0 16px rgba(60, 24, 112, 0.4);
            }
        }

        /* ======================================= */
        /* END: Gifting Card Glow Animation      */
        /* ======================================= */

        /* ======================================= */
        /* ✅ START: Gifting Calculator Card Styles (FINAL FIX) */
        /* ======================================= */

        #personal-gifting-section {
            background-image: linear-gradient(rgba(0, 0, 0, 0.65), rgba(0, 0, 0, 0.65)), url('./images/your-gifting-image.png');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            padding: 40px 20px;
            margin: 20px;
            border-radius: 15px;
            border: 1px solid #8e6abf;
        }

        @keyframes smooth-white-glow {
            0% {
                box-shadow: 0 0 5px rgba(255, 255, 255, 0.05), 0 0 10px rgba(255, 255, 255, 0.02);
            }

            50% {
                box-shadow: 0 0 12px rgba(255, 255, 255, 0.2), 0 0 20px rgba(255, 255, 255, 0.1);
            }

            100% {
                box-shadow: 0 0 5px rgba(255, 255, 255, 0.05), 0 0 10px rgba(255, 255, 255, 0.02);
            }
        }

        .calculator-card {
            position: relative;
            width: 100%;
            max-width: 450px;
            margin: 20px auto;
            margin-bottom: 20px;
            padding: 3px;
            border-radius: 20px;
            /* الخلفية المتدرجة الشفافة */
            background: linear-gradient(45deg, rgba(60, 24, 112, 0.4), rgba(6, 12, 58, 0.4), rgba(163, 45, 59, 0.4));
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.4s ease;
            /* ✅ تطبيق انيميشن التوهج الأبيض هنا */
            animation: smooth-white-glow 2s infinite alternate ease-in-out;
        }

            .calculator-card:hover {
                transform: translateY(-8px); /* يرفع الكارد لأعلى بمقدار 8 بكسل */
                box-shadow: 0 10px 25px rgba(255, 255, 255, 0.2); /* يضيف ظلًا أكبر ليعطي إحساس العمق */
                border-color: rgba(255, 255, 255, 0.4); /* يجعل الحدود أكثر وضوحاً */
            }

        .calculator-card-content {
            background: rgba(30, 17, 50, 0.6);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: none;
            padding: 30px;
            border-radius: 18px;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .calculator-card-icon {
            width: 80px;
            height: 80px;
            margin-bottom: 20px;
            filter: drop-shadow(0 0 15px rgba(255, 255, 255, 0.6));
        }

        .calculator-card h3 {
            font-size: 1.8rem;
            color: #ffffff;
            margin-bottom: 15px;
            border: none;
            padding: 0;
        }

        .calculator-card p {
            font-size: 1rem;
            color: #e0d8f0;
            line-height: 1.6;
            max-width: 300px;
            margin-bottom: 25px;
        }

        .calculator-card .buy-btn {
            background-color: transparent;
            color: white;
            font-size: 18px;
            padding: 12px 35px;
            border-radius: 50px;
            border: 2px solid white;
            box-shadow: none;
            transition: all 0.3s ease;
        }

            .calculator-card .buy-btn:hover {
                background-color: white;
                color: #3c1870;
                transform: translateY(-3px) scale(1.05);
                box-shadow: 0 6px 20px rgba(255, 255, 255, 0.3);
            }

        /* ======================================= */
        /* END: Gifting Calculator Card Styles  */
        /* ======================================= */

        /* 1. تصميم الحاوية الرئيسية (لجعل الكروت بجانب بعضها) */
        #softwareKeysContainer {
            display: flex;
            flex-wrap: nowrap; /* يمنع الكروت من النزول لسطر جديد */
            justify-content: flex-start;
            gap: 30px;
            overflow-x: auto; /* يضيف شريط تمرير أفقي */
            padding-bottom: 20px;
            /* لإخفاء شريط التمرير الافتراضي */
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

            #softwareKeysContainer::-webkit-scrollbar {
                display: none;
            }

        /* 2. تصميم كروت المفاتيح الجديدة (Glassmorphism + RGB Glow) */
        .gaming-key-card {
            position: relative;
            flex: 0 0 auto;
            width: 280px; /* تم الإرجاع للحجم الأصلي */
            min-height: 250px; /* تم الإرجاع للحجم الأصلي */
            padding: 25px; /* تم الإرجاع للحجم الأصلي */
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.4s ease;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
        }

            /* 3. تأثيرات Hover الجديدة */
            .gaming-key-card:hover {
                transform: translateY(-10px) scale(1.03);
                border: 1px solid rgba(255, 255, 255, 0.3);
                animation: rgb-border 4s linear infinite;
                box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6);
            }

            /* 4. تصميم صور المنتجات داخل الكروت */
            .gaming-key-card img {
                width: 120px; /* تم الإرجاع للحجم الأصلي */
                height: 120px; /* تم الإرجاع للحجم الأصلي */
                object-fit: contain;
                filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.5));
            }

        /* 5. انيميشن الإطار المتوهج الملون */
        @keyframes rgb-border {
            0% {
                border-color: #ff007f;
            }

            20% {
                border-color: #ff5e3a;
            }

            40% {
                border-color: #fff147;
            }

            60% {
                border-color: #00d7ff;
            }

            80% {
                border-color: #c900ff;
            }

            100% {
                border-color: #ff007f;
            }
        }

        /* ======================================= */
        /* END: New Keys Section Styles */
        /* ======================================= */

        /* ======================================= */
        /* START: Glowy Button Style               */
        /* ======================================= */

        /* 1. تعريف حركة التوهج (Animation) */
        @keyframes glow-animation {
            0% {
                box-shadow: 0 0 5px #fff, 0 0 10px #fff, 0 0 15px #007bff;
            }

            50% {
                box-shadow: 0 0 20px #fff, 0 0 30px #007bff, 0 0 40px #007bff;
            }

            100% {
                box-shadow: 0 0 5px #fff, 0 0 10px #fff, 0 0 15px #007bff;
            }
        }

        /* 2. تطبيق الستايل على أزرار التأكيد */
        .button-primary {
            background-color: #ffffff; /* ✅ خلفية بيضاء */
            color: #110e1a; /* ✅ لون الخط أسود ليكون واضحًا */
            border: 1px solid #ddd;
            transition: all 0.3s ease;
            animation: glow-animation 3s infinite linear; /* ✅ تطبيق حركة التوهج */
        }

            .button-primary:hover {
                background-color: #f0f0f0;
                color: #000;
                /* دمج تأثيري الحركة للأعلى والتكبير في سطر واحد */
                transform: translateY(-2px) scale(1.05);
            }

        /* تنسيقات أزرار نافذة التأكيد */
        #confirm-yes-btn {
            background-color: var(--green-buy-btn); /* أخضر */
            color: white;
        }

            #confirm-yes-btn:hover {
                background-color: var(--green-buy-btn-hover);
            }

        #confirm-no-btn {
            background-color: #6c757d; /* رمادي */
            color: white;
        }

            #confirm-no-btn:hover {
                background-color: #5a6268;
            }



        /* ✅ توسيط ليبل Marvel Rivals ID */
        #marvel-rivals-id-group {
            text-align: center !important; /* !important لضمان تطبيق التنسيق */
        }

        /* ✅ توسيط placeholder الخاص بـ Marvel Rivals ID */
        #marvel_rivals_id_input::placeholder {
            text-align: center;
        }
        /* Default styles for RTL (Arabic) */
        h1, h2, h3 {
            margin-right: 20px;
            border-right: 4px solid var(--accent-yellow);
            padding-right: 10px;
            display: inline-block;
        }

        .modal .close-btn {
            right: 15px;
            left: auto;
        }

        #navbar .logo-area img {
            margin-left: 10px;
            margin-right: 0;
        }


        /* Styles for LTR (English) when applied to the html tag */
        html[dir="ltr"] body {
            text-align: left;
        }

        html[dir="ltr"] h1,
        html[dir="ltr"] h2,
        html[dir="ltr"] h3 {
            margin-left: 20px;
            margin-right: 0;
            border-left: 4px solid var(--accent-yellow);
            border-right: none;
            padding-left: 10px;
            padding-right: 0;
        }

        html[dir="ltr"] .modal .close-btn {
            left: 15px;
            right: auto;
        }

        html[dir="ltr"] #navbar .logo-area img {
            margin-right: 10px;
            margin-left: 0;
        }

        html[dir="ltr"] .cart-item-extra-info {
            text-align: left;
        }

        html[dir="ltr"] .nav-link::after {
            transform-origin: right;
        }

        html[dir="ltr"] .nav-link:hover::after {
            transform-origin: left;
        }

        html[dir="ltr"] .footer-link img {
            margin-right: 8px;
            margin-left: 0;
        }

        html[dir="ltr"] .support-button img {
            margin-right: 5px;
            margin-left: 0;
        }


        /* Reset styles that should not have direction */
        h3,
        .modal-body h2,
        .content-page h2,
        #footer h3,
        #comments-section h3,
        .login-container h2, .signup-container h2,
        .product-item h3,
        .subscription-item .sub-content h3,
        .payment-method-card h3 {
            margin-right: 0;
            border-right: none;
            padding-right: 0;
            margin-left: 0;
            border-left: none;
            padding-left: 0;
        }



        #services-section {
            /* ❗ غيّر 'services-background.png' إلى اسم الصورة التي تريدها */
            background-image: linear-gradient(rgba(30, 17, 50, 0.85), rgba(30, 17, 50, 0.85)), url('./images/services-background.png') !important;
            background-size: cover !important;
            background-position: center !important;
            background-attachment: fixed !important;
            background-color: transparent !important; /* للتأكد من عدم ظهور أي لون قديم */
            /* الخصائص الأخرى للقسم تبقى كما هي */
            border: 1px solid #8e6abf;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin: 20px;
            position: relative;
            border-radius: 15px;
            backdrop-filter: none;
            -webkit-backdrop-filter: none;
        }


        /* تنسيق البطاقة الأساسي */
        .service-offer-card {
            position: relative;
            width: 100%;
            max-width: 300px;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            min-height: 380px; /* لتثبيت ارتفاع البطاقات */
            transition: all 0.3s ease-in-out;
            overflow: hidden;
            cursor: pointer;
        }

            .service-offer-card::before {
                content: '';
                position: absolute;
                top: -1px;
                left: -1px;
                right: -1px;
                bottom: -1px;
                z-index: -1;
                border-radius: 13px;
                background: linear-gradient(45deg, #FF6F61, #FFD166, #4A90E2, #7B42F2);
                opacity: 0;
                filter: blur(10px);
                transition: opacity 0.5s ease-in-out, filter 0.5s ease-in-out;
            }

            /* ✅✅ START: تعديل لزيادة قوة توهج بطاقات الخدمات ✅✅ */

            .service-offer-card:hover::before {
                opacity: 1;
                filter: blur(15px); /* ✅ زيادة قوة البلور لنشر التوهج بشكل أكبر */
            }

            .service-offer-card:hover {
                transform: translateY(-8px) scale(1.02);
                /* ✅ التوهج الجديد باللون البنفسجي */
                box-shadow: 0 12px 30px rgba(0, 0, 0, 0.5), 0 0 35px rgba(170, 100, 255, 0.7);
            }

        /* ✅✅ END: تعديل لزيادة قوة توهج بطاقات الخدمات ✅✅ */

        .service-card-image {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid white;
            margin-bottom: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .service-offer-card h3 {
            font-size: 1.5rem;
            color: white;
            margin: 10px 0;
            border-bottom: none;
            padding-right: 0;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
        }

        .service-card-description {
            font-size: 1rem;
            color: var(--light-text);
            text-align: center;
            flex-grow: 1;
            display: flex;
            align-items: center;
            padding: 0 10px;
        }

        .service-offer-card button {
            background-color: transparent;
            color: white;
            border: 2px solid white;
            padding: 10px 25px;
            border-radius: 50px;
            font-weight: bold;
            font-size: 16px;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

            .service-offer-card button:hover {
                background-color: white;
                color: #110e1a;
                box-shadow: 0 0 10px rgba(255, 255, 255, 0.7);
                transform: translateY(-2px);
            }


        /* التنسيق الخاص بكل بطاقة على حدة */
        #design-offer-card {
            background: linear-gradient(135deg, #1e0b3c, #0d061c);
            border: 1px solid #8e6abf;
        }

        #developing-offer-card {
            background: linear-gradient(135deg, #0b1a3c, #06111c);
            border: 1px solid #4a90e2;
        }


        /* ======================== END: Custom Service Cards ======================== */
        #modalProductInfo .description-display {
            text-align: right;
        }

        .custom-order-header-text,
        #designs .custom-order-header-text {
            position: relative;
            top: -40px;
            border: 1px solid rgba(255, 255, 255, 0.5);
            padding: 10px 15px;
            border-radius: 8px;
            display: block; /* تأكد من أن العنصر block */
            width: fit-content; /* اجعل العرض يتناسب مع المحتوى فقط */
            margin: 0 auto; /* هذه الخاصية تقوم بتوسيط العنصر */
            background-color: transparent;
            color: inherit;
        }

        #developing .custom-order-card {
            transition: transform 0.3s ease-out; /* انتقال سلس لحركة الصعود فقط */
        }

            #developing .custom-order-card:hover {
                transform: translateY(-10px); /* يصعد للأعلى بمقدار 10 بكسل */
            }

        #developing .offer-order-btn {
            /* تدرج لوني من الأرجواني الفاتح إلى الأرجواني الغامق */
            background: linear-gradient(to bottom, #cda1ff, #4b2075);
            color: white; /* لون النص الأبيض */
        }


            /* يمكنك إضافة تأثير عند المرور بالماوس لإكمال التنسيق */
            #developing .offer-order-btn:hover {
                /* تدرج لوني مختلف عند المرور بالماوس لإعطاء تأثير التفاعل */
                background: linear-gradient(to top, #cda1ff, #4b2075);
                box-shadow: 0 0 15px #cda1ff;
                transform: translateY(-2px); /* إضافة حركة بسيطة للأعلى */
            }


        /* === START: Custom Developing Cards Styling === */
        .custom-order-card {
            position: relative; /* ضروري لجعل بطاقة العرض تتموضع بشكل صحيح */
            overflow: hidden; /* لإخفاء أي محتوى يخرج عن الإطار */
            justify-content: center; /* لتوسيط الفورم بعد إخفاء العرض */
        }

        .offer-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(145deg, rgba(44, 26, 64, 0.95), rgba(30, 17, 50, 1));
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 25px;
            box-sizing: border-box;
            z-index: 2;
            transition: opacity 0.4s ease-out, transform 0.4s ease-out;
            text-align: center;
        }

            .offer-overlay.hidden {
                opacity: 0;
                transform: translateY(-20px); /* تأثير حركة للأعلى عند الاختفاء */
                pointer-events: none;
            }


        /* هذا هو الكود الأساسي الذي يجب أن تعدله */
        .offer-image {
            width: 100%;
            max-width: 150px;
            height: 200px;
            display: block;
            margin: 0 auto 15px auto;
            border-radius: 8px;
            object-fit: cover;
            /* ✅ تم إزالة البوردر والظل من هنا لجعلهما خاصين بكل قسم */
        }


        /* ✅ هذا الكود يطبق بوردر أحمر ووهج على صور قسم التصاميم فقط */
        #designs .offer-image {
            border: 3px solid #8B0000; /* ✅ اللون الأحمر الغامق */
            box-shadow: 0 0 15px rgba(220, 53, 69, 0.4);
        }


        /* ✅ هذا الكود يطبق بوردر بنفسجي ووهج على صور قسم التطوير فقط */
        #developing .offer-image {
            border: 3px solid #8e6abf; /* لون بنفسجي */
            box-shadow: 0 0 15px rgba(142, 106, 191, 0.4);
        }

        .offer-overlay h3 {
            color: var(--white-text);
            border-bottom: none;
            padding-bottom: 5px;
            margin-bottom: 10px;
        }

        .offer-price-range {
            font-size: 1.1rem;
            font-weight: bold;
            color: var(--accent-yellow);
            margin: 10px 0 20px 0;
        }

        .offer-order-btn {
            padding: 12px 30px;
            font-size: 18px;
            background-color: var(--accent-yellow);
            color: var(--black-text);
            border-radius: 50px;
        }

            .offer-order-btn:hover {
                background-color: #e6b800; /* لون أغمق عند التمرير */
                box-shadow: 0 0 15px var(--accent-yellow);
            }



        /* تعديل الفورم لتكون مخفية في البداية */
        .custom-order-form {
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease-in 0.3s; /* تأخير بسيط لتظهر بعد اختفاء العرض */
        }

            .custom-order-form.visible {
                opacity: 1;
                pointer-events: auto;
            }


        /* === END: Custom Developing Cards Styling === */

        /* === START: Custom Order Cards Styling === */
        .custom-order-card {
            position: relative;
            overflow: hidden;
            justify-content: center;
            width: 100%;
            max-width: 300px;
            min-height: 500px; /* ✅ تم إضافة هذا السطر لتحديد الارتفاع الأدنى للبطاقة */
            background: linear-gradient(145deg, rgba(44, 26, 64, 0.7), rgba(30, 17, 50, 0.9));
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
            text-align: center;
            border: 1px solid var(--main-purple);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease-out;
        }

        #designs .custom-order-card:hover {
            transform: translateY(-10px);
        }

        .custom-order-card h3 {
            margin-top: 0;
            margin-bottom: 15px;
            color: var(--accent-yellow);
            border-bottom: 2px solid var(--main-purple);
            padding-bottom: 10px;
        }

        .custom-order-description {
            color: var(--light-text);
            min-height: 80px; /* لضمان تساوي ارتفاع الوصف في البطاقتين */
            line-height: 1.6;
        }

        .custom-order-form {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: auto; /* يدفع الفورم لأسفل البطاقة */
        }

            .custom-order-form input,
            .custom-order-form textarea {
                width: 100%;
                box-sizing: border-box; /* لضمان أن الـ padding لا يزيد من العرض */
                margin: 0;
            }

            .custom-order-form textarea {
                min-height: 120px;
                resize: vertical;
            }


        /* === END: Custom Order Cards Styling === */
        @keyframes smooth-glow {
            0% {
                box-shadow: 0 0 10px rgba(0, 192, 255, 0.4);
                border-color: rgba(0, 192, 255, 0.6);
            }

            50% {
                box-shadow: 0 0 20px rgba(0, 192, 255, 0.8), 0 0 30px rgba(0, 192, 255, 0.3);
                border-color: rgba(0, 192, 255, 1);
            }

            100% {
                box-shadow: 0 0 10px rgba(0, 192, 255, 0.4);
                border-color: rgba(0, 192, 255, 0.6);
            }
        }


        /* تنسيق زر تأكيد الدفع بواسطة PayPal */
        .paypal-confirm-btn {
            display: inline-block;
            padding: 12px 25px;
            font-size: 18px;
            font-weight: bold;
            text-align: center;
            text-decoration: none;
            color: white;
            background-color: #0070ba; /* لون أزرق بايبال */
            border: 2px solid #0070ba;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 112, 186, 0.3);
        }


            /* تأثير التمرير (Hover effect) */
            .paypal-confirm-btn:hover {
                background-color: #00457c; /* لون أزرق أغمق عند التمرير */
                border-color: #00457c;
                transform: translateY(-2px);
                box-shadow: 0 6px 20px rgba(0, 112, 186, 0.5);
            }


            /* تأثير عند الضغط (Active effect) */
            .paypal-confirm-btn:active {
                transform: translateY(0);
                box-shadow: 0 2px 10px rgba(0, 112, 186, 0.2);
            }


        /* تأكد من إضافة هذا الكود لجعله يعمل بشكل صحيح مع نموذج الدفع */
        #paypalForm .paypal-confirm-btn {
            width: 100%;
            margin-top: 15px;
            margin-left: auto;
            margin-right: auto;
        }

        .paypal-link {
            color: #0070ba; /* لون أزرق بايبال */
            font-weight: bold;
            text-decoration: none; /* لإزالة الخط تحت الرابط */
            transition: color 0.3s ease;
        }

            .paypal-link:hover {
                color: #16468a; /* لون أزرق أغمق عند التمرير */
                text-decoration: underline; /* لإظهار الخط عند التمرير */
            }


        /* New specific styles for subscription buttons only */
        .subscription-item .buy-btn {
            background-color: #000000 !important; /* لون أسود معتم بالكامل */
            color: white !important;
            border: 1px solid white !important;
            transition: all 0.3s ease;
        }

            .subscription-item .buy-btn:hover {
                background-color: #000000 !important; /* 1. يضمن بقاء الخلفية سوداء تمامًا */
                transform: scale(1.05); /* 2. يقوم بتكبير الزر قليلاً */
                text-shadow: 0 0 8px rgba(255, 255, 255, 0.9); /* 3. يضيف توهجًا أبيض للنص */
                box-shadow: none; /* (اختياري) لإلغاء أي توهج قديم للإطار */
            }

        .subscription-item .add-to-cart-btn {
            background-color: var(--accent-yellow) !important;
            color: var(--black-text) !important;
            border: none !important;
            border-radius: 8px !important;
            padding: 10px !important;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

            .subscription-item .add-to-cart-btn:hover {
                background-color: #e6b800 !important;
                transform: translateY(-2px);
            }

            .subscription-item .add-to-cart-btn img {
                filter: none; /* Reset any potential filter on the icon */
                transform: none; /* Reset any potential transform on the icon */
            }

        .checkout-btn-centered {
            display: block;
            margin: 20px auto 0;
            padding: 15px 30px;
            font-size: 18px;
            font-weight: bold;
            border-radius: 8px;
            cursor: pointer;
            background-color: white;
            color: var(--main-purple);
            border: none !important; /* Use !important to override other rules */
            transition: all 0.3s ease-in-out;
        }

            .checkout-btn-centered:hover {
                /* تأثير التوهج عند تمرير الماوس */
                animation: rgb-glow-pulse 4s infinite linear;
                transform: translateY(-2px);
                background-color: #f0f0f0 !important; /* استخدام !important لفرض اللون */
                color: var(--main-purple) !important; /* استخدام !important لفرض اللون */
            }


        @keyframes rgb-glow-pulse {
            0% {
                box-shadow: 0 0 5px rgba(255, 0, 0, 0.9), 0 0 15px rgba(255, 0, 0, 0.7), 0 0 30px rgba(255, 0, 0, 0.5);
                border-color: rgba(255, 0, 0, 0.9);
            }

            16% {
                box-shadow: 0 0 5px rgba(255, 255, 0, 0.9), 0 0 15px rgba(255, 255, 0, 0.7), 0 0 30px rgba(255, 255, 0, 0.5);
                border-color: rgba(255, 255, 0, 0.9);
            }

            33% {
                box-shadow: 0 0 5px rgba(0, 255, 0, 0.9), 0 0 15px rgba(0, 255, 0, 0.7), 0 0 30px rgba(0, 255, 0, 0.5);
                border-color: rgba(0, 255, 0, 0.9);
            }

            50% {
                box-shadow: 0 0 5px rgba(0, 255, 255, 0.9), 0 0 15px rgba(0, 255, 255, 0.7), 0 0 30px rgba(0, 255, 255, 0.5);
                border-color: rgba(0, 255, 255, 0.9);
            }

            66% {
                box-shadow: 0 0 5px rgba(0, 0, 255, 0.9), 0 0 15px rgba(0, 0, 255, 0.7), 0 0 30px rgba(0, 0, 255, 0.5);
                border-color: rgba(0, 0, 255, 0.9);
            }

            83% {
                box-shadow: 0 0 5px rgba(255, 0, 255, 0.9), 0 0 15px rgba(255, 0, 255, 0.7), 0 0 30px rgba(255, 0, 255, 0.5);
                border-color: rgba(255, 0, 255, 0.9);
            }

            100% {
                box-shadow: 0 0 5px rgba(255, 0, 0, 0.9), 0 0 15px rgba(255, 0, 0, 0.7), 0 0 30px rgba(255, 0, 0, 0.5);
                border-color: rgba(255, 0, 0, 0.9);
            }
        }

        /* 2. تطبيق تأثير الوهج المتغير على الكارت عند المرور بالماوس */
        .subscription-option-label:hover .subscription-option-card {
            transform: translateY(-3px);
            animation: rgb-glow-pulse 4s infinite linear;
        }

        /* الكود السابق للإطار */
        .modal-product-header {
            /* تنسيقات الإطار اللي هتضيفها */
            border: 0.5px solid var(--main-purple);
            border-radius: 12px;
            padding: 10px;
            margin-bottom: 15px;
            background-color: rgba(0, 0, 0, 0.2);
            /* <<-- التعديلات الجديدة هنا -->> */
            display: flex;
            flex-direction: row-reverse; /* الصورة على اليمين والنصوص على اليسار */
            align-items: center; /* توسيط العناصر رأسيًا */
            justify-content: space-between; /* توزيع المساحة بين العناصر */
        }

            .modal-product-header .text-content {
                /* السماح للحاوية بأن تتمدد لتشغل المساحة المتاحة */
                flex-grow: 1;
                /* محاذاة النصوص إلى اليمين (لأن اللغة العربية RTL) */
                text-align: right;
                /* إزالة أي هوامش داخلية قديمة */
                padding: 0;
                margin: 0;
            }



            /* تعديل بسيط لضمان أن النصوص داخل الإطار تظهر بشكل مناسب */
            .modal-product-header h2,
            .modal-product-header .description-display,
            .modal-product-header .platform-display {
                margin: 0;
            }



        /* Defina a animação de pulsação para o item selecionado */
        @keyframes selected-glow-pulse {
            0% {
                box-shadow: 0 0 8px rgba(255, 204, 0, 0.5);
            }

            50% {
                box-shadow: 0 0 16px rgba(255, 204, 0, 0.8);
            }

            100% {
                box-shadow: 0 0 8px rgba(255, 204, 0, 0.5);
            }
        }



        @keyframes rgb-glow-pulse {
            0% {
                box-shadow: 0 0 10px rgba(255, 0, 0, 0.95), 0 0 20px rgba(255, 0, 0, 0.8), 0 0 40px rgba(255, 0, 0, 0.6);
                border-color: rgba(255, 0, 0, 0.95);
            }

            16% {
                box-shadow: 0 0 10px rgba(255, 255, 0, 0.95), 0 0 20px rgba(255, 255, 0, 0.8), 0 0 40px rgba(255, 255, 0, 0.6);
                border-color: rgba(255, 255, 0, 0.95);
            }

            33% {
                box-shadow: 0 0 10px rgba(0, 255, 0, 0.95), 0 0 20px rgba(0, 255, 0, 0.8), 0 0 40px rgba(0, 255, 0, 0.6);
                border-color: rgba(0, 255, 0, 0.95);
            }

            50% {
                box-shadow: 0 0 10px rgba(0, 255, 255, 0.95), 0 0 20px rgba(0, 255, 255, 0.8), 0 0 40px rgba(0, 255, 255, 0.6);
                border-color: rgba(0, 255, 255, 0.95);
            }

            66% {
                box-shadow: 0 0 10px rgba(0, 0, 255, 0.95), 0 0 20px rgba(0, 0, 255, 0.8), 0 0 40px rgba(0, 0, 255, 0.6);
                border-color: rgba(0, 0, 255, 0.95);
            }

            83% {
                box-shadow: 0 0 10px rgba(255, 0, 255, 0.95), 0 0 20px rgba(255, 0, 255, 0.8), 0 0 40px rgba(255, 0, 255, 0.6);
                border-color: rgba(255, 0, 255, 0.95);
            }

            100% {
                box-shadow: 0 0 10px rgba(255, 0, 0, 0.95), 0 0 20px rgba(255, 0, 0, 0.8), 0 0 40px rgba(255, 0, 0, 0.6);
                border-color: rgba(255, 0, 0, 0.95);
            }
        }



        .subscription-option-label:hover .subscription-option-card {
            transform: translateY(-3px);
            animation: rgb-glow-pulse 4s infinite linear;
        }



        /* تأكد أن هذا الكود موجود بالفعل ويجعل الخلفية داكنة */
        .subscription-option-label input[type="radio"] {
            appearance: none;
            -webkit-appearance: none;
            position: absolute;
            display: none; /* أضف هذا السطر  */
        }



        /* توهج أزرق سماوي (لفورتنايت) */
        @keyframes glow-blue {
            0%, 100% {
                box-shadow: 0 0 5px #00b8ff, 0 0 10px #00b8ff;
            }

            50% {
                box-shadow: 0 0 20px #00b8ff, 0 0 30px #00b8ff;
            }
        }


        /* توهج أحمر مائل على الوردي لفالورانت */
        @keyframes glow-red-pink {
            0%, 100% {
                box-shadow: 0 0 10px #ff4655, 0 0 20px #ff4655;
                border-color: #ff4655;
            }

            50% {
                box-shadow: 0 0 30px #e6324b, 0 0 50px #e6324b;
                border-color: #e6324b;
            }
        }


        /* توهج أبيض مائل للرمادي (لروبلوكس) */
        @keyframes glow-white {
            0%, 100% {
                box-shadow: 0 0 5px #ff7700, 0 0 10px #ff7700;
                border-color: #ff7700;
            }

            50% {
                box-shadow: 0 0 20px #ffaa60, 0 0 30px #ffaa60;
                border-color: #ffaa60;
            }
        }



        /* توهج ذهبي (لجينشن) */
        @keyframes glow-gold {
            0%, 100% {
                box-shadow: 0 0 5px #f5d685, 0 0 10px #f5d685;
            }

            50% {
                box-shadow: 0 0 20px #fff2d1, 0 0 30px #fff2d1;
            }
        }



        /* توهج أزرق قوي (لروكيت ليج) */
        @keyframes glow-blue {
            0%, 100% {
                box-shadow: 0 0 10px #00a8ff, 0 0 20px #00a8ff;
                border-color: #00a8ff;
            }

            50% {
                box-shadow: 0 0 40px #33ccff, 0 0 60px #33ccff;
                border-color: #33ccff;
            }
        }



        /* توهج بنفسجي (لمارفل) */
        @keyframes glow-purple {
            0%, 100% {
                box-shadow: 0 0 5px #a450ff, 0 0 10px #a450ff;
            }

            50% {
                box-shadow: 0 0 20px #cda1ff, 0 0 30px #cda1ff;
            }
        }




        /* 2. تطبيق كل حركة على الكارت المخصص لها */
        #valorant-card:hover {
            animation: glow-red-pink 1.5s infinite ease-in-out;
            border-color: #ff4655; /* أحمر فالورانت */
        }

        #fortnite-card:hover {
            animation: glow-blue 1.5s infinite ease-in-out;
            border-color: #00b8ff; /* أزرق فورتنايت */
        }

        #roblox-card:hover {
            animation: glow-white 1.5s infinite ease-in-out;
            border-color: #ffffff; /* أبيض روبلوكس */
        }

        #genshin-card:hover {
            animation: glow-gold 1.5s infinite ease-in-out;
            border-color: #f5d685; /* ذهبي جينشن */
        }

        #rocket-card:hover {
            animation: glow-blue 1.5s infinite ease-in-out;
            border-color: #00a8ff; /* أزرق */
        }

        #marvel-card:hover {
            animation: glow-purple 1.5s infinite ease-in-out;
            border-color: #a450ff; /* بنفسجي مارفل */
        }

        #roblox {
            /* كود الخلفية الحالي (إذا كان موجودًا، عدله ليتوافق أو أضفه لو مش موجود) */
            background-image: linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.8)), url('./images/robloxwallpaper.png');
            background-size: cover;
            background-position: center;
            border-radius: 15px;
            padding: 20px;
            position: relative; /* مهم جدًا: للسماح للعنصر الزائف بالوضع المطلق بالنسبة له */
            overflow: hidden; /* لإخفاء أي جزء من البلور يخرج عن حدود الزوايا المستديرة */
            z-index: 1; /* للتأكد من أن محتوى القسم يظهر فوق الخلفية المضببة */
        }

            #roblox::before {
                content: ''; /* ضروري للعنصر الزائف */
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background-image: linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.8)), url('./images/robloxwallpaper.png');
                background-size: cover;
                background-position: center;
                filter: blur(5px); /* <<-- هنا نضيف تأثير البلور (8px مثال، يمكنك تغيير القيمة) -->> */
                z-index: -1; /* لوضعه خلف محتوى القسم */
            }

        #rocketleague {
            /* كود الخلفية الحالي كما هو */
            background-image: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/rlwallpaper.png');
            background-size: cover;
            background-position: center;
            border-radius: 15px;
            padding: 20px;
            position: relative; /* مهم جدًا: للسماح للعنصر الزائف بالوضع المطلق بالنسبة له */
            overflow: hidden; /* لإخفاء أي جزء من البلور يخرج عن حدود الزوايا المستديرة */
            z-index: 1; /* للتأكد من أن محتوى القسم يظهر فوق الخلفية المضببة */
        }

            #rocketleague::before {
                content: ''; /* ضروري للعنصر الزائف */
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background-image: url('./images/rlwallpaper.png'); /* نفس صورة الخلفية */
                background-size: cover;
                background-position: center;
                background-color: rgba(0, 0, 0, 0.5); /* 0.5 تعني 50% تعتيم. غيّرها حسب الحاجة */
                background-blend-mode: multiply; /* هذه الخاصية تجعل اللون يتداخل بشكل جيد مع الصورة */
                filter: blur(2px); /* <<-- هنا نضيف تأثير البلور (8px مثال، يمكنك تغيير القيمة) -->> */
                z-index: -1; /* لوضعه خلف محتوى القسم */
                /* يمكنك إضافة طبقة داكنة خفيفة هنا أيضًا لتعتيم الصورة قبل البلور، لكن التدرج اللوني في العنصر الأب كافي */
                /* background-color: rgba(0, 0, 0, 0.3); */
            }

        #vodafoneForm .input-fields textarea {
            resize: none;
            height: 15px; /* <-- تم تعديل الارتفاع ليتطابق بدقة */
        }



        /* 1. تعريف حركة الصعود والظهور */
        @keyframes payment-details-slide-up {
            from {
                opacity: 0;
                transform: translateY(15px); /* تبدأ من أسفل قليلاً */
            }

            to {
                opacity: 1;
                transform: translateY(0); /* تنتهي في مكانها الطبيعي */
            }
        }



        /* 2. تطبيق الحركة على قسم الدفع عند ظهوره */
        #vodafoneDetails.is-visible,
        #paypalDetails.is-visible {
            animation: payment-details-slide-up 0.4s ease-out;
        }

        .add-to-cart-btn {
            background-color: #28a745; /* هذا هو اللون الأخضر الفاتح */
            color: white; /* لون النص أبيض ليكون واضحًا */
            border: none;
            border-radius: 8px; /* حواف دائرية للزر */
            padding: 10px; /* مساحة داخلية أكبر */
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

            .add-to-cart-btn img {
                width: 24px; /* حجم الأيقونة أكبر */
                height: 24px;
            }

            .add-to-cart-btn:hover {
                background-color: #218838; /* لون أغمق قليلاً عند التمرير */
                transform: translateY(-2px);
            }

        .footer-layout-container {
            display: flex;
            align-items: center;
            justify-content: space-between; /* هذا السطر هو الأهم: يضع العناصر على الطرفين */
            flex-wrap: wrap;
            margin-bottom: 25px;
            padding-bottom: 25px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .trust-badges-container {
            display: flex;
            justify-content: center; /* لتوسيط الأيقونات */
            align-items: center;
            gap: 30px;
            flex-wrap: wrap;
            margin: 20px auto; /* هامش من الأعلى والأسفل */
            padding: 0;
            border: none;
            max-width: 800px; /* لضمان عدم تمدد الحاوية بشكل مبالغ فيه */
            border-bottom: 1px solid rgba(255, 255, 255, 0.1); /* خط فاصل */
        }

        .suggestion-button {
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--accent-yellow);
            color: var(--black-text);
            border: none;
            border-radius: 50px;
            padding: 10px 20px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            gap: 8px;
            margin: 20px auto; /* لتوسيط الزر */
            width: auto;
        }

        #steam-points-section {
            position: relative; /* مهم جدًا لوضع العنصر الوهمي */
            overflow: hidden; /* لإخفاء أي جزء من الصورة قد يتجاوز حدود القسم */
            border-radius: 15px; /* لجعل الزوايا مستديرة للقسم بالكامل */
            /* باقي خصائص القسم هنا (مثل الـ padding للمحتوى) */
            padding: 20px; /* مثال لترك مسافة للمحتوى */
            color: white; /* لجعل النصوص بيضاء فوق الخلفية الداكنة */
        }

        #steamGiftCardsPageContainer .product-item:hover,
        #steamGiftCardsHomeContainer .product-item:hover {
            transform: translateY(-8px) scale(1.02);
            animation: smooth-glow 1.5s infinite ease-in-out;
            border-color: #00c0ff;
        }

        #steam-points-section::before {
            content: ''; /* ضروري للعنصر الوهمي */
            position: absolute; /* لوضعه بشكل مطلق داخل العنصر الأب */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('./images/steamgirl.png'); /* مسار صورتك */
            background-size: cover;
            background-position: center;
            background-attachment: fixed; /* إذا كنت تريد تأثير التثبيت */
            filter: blur(5px); /* قيمة الضبابية، يمكنك تعديلها (مثال: 5px) */
            z-index: -1; /* لوضعه خلف المحتوى */
            border-radius: 15px; /* ليتطابق مع زوايا القسم الأب */
        }



        /* يمكنك إضافة طبقة تدرج لوني فوق الخلفية الضبابية لجعل النصوص أوضح */
        #steam-points-section::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.55); /* لون أسود شبه شفاف */
            z-index: -1; /* ليكون بين الخلفية الضبابية والمحتوى */
            border-radius: 15px;
        }

        #steam-points-section {
            /* هنا يتم وضع الصورة كخلفية */
            background-image: linear-gradient(rgba(0, 0, 0, 0.65), rgba(0, 0, 0, 0.65)), url('./images/steamgirl.png');
            background-size: cover; /* لضمان تغطية الصورة للمساحة بالكامل */
            background-position: center; /* لتوسيط الصورة */
            background-attachment: fixed; /* لتثبيت الخلفية أثناء التمرير */
            border-radius: 15px; /* لجعل الزوايا مستديرة */
        }

        .remove-item-btn {
            /* الخصائص الأساسية */
            width: 30px;
            height: 30px;
            font-size: 18px;
            font-weight: 700;
            /* التصميم */
            background-color: rgba(255, 71, 87, 0.15);
            color: #ff4757;
            border: 1px solid #ff4757;
            border-radius: 6px;
            /* التموضع */
            cursor: pointer;
            flex-shrink: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 0;
            margin-right: 10px; /* مسافة عن اليمين */
            /* ✅✅ التعديل الجديد: إنزال الزر للأسفل ✅✅ */
            margin-top: 10px; /* يمكنك زيادة هذا الرقم لإنزاله أكثر (مثلاً 15px) */

            transition: all 0.2s ease;
        }

            /* تأثير المرور (Hover) يبقى كما هو */
            .remove-item-btn:hover {
                background-color: #ff4757;
                color: white;
                transform: scale(1.05);
                box-shadow: 0 0 12px rgba(255, 71, 87, 0.7);
                border-color: white;
            }


        /* === START: خلفية قسم حسابات ستيم أوفلاين === */
        #offline-steam-section {
            /* 1. مسار صورة الخلفية */
            padding-top: 5px !important;
            background-image: linear-gradient(rgba(31, 17, 51, 0.8), rgba(31, 17, 51, 0.8)), url('./images/offlinewallpaper.png'); /* <--- غيّر هذا المسار */
            /* 2. خصائص لتثبيت الخلفية وضمان وضوحها */
            background-size: cover; /* لضمان تغطية الصورة للمساحة بالكامل */
            background-position: center; /* لتوسيط الصورة */
            background-attachment: fixed; /* لجعل الخلفية ثابتة أثناء التمرير (تأثير Parallax) */
            /* 3. خصائص لتحسين المظهر */
            border: 1px solid #8e6abf; /* إضافة إطار بنفسجي خفيف */
            padding: 30px 20px; /* زيادة المساحة الداخلية لظهور الخلفية بشكل أفضل */
        }


        /* === END: خلفية قسم حسابات ستيم أوفلاين === */
        #games-section {
            position: relative; /* يجب أن يكون العنصر له وضع نسبي أو مطلق */
            /* جعل الخلفية شفافة جزئياً لكي يظهر تأثير الضبابية */
            background: rgba(30, 17, 50, 0.6); /* لون بنفسجي شبه شفاف */
            /* هذا هو الكود الذي يطبق تأثير الضبابية على ما هو خلف العنصر */
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(8px); /* لدعم متصفحات Safari */

            background-size: cover;
            background-position: center 90%;
            background-attachment: fixed;
            border-radius: 15px;
        }

        #game-topup-section {
            /* الصورة كخلفية مع طبقة داكنة لضمان وضوح النص */
            background-image: linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), url('./images/skyyy.png');
            background-size: cover; /* لكي تغطي الصورة المساحة بالكامل */
            background-position: center; /* لتوسيط الصورة */
            background-attachment: fixed; /* (اختياري) لجعل الخلفية ثابتة أثناء التمرير */
            border-radius: 15px; /* (اختياري) لجعل الزوايا مستديرة */
        }

        #genshin-id-group label {
            display: none;
        }

        #genshin-id-group label {
            text-align: center !important; /* إضافة !important لضمان تطبيق التنسيق */
        }

        #genshinImpact {
            background-image: url('./images/genshinimpactbackground.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            padding: 50px 20px;
            color: #fff;
        }



        /* 1. سنجعل القاعدة القديمة مسؤولة عن المسافة فقط */
        #modalPrice {
            margin-bottom: 15px;
            /* (text-align: center; موجودة بالفعل في الحاوية الأب) */
        }



        /* 2. سننشئ قاعدة جديدة للكلاس الذي أضفناه للتو */
        .price-badge {
            display: inline-block; /* ضروري لتطبيق الحشو والإطار */
            color: #90ee90;
            font-weight: bold;
            border: 1px solid #4a2f6c; /* يمكنك وضع اللون البنفسجي الذي تفضله هنا */
            padding: 5px 15px;
            border-radius: 20px;
        }

        #modalPaymentMethod {
            text-align: center;
        }

        #payment-method-group label {
            width: 100%;
            text-align: center;
        }



        /* 1. تعريف حركة الصعود والظهور */ s
        @keyframes payment-details-slide-up {
            from  {
                opacity: 0;
                transform: translateY(15px); /* تبدأ من أسفل قليلاً */
            }

            to {
                opacity: 1;
                transform: translateY(0); /* تنتهي في مكانها الطبيعي */
            }
        }



        /* 2. تطبيق الحركة على قسم الدفع عند ظهوره */
        #vodafoneDetails.is-visible,
        #paypalDetails.is-visible {
            animation: payment-details-slide-up 0.4s ease-out;
        }



        /* === END: أنيميشن نافذة تفاصيل الدفع === */

        /* تنسيق المجموعة الجديدة لحقول الإدخال */
        .form-inputs-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }



        /* تنسيق الحاوية الجديدة التي تجمع حقول الإدخال والزر */
        .payment-details-grid {
            display: flex;
            flex-wrap: wrap; /* يسمح للعناصر بالنزول لسطر جديد عند الحاجة */
            flex-direction: row-reverse; /* هذا السطر هو الأهم: يضع حقول الإدخال على اليمين */
            justify-content: space-between;
            align-items: flex-start;
            gap: 15px; /* مسافة بين المجموعات */
            width: 100%;
        }



        /* تنسيق حقول الإدخال لتمتلئ في مكانها */
        .input-fields {
            display: flex;
            flex-direction: column;
            gap: 10px; /* مسافة بين حقول الإدخال */
            width: 100%;
            max-width: 350px;
            order: 1; /* يضمن بقاء الحقول على اليمين حتى على الشاشات الصغيرة */
        }



        /* تنسيق زر "تم الدفع!" ليكون في مكانه الصحيح */
        .button-container {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center; /* <<< تم التعديل هنا لضمان التوسيط */
            gap: 10px;
            width: 100%;
            max-width: 350px;
            order: 2;
        }

        .confirm-payment-btn {
            width: 100%;
            margin-top: 10px;
        }

        .payment-layout {
            display: flex;
            flex-wrap: wrap;
            justify-content: center; /* يمكن حذف هذا السطر أو تركه */
            align-items: flex-start; /* هذا هو السطر الجديد لرفع المحتوى للأعلى */
            gap: 30px;
            margin-top: 20px;
            flex-direction: row-reverse; /* هذا السطر هو الإضافة الجديدة */
        }



        .qr-code-container {
            display: flex; /* <-- لجعل العناصر بجانب بعضها */
            justify-content: space-between; /* <-- لتوزيع المسافة بين العنصرين */
            align-items: center; /* <-- لمحاذاة العناصر رأسيًا في المنتصف */
            padding: 15px;
            background-color: rgba(93, 0, 18, 0.05);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* قاعدة جديدة لعمود النصوص */
        .qr-text-content {
            text-align: right; /* لضمان محاذاة النص لليمين */
        }

        /* تعديل بسيط على صورة الكود لتناسب التصميم الجديد */
        .qr-code-image {
            flex-shrink: 0; /* لمنع الصورة من الانكماش */
            margin-right: 15px; /* لإضافة مسافة بينها وبين النص */
        }

        .qr-code-container p {
            font-size: 14px;
            color: var(--light-text);
            margin-bottom: 5px; /* <-- قمنا بتقليل القيمة هنا لرفع النص */
        }



        /* تنسيق صورة الـ QR code */
        .qr-code-image {
            width: 180px; /* <-- قمنا بزيادة العرض هنا لتكبير الصورة */
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }



        /* تحسينات للشاشات الصغيرة */
        @media (min-width: 768px) {
            .payment-details-grid {
                flex-wrap: nowrap; /* يمنع نزول العناصر لسطر جديد */
                flex-direction: row; /* يعيد الترتيب إلى الطبيعي (يمين لليسار في RTL) */
            }
        }



        /* === START: Roblox Section Background === */
        #roblox {
            /* -->> غير هذا المسار إلى مسار صورة روبلوكس الصحيح <<-- */
            background-image: linear-gradient(rgba(0, 0, 0, 0.65), rgba(0, 0, 0, 0.65)), url('./images/robloxwallpaper.png');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            border-radius: 15px;
            padding: 20px;
        }



        /* === END: Roblox Section Background === */
        #valorantPoints {
            background-image: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/Ascent_Map.png');
            background-size: cover;
            background-position: center;
            border-radius: 15px;
            padding: 20px;
        }




        /* هذا الكود يعيد تطبيق الخلفية مع أولوية أعلى */
        #steamPoints {
            background-image: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/steampointswallpaper.png');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }



        /* === START: Store Reviews Carousel === */
        .reviews-carousel-container {
            max-width: 90%; /* تقدر تغير العرض حسب ما يناسبك */
            margin: 20px auto;
            overflow: hidden; /* أهم جزء: لإخفاء باقي التقييمات اللي بره الإطار */
            position: relative;
            -webkit-mask-image: linear-gradient(to right, transparent, black 20%, black 80%, transparent 100%);
            mask-image: linear-gradient(to right, transparent, black 20%, black 80%, transparent 100%);
        }

        .reviews-carousel-track {
            display: flex; /* عشان يخلي الكروت جنب بعض */
            gap: 20px; /* مسافة بين كل تقييم والتاني */
            /* العرض ده بيتحسب بناءً على عدد الكروت وعرض كل كارت (هنضاعفهم بالجافاسكريبت) */
            /* مثال: لو عندك 10 كروت وعرض الكارت 270px، العرض هيكون (270 * 20) = 5400px */
            width: calc(270px * 20);
            animation: scroll 40s linear infinite; /* اسم الأنيميشن ومدته ونوعه */
        }



        /* الأنيميشن اللي بيحرك الشريط من اليمين للشمال */
        @keyframes scroll {
            0% {
                transform: translateX(0);
            }

            100% {
                /* بنحركه بنسبة 50% عشان لما يخلص يرجع للبداية من غير ما يبان فرق */
                transform: translateX(calc(-270px * 10));
            }
        }



        /* عشان نوقف الحركة لما الماوس يجي فوق التقييمات */
        .reviews-carousel-container:hover .reviews-carousel-track {
            animation-play-state: paused;
        }



        #store-reviews-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-width: 600px;
            /* ✅ التعديل هنا: تقليل الهامش السفلي من 40px إلى 20px */
            margin: 20px auto 20px auto;
        }



        /* === END: Store Reviews Carousel === */

        /* === START: Store Average Rating Styles === */
        #store-average-rating-display {
            text-align: center;
            margin: 20px 0;
            padding: 20px;
            background-color: rgba(44, 26, 64, 0.5);
            border-radius: 12px;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
        }

            #store-average-rating-display .stars {
                font-size: 2.5rem; /* حجم كبير للنجوم */
                color: var(--accent-yellow);
                margin-bottom: 10px;
            }

                #store-average-rating-display .stars .star.empty {
                    color: #555; /* لون النجمة الفارغة */
                }

            #store-average-rating-display .summary-text {
                font-size: 1rem;
                color: var(--light-text);
                font-weight: bold;
            }



        .payment-info-label {
            color: #34c759;
            font-weight: bold;
            margin: 0; /* ✅✅ أهم إضافة: إلغاء الهامش الافتراضي */
            font-size: 14px; /* ✅ توحيد حجم الخط ليتناسب */
        }

        .green-text {
            color: #28a745; /* هذا لون أخضر شائع وجذاب */
        }

        .modal .product-modal-image {
            max-width: 150px;
            height: auto;
        }



        /* تنسيق صورة المنتج داخل النافذة المنبثقة */
        .modal-content img.product-modal-image {
            max-width: 150px; /* أقصى عرض للصورة */
            height: auto; /* يحافظ على نسبة أبعاد الصورة */
            margin-bottom: 15px; /* مسافة أسفل الصورة */
            border-radius: 8px; /* حواف دائرية للصورة */
        }



        /* === START: كود تغيير لون الوصف في نافذة الشراء === */
        #modalProductInfo .description-display {
            color: var(--accent-yellow);
            font-weight: bold;
            max-width: 96%;
            font-size: 11px; /* تم تصغير حجم الخط هنا */
        }



        /* === END: كود تغيير لون الوصف في نافذة الشراء === */
        #fortnite {
            position: relative;
            z-index: 1;
            overflow: hidden; /* لإخفاء أي أجزاء زائدة من الخلفية عند الحواف الدائرية */
        }

            #fortnite::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
            }



        /* === START: Subscription Options Style === */

        /* === START: Subscription Options Style === */
        #subscriptions-section {
            background-image: linear-gradient(rgba(0, 0, 0, 0.65), rgba(0, 0, 0, 0.65)), url('./images/purplewallpaper.png');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            border-radius: 15px;
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            border: 1px solid #8e6abf;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin: 20px;
            position: relative;
        }

        #subscription-options-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .subscription-option-label {
            position: relative;
            cursor: pointer;
        }

            .subscription-option-label input[type="radio"] {
                appearance: none;
                -webkit-appearance: none;
                position: absolute;
            }

        .subscription-option-card {
            background-image: linear-gradient(135deg, #2c1a40, #1a2a40);
            border: 2px solid #8e6abf; /* الإطار البنفسجي الأساسي */
            border-radius: 8px;
            padding: 12px;
            text-align: center;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: none; /* التأكد من عدم وجود أي توهج في الحالة الطبيعية */
            animation: none;
        }

            .subscription-option-card .period {
                display: block;
                font-size: 16px;
                color: var(--white-text);
                transition: color 0.3s ease;
            }

            .subscription-option-card .price {
                display: block;
                font-size: 14px;
                color: var(--accent-yellow);
                margin-top: 5px;
                transition: color 0.3s ease;
            }

        .subscription-option-label:hover .subscription-option-card {
            transform: translateY(-3px);
            /* ✅ هنا يتم تفعيل التوهج الملون عند مرور الماوس */
            animation: rgb-glow-pulse-intense 4s linear infinite;
        }

        .subscription-option-label input[type="radio"]:checked + .subscription-option-card {
            /* ✅ هنا فقط: يتم تغيير لون الإطار إلى الأصفر الثابت */
            border-color: var(--accent-yellow);
            /* نتأكد من إزالة أي توهج أو حركة لتثبيت الشكل */
            box-shadow: none;
            animation: none;
        }

        .subscription-option-label:hover input[type="radio"]:checked + .subscription-option-card {
            /* نعيد تفعيل حركة التوهج الملون فوق الإطار الأصفر */
            animation: rgb-glow-pulse-intense 4s linear infinite;
        }

        .subscription-option-label input[type="radio"]:checked + .subscription-option-card .price {
            color: #ffffff;
        }

        @keyframes gold-pulse {
            0% {
                box-shadow: 0 0 4px 1px rgba(255, 215, 0, 0.4); /* توهج أخف وأصغر في البداية */
            }

            100% {
                box-shadow: 0 0 12px 3px rgba(255, 215, 0, 0.7); /* توهج أقوى لكن ليس ساطعًا جدًا */
            }
        }

        /* === END: Subscription Options Style === */
        .cart-item-extra-info {
            font-size: 12px;
            color: #ccc;
            margin-top: 4px;
            direction: ltr;
            text-align: right;
        }

        :root {
            --dark-bg: #1e1132;
            --main-purple: #2c1a40;
            --accent-yellow: #ffcc00;
            --light-text: #e0e0e0;
            --card-bg: rgba(74, 47, 100, 0.5);
            --dark-card-bg: rgba(74, 47, 100, 0.7);
            --white-text: white;
            --black-text: #110e1a;
            --green-buy-btn: #28a745;
            --green-buy-btn-hover: #218838;
            --fixed-cart-bg: #28a745;
        }



        /* Base Body Styles */

        /* Base Body Styles */
        body {
            font-family: 'Tajawal', 'Cairo', sans-serif;
            margin: 0;
            background-image: linear-gradient(145deg, #0b0714, #1e1132, #0b0714);
            background-attachment: fixed;
            color: var(--light-text);
            direction: rtl;
            text-align: right;
            padding-top: 70px;
            padding-bottom: 0;
        }

        #home {
            background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('./images/wallpssapers.png');
            background-size: 100% auto;
            background-repeat: no-repeat;
            background-position: top center;
            position: relative;
            margin-top: 0; /* <-- ✅ أضف هذا السطر هنا */
        }


        .glass-card {
            background: linear-gradient(135deg, #a4c6ff, #1a0e2a);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            border: 1px solid #8e6abf;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin: 20px;
        }

            .glass-card.darker {
                background: var(--main-purple);
                border: 1px solid #8e6abf;
                backdrop-filter: none;
            }

        #steam-gift-cards-section {
            background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('./images/steamwallpaper.png');
            background-size: cover;
            background-position: center;
            position: relative;
            z-index: 1;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(6px);
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
        }




        /* الكود ده خاص بصفحة "Steam Gift Cards" الكاملة */
        #steamGiftCards {
            background-image: url('./images/steamwallpaper.png');
            background-size: cover;
            background-position: center;
            position: relative;
            z-index: 1;
        }

        /* ======================================================= */
        /* ✅ START: كود الشريط العلوي باللون الأصلي المتدرج للغامق ✅ */
        /* ======================================================= */

        #navbar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 4px 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 2000;
            transition: background 0.3s ease, backdrop-filter 0.3s ease;
            background: linear-gradient(90deg, rgba(23, 10, 48, 0.92) 0%, /* أزرق-بنفسجي داكن جداً (بداية) */
            rgba(35, 20, 60, 0.92) 50%, /* ✅ نقطة وسط جديدة وأغمق */
            rgba(23, 10, 48, 0.92) 100% /* ✅ نهاية التدرج: نعود للون الداكن جداً لتجنب اللمعان الزائد */
            ) !important;
            /* ✅ زيادة تأثير البلور قليلاً لتعزيز إحساس الزجاج */
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            /* ✅ تم حذف الإطار السفلي من هنا */
            border-bottom: none;
        }

            /* 2. حالة الشريط العلوي بعد التمرير (scroll) */
            #navbar.navbar-scrolled {
                /* -->> نفس التدرج لكن مع شفافية للحفاظ على التأثير الزجاجي <<-- */
                background: linear-gradient(145deg, rgba(44, 26, 64, 0.7), rgba(30, 17, 50, 0.7));
                backdrop-filter: blur(15px);
                -webkit-backdrop-filter: blur(15px);
            }

            /* ======================================================= */
            /* ✅ END: كود الشريط العلوي باللون الأصلي المتدرج للغامق  ✅ */
            /* ======================================================= */

            #navbar .logo-area {
                display: flex;
                align-items: center;
            }

                #navbar .logo-area img {
                    width: 80px;
                    height: auto;
                    margin-left: 10px;
                }

            #navbar .logo-text-container {
                display: flex;
                flex-direction: column;
                align-items: flex-start;
                line-height: 1.1;
            }

        .logo-text-container {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            line-height: 1.1;
            gap: 2px; /* مسافة بسيطة بين By Sohayl والزر */
        }



        /* تنسيقات زرار تغيير العملة */
        #currency-selector {
            padding: 4px 0.2px;
            font-size: 10px;
            border-radius: 4px;
            border: 1px solid var(--accent-yellow);
            background-color: transparent;
            color: var(--light-text);
            cursor: pointer;
            width: auto;
            margin-top: 5px;
        }

            #currency-selector:hover {
                background-color: rgba(255, 204, 0, 0.2);
            }



        /* إلغاء تنسيقات Egypt و EG اللي لم تعد موجودة */
        .country-name {
            display: none !important;
        }



        /* عشان الزر ما يتأثرش بالتنسيقات القديمة */
        #navbar .nav-utility-section select {
            margin-top: 0 !important;
        }

        .by-sohayl {
            font-size: 18px;
            font-weight: bold;
            color: var(--accent-yellow);
            text-shadow: 0 0 8px rgba(255, 204, 0, 0.8);
            margin-bottom: 1px;
        }

            .by-sohayl a {
                color: var(--accent-yellow);
                text-decoration: none;
                transition: color 0.3s ease;
            }

                .by-sohayl a:hover {
                    color: #e6b800;
                }

        .country-name {
            font-size: 13px;
            font-weight: bold;
            color: var(--white-text);
            text-shadow: none;
            display: flex;
            align-items: center;
        }

            .country-name .flag-emoji {
                margin-left: 5px;
                font-size: 18px;
            }



        /* Middle Section Styles */
        .nav-middle-section {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-grow: 1; /* يجعله يأخذ المساحة المتاحة في المنتصف */
            gap: 20px;
        }



        /* Utility Section Styles */
        .nav-utility-section {
            display: flex;
            align-items: center;
            gap: 15px; /* المسافة بين العناصر الداخلية */
        }



        /* Navbar Links and Dropdowns */
        .nav-link {
            cursor: pointer;
            font-weight: bold;
            transition: color 0.3s ease;
            font-size: 14px;
            position: relative;
            padding-bottom: 5px;
            color: var(--light-text);
            text-decoration: none;
            display: block;
        }

            .nav-link:hover {
                color: var(--white-text); /* يصبح أبيض ناصع عند المرور */
                text-shadow: 0 0 5px rgba(255, 255, 255, 0.5), 0 0 10px rgba(255, 255, 255, 0.2);
            }

            .nav-link::after {
                content: '';
                position: absolute;
                width: 100%;
                height: 2px;
                bottom: 0;
                right: 0;
                background-color: var(--accent-yellow);
                transform: scaleX(0);
                transform-origin: left;
                transition: transform 0.3s ease-out;
            }

            .nav-link:hover::after {
                transform: scaleX(1);
                transform-origin: right;
            }

        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-content {
            position: absolute;
            min-width: 160px;
            z-index: 1;
            right: 0;
            top: 100%;
            border-radius: 8px;
            text-align: right;
            /* --- الألوان والتأثير الزجاجي (مع الاحتفاظ بالتدرج الذي أعجبك) --- */
            background-color: rgba(200, 180, 255, 0.95);
            background: linear-gradient(145deg, #3C2A6B, #171030);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid #7289DA;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.6), 0 0 15px rgba(114, 137, 218, 0.5);
            /* 4. إعدادات انيميشن "Slide Up & Fade" السريع */
            opacity: 0;
            visibility: hidden;
            /* ✅ التعديل الأهم: يبدأ من أسفل قليلاً */
            transform: translateY(10px);
            transform-origin: top;
            /* ✅ زمن انتقال أسرع بكثير (0.2 ثانية) */
            transition: opacity 0.2s ease-out, transform 0.2s ease-out, visibility 0.2s;
        }

        /* حالة الفتح عند مرور الماوس */
        .dropdown:hover .dropdown-content {
            /* ✅ إظهار كامل (Opacity: 1) والتحرك إلى مكانه الأصلي (translateY: 0) */
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        /* تنسيق روابط القائمة */
        .dropdown-content a {
            color: #e0e0e0;
            text-align: right;
            justify-content: flex-start;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
            font-weight: bold;
            transition: background-color 0.2s ease, color 0.3s ease;
        }

            .dropdown-content a:hover {
                background-color: rgba(255, 255, 255, 0.15);
                color: var(--accent-yellow);
                text-shadow: 0 0 5px var(--accent-yellow);
            }

        .support-button {
            font-size: 14px;
            cursor: pointer;
            font-weight: bold;
            color: var(--white-text);
            transition: color 0.3s ease;
            display: flex;
            align-items: center;
            margin-left: 20px; /* المسافة عن زر البحث */
        }

            .support-button img {
                width: 20px;
                height: auto;
                margin-left: 5px;
            }

            .support-button:hover {
                color: var(--accent-yellow);
            }

        .support-icon {
            width: 20px;
            height: auto;
        }


        .fixed-cart-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            background-color: var(--fixed-cart-bg);
            color: var(--white-text);
            border: 1px solid white; /* ✅ تم تنحيف الإطار هنا */
            border-radius: 50px;
            padding: 10px 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.4); /* ✅ تم إضافة وهج أبيض خفيف */
            font-weight: bold;
        }

            .fixed-cart-button:hover {
                background-color: var(--green-buy-btn-hover);
                color: var(--white-text);
                transform: scale(1.05);
                box-shadow: 0 0 25px rgba(255, 255, 255, 0.7); /* ✅ وهج أقوى عند التمرير */
            }
        /* ✅✅ الكود الجديد بوهج أخضر فاتح ✅✅ */
        @keyframes strong-glow-pulse {
            0% {
                transform: scale(1);
                /* تم تغيير اللون إلى الأخضر الفاتح */
                box-shadow: 0 0 15px rgba(144, 238, 144, 0.5);
            }

            50% {
                transform: scale(1.1); /* تكبير بسيط مع الوهج */
                /* تم تغيير اللون إلى الأخضر الفاتح القوي */
                box-shadow: 0 0 35px 8px rgba(144, 238, 144, 0.9);
            }

            100% {
                transform: scale(1);
                /* تم تغيير اللون إلى الأخضر الفاتح */
                box-shadow: 0 0 15px rgba(144, 238, 144, 0.5);
            }
        }

        @keyframes pop {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.15);
            }

            100% {
                transform: scale(1);
            }
        }

        /* ✅ استبدال الأنيميشن القديم بالجديد */
        .fixed-cart-button.added {
            animation: strong-glow-pulse 0.4s ease-in-out;
        }

        .fixed-cart-button img {
            width: 24px;
            height: auto;
        }

        .fixed-cart-button .cart-count {
            background-color: red;
            color: white;
            border-radius: 50%;
            padding: 2px 6px;
            font-size: 12px;
            position: absolute;
            top: -5px;
            right: -5px;
        }

        h1, h2, h3 {
            margin-right: 20px;
            border-right: 4px solid var(--accent-yellow);
            padding-right: 10px;
            display: inline-block;
        }

        h3 {
            margin-right: 0;
            border-right: none;
            padding-right: 0;
            display: inline-block;
        }

        input, select, textarea {
            padding: 12px;
            font-size: 16px;
            border-radius: 8px;
            border: 1px solid #8e6abf;
            margin-top: 10px;
            width: 300px;
            font-family: 'Tajawal', sans-serif;
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--white-text);
            transition: border-color 0.3s ease;
        }

            input::placeholder,
            textarea::placeholder {
                color: var(--light-text);
                opacity: 0.8;
            }

            /* التعديل: تطبيق التوهج فقط على الحقول التي (ليست) داخل .input-wrapper
                                    واستخدام :not() لإلغاء التوهج المزدوج.
                                  */
            input:not(.input-wrapper input):focus,
            textarea:not(.input-wrapper textarea):focus,
            select:focus,
            select:hover {
                outline: none;
                border-color: #00c0ff;
                box-shadow: 0 0 10px rgba(0, 192, 255, 0.5);
            }


            select option {
                background: var(--dark-bg); /* <-- استخدام الخلفية الأغمق للخيارات */
                color: var(--white-text);
                font-weight: bold; /* جعل الخط واضحاً */
                padding: 10px; /* (قد لا تعمل في كل المتصفحات ولكنها تحسن الشكل) */
            }

        button {
            padding: 12px 20px;
            font-size: 16px;
            margin-top: 15px;
            cursor: pointer;
            border-radius: 8px;
            border: none;
            font-weight: bold;
            background-color: var(--accent-yellow);
            color: var(--black-text);
            transition: all 0.3s ease;
            font-family: 'Cairo', sans-serif;
        }

            button:hover {
                background-color: #e6b800;
                transform: translateY(-2px);
            }

        .payment-confirm-btn {
            background-color: var(--green-buy-btn);
            color: white;
            padding: 15px 30px;
            font-size: 18px;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            transition: background-color 0.3s ease, transform 0.3s ease;
            font-family: 'Cairo', sans-serif;
        }

        .payment-details-form {
            flex: 1;
            min-width: 250px;
            display: flex;
            flex-direction: row; /* تم تغيير هذا السطر من column إلى row */
            flex-wrap: wrap-reverse; /* هذا السطر الجديد سيضع الزر على اليسار */
            align-items: flex-start;
            gap: 10px;
        }

            .payment-details-form input,
            .payment-details-form textarea {
                flex-grow: 1; /* لجعل حقول الإدخال تملأ المساحة المتاحة */
                width: auto; /* لضمان أن الحقول تأخذ عرضها الطبيعي */
            }

        .confirm-payment-btn {
            width: 200px; /* يمكنك تغيير هذه القيمة لتغيير عرض الزر */
            margin: 20px 0 0 0; /* هامش من الأعلى فقط */
            margin-left: 0; /* هذا السطر يدفعه إلى اليسار */
        }

        .confirm-payment-btn {
            /* الآن يمكننا التحكم في موقعه داخل النموذج */
            width: 100%; /* لجعل الزر يملأ عرض النموذج */
            margin: 0;
            margin-top: auto; /* هذا السطر يدفعه إلى الأسفل */
        }

        button:disabled {
            background-color: #555;
            cursor: not-allowed;
            transform: none;
        }

        .payment-confirm-btn:hover:not(:disabled) {
            background-color: var(--green-buy-btn-hover);
            transform: translateY(-3px);
        }

        #shipping {
            text-align: center;
            display: none;
            padding: 20px;
            animation: fadeIn 0.8s ease-in-out;
        }

        #orderInputContainer {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 20px;
        }

            #orderInputContainer label {
                font-size: 24px;
                font-weight: bold;
                color: var(--light-text);
                margin-bottom: 10px;
            }

        #shippingDescription {
            font-size: 14px;
            color: #ccc;
            margin-top: -15px;
            margin-bottom: 20px;
        }

        #statusContainer {
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: var(--main-purple);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            max-width: 600px;
            margin: 0 auto;
        }

        #statusImage {
            width: 400px;
            height: auto;
            margin-top: 15px;
            display: none;
            opacity: 0;
            transition: opacity 0.5s ease, transform 0.5s ease;
        }

        #resultText {
            font-size: 24px;
            font-weight: bold;
            margin-top: 10px;
            text-align: center;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        #products {
            padding-top: 5px;
        }

        .search-bar-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 10px;
            margin-bottom: 20px;
            margin-right: 0;
            margin-left: 0;
        }

        #productSearch {
            width: 250px;
            margin-left: 10px;
            padding: 10px;
        }

        .products-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px; /* مسافة بين البطاقات */
        }

        .product-item {
            background: linear-gradient(145deg, rgba(74, 47, 100, 0.6), rgba(31, 17, 51, 0.8));
            padding: 10px;
            border-radius: 12px;
            width: 180px;
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
            border: 1px solid #8e6abf;
        }

        .steam-gift-card-item {
            background: linear-gradient(145deg, rgba(0, 112, 186, 0.6), rgba(0, 50, 100, 0.8));
            border: 1px solid #00c0ff;
        }



        .product-item.valorant-item {
            width: 145px;
        }

        .product-image-wrapper {
            width: 100%;
            height: 160px;
            border-radius: 8px;
            background-color: rgba(0,0,0,0.2);
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        @keyframes placeholder-shine {
            0% {
                background-position: -100% 0;
            }

            100% {
                background-position: 100% 0;
            }
        }
        /* ✅ تطبيق تأثير اللمعان على كل أماكن الصور المؤقتة */
        .product-image-wrapper::before,
        .main-image-placeholder::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to right, transparent 0%, rgba(255,255,255,0.1) 50%, transparent 100%);
            animation: placeholder-shine 1.5s infinite linear;
        }

        .product-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 8px;
            background-color: transparent;
            position: relative;
            z-index: 2;
        }

        .product-item h3 {
            min-height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 0;
            border-right: none;
            padding-right: 0;
            margin-top: 10px;
            margin-bottom: 5px;
            cursor: pointer;
        }

        .platform-icon {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 24px;
            height: 24px;
            background-color: rgba(0, 0, 0, 0.6);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 3;
            padding: 4px;
        }

            .platform-icon img {
                width: 100%;
                height: 100%;
            }

        .platform-icon-description {
            height: 16px;
            vertical-align: middle;
            margin-right: 4px;
        }

        .product-description-text {
            font-size: 14px;
            color: var(--accent-yellow);
            margin-top: -5px;
            margin-bottom: 5px;
            padding: 0 5px;
        }




        /* New style for urgency message */
        .product-urgency {
            color: #ff4757;
            font-weight: bold;
            margin-top: 5px;
            margin-bottom: 5px;
            font-size: 14px;
        }

        .product-item p {
            min-height: 24px;
            margin-top: 2px;
            margin-bottom: 5px;
        }

        .subscription-item {
            /* الخلفية: تدرج لوني من بنفسجي غامق إلى أغمق */
            background: linear-gradient(145deg, rgba(74, 47, 100, 0.6), rgba(31, 17, 51, 0.8));
            /* حواف دائرية للبطاقة */
            border-radius: 12px;
            /* عرض ثابت للبطاقة */
            width: 320px;
            /* تنسيق المحتوى ليكون عمودياً */
            display: flex;
            flex-direction: column;
            padding: 0;
            overflow: hidden;
            /* إطار خارجي بلون بنفسجي */
            border: 1px solid var(--main-purple);
            /* ظل خفيف للبطاقة */
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            /* حركة انتقالية سلسة عند التفاعل */
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
        }


            /* تنسيق البطاقة عند تمرير الماوس عليها */
            .subscription-item:hover {
                /* رفع البطاقة قليلاً لأعلى */
                transform: translateY(-8px);
                /* زيادة حدة الظل */
                box-shadow: 0 10px 25px rgba(74, 47, 100, 0.5);
            }



            .subscription-item .product-image-wrapper {
                width: 100%;
                height: 160px;
                border-radius: 8px;
                background-color: rgba(0,0,0,0.2);
                position: relative;
                overflow: hidden;
                cursor: pointer;
            }

        .sub-description-overlay {
            /* تنسيق الوصف الذي يظهر فوق الصورة */
            position: absolute;
            top: 8px;
            left: 8px;
            z-index: 3;
            background: rgba(0,0,0,0.6);
            color: white;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 12px;
            max-width: 80%;
            text-align: left;
            direction: ltr;
        }

        .subscription-item .sub-image-wrapper img {
            /* تجعل الصورة تغطي الحاوية بالكامل */
            width: 100%;
            height: 150px;
            object-fit: cover;
            transition: transform 0.4s ease;
        }

        .subscription-item:hover .sub-image-wrapper img {
            transform: scale(1.1);
        }

        .subscription-item .sub-content {
            padding: 20px;
            text-align: center;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

            .subscription-item .sub-content h3 {
                font-size: 1.25rem;
                margin: 0 0 10px 0;
                padding: 0;
                border: none;
                color: var(--white-text);
                text-align: center;
                display: block;
                cursor: pointer;
            }

            .subscription-item .sub-content p.sub-description {
                font-size: 0.9rem;
                color: var(--light-text);
                margin: 0 0 15px 0;
                flex-grow: 1;
                min-height: 50px;
                text-align: center;
            }

        .sub-footer .buy-btn {
            width: 100%;
            padding: 10px 20px;
            font-size: 16px;
            font-weight: bold;
            color: var(--black-text); /* تم التعديل إلى اللون الأسود */
            background-color: white; /* تم التعديل إلى اللون الأبيض */
            border: 1px solid var(--black-text); /* إضافة إطار أسود */
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.3s ease;
        }


        .sub-footer .product-buttons-container {
            display: flex;
            gap: 10px;
            align-items: center;
            width: 100%; /* تأكد إنها بتاخد عرض الحاوية الأب */
            justify-content: space-between; /* ده بيخلي العناصر على الأطراف */
        }

        .subscription-item .sub-price {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--accent-yellow);
        }

        .subscription-item .subscribe-btn {
            padding: 10px 20px;
            font-size: 16px;
            margin-top: 0;
            font-weight: bold;
            background-color: var(--green-buy-btn);
            color: white;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            white-space: nowrap;
        }

            .subscription-item .subscribe-btn img {
                width: 20px;
                height: 20px;
            }

            .subscription-item .subscribe-btn:hover {
                background-color: var(--green-buy-btn-hover);
            }

        /* ✅ Fix: Hide all sections by default to prevent flashing on load */
        .section {
            display: none; /* This is the key change */
            padding: 20px;
            animation: fadeIn 0.8s ease-in-out;
        }

        .content-page {
            max-width: 800px;
            margin: 20px auto;
            padding: 30px;
            line-height: 1.8;
        }

            .content-page h2 {
                text-align: center;
                border: none;
            }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes shake {
            0% {
                transform: rotate(0deg) translateY(-8px);
            }

            25% {
                transform: rotate(2deg) translateY(-8px);
            }

            50% {
                transform: rotate(0deg) translateY(-8px);
            }

            75% {
                transform: rotate(-2deg) translateY(-8px);
            }

            100% {
                transform: rotate(0deg) translateY(-8px);
            }
        }

        .product-image {
            display: block;
            width: 80%;
            max-width: 400px;
            height: auto;
            border-radius: 12px;
            margin: 0 auto 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .modal .product-image {
            max-width: 250px;
            margin: 0 auto 10px;
        }

        .modal.valorant-modal .product-image {
            max-width: 180px;
        }

        .modal.fortnite-modal .product-image {
            max-width: 180px;
        }

        .product-description-box {
            border: 1px solid #8e6abf;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            background-color: rgba(255, 255, 255, 0.05);
        }

        #productPageDescription {
            font-size: 16px;
            text-align: right;
            margin-top: 10px;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        #productDescription strong {
            color: var(--accent-yellow);
        }

        .product-description .steam-logo,
        .product-description .microsoft-logo,
        .product-description .netflix-logo,
        .product-description .disney-logo,
        .payment-logo {
            vertical-align: middle;
            height: 20px;
            margin-right: 5px;
        }

        .payment-option-logo {
            height: 18px;
            width: auto;
            vertical-align: middle;
            margin-left: 8px;
        }

        .payment-logo {
            vertical-align: middle;
            height: 25px;
        }

        #loading {
            display: none;
            margin-top: 15px;
            font-size: 18px;
            font-weight: bold;
            color: var(--accent-yellow);
        }

        #confirmationMessage {
            margin-top: 15px;
            font-size: 18px;
            font-weight: bold;
            color: #00ff00;
            text-align: center;
        }

        .loading-spinner {
            display: inline-block;
            width: 50px;
            height: 50px;
            border: 5px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--accent-yellow);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }



        /* تنسيقات عامة للنافذة المنبثقة */
        .modal {
            position: fixed;
            z-index: 2000;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            width: 90%;
            max-width: 650px;
            padding: 25px;
            max-height: 90vh;
            display: none;
            flex-direction: column;
            background: rgba(30, 17, 50, 0.8);
            border-radius: 15px;
            border: 1px solid #4a2f6c;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

            .modal.is-visible {
                display: flex; /* لجعله يظهر عند الاستدعاء */
                opacity: 1;
                pointer-events: auto;
                transform: translate(-50%, -50%) scale(1);
            }

        /*
                                                  /*
                                                  /*
                                                  /*
                                                    ======================================================
                                                    START: MARVEL RIVALS CATEGORY STYLES
                                                    ======================================================
                                                  */

        /* 1. تنسيقات القسم الرئيسي: يتم وضع لون شفاف فوق الصورة هنا */
        #marvelRivals {
            position: relative; /* مهم عشان العنصر الزائف يكون داخل حدوده */
            overflow: hidden; /* لإخفاء أي جزء من الضبابية خارج الحواف */
            border-radius: 15px;
            padding: 20px;
            /* ده لون شفاف بيعمل تأثير التعتيم الأسود */
            background-color: rgba(0, 0, 0, 0.6);
        }

            /* 2. العنصر الزائف (::before): ده اللي هيشيل صورة الخلفية والـ blur */
            #marvelRivals::before {
                content: '';
                position: absolute;
                top: -10px; /* زيادة بسيطة للحواف عشان البلور الزيادة ما يبانش */
                left: -10px;
                right: -10px;
                bottom: -10px;
                /* تحديد الصورة وتأثير الضبابية عليها مباشرة */
                background-image: url('./images/mvwallpaper.png');
                background-size: cover;
                background-position: center;
                z-index: -1; /* لوضع العنصر ده خلف كل محتوى القسم */
                filter: blur(5px);
                -webkit-filter: blur(5px); /* لدعم متصفحات Safari */
            }

        /* 3. تصغير حجم كروت المنتجات داخل قسم مارفل فقط */
        #marvelRivalsContainer .product-item {
            width: 145px;
            min-height: 250px;
            padding: 10px;
        }

        /*
                                                    ======================================================
                                                    END: MARVEL RIVALS CATEGORY STYLES
                                                    ======================================================
                                                  */

        /* === START: أنيميشن فتح النافذة المنبثقة === */

        /* 1. تعريف الحركة نفسها */
        @keyframes modal-fade-in {
            from {
                opacity: 0;
                transform: translate(-50%, -45%) scale(0.98); /* تبدأ من أعلى قليلاً وبحجم أصغر */
            }

            to {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1); /* تنتهي في مكانها الطبيعي */
            }
        }



        /* 2. تطبيق الحركة على النافذة عند ظهورها */
        .modal.is-visible {
            animation: modal-fade-in 0.1s ease-out;
        }



        /* === END: أنيميشن فتح النافذة المنبثقة === */

        /* تنسيق الحاوية الرئيسية لنافذة الدفع */
        #vodafoneDetails .payment-layout {
            display: flex;
            flex-wrap: wrap;
            align-items: flex-start;
            justify-content: flex-end; /* ليدفع المحتوى إلى اليمين */
            gap: 30px;
            margin-top: 20px;
        }



        /* تنسيق حاوية الـ QR code (لتكون على اليسار) */
        #vodafoneDetails .payment-info-container {
            text-align: right;
            flex: 1;
            min-width: 250px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            /* هذا هو التعديل الأهم: لدفعه إلى اليسار في حالة وجود مساحة */
            order: 1;
        }



        /* تنسيق نموذج الإدخال (ليكون على اليمين) */
        #vodafoneDetails .payment-details-form {
            flex: 1;
            min-width: 250px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            /* هذا هو التعديل الأهم: لدفعه إلى اليمين في حالة وجود مساحة */
            order: 2;
        }



        /* تنسيق زر "تم الدفع!" ليكون في أعلى اليسار */

        /* تنسيق زر "تم الدفع!" ليكون في أعلى اليسار */

        /* تنسيق زر "تم الدفع!" ليكون في أعلى اليمين */
        #vodafoneForm .confirm-payment-btn {
            width: 100%;
            margin-top: -5px; /* <<< تم التعديل هنا لرفعه لأعلى */
            margin-left: 0;
            margin-right: 0;
            padding: 15px 53px;
            font-size: 18px;
            transition: all 0.3s ease-in-out;
            border: 2px solid #28a745;
        }

            #vodafoneForm .confirm-payment-btn:hover {
                background-color: #34c759; /* <-- هذا هو اللون الأخضر الأفتح الجديد */
                border-color: #34c759; /* <-- لنجعل لون الإطار متناسقًا */
                box-shadow: 0 0 15px #34c759; /* <-- تحديث لون الوهج ليتطابق */
                transform: translateY(-2px);
            }




        /* التحكم في حجم صورة المنتج داخل النافذة المنبثقة */
        .modal .product-image {
            max-width: 160px; /* يمكنك تعديل هذا الرقم لتصغير أو تكبير الصورة كما تريد */
            height: auto; /* للحفاظ على أبعاد الصورة الصحيحة */
            margin: 0 auto 15px; /* لتوسيط الصورة وإضافة مسافة أسفلها */
        }

        .modal.is-visible {
            opacity: 1;
            pointer-events: auto;
            transform: translate(-50%, -50%) scale(1);
        }



        /* === END: Final Modal Styles === */
        .modal.is-visible {
            opacity: 1;
            pointer-events: auto;
            transform: translate(-50%, -50%) scale(1);
        }

            .modal.is-visible.payment-modal .modal-body > div {
                display: none;
            }

            .modal.is-visible.payment-modal .modal-body .payment-options-container.is-visible {
                display: block;
            }

            .modal.is-visible.payment-modal .modal-body .payment-details.is-visible {
                display: block;
            }

        .overlay {
            /* يتم التحكم في إظهاره وإخفائه بالـ JavaScript */
            display: none;
            /* يغطي الشاشة بالكامل ويظهر فوق كل المحتوى */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1999;
            /* لون التعتيم (أسود شفاف) مع تأثير الضبابية */
            background-color: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            /* لضمان سلاسة الظهور */
            animation: fadeInOverlay 0.3s ease-in-out;
        }



        /* هذا الكود يضمن أن النافذة المنبثقة ستظهر فوق الـ overlay */
        .modal {
            position: fixed;
            z-index: 2000;
            -webkit-font-smoothing: antialiased;
            /* ... باقي التنسيقات ... */
        }

        @keyframes fadeInOverlay {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .modal .payment-details {
            margin-top: 20px;
            text-align: center;
        }

            .modal .payment-details p {
                margin-bottom: 10px;
                text-align: center;
            }

        .modal input, .modal textarea {
            width: 80%;
            max-width: 250px;
            display: block;
            margin-right: auto;
            margin-left: auto;
            text-align: right;
        }




        /* === START: Valorant Purchase Fix === */
        .form-parallel-group {
            display: flex;
            flex-wrap: wrap; /* Allows items to wrap on smaller screens */
            gap: 15px;
            margin: 20px auto;
            width: 95%;
            max-width: 400px;
        }

            .form-parallel-group > div {
                flex: 1; /* This makes the containers grow equally */
                min-width: 150px; /* A minimum width before wrapping */
            }

            .form-parallel-group label {
                display: block;
                margin-bottom: 8px;
                font-size: 14px;
                font-weight: bold;
                text-align: right;
                padding-right: 5px;
            }

            .form-parallel-group input,
            .form-parallel-group select {
                width: 100%; /* Makes the input/select fill its container */
                margin-top: 0;
                box-sizing: border-box;
            }




        /* === END: Valorant Purchase Fix === */
        .account-details-container {
            display: none;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 15px;
        }

            .account-details-container input {
                width: 90%;
                max-width: 280px;
            }

        .modal button {
            margin-top: 20px;
        }

        .button-container {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            gap: 4px; /* تم تقليل المسافة بين العناصر بشكل كبير جدًا */
            width: 100%;
            max-width: 350px;
            order: 2;
        }

        .modal .confirm-payment-btn, .buy-btn-product-page, .add-to-cart-text-btn, .checkout-btn-centered {
            padding: 12px 20px;
            font-size: 16px;
            border-radius: 8px;
            font-weight: bold;
            transition: transform 0.3s ease, background-color 0.3s ease;
            font-family: 'Cairo', sans-serif;
            background-color: var(--green-buy-btn);
            color: white;
            border: 1px solid #8e6abf;
        }

            .modal .confirm-payment-btn:hover, .buy-btn-product-page:hover, .add-to-cart-text-btn:hover, .checkout-btn-centered:hover {
                background-color: var(--green-buy-btn-hover);
                transform: translateY(-2px);
            }

        .modal .close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 28px;
            font-weight: bold;
            color: var(--white-text);
            cursor: pointer;
            transition: color 0.3s;
        }

            .modal .close-btn:hover {
                color: var(--accent-yellow);
            }

        .modal-body h2 {
            text-align: center;
            border-right: 0;
            margin-right: 0;
            display: block;
            width: 100%;
        }

        .modal-body h2, .modal-body p, .modal-body img, #modalProductInfo {
            text-align: center;
            margin-right: auto;
            margin-left: auto;
        }




            /* === START: كود توسيط معلومات المنصة في النافذة المنبثقة === */
            #modalProductInfo .platform-display {
                display: flex;
                align-items: center;
                justify-content: flex-start; /* محاذاة لليمين */
                width: 100%;
                gap: 5px;
                margin-bottom: 10px;
            }



            /* === END: كود توسيط معلومات المنصة في النافذة المنبثقة === */

            /* === START: كود توسيط معلومات المنصة في النافذة المنبثقة === */
            #modalProductInfo .platform-display {
                display: flex;
                align-items: center;
                justify-content: center; /* لتوسيط كل شيء في النص */
                width: 100%;
                gap: 8px;
                margin-bottom: 10px; /* مسافة بسيطة للأسفل */
            }



        /* === END: كود توسيط معلومات المنصة في النافذة المنبثقة === */
        .modal-product-info .platform-display img {
            height: 18px;
            width: auto;
        }

        .modal-product-info .description-display {
            text-align: right; /* المحاذاة لليمين */
            /* الخصائص التالية للتحكم في عدد الأسطر */
            -webkit-box-orient: vertical;
            display: -webkit-box;
            -webkit-line-clamp: 3; /* يمكنك تغيير القيمة لعدد الأسطر الذي تريده */
            overflow: hidden;
            /* خصائص للتنسيق الإضافي */
            line-height: 1.4;
            word-break: break-word; /* لمنع الكلمات الطويلة من التسبب في مشاكل التنسيق */
        }

        #productPageContent {
            display: flex;
            flex-direction: column;
        }

        .product-main-view {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            margin-bottom: 40px;
        }

        .product-image-section {
            flex: 1.2;
            min-width: 300px;
        }

            .product-image-section .main-image {
                width: 100%;
                height: auto;
                border-radius: 12px;
                box-shadow: 0 6px 20px rgba(0,0,0,0.25);
                margin-bottom: 15px;
                transition: opacity 0.6s ease-in-out;
            }

        .main-image-placeholder {
            width: 100%;
            min-height: 350px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .product-image-gallery {
            display: flex;
            gap: 10px;
        }

            .product-image-gallery .thumbnail {
                width: 70px;
                height: 70px;
                object-fit: cover;
                border-radius: 8px;
                cursor: pointer;
                border: 2px solid transparent;
                transition: border-color 0.3s;
            }

                .product-image-gallery .thumbnail:hover,
                .product-image-gallery .thumbnail.active {
                    border-color: var(--accent-yellow);
                }

        .product-details-section {
            flex: 1.3;
            min-width: 300px;
        }

            .product-details-section h1 {
                border: none;
                padding: 0;
                margin: 0 0 10px 0;
                font-size: 2.2rem;
                text-align: right;
            }

        .price-badge-container {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        #productPagePrice {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--accent-yellow);
        }

        /* تعديل حاوية السعر لتدعم عرض العناصر بجانب بعضها البعض */
        .price-badge-container {
            display: flex;
            flex-wrap: wrap; /* للسماح للعناصر بالنزول لسطر جديد عند الحاجة */
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        /* تعديل تنسيق المنصة داخل الحاوية الجديدة */
        .product-platform-info {
            display: flex;
            align-items: center;
            gap: 8px;
            /* إزالة الهوامش الزائدة لتجنب تكرارها */
            margin: 0;
            font-size: 1rem; /* تعديل حجم الخط ليكون أصغر قليلاً */
            color: var(--light-text);
        }



        /* هذا الكود يستهدف المنصة داخل الـ div الذي يحمل كلاس modal-product-header */
        .modal-product-header .product-platform-info {
            font-size: 0.85rem; /* حجم الخط الذي تريده */
            display: flex;
            align-items: center;
            gap: 8px; /* مسافة بين النص والأيقونة */
        }

        .product-platform-info img {
            height: 24px;
            width: 24px;
        }

        .product-platform-info span, .product-platform-info strong {
            line-height: 1;
        }

        .product-detail-badge {
            font-size: 14px;
            font-weight: bold;
            padding: 5px 12px;
            border-radius: 20px;
            color: white;
        }

            .product-detail-badge.bestseller {
                background-color: #ff4757;
            }

            .product-detail-badge.special {
                background-color: #3742fa;
            }

        /* 1. رفع مستطيل الوصف لأعلى أكثر */
        #productPageShortDescription {
            margin-top: -150px !important;
            display: none;
            font-size: 1rem;
            line-height: 1.6;
            flex-grow: 1;
            margin-bottom: 20px;
        }


        .quantity-selector {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 25px;
        }

            .quantity-selector label {
                font-weight: bold;
            }

            .quantity-selector button {
                width: 40px;
                height: 40px;
                padding: 0;
                margin: 0;
                font-size: 1.5rem;
                line-height: 40px;
                text-align: center;
                /* === السطرين الجداد اللي هنضيفهم === */
                position: relative; /* للسماح بتحريك العنصر */
                top: -15px; /* القيمة بالسالب لرفعه للأعلى */
            }

            .quantity-selector input::-webkit-outer-spin-button,
            .quantity-selector input::-webkit-inner-spin-button {
                -webkit-appearance: none;
                margin: 0;
            }

        .add-to-cart-product-page {
            padding: 15px 30px;
            font-size: 18px;
            font-weight: bold;
            background-color: var(--green-buy-btn);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;
        }

            .add-to-cart-product-page:hover {
                background-color: var(--green-buy-btn-hover);
                transform: translateY(-3px) scale(1.02);
                box-shadow: 0 4px 15px rgba(40, 167, 69, 0.4);
            }

        .tabs-container {
            width: 100%;
            margin-bottom: 40px;
        }

        .tab-buttons {
            border-bottom: 2px solid var(--main-purple);
        }

        .tab-button {
            padding: 15px 25px;
            cursor: pointer;
            background: none;
            border: none;
            color: var(--light-text);
            font-size: 16px;
            font-weight: bold;
            position: relative;
            opacity: 0.7;
            transition: opacity 0.3s ease;
        }

            .tab-button::after {
                content: '';
                position: absolute;
                bottom: -2px;
                left: 0;
                width: 100%;
                height: 2px;
                background-color: var(--accent-yellow);
                transform: scaleX(0);
                transition: transform 0.3s ease;
            }

            .tab-button.active {
                opacity: 1;
            }

                .tab-button.active::after {
                    transform: scaleX(1);
                }

        .tab-content {
            display: none;
            padding: 25px 10px;
            animation: fadeIn 0.5s;
            background-color: rgba(0,0,0,0.2);
            border-radius: 0 0 8px 8px;
        }

            .tab-content.active {
                display: block;
            }

        #reviews-section {
            width: 100%;
        }

        .comment-rating .star {
            font-size: 16px;
            color: #ccc;
        }

            .comment-rating .star.filled {
                color: var(--accent-yellow);
            }

        .comment-card {
            background-color: var(--main-purple);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-right: 3px solid var(--accent-yellow);
        }

        .comment-card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .comment-author {
            font-weight: bold;
            color: var(--accent-yellow);
        }

        .comment-text {
            margin: 0;
            line-height: 1.7;
        }

        .comment-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-width: 600px;
            margin: 20px auto;
        }

            .comment-form input, .comment-form textarea {
                width: 100%;
                box-sizing: border-box;
                margin-top: 0;
            }

        .rating-input {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 10px;
        }

            .rating-input .stars {
                direction: ltr;
            }

            .rating-input .star {
                font-size: 2rem;
                color: #ccc;
                cursor: pointer;
                transition: color 0.2s;
            }

            .rating-input .stars:hover .star {
                color: var(--accent-yellow);
            }

            .rating-input .star:hover ~ .star {
                color: #ccc;
            }

            .rating-input .stars[data-rating="1"] .star:nth-child(n+5),
            .rating-input .stars[data-rating="2"] .star:nth-child(n+4),
            .rating-input .stars[data-rating="3"] .star:nth-child(n+3),
            .rating-input .stars[data-rating="4"] .star:nth-child(n+2),
            .rating-input .stars[data-rating="5"] .star:nth-child(n+1) {
                color: var(--accent-yellow);
            }

        #loadMoreComments {
            display: block;
            margin: 20px auto;
        }

        .comment-footer {
            margin-top: 15px;
            font-size: 12px;
            color: #aaa;
            display: flex;
            align-items: center;
            gap: 10px;
        }

            .comment-footer .helpful-btn {
                background: none;
                border: 1px solid var(--accent-yellow);
                color: var(--accent-yellow);
                padding: 2px 8px;
                font-size: 12px;
                border-radius: 5px;
                margin: 0;
            }

                .comment-footer .helpful-btn:disabled {
                    background-color: #333;
                    color: #888;
                    border-color: #555;
                    cursor: not-allowed;
                }

        .product-page-rating {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

            .product-page-rating .stars {
                font-size: 1.5rem;
            }

                .product-page-rating .stars .star {
                    color: var(--accent-yellow);
                }

                    .product-page-rating .stars .star.empty {
                        color: #555;
                    }

            .product-page-rating .rating-summary {
                font-size: 1rem;
                color: var(--light-text);
            }


        .product-page-buttons {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }


        /* تنسيقات زر "أضف إلى السلة" في بطاقات منتجات الهدايا فقط */
        .add-to-cart-text-btn {
            width: 100%;
            padding: 12px 20px;
            font-size: 16px;
            margin-top: 15px;
            cursor: pointer;
            border-radius: 8px;
            border: 2px solid var(--green-buy-btn); /* إضافة إطار بنفس اللون */
            font-weight: bold;
            background-color: var(--green-buy-btn);
            color: white;
            transition: all 0.3s ease; /* حركة سلسة على كل الخصائص */
            font-family: 'Cairo', sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

            .add-to-cart-text-btn:hover {
                background-color: #34c759; /* لون أخضر أفتح عند التمرير */
                border-color: #34c759; /* تغيير لون الإطار ليتناسق */
                box-shadow: 0 0 15px #34c759; /* إضافة وهج بنفس اللون */
                transform: translateY(-2px); /* رفع الزر قليلاً */
            }

            .add-to-cart-text-btn img {
                width: 20px;
                height: 20px;
                margin: 0;
                padding: 0;
            }

            .add-to-cart-text-btn:hover {
                background-color: var(--green-buy-btn-hover);
            }

        .buy-btn-product-page {
            background-color: var(--green-buy-btn);
            color: white;
        }

            .buy-btn-product-page:hover {
                background-color: var(--green-buy-btn-hover);
            }

        .discord-button {
            display: inline-flex;
            align-items: center;
            background-color: #5865f2;
            color: var(--white-text);
            font-weight: bold;
            text-decoration: none;
            padding: 15px 25px;
            border-radius: 50px;
            font-size: 18px;
            margin-top: 20px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease, background-color 0.3s ease, box-shadow 0.3s ease;
        }

            .discord-button:hover {
                background-color: #4b58b4;
                transform: translateY(-5px);
                box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            }

            .discord-button img {
                height: 24px;
                width: 24px;
                margin-left: 10px;
                vertical-align: middle;
            }

        #home .home-section-buttons {
            justify-content: center;
        }

        .home-section-buttons {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .vodafone-number-highlight {
            color: var(--accent-yellow);
            font-weight: bold;
        }

        #footer {
            background: linear-gradient(145deg, #0b0714, #1d1033, #0b0714);
            color: var(--light-text);
            text-align: center;
            position: relative;
            /* ✅ التعديل الأول: تقليل البادينج (كان 30px 20px) */
            padding: 10px 10px;
            /* ✅ التعديل الثاني: تقليل المسافة فوق الفوتر (كانت 40px) */
            margin-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

            #footer h3 {
                margin-right: 0;
                border-right: none;
                padding-right: 0;
                font-size: 20px;
                margin-bottom: 20px;
            }

        .footer-links {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
        }

        .footer-link {
            color: var(--light-text);
            text-decoration: none;
            font-size: 14px;
            transition: color 0.3s ease;
        }

            .footer-link:hover {
                color: var(--accent-yellow);
            }

            .footer-link img {
                height: 18px;
                width: 18px;
                vertical-align: middle;
                margin-left: 8px;
            }

        #copyright {
            font-size: 14px;
            color: rgba(224, 224, 224, 0.7);
        }

        .store-logo-on-homepage {
            display: block;
            width: 150px;
            margin: 20px auto;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .auth-container {
            display: flex;
            justify-content: center;
            gap: 40px;
            flex-wrap: wrap;
        }

        .login-container, .signup-container {
            background-color: var(--main-purple);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            text-align: center;
            width: 350px;
            border: 1px solid #8e6abf;
        }

            .login-container h2, .signup-container h2 {
                border: none;
                margin-right: 0;
            }

            .login-container input, .signup-container input {
                display: block;
                width: 100%;
                box-sizing: border-box;
                margin-bottom: 15px;
            }

        .support-form-container {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #supportFormStatus {
            margin-top: 15px;
            font-weight: bold;
        }

        .product-buttons-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }

        .product-item .buy-btn {
            background-color: var(--green-buy-btn);
            color: white;
            font-size: 14px;
            padding: 8px 15px;
            margin-top: 0;
            border: 2px solid var(--green-buy-btn); /* <-- إضافة إطار بنفس لون الخلفية */
            transition: all 0.3s ease; /* <-- إضافة حركة انتقالية ناعمة */
        }

        .buy-btn:hover {
            box-shadow: 0 0 9px var(--green-buy-btn); /* الوهج الأخضر */
        }

        .product-item .add-to-cart-btn {
            padding: 0;
            border: none;
            background-color: transparent;
            cursor: pointer;
            width: auto;
            margin-top: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

            .product-item .add-to-cart-btn img {
                width: 31px;
                height: 31px;
                transition: transform 0.3s ease, filter 0.3s ease;
            }

            .product-item .add-to-cart-btn:hover img {
                transform: scale(1.15);
                filter: brightness(1.2);
            }

        .product-item .buy-btn:hover {
            background-color: #34c759; /* <-- اللون الأخضر الأفتح الجديد */
            border-color: #34c759; /* <-- تغيير لون الإطار ليتطابق */
            box-shadow: 0 0 15px #34c759; /* <-- إضافة وهج بنفس اللون الفاتح */
        }

        .add-to-cart-btn:hover {
            background-color: transparent;
            transform: translateY(-2px);
        }

        #comments-section {
            width: 100%;
            text-align: center;
        }

            #comments-section h3 {
                margin-right: 0;
                padding-right: 0;
            }

        #comments-modal .comment-form {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .comment-form input, .comment-form textarea {
            width: 80%;
            max-width: 350px;
            display: block;
            margin-right: auto;
            margin-left: auto;
            text-align: right;
        }

        .comment-form button {
            margin-right: auto;
            margin-left: auto;
        }

        #commentList {
            margin-top: 20px;
            text-align: right;
        }

        .comment-item {
            background-color: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            text-align: right;
        }

            .comment-item strong {
                color: var(--accent-yellow);
            }

            .comment-item p {
                margin: 5px 0 0 0;
                font-size: 14px;
            }



        /* === START: New Cart Organization CSS === */
        .cart-modal-item {
            display: flex;
            align-items: center;
            gap: 15px; /* مسافة ثابتة بين العناصر */
            background: rgba(255, 255, 255, 0.05);
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

            .cart-modal-item img {
                width: 50px;
                height: 50px; /* حجم موحد */
                object-fit: cover;
                border-radius: 6px;
                flex-shrink: 0; /* لمنع الصورة من الانكماش */
            }

            .cart-modal-item .item-details {
                flex-grow: 1;
                text-align: right;
                margin: 0;
                padding: 0;
                /* 🛑 التعديل الجديد: لترتيب العناصر عمودياً ومحاذاة البداية (اليمين) */
                display: flex; /* تفعيل فليكس بوكس */
                flex-direction: column; /* ترتيب العناصر فوق بعض */
                align-items: flex-start; /* محاذاة العناصر إلى اليمين في وضع RTL */
            }

                .cart-modal-item .item-details h4 {
                    margin: 0 0 4px 0; /* مسافة بسيطة تحت الاسم */
                    font-size: 15px;
                    line-height: 1.3;
                    /* إزالة أي محاذاة مركزية قديمة */
                    text-align: right;
                }

                .cart-modal-item .item-details p {
                    margin: 0;
                    font-size: 14px;
                    color: var(--accent-yellow);
                    font-weight: bold;
                    /* إزالة أي محاذاة مركزية قديمة */
                    text-align: right;
                }

            .cart-modal-item .quantity-controls {
                display: flex;
                align-items: center;
                gap: 8px;
                flex-shrink: 0; /* لمنع أزرار الكمية من الانكماش */
            }



            .cart-modal-item img {
                /* 🛑 زيادة الحجم */
                width: 75px !important;
                height: 75px !important;
                /* الخصائص الأخرى تبقى كما هي */
                object-fit: cover;
                border-radius: 6px;
                flex-shrink: 0;
            }

            .cart-modal-item .item-details {
                flex-grow: 1;
            }

                .cart-modal-item .item-details h4 {
                    margin: 0;
                    font-size: 16px;
                }

                .cart-modal-item .item-details p {
                    margin: 5px 0 0;
                    font-size: 14px;
                }

            .cart-modal-item .quantity-controls {
                display: flex;
                align-items: center;
                gap: 5px;
            }

                .cart-modal-item .quantity-controls button {
                    padding: 5px 10px;
                    min-width: 30px;
                    margin: 0;
                    font-size: 16px;
                    background-color: var(--accent-yellow);
                    color: var(--black-text);
                }

                .cart-modal-item .quantity-controls span {
                    font-size: 16px;
                    min-width: 20px;
                    text-align: center;
                }


        .cart-modal-total {
            margin-top: 20px;
            font-size: 20px;
            font-weight: bold;
            text-align: center;
            color: white;
        }


        #cartTotalPrice {
            color: lightgreen !important; /* هذا السطر يحافظ على لون الأرقام أخضر فاتح */
        }

        .modal .modal-content-section {
            display: none;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

            .modal .modal-content-section.is-visible {
                display: block;
                opacity: 1;
            }

        .modal-form-grid {
            display: grid;
            grid-template-columns: auto 1fr;
            gap: 15px;
            align-items: center;
            margin: 20px 0;
        }

            .modal-form-grid label {
                text-align: right;
                white-space: nowrap;
            }

            .modal-form-grid select,
            .modal-form-grid input {
                width: 100%;
                margin-top: 0;
            }

        .modal-options-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-top: 15px;
        }

            .modal-options-container select {
                width: auto;
                min-width: 200px;
            }

        #feedback-section {
            padding: 30px;
            text-align: center;
        }

            #feedback-section h2 {
                margin-bottom: 8px !important;
                padding-bottom: 0 !important;
            }

        .feedback-form-container {
            max-width: 500px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        #feedback-message {
            margin-top: 15px;
            font-weight: bold;
        }

        .rating-section {
            width: 100%;
            text-align: center;
            margin-top: 20px;
        }

        .rating-stars {
            font-size: 30px;
            color: #ddd;
            cursor: pointer;
            direction: ltr;
            display: inline-block;
        }

            .rating-stars .star {
                display: inline-block;
                transition: color 0.2s ease, transform 0.2s ease;
                color: #ddd;
            }

                .rating-stars .star:hover {
                    transform: scale(1.2);
                    color: var(--accent-yellow);
                }

                    .rating-stars .star:hover ~ .star {
                        color: #ddd;
                    }

                .rating-stars .star.selected {
                    color: var(--accent-yellow);
                }

        .product-card-rating {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 5px;
            font-size: 14px;
            margin-bottom: 8px;
        }

            .product-card-rating .star {
                color: #ccc;
                font-size: 16px;
            }

                .product-card-rating .star.filled {
                    color: var(--accent-yellow);
                }

        .rating-average {
            font-size: 20px;
            font-weight: bold;
            color: var(--accent-yellow);
            margin-top: 10px;
        }

        #rateMessage {
            font-size: 14px;
            margin-top: 10px;
        }

        #home .main-products-section {
            margin-top: 40px;
            text-align: center;
            position: relative;
            z-index: 1;
        }

            #home .main-products-section::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background-image: url('wallpaper.png');
                background-size: cover;
                background-position: center;
                filter: blur(5px);
                -webkit-filter: blur(5px);
                z-index: -1;
                border-radius: 12px;
            }

        .checkout-btn-centered {
            display: block;
            margin: 20px auto 0;
            padding: 15px 30px;
            font-size: 18px;
            font-weight: bold;
            border-radius: 8px;
            cursor: pointer;
            background-color: white;
            color: var(--main-purple);
            border: none !important;
            transition: all 0.3s ease-in-out;
            /* ✅ الإضافة: تطبيق حركة التوهج الجديدة على الزر بشكل دائم */
            animation: rgb-glow-pulse-intense 4s infinite linear;
        }

            .checkout-btn-centered:hover {
                /* تأثير التوهج عند تمرير الماوس */
                animation: rgb-glow-pulse 4s infinite linear;
                transform: translateY(-2px);
            }

            .checkout-btn-centered:hover {
                /* تأثير التوهج عند تمرير الماوس */
                animation: rgb-glow-pulse 4s infinite linear;
                transform: translateY(-2px);
            }

        .payment-method-card {
            background-color: var(--main-purple);
            border: 1px solid #8e6abf;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }

            .payment-method-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            }

            .payment-method-card h3 {
                margin-top: 0;
                margin-bottom: 10px;
                text-align: center; /* This line should be added or kept */
            }



                /* You can keep the rest of the code as is. */
                .payment-method-card h3 img {
                    height: 25px;
                    margin-left: 10px;
                }

            .payment-method-card p {
                margin: 0;
            }

        .modal .modal-header {
            text-align: center;
        }

        .payment-header-container {
            display: flex;
            justify-content: space-around; /* توزيع متساوي للمسافات */
            align-items: stretch;
            gap: 8px; /* تقليل المسافة بين المربعات */
            text-align: center;
            margin-bottom: 25px;
            width: 100%;
        }

        .payment-header-box {
            background-color: rgba(0, 0, 0, 0.2);
            padding: 8px;
            border-radius: 8px;
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: flex-start; /* <--- ✅✅ هو ده الحل ✅✅ */
            min-width: 0;
        }

            .payment-header-box h4 {
                margin: 0 0 5px 0;
                font-size: 13px; /* تصغير حجم الخط */
                color: var(--light-text);
                opacity: 0.8;
                font-weight: normal;
                border: none;
                padding: 0;
                white-space: nowrap; /* لمنع نزول النص لسطر جديد */
                overflow: hidden;
                text-overflow: ellipsis;
            }

            .payment-header-box .payment-total-amount-value,
            .payment-header-box .payment-timer-value,
            .payment-header-box .payment-summary-value { /* ✅ إضافة الكلاس الجديد هنا */
                margin: 0;
                font-size: 16px; /* تصغير حجم الخط */
                font-weight: bold;
                color: var(--accent-yellow);
                white-space: nowrap; /* لمنع نزول النص لسطر جديد */
                overflow: hidden;
                text-overflow: ellipsis;
            }

        .payment-timer-value.expired {
            color: red;
            animation: shake 0.5s ease-in-out;
        }

        .quantity-selector-card {
            background-color: #1b2838;
            border-radius: 1rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            padding: 20px;
            margin: 15px auto;
            max-width: 300px;
            text-align: center;
        }

            .quantity-selector-card h4 {
                color: white;
                font-size: 1.25rem;
                font-weight: bold;
                margin: 0 0 15px 0;
                border: none;
                padding: 0;
            }

            .quantity-selector-card .quantity-controls {
                display: flex;
                justify-content: center;
                align-items: center;
                gap: 10px;
            }

            .quantity-selector-card .quantity-btn {
                background-color: #00a8ff;
                color: white;
                border: none;
                border-radius: 8px;
                width: 40px;
                height: 40px;
                font-size: 1.5rem;
                font-weight: bold;
                cursor: pointer;
                transition: background-color 0.3s ease;
                padding: 0;
                margin: 0;
                line-height: 40px;
            }

                .quantity-selector-card .quantity-btn:hover {
                    background-color: #007bb5;
                }

            .quantity-selector-card .quantity-input {
                width: 60px;
                padding: 8px;
                text-align: center;
                font-size: 1.2rem;
                font-weight: bold;
                border: 1px solid #00a8ff;
                background-color: #110e1a;
                color: white;
                border-radius: 8px;
                -moz-appearance: textfield;
            }

                .quantity-selector-card .quantity-input::-webkit-outer-spin-button,
                .quantity-selector-card .quantity-input::-webkit-inner-spin-button {
                    -webkit-appearance: none;
                    margin: 0;
                }

            .quantity-selector-card .quantity-total {
                color: white;
                font-size: 1.1rem;
                font-weight: bold;
                margin-top: 20px;
                margin-bottom: 0;
            }

        .product-image-fly {
            position: fixed;
            z-index: 9999;
            border-radius: 10%;
            transition: all 0.8s cubic-bezier(0.55, 0.055, 0.675, 0.19);
            pointer-events: none;
        }

        #productPage.section {
            background: linear-gradient(145deg, #1f1133, #110e1a);
            border-radius: 16px;
            padding: 30px;
            border: 1px solid var(--main-purple);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            margin: 20px auto;
            max-width: 1200px;
        }

        .product-main-view {
            display: flex;
            flex-wrap: wrap;
            gap: 40px;
            align-items: flex-start;
        }

            .product-main-view .product-image-section {
                order: 1;
            }

            .product-main-view .product-details-section:nth-of-type(3) {
                order: 2;
                flex: 1.3;
            }

        #productPageFullDescription {
            order: 3;
            flex-basis: 100%;
            margin-top: 30px;
            padding: 25px;
            border-top: 1px solid var(--main-purple);
            background-color: rgba(0,0,0,0.2);
            border-radius: 8px;
        }

            #productPageFullDescription h2 {
                border-right: 3px solid var(--accent-yellow);
                padding-right: 10px;
                margin-bottom: 20px;
                display: inline-block;
            }

        #productPageTitle {
            font-size: 2.5rem;
            color: var(--white-text);
            text-shadow: 0 0 10px rgba(255, 204, 0, 0.3);
            margin-bottom: 15px;
        }

        #productPagePrice {
            font-size: 2rem;
            margin-bottom: 20px;
        }

        .product-page-rating {
            margin-bottom: 20px;
        }

        #productPageShortDescription {
            font-size: 1.1rem;
            color: #d1cde0;
            margin-bottom: 30px;
        }

        .quantity-selector {
            background-color: rgba(0,0,0,0.2);
            padding: 10px;
            border-radius: 50px;
            display: inline-flex;
            margin-bottom: 30px;
            align-items: center;
        }

            .quantity-selector label {
                font-size: 1rem;
                padding-left: 10px;
            }

            .quantity-selector button {
                background-color: var(--main-purple);
                color: var(--white-text);
                border-radius: 50%;
                width: 35px;
                height: 35px;
                font-size: 1.2rem;
                border: none;
                line-height: 1;
            }

                .quantity-selector button:hover {
                    background-color: #6a4f8a;
                    transform: scale(1.1);
                }


            .quantity-selector input {
                width: 60px;
                text-align: center;
                margin: 0;
                font-size: 1.2rem;
                font-weight: bold;
                -moz-appearance: textfield;
                /* === السطر الجديد === */
                border: none;
            }

        .tabs-container {
            margin-top: 40px;
        }

        .tab-buttons {
            border-bottom: 1px solid var(--main-purple);
            margin-bottom: 20px;
        }

        .tab-button {
            color: var(--light-text);
            opacity: 0.7;
            padding: 12px 20px;
            font-size: 1rem;
        }

            .tab-button.active {
                opacity: 1;
                color: var(--accent-yellow);
            }

        .tab-content {
            background-color: transparent;
            padding: 10px 5px;
        }




        /* === التحسينات الجديدة === */

        /* 1. إشعار مؤقت (Toast) */
        #toast-container {
            position: fixed;
            top: 80px;
            left: 20px; /* في RTL، جهة اليسار هي المكان المناسب لتجنب تغطية زر السلة */
            z-index: 9999;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 10px;
        }

        .toast-notification {
            background-color: var(--green-buy-btn);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            opacity: 0;
            transform: translateX(-120%);
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            font-weight: bold;
        }

            .toast-notification.info {
                background-color: var(--accent-yellow); /* لون أصفر للملاحظات */
                color: var(--black-text);
                font-size: 15px; /* حجم خط أكبر قليلاً */
            }

            .toast-notification.show {
                opacity: 1;
                transform: translateX(0);
            }




        /* 2. زر العودة في صفحة المنتج */
        .back-button {
            margin-bottom: 20px;
            background-color: transparent;
            border: 2px solid var(--accent-yellow);
            color: var(--accent-yellow);
            font-size: 16px;
        }

            .back-button:hover {
                background-color: var(--accent-yellow);
                color: var(--black-text);
                transform: translateY(-2px);
            }




        /* === START: New Discount Code Style === */
        .button-container {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            gap: 8px; /* تم زيادة المسافة قليلاً لتنزيل العناصر */
            width: 100%;
            max-width: 350px;
            order: 2;
        }

        .discount-code-container {
            display: flex;
            justify-content: center;
            align-items: stretch;
            margin-top: 10px; /* تم إضافة مسافة علوية بسيطة لتنزيله */
            margin-bottom: 5px;
        }

            .discount-code-container input {
                width: 180px;
                margin: 0;
                padding: 12px;
                text-align: center;
                border: 1px solid var(--main-purple);
                border-left: none; /* لإزالة الحد الفاصل من جهة الإدخال */
                border-radius: 0 8px 8px 0; /* لتدوير الحواف اليمنى فقط */
            }

            .discount-code-container button {
                margin: 0;
                padding: 12px 15px;
                font-size: 14px;
                white-space: nowrap;
                border: 1px solid var(--main-purple);
                border-right: none; /* لإزالة الحد الفاصل من جهة الزر */
                border-radius: 8px 0 0 8px; /* لتدوير الحواف اليسرى فقط */
            }



            /* === END: New Discount Code Style === */
            .discount-code-container button {
                margin-top: 0;
                padding: 10px 15px;
                font-size: 14px;
            }

        .discount-message {
            text-align: center;
            font-size: 14px;
            min-height: 20px;
            font-weight: bold;
        }

            .discount-message.success {
                color: var(--green-buy-btn);
            }

            .discount-message.error {
                color: #ff4757;
            }

        #cartTotalContainer .original-price {
            text-decoration: line-through;
            opacity: 0.7;
            font-size: 16px;
            margin-left: 10px;
        }



        .navbar-search-container {
            position: relative; /* ✅ هذا السطر ضروري لتحديد موضع القائمة المنسدلة */
            display: flex;
            align-items: center;
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 20px;
            padding: 4px 8px;
            transition: background-color 0.3s ease;
        }

            .navbar-search-container:hover {
                background-color: rgba(0, 0, 0, 0.3);
            }

        .navbar-search-input {
            background: transparent;
            border: none;
            outline: none;
            color: var(--light-text);
            font-family: 'Tajawal', sans-serif;
            width: 120px;
            transition: width 0.4s ease-in-out;
            padding: 2px 5px;
            margin: 0;
        }

            .navbar-search-input::placeholder {
                color: rgba(224, 224, 224, 0.6);
            }

        .navbar-search-container .navbar-search-input:focus {
            width: 180px;
            border-color: transparent;
            outline: none;
            box-shadow: none;
        }

        .navbar-search-btn {
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 5px;
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--light-text);
        }

            .navbar-search-btn svg {
                fill: currentColor;
                transition: color 0.3s ease;
            }

            .navbar-search-btn:hover {
                color: var(--accent-yellow);
                background-color: transparent;
                transform: none;
            }



        /* === END: CSS for Navbar Search Bar === */

        /* === Trust Badges CSS === */
        .trust-badges-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
            flex-wrap: wrap;
            margin-bottom: 25px;
            padding-bottom: 25px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .trust-badge {
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--light-text);
            font-size: 14px;
            font-weight: bold;
        }

            .trust-badge svg {
                width: 28px;
                height: 28px;
                color: var(--accent-yellow);
            }



        /* === Modal Trust Badges CSS === */

        /* الكود بعد التعديل */
        .modal-trust-badges {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-top: 30px; /* تم زيادة الهامش لإنزال العبارات */
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

            .modal-trust-badges .trust-badge {
                font-size: 12px;
            }

                .modal-trust-badges .trust-badge svg {
                    width: 20px;
                    height: 20px;
                }



        /* === START: إضافة وهج لزر اذهب للدفع === */
        #modal-action-button:hover {
            box-shadow: 0 0 15px var(--accent-yellow);
        }

        #modal-action-button {
            /* يمكنك إزالة هذه الخصائص لأنها ستطبق على الحاوية */
            /* display: block; */
            /* width: 100%; */
            /* margin-top: 20px; */
        }



        /* تنسيق الحاوية الجديدة التي تحتوي على الزر */
        .modal-content-section > div[style="text-align: center;"] {
            display: flex;
            justify-content: center;
            width: 100%;
            margin-top: 20px;
        }



        /* تنسيق الزر نفسه لكي يظهر بشكل مناسب */
        #modal-action-button {
            width: 80%; /* يمكنك تعديل هذا العرض حسب ما تراه مناسباً */
            max-width: 300px; /* لمنعه من أن يصبح كبيرًا جدًا على الشاشات الكبيرة */
        }



        /* === END: إضافة وهج لزر اذهب للدفع === */

        /* 4. تحسينات التجاوب مع الشاشات */
        @media (max-width: 1024px) {
            #navbar .nav-link, .dropdown .nav-link {
                margin-left: 10px;
                font-size: 13px;
            }
        }

        @media (max-width: 860px) {
            #navbar {
                flex-wrap: wrap;
                justify-content: center;
                padding-bottom: 8px;
            }

                #navbar .logo-area {
                    width: 100%;
                    justify-content: center;
                    margin-bottom: 5px;
                    margin-left: 0;
                }

                #navbar .nav-link, .dropdown > .nav-link {
                    padding-bottom: 2px;
                }
        }

        @media (max-width: 768px) {
            body {
                padding-top: 120px; /* تعديل ليتناسب مع الشريط العلوي الملتف */
                padding-bottom: 80px;
            }

            .product-item {
                width: calc(50% - 20px);
                min-width: 150px;
            }

                .product-item.valorant-item {
                    width: calc(50% - 20px);
                }

            .subscription-item {
                width: 90%;
                max-width: 340px;
            }

            .product-main-view {
                flex-direction: column;
            }

            .product-image-section, .product-details-section {
                min-width: 100%;
            }

            #productPage {
                padding: 15px;
            }
        }

        @media (max-width: 480px) {
            .products-container {
                gap: 15px;
            }

            .product-item {
                width: 85%;
            }

            .modal {
                width: 95%;
                padding: 15px;
            }

                .modal input, .modal textarea {
                    width: 90%;
                }

            .payment-header-container {
                flex-direction: column;
            }

            #shipping {
                padding: 10px;
            }

            #orderInputContainer input {
                width: 180px;
            }
        }

        /* ✅✅ كود حل مشكلة انتقال الخلفية الثابتة ✅✅ */
        #productPage {
            position: relative; /* لجعل العنصر مرجعًا للطبقة الوهمية */
            z-index: 1; /* لضمان أن المحتوى فوق الخلفية */
            background-color: transparent !important; /* نجعل الخلفية الأساسية شفافة */
        }

            #productPage::before {
                content: '';
                position: fixed; /* هنا نجعل الخلفية ثابتة ومنفصلة */
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                z-index: -1; /* لوضع هذه الطبقة خلف المحتوى */
                /* هنا نستخدم متغير CSS سيتم التحكم به من خلال JavaScript */
                background-image: var(--product-bg-image), linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6));
                background-blend-mode: overlay; /* لدمج الفلتر الأسود مع الصورة */
                background-size: cover;
                background-position: center;
                /* لن نضع background-attachment هنا لأنه position: fixed يغني عنه */
            }

        /* ====================================================== */
        /* ✅ START: تنسيق شريط التمرير (Scrollbar) بشكل عصري ✅ */
        /* ====================================================== */

        /* يعمل على متصفحات Chrome, Edge, Safari */
        ::-webkit-scrollbar {
            width: 8px; /* عرض الشريط */
            height: 8px; /* ارتفاع الشريط (للتمرير الأفقي) */
        }

        /* خلفية الشريط (المسار الذي يتحرك عليه) */
        ::-webkit-scrollbar-track {
            background: var(--dark-bg); /* لون بنفسجي غامق جدًا من ألوان الموقع */
        }

        /* الجزء المتحرك من الشريط */
        ::-webkit-scrollbar-thumb {
            background: #8e6abf; /* لون بنفسجي فاتح ليظهر بوضوح */
            border-radius: 10px; /* لجعله بحواف دائرية */
            border: 2px solid var(--dark-bg); /* إضافة إطار بلون الخلفية لمظهر أنحف */
        }

            /* تأثير عند مرور الماوس على الجزء المتحرك */
            ::-webkit-scrollbar-thumb:hover {
                background: #a482d1; /* جعله أفتح قليلاً عند التفاعل */
            }

        /* يعمل على متصفح Firefox */
        * {
            scrollbar-width: thin; /* جعل الشريط رفيعًا */
            scrollbar-color: #8e6abf var(--dark-bg); /* (لون الجزء المتحرك) (لون الخلفية) */
        }

        /* ====================================================== */
        /* ✅ END: تنسيق شريط التمرير (Scrollbar) بشكل عصري   ✅ */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅ START: تأثير اللمعان التفاعلي على الكروت ✅ */
        /* ====================================================== */
        .product-item, .subscription-item, .service-offer-card, .rental-card {
            position: relative; /* ضروري لعمل التأثير */
            overflow: hidden; /* لإخفاء اللمعان الزائد */
        }

            .product-item::before, .subscription-item::before, .service-offer-card::before, .rental-card::before {
                content: '';
                position: absolute;
                left: var(--mouse-x, -100%); /* المتغيرات دي هيتم التحكم فيها بالجافاسكريبت */
                top: var(--mouse-y, -100%);
                width: 150px;
                height: 150px;
                background: radial-gradient(circle, rgba(255, 255, 255, 0.2), transparent 60%);
                transform: translate(-50%, -50%);
                transition: left 0.1s ease, top 0.1s ease; /* لحركة أكثر نعومة */
                pointer-events: none; /* لمنع التأثير من إعاقة النقر */
                z-index: 1; /* ليكون فوق الصورة وتحت النص */
            }
        /* ================================================================= */
        /* 🎮 تحسين ألعاب ستيم أوفلاين للموبايل (Poster Style) */
        /* ================================================================= */

        @media (max-width: 768px) {

            /* 1. عمل شبكة ثنائية */
            #offlineSteamContainer {
                display: grid !important;
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 8px !important;
                padding: 5px !important;
            }

                /* 2. ضبط الكارت (تصغير الحواشي) */
                #offlineSteamContainer .product-item,
                #offlineSteamContainer .product-item--offline {
                    width: 100% !important;
                    min-width: 0 !important;
                    margin: 0 !important;
                    padding: 4px !important;
                    height: 100% !important;
                    min-height: 210px !important; /* طول مناسب للبوستر */
                    display: flex !important;
                    flex-direction: column !important;
                    justify-content: space-between !important;
                }

                /* 3. الصورة (طويلة وواضحة) */
                #offlineSteamContainer .product-image-wrapper {
                    height: 120px !important; /* ✅ أطول من الاشتراكات عشان بوسترات الألعاب */
                    width: 100% !important;
                    margin-bottom: 6px !important;
                }

                #offlineSteamContainer img {
                    height: 100% !important;
                    width: 100% !important;
                    object-fit: cover !important; /* الصورة تملأ المكان بالكامل */
                    border-radius: 6px 6px 0 0 !important;
                }

                /* 4. النصوص (صغيرة ومختصرة) */
                #offlineSteamContainer h3 {
                    font-size: 11px !important;
                    margin: 0 !important;
                    line-height: 1.3 !important;
                    min-height: 28px !important; /* سطرين بالظبط */
                    text-align: center !important;
                    display: -webkit-box;
                    -webkit-line-clamp: 2;
                    -webkit-box-orient: vertical;
                    overflow: hidden;
                }

                #offlineSteamContainer .product-price {
                    font-size: 13px !important;
                    font-weight: 800 !important;
                    margin: 4px 0 8px 0 !important;
                    text-align: center !important;
                    color: #66c0f4 !important; /* لون ستيم الأزرق */
                }

                /* 5. إخفاء الزوائد (وصف، سلة، أيقونات) */
                #offlineSteamContainer .add-to-cart-btn,
                #offlineSteamContainer .product-description-text,
                #offlineSteamContainer .platform-icon {
                    display: none !important;
                }

                /* 6. زر الشراء (عريض + كلمة "اشتري") */
                #offlineSteamContainer .buy-btn {
                    width: 100% !important;
                    margin-top: auto !important;
                    padding: 8px 0 !important;
                    border-radius: 6px !important;
                    /* استبدال النص */
                    font-size: 0 !important;
                    display: flex !important;
                    justify-content: center;
                    align-items: center;
                }

                    #offlineSteamContainer .buy-btn::after {
                        content: "اشتري";
                        font-size: 13px !important;
                        font-weight: bold !important;
                        color: inherit;
                    }
        }
        /* ================================================================= */
        /* 🎁 تحسين قسم الـ Gifting (حاسبة ستيم) للموبايل */
        /* ================================================================= */

        @media (max-width: 768px) {

            /* 1. ضبط مسافات السكشن نفسه */
            #personal-gifting-section {
                padding: 15px !important;
                margin: 15px 10px !important; /* هوامش جانبية صغيرة */
            }

            /* 2. ضبط الكارت ليكون بعرض الشاشة */
            #personalGiftingContainer .calculator-card {
                width: 100% !important;
                max-width: none !important; /* إلغاء الحد الأقصى */
                margin: 0 !important;
                min-height: auto !important;
                background: linear-gradient(145deg, rgba(30, 20, 50, 0.8), rgba(10, 5, 30, 0.9)) !important;
            }

            /* 3. تنسيق المحتوى الداخلي */
            #personalGiftingContainer .calculator-card-content {
                padding: 20px 15px !important;
                display: flex !important;
                flex-direction: column !important;
                align-items: center !important;
                border-radius: 12px !important;
            }

            /* 4. تصغير أيقونة ستيم */
            #personalGiftingContainer .calculator-card-icon {
                width: 50px !important;
                height: 50px !important;
                margin-bottom: 10px !important;
            }

            /* 5. تنسيق العنوان */
            #personalGiftingContainer h3 {
                font-size: 16px !important;
                margin-bottom: 8px !important;
                text-align: center !important;
            }

            /* 6. تنسيق الوصف (إظهاره بشكل أنيق) */
            #personalGiftingContainer p {
                font-size: 12px !important;
                line-height: 1.5 !important;
                color: #ccc !important;
                margin-bottom: 15px !important;
                display: block !important; /* التأكد من ظهوره حتى لو كان مخفي */
                max-width: 100% !important;
            }

            /* إلغاء كلاس الإخفاء القديم لو موجود */
            #personalGiftingContainer .hide-on-mobile {
                display: block !important;
            }

            /* 7. زر "اشتري الآن" عريض */
            #personalGiftingContainer .buy-btn {
                width: 100% !important;
                padding: 10px 0 !important;
                font-size: 14px !important;
                border-radius: 8px !important;
                background-color: transparent !important;
                border: 1px solid white !important;
            }

                #personalGiftingContainer .buy-btn:active {
                    background-color: white !important;
                    color: black !important;
                }
        }
        /* ✅ إصلاح: إخفاء صفحات المعلومات (من نحن، الشروط، الخ) بشكل افتراضي */
        #about,
        #faq,
        #terms,
        #privacy {
            display: none !important; /* الإجبار على الاختفاء */
        }

        /* ================================================================= */
        /* 📱 تصميم البوستر المدمج (Poster Style) للموبايل */
        /* ================================================================= */

        @media (max-width: 768px) {

            /* 1. شبكة ثنائية متلاصقة */
            #homeTvSubscriptionsContainer,
            #homeSoftwareSubscriptionsContainer {
                display: grid !important;
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 8px !important;
                padding: 5px !important;
            }

            /* 2. الكارت: بدون حواشي داخلية لاستغلال المساحة */
            .subscription-item {
                width: 100% !important;
                min-width: 0 !important;
                margin: 0 !important;
                padding: 4px !important; /* حاشية صغيرة جداً */
                border-radius: 8px !important;
                height: 100% !important;
                display: flex !important;
                flex-direction: column !important;
                justify-content: space-between !important;
            }

                /* 3. الصورة: تكبير الارتفاع لتأخذ حقها */
                .subscription-item .sub-image-wrapper,
                .subscription-item .product-image-wrapper {
                    height: 110px !important; /* ✅ كبرنا الصورة */
                    width: 100% !important;
                    margin-bottom: 5px !important;
                }

                .subscription-item img {
                    height: 100% !important;
                    width: 100% !important;
                    object-fit: cover !important;
                    border-radius: 6px 6px 0 0 !important;
                }

                /* 4. النصوص: صغيرة ومختصرة */
                .subscription-item .sub-content {
                    padding: 0 4px !important;
                    text-align: center;
                    flex-grow: 1;
                    display: flex;
                    flex-direction: column;
                }

                .subscription-item h3 {
                    font-size: 11px !important;
                    margin: 4px 0 !important;
                    min-height: 25px !important; /* تقليل الارتفاع لأننا كبرنا الصورة */
                    line-height: 1.2 !important;
                    display: -webkit-box;
                    -webkit-line-clamp: 2;
                    -webkit-box-orient: vertical;
                    overflow: hidden;
                }

                /* السعر */
                .subscription-item .sub-price {
                    font-size: 13px !important;
                    font-weight: 800 !important;
                    margin: 2px 0 6px 0 !important;
                    color: var(--accent-yellow);
                }

                /* إخفاء العناصر غير الضرورية */
                .subscription-item .sub-description,
                .subscription-item .add-to-cart-btn {
                    display: none !important;
                }

                /* 5. الزر: كبير، عريض، ومكتوب "اشتري" */
                .subscription-item .buy-btn,
                .subscription-item .subscribe-btn {
                    width: 100% !important;
                    margin-top: auto !important;
                    padding: 8px 0 !important; /* ✅ تكبير منطقة الضغط */
                    border-radius: 6px !important;
                    /* 🪄 خدعة تغيير النص بالـ CSS */
                    font-size: 0 !important; /* إخفاء النص القديم */
                    display: flex !important;
                    justify-content: center;
                    align-items: center;
                }

                    /* وضع النص الجديد "اشتري" */
                    .subscription-item .buy-btn::after,
                    .subscription-item .subscribe-btn::after {
                        content: "اشتري"; /* ✅ النص الجديد */
                        font-size: 14px !important; /* حجم خط واضح */
                        font-weight: bold !important;
                        color: inherit; /* نفس لون الزر */
                    }
        }

        /* تنسيق قسم الآراء */
        .testimonials-section {
            padding: 0 8% 80px;
        }

        .testimonials-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        .testimonial-card {
            padding: 30px;
            border-radius: 24px;
            position: relative;
            transition: 0.3s;
            border: 1px solid var(--border-glass);
        }

            .testimonial-card:hover {
                transform: translateY(-10px);
                border-color: var(--primary-color);
                box-shadow: 0 15px 30px -10px var(--primary-glow);
            }

        .quote-icon {
            font-size: 2rem;
            color: var(--primary-color);
            opacity: 0.2;
            position: absolute;
            top: 20px;
            left: 20px;
        }

        .stars {
            color: #ffd700;
            margin-bottom: 15px;
            font-size: 0.9rem;
        }

        .review-text {
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: 25px;
            font-style: italic;
            font-size: 0.95rem;
        }

        .client-info {
            display: flex;
            align-items: center;
            gap: 15px;
            border-top: 1px solid var(--border-glass);
            padding-top: 15px;
        }

        .client-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .client-info h4 {
            font-size: 1rem;
            margin: 0;
            color: var(--text-primary);
        }

        .client-info span {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        /* للموبايل */
        @media (max-width: 768px) {
            .testimonials-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            /* 1. استبدال التدرجات المعقدة بألوان سادة */
            body,
            .glass-card,
            .main-products-section,
            .product-item,
            .service-offer-card,
            #navbar,
            .modal-content-v2 {
                background-image: none !important; /* إلغاء التدرج */
                background-color: #0f0b15 !important; /* لون كحلي غامق جداً وثابت */
            }

            /* 2. إخفاء الدوائر المضيئة في الخلفية (Orbs) */
            .glowing-orb,
            .floating-circle,
            .fire-particles-container,
            #kid-smoke {
                display: none !important;
            }

            /* 3. إلغاء الحواف المدورة الكبيرة (Border Radius) */
            /* التدوير الكبير بيستهلك موارد في القص (Clipping) */
            .glass-card,
            .product-item,
            .service-offer-card {
                border-radius: 8px !important; /* تدوير بسيط جداً */
                border: 1px solid #333 !important; /* بوردر بسيط */
            }

            /* 4. إيقاف كل أنواع الأنيميشن CSS */
            *, *::before, *::after {
                animation: none !important;
                transition: none !important; /* إلغاء الانتقالات الناعمة لسرعة الاستجابة */
            }
        }
        /* ================================================= */
        /* 📱 إصلاح جذري لصفحة الديسكورد على الموبايل */
        /* ================================================= */

        @media (max-width: 768px) {

            /* 1. الكارت الكبير: نلغي العرض الجانبي ونرصهم عمودي */
            #discord-calculator-card {
                display: flex !important;
                flex-direction: column !important;
                align-items: center !important;
                justify-content: center !important;
                /* تظبيط الأبعاد */
                width: 90% !important;
                max-width: 100% !important;
                height: auto !important;
                min-height: auto !important;
                /* مسافات داخلية مريحة */
                padding: 30px 20px 20px 20px !important;
                margin: 60px auto 20px auto !important; /* هامش علوي عشان الصورة متتقطعش */
                gap: 20px !important;
            }

                /* 2. إصلاح الصورة (المسبب الرئيسي للمشاكل) */
                #discord-calculator-card .card-icon {
                    /* حجم معقول للموبايل */
                    width: 120px !important;
                    height: 120px !important;
                    /* نرفعها فوق الكارت شوية بس بحدود */
                    margin-top: -80px !important;
                    margin-bottom: 10px !important;
                    margin-left: auto !important;
                    margin-right: auto !important;
                    display: block !important;
                    position: static !important; /* إلغاء أي تثبيت غريب */
                }

            /* 3. حاويات النصوص والفورم */
            .card-info-section,
            .card-form-section {
                width: 100% !important;
                display: flex !important;
                flex-direction: column !important;
                align-items: center !important;
                text-align: center !important;
                padding: 0 !important;
                margin: 0 !important;
            }

            /* 4. إصلاح العناوين */
            #discord-calculator-card h3 {
                font-size: 1.4rem !important;
                margin-bottom: 10px !important;
                text-align: center !important;
            }

            #discord-calculator-card p {
                font-size: 0.9rem !important;
                text-align: center !important;
                margin-bottom: 20px !important;
            }

            /* 5. توسيع حقول الإدخال والخيارات لتملأ الشاشة */
            #discord-calculator-card .input-wrapper,
            #discord-calculator-card select,
            #discord-price-display,
            #discord-calculator-card .buy-btn,
            #discord-calculator-card .calculator-controls {
                width: 100% !important;
                max-width: 100% !important;
                box-sizing: border-box !important;
            }

            /* 6. ترتيب أزرار التحكم في الكمية */
            .quantity-selector-inline {
                display: flex !important;
                justify-content: center !important;
                align-items: center !important;
                width: 100% !important;
                margin-top: 10px !important;
            }

                .quantity-selector-inline input {
                    width: 60px !important;
                    margin: 0 10px !important;
                }

            /* 7. إخفاء أي عناصر تجميلية زائدة ممكن تبوظ الشكل */
            #discord-calculator-card::before,
            #discord-calculator-card::after {
                display: none !important;
            }
        }
        /* ================================================= */
        /* 📱 تظبيط صفحة "طلباتي" للموبايل (Mobile Orders Page) */
        /* ================================================= */

        @media (max-width: 768px) {

            /* 1. الحاوية الرئيسية: تأخذ عرض الشاشة بالكامل تقريباً */
            #my-orders-page {
                width: 95% !important; /* عرض 95% عشان نسيب حواف صغيرة */
                max-width: 100% !important;
                margin: 20px auto !important; /* توسيط الصفحة */
                padding: 20px 15px !important; /* تقليل الحشو الداخلي */
                box-sizing: border-box !important;
                min-height: auto !important; /* السماح للطول بالتمدد حسب المحتوى */
            }

                /* 2. رأس الصفحة (الهيدر): تحويله لعمودي وتوسيطه */
                #my-orders-page .page-header-info {
                    flex-direction: column !important; /* الصورة فوق والنص تحت */
                    align-items: center !important; /* توسيط العناصر في النص */
                    justify-content: center !important;
                    text-align: center !important;
                    gap: 15px !important;
                    padding-bottom: 10px !important;
                }

            /* 3. تنسيق صورة العنوان (الأيقونة) */
            #orders-page-icon {
                max-width: 100px !important; /* تصغير الصورة شوية للموبايل */
                height: auto !important;
                margin: 0 !important; /* إلغاء أي هوامش جانبية */
            }

            /* 4. صندوق ملخص الطلبات (النصوص) */
            #orders-summary-box {
                padding-left: 0 !important; /* إلغاء البادينج القديم */
                text-align: center !important; /* توسيط الكلام */
                width: 100%;
            }

            /* 5. تكبير رقم العداد ليكون واضحاً */
            #my-orders-page .summary-value {
                font-size: 3rem !important; /* رقم ضخم وواضح */
                margin: 10px 0 !important;
            }

            /* 6. تحسين شكل الرتبة */
            .user-rank-display-small {
                font-size: 1.1rem !important;
                margin-top: 5px !important;
                display: inline-block;
            }

            /* 7. تنسيق قائمة الطلبات (الكروت) */
            #orders-list-container {
                gap: 15px !important;
                width: 100% !important;
            }

            /* ضمان أن كروت الطلبات الداخلية تأخذ العرض الكامل */
            .order-history-card {
                width: 100% !important;
                box-sizing: border-box !important;
                flex-direction: column !important; /* تفاصيل الطلب تحت بعضها */
                align-items: flex-start !important; /* محاذاة لليمين (عربي) */
                text-align: right !important;
            }

            /* تظبيط صورة المنتج داخل كارت الطلب */
            .order-card-img {
                width: 100% !important;
                height: 120px !important; /* ارتفاع ثابت للصورة */
                margin-bottom: 10px;
            }

            .order-card-info {
                width: 100% !important;
            }

            .order-card-footer {
                margin-top: 10px;
                width: 100%;
                justify-content: space-between;
            }
        }

        @media (max-width: 768px) {
            #my-orders-page {
                width: 100% !important;
                margin: 0 !important; /* إلغاء الهوامش الخارجية */
                border-radius: 0 !important; /* إلغاء تدوير الحواف */
                border-left: none !important; /* إخفاء البوردر اليسار */
                border-right: none !important; /* إخفاء البوردر اليمين */
                box-sizing: border-box !important;
                padding: 20px 15px !important;
            }
        }

        @media (max-width: 768px) {
            /* 1. الحاوية الرئيسية: تحويلها لعمودين متساويين */
            #steamPointsContainer,
            #steamPointsPageContainer {
                display: grid !important;
                grid-template-columns: 1fr 1fr !important; /* هذا السطر يجعلهم 2 بجانب بعض */
                gap: 10px !important; /* مسافة صغيرة بين الكروت */
                padding: 5px !important;
            }

                /* 2. ضبط الكارت نفسه ليتناسب مع العرض الصغير */
                #steamPointsContainer .product-item,
                #steamPointsPageContainer .product-item {
                    width: 100% !important; /* ليملأ العمود المخصص له */
                    max-width: 100% !important;
                    margin: 0 !important;
                    padding: 10px 8px !important; /* تقليل الحشو الداخلي */
                    min-height: auto !important;
                }

                /* 3. تصغير حجم الصورة */
                #steamPointsContainer .product-image-wrapper,
                #steamPointsPageContainer .product-image-wrapper {
                    height: 100px !important; /* تقليل ارتفاع الصورة */
                    margin-bottom: 8px !important;
                }

                /* 4. تصغير الخطوط لضمان التناسق */
                #steamPointsContainer h3,
                #steamPointsPageContainer h3 {
                    font-size: 0.85rem !important; /* تصغير العنوان */
                    min-height: 35px !important; /* مساحة كافية لسطرين */
                    margin-bottom: 5px !important;
                }

            .product-price {
                font-size: 0.9rem !important; /* تصغير السعر */
            }

            /* 5. زر الشراء: جعله أصغر ومناسب للموبايل */
            .buy-btn {
                padding: 8px 5px !important;
                font-size: 0.8rem !important;
                width: 100% !important;
            }
        }
        /* --- تنسيق خدمات التطوير للموبايل --- */
        @media screen and (max-width: 768px) {

            /* 1. ضبط الشبكة (Grid) لتكون عمود واحد */
            .services-grid-v2 {
                display: flex !important; /* تحويلها لـ Flexbox */
                flex-direction: column !important; /* ترتيب العناصر تحت بعض */
                align-items: center !important; /* توسيط العناصر أفقياً */
                gap: 25px !important; /* مسافة بين كل كارت والتاني */
                width: 100% !important;
                padding: 0 10px !important; /* هوامش جانبية عشان ميبقاش لازق في الحف */
            }

            /* 2. ضبط الكارت نفسه */
            .service-card-v2 {
                width: 100% !important; /* الكارت ياخد العرض المتاح */
                max-width: 380px !important; /* حد أقصى للعرض عشان ميبقاش عريض أوي */
                margin: 0 auto !important; /* ضمان التوسيط */
                /* تحسينات بصرية للموبايل */
                padding: 25px 20px !important;
                box-shadow: 0 5px 15px rgba(0,0,0,0.3) !important;
            }

                /* 3. تنسيق العنوان والقوائم داخل الكارت */
                .service-card-v2 .service-title-v2 {
                    text-align: center !important;
                    font-size: 1.3rem !important;
                }

                .service-card-v2 .service-features-v2 {
                    padding-right: 0 !important; /* إزالة الهوامش الزائدة للقائمة */
                    text-align: center !important; /* توسيط نقاط القائمة (اختياري، لو تحبها يمين شيل السطر ده) */
                    list-style-position: inside !important;
                }

                    .service-card-v2 .service-features-v2 li {
                        justify-content: center !important; /* توسيط الأيقونة مع النص */
                        margin-bottom: 10px !important;
                    }

                /* 4. تنسيق الزرار */
                .service-card-v2 button {
                    width: 100% !important;
                    padding: 12px !important;
                    font-size: 1rem !important;
                }
        }
        /* ====================================================== */
        /* 📱 تنسيق صفحة المنتج الاحترافي للموبايل */
        /* ====================================================== */

        @media (max-width: 768px) {
            /* 1. الحاوية الرئيسية لصفحة المنتج */
            #productPage.section {
                margin: 0 !important; /* إلغاء الهوامش الخارجية */
                padding: 15px 10px !important; /* مساحة داخلية مريحة */
                width: 100% !important;
                border-radius: 0 !important; /* يفضل إزالة تدوير الزوايا لتبدو كصفحة كاملة */
                box-sizing: border-box;
            }

            /* 2. ترتيب العناصر (الصورة فوق والبيانات تحت) */
            .product-main-view {
                flex-direction: column !important;
                align-items: center !important;
                gap: 20px !important;
            }

            /* 3. قسم الصورة */
            .product-image-section {
                width: 100% !important;
                max-width: 100% !important;
                flex: none !important;
            }

                .product-image-section .main-image {
                    width: 100% !important;
                    height: auto !important;
                    max-height: 350px !important; /* تحديد أقصى طول للصورة */
                    object-fit: contain !important;
                    border-radius: 12px !important;
                }

            /* 4. قسم تفاصيل المنتج (العنوان، السعر، الوصف) */
            .product-details-section {
                width: 100% !important;
                text-align: center !important; /* توسيط النصوص للموبايل */
            }

            #productPageTitle {
                font-size: 1.6rem !important; /* تصغير العنوان ليتناسب مع العرض */
                line-height: 1.3;
                margin-bottom: 10px !important;
            }

            /* 5. السعر والبادجات */
            .price-badge-container {
                justify-content: center !important; /* توسيط السعر */
                margin-bottom: 20px !important;
            }

            #productPagePrice {
                font-size: 1.8rem !important;
            }

            /* 6. وصف المنتج */
            #productPageShortDescription {
                text-align: right !important; /* الحفاظ على محاذاة النص العربي */
                font-size: 0.95rem !important;
                line-height: 1.6 !important;
                padding: 0 5px;
            }

            /* 7. أداة التحكم في الكمية (Quantity Selector) */
            .quantity-selector {
                justify-content: center !important;
                margin: 20px auto !important;
                background: rgba(255, 255, 255, 0.05);
                padding: 15px !important;
                border-radius: 50px;
                width: fit-content;
            }

            /* 8. زر الإضافة للسلة (يكون عريض وسهل الضغط) */
            .add-to-cart-product-page {
                width: 100% !important;
                height: 55px !important;
                font-size: 1.1rem !important;
                border-radius: 14px !important;
                margin-top: 10px !important;
                box-shadow: 0 5px 15px rgba(40, 167, 69, 0.3) !important;
            }

            /* 9. التبويبات (Tabs) تحت المنتج */
            .tab-buttons {
                display: flex !important;
                overflow-x: auto !important; /* السماح بالتمرير الجانبي لو الأزرار كتير */
                white-space: nowrap;
                padding-bottom: 10px;
                justify-content: flex-start !important;
                gap: 10px;
            }

            .tab-button {
                padding: 10px 15px !important;
                font-size: 0.9rem !important;
                flex: none !important;
            }

            /* 10. إخفاء العناصر غير الضرورية لتوفير مساحة */
            .product-share-btn {
                top: 10px !important;
                right: 10px !important;
            }
        }

        @media (max-width: 768px) {
            /* 1. إزالة الحدود من الحاوية الرئيسية للفئات */
            .categories-container,
            .categories-wrapper,
            .category-section {
                border: none !important;
                box-shadow: none !important; /* إزالة الظلال أيضاً إذا كانت تبدو كحدود */
            }

            /* 2. إزالة الحدود من أزرار الكاتيجوريز الفردية */
            .category-btn,
            .category-item,
            .nav-tab {
                border: none !important;
                outline: none !important;
                background: rgba(255, 255, 255, 0.05) !important; /* خلفية خفيفة بديلة للحدود */
            }

                /* 3. التأكد من إزالة أي خط فاصل (Divider) بين الفئات */
                .category-btn:not(:last-child) {
                    border-right: none !important;
                    border-left: none !important;
                }

                /* 4. إزالة الحدود عند حالة النشاط (Active) */
                .category-btn.active,
                .category-btn:hover {
                    border: none !important;
                    box-shadow: 0 4px 10px rgba(142, 106, 191, 0.2) !important; /* توهج بسيط بدلاً من الحد */
                }
        }

        /* ====================================================== */
        /* 🚫 إلغاء الوميض الأزرق عند اللمس (No Blue Highlight) */
        /* ====================================================== */

        * {
            /* دي اللي بتشيل اللون الأزرق في أندرويد و iOS */
            -webkit-tap-highlight-color: transparent !important;
            /* دي بتشيل الإطار اللي بيظهر لما تدوس على زرار */
            outline: none !important;
        }

        /* اختياري: عشان تمنع تحديد النصوص بالغلط لما تدوس كتير */
        button, a, .category-btn, .product-item {
            user-select: none !important;
            -webkit-user-select: none !important;
        }
        /* ====================================================== */
        /* 👆 تأثير الضغط الاحترافي (App-Like Press Effect) */
        /* ====================================================== */

        /* 1. تفعيل الحركة الناعمة للعناصر القابلة للضغط فقط */
        button,
        a,
        .btn,
        .category-btn,
        .product-item,
        .subscription-item,
        .nav-link,
        .rental-card {
            /* لازم نرجع الترانزيشن عشان الحركة متبقاش "قطم" */
            transition: transform 0.1s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.1s ease !important;
            cursor: pointer !important;
        }

            /* 2. اللحظة اللي صباعك بيلمس فيها الشاشة (:active) */
            button:active,
            a:active,
            .btn:active,
            .category-btn:active,
            .product-item:active,
            .subscription-item:active,
            .nav-link:active,
            .rental-card:active {
                /* تصغير العنصر لـ 95% من حجمه (تأثير ضغطة الزر) */
                transform: scale(0.95) !important;
                /* تقليل الشفافية حاجة بسيطة عشان يبان إنه مضغوط */
                opacity: 0.8 !important;
                /* تغيير لون الخلفية لحظياً (تأثير وميض خفيف جداً) */
                filter: brightness(1.2) !important;
            }

                /* 3. استثناء: زرار الشراء داخل الكارت (عشان ميصغرش الكارت كله معاه) */
                /* نخليه هو بس اللي يصغر لما ندوس عليه */
                .product-item:active .buy-btn {
                    transform: scale(0.9) !important; /* يصغر أكتر شوية */
                }

        @media screen and (max-width: 768px) {
            #home {
                border: none !important; /* يشيل البرواز */
                box-shadow: none !important; /* يشيل أي ظل لو موجود */
                background: transparent !important; /* (اختياري) لو عايز تشيل خلفية الزجاج كمان وتخليها شفافة */
                backdrop-filter: none !important; /* (اختياري) يشيل تغبيش الخلفية */
            }
        }

        @media screen and (max-width: 768px) {

            /* 1. تظبيط الحاوية الرئيسية */
            #subscriptions-section {
                padding: 20px 10px !important;
                margin: 20px auto !important; /* زودنا المسافة فوق وتحت القسم كله */
                border: none !important;
                box-shadow: none !important;
                width: 100% !important;
            }

            /* 2. تظبيط العناوين الفرعية (عشان تبعد عن اللي فوقيها واللي تحتيها) */
            .subscription-subcategory-label {
                font-size: 1.2rem !important;
                text-align: right !important;
                /* السطر ده هو السر: 30px فوق، 15px تحت */
                margin: 35px 10px 15px 0 !important;
                padding-right: 10px !important;
                border-right: 4px solid #ffcc00; /* تخنا الخط شوية */
            }

            /* 3. تظبيط شبكة الكروت (المسافات بين الكروت) */
            #subscriptions-section .products-container {
                display: grid !important;
                grid-template-columns: repeat(2, 1fr) !important;
                /* زودنا الفراغ بين الكروت وبعضها لـ 15px */
                gap: 15px !important;
                padding: 0 5px !important;
                /* مسافة زيادة تحت كل مجموعة كروت */
                margin-bottom: 25px !important;
            }

            /* 4. التأكد إن الكارت واخد راحته */
            #subscriptions-section .product-item,
            #subscriptions-section .subscription-item {
                width: 100% !important;
                margin: 0 !important;
            }
        }

        @media screen and (max-width: 768px) {

            /* 1. تنظيف الحاويات الرئيسية */
            #steam-gift-cards-section,
            #steam-points-section {
                border: none !important;
                box-shadow: none !important;
                background: transparent !important;
                /* زودنا الـ padding الجانبي لـ 15px عشان المحتوى ميلمسش الحافة */
                padding: 10px 15px !important;
                margin: 40px auto !important;
            }

                /* 2. ضبط العناوين */
                #steam-gift-cards-section h2,
                #steam-points-section h2 {
                    display: flex !important;
                    justify-content: center !important;
                    align-items: center !important;
                    font-size: 1.5rem !important;
                    margin-bottom: 25px !important; /* زودنا المسافة تحت العنوان */
                    width: 100% !important;
                }

            /* 3. ترتيب الكروت (Grid System) - هنا التعديل المهم */
            #steamGiftCardsHomeContainer,
            #steamPointsContainer {
                display: grid !important;
                grid-template-columns: repeat(2, 1fr) !important; /* كارتين جنب بعض */
                /* 🔥 التغيير هنا: زودنا الفراغ لـ 20px (أفقي ورأسي) */
                gap: 20px !important;
                padding: 5px !important; /* مسافة أمان داخلية للكونتينر */
            }

                /* 4. ضبط الكارت نفسه */
                #steamGiftCardsHomeContainer .product-item,
                #steamPointsContainer .product-item {
                    width: 100% !important;
                    margin: 0 !important;
                    /* إضافة ظل خفيف للكارت نفسه عشان يفصله بصرياً عن اللي جنبه */
                    box-shadow: 0 4px 10px rgba(0,0,0,0.2) !important;
                    border-radius: 10px !important; /* تدوير الحواف شوية */
                }
        }

        @media screen and (max-width: 768px) {

            /* 1. تظبيط الحاوية الرئيسية للقسم */
            #playstation-section {
                padding: 15px 10px !important;
                margin: 40px auto !important; /* مسافة لفصل القسم عن اللي قبله */
                border: none !important;
                box-shadow: none !important;
                background: transparent !important; /* أو خليه بلون غامق لو تحب */
            }

                /* 2. تظبيط العنوان الرئيسي والأيقونة */
                #playstation-section h2 {
                    display: flex !important;
                    justify-content: center !important;
                    align-items: center !important;
                    font-size: 1.6rem !important;
                    margin-bottom: 25px !important;
                    width: 100% !important;
                }

            /* 3. تظبيط العناوين الفرعية (بطاقات الشحن، اشتراكات..) */
            .playstation-subcategory-label {
                text-align: center !important; /* توسيط العناوين */
                font-size: 1.2rem !important;
                margin: 20px 0 15px 0 !important;
                padding-bottom: 10px !important;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1); /* خط خفيف تحت العنوان */
                width: 100% !important;
            }

            /* 4. تظبيط حاوية المنتجات (كروت الشحن + البلس) لتظهر 2 جنب بعض */
            #psn-gift-cards-container,
            #ps-plus-container {
                display: grid !important;
                grid-template-columns: repeat(2, 1fr) !important; /* كارتين في الصف */
                gap: 15px !important; /* مسافة بين الكروت */
                padding: 0 5px !important;
            }

            /* 5. أهم جزء: تحويل تقسيم الصفحة من جنب بعض لـ فوق بعض */
            .ps-grid-container {
                display: flex !important;
                flex-direction: column !important; /* يرصهم عمودي */
                gap: 40px !important; /* مسافة كبيرة بين قسم البلس وقسم الألعاب */
                width: 100% !important;
            }

            .ps-grid-column {
                width: 100% !important;
                padding: 0 !important;
            }
        }

        @media screen and (max-width: 768px) {
            /* 2. إخفاء زر الديسكورد في الموبايل فقط */
            #home .discord-button {
                display: none !important;
            }
        }

        @media screen and (max-width: 768px) {
            /* إخفاء نص "القطع المتبقية" */
            .mobile-hide-stock {
                display: none !important;
            }

            /* إخفاء الكلاس القديم أيضاً احتياطياً */
            .product-urgency {
                display: none !important;
            }
        }

        @media screen and (max-width: 768px) {

            /* 1. الحاوية الرئيسية */
            #game-rentals-section {
                padding: 10px 5px !important;
                margin: 40px auto !important; /* بعدنا السكشن عن اللي فوقه */
                border: none !important;
                box-shadow: none !important;
                background: transparent !important;
            }

                /* 2. العنوان */
                #game-rentals-section h2 {
                    font-size: 1.4rem !important;
                    margin-bottom: 20px !important;
                    color: #fff !important;
                    text-shadow: 0 0 10px rgba(255, 170, 0, 0.6) !important;
                }

            /* 3. الشبكة (Grid) - التباعد */
            #gameRentalsContainer {
                display: grid !important;
                grid-template-columns: repeat(2, 1fr) !important;
                /* 🔥 زودنا المسافة لـ 20px عشان نفصلهم عن بعض */
                gap: 20px !important;
                padding: 5px !important;
            }

            /* 4. تصميم الكارت (الألوان والحجم) */
            .rental-card {
                width: 100% !important;
                margin: 0 !important;
                /* قللنا البادينج لـ 8px عشان الكارت يصغر */
                padding: 8px !important;
                border-radius: 15px !important; /* حواف أكثر دائرية */
                /* 🔥 لون جديد: تدرج من الرمادي المزرق للأسود (فخم جداً) */
                background: linear-gradient(180deg, rgba(45, 45, 60, 0.95) 0%, rgba(20, 20, 30, 0.98) 100%) !important;
                border: 1px solid rgba(255, 255, 255, 0.08) !important;
                /* ظل قوي للعمق */
                box-shadow: 0 8px 20px rgba(0,0,0,0.5) !important;
            }

            /* 5. الصورة (تصغير الحجم) */
            .rental-card-image {
                /* صغرنا الارتفاع لـ 95px عشان الكارت يبقى ملموم */
                height: 95px !important;
                width: 100% !important;
                object-fit: cover !important;
                margin-bottom: 8px !important;
                border-radius: 10px !important;
                /* تأثير خفيف للصورة */
                filter: brightness(0.9);
            }

            /* 6. النصوص */
            .rental-card h3 {
                font-size: 0.85rem !important; /* تصغير الخط */
                margin-bottom: 6px !important;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                color: #f0f0f0 !important;
                text-align: center;
            }

            .rental-card p {
                display: none !important;
            }

            /* 7. أزرار المدة (Compact Style) */
            .duration-selector-buttons {
                display: flex !important;
                flex-wrap: wrap !important;
                gap: 4px !important;
                justify-content: center !important;
                margin-bottom: 8px !important;
            }

            .duration-btn {
                font-size: 9px !important; /* خط صغير */
                padding: 4px 8px !important;
                border-radius: 6px !important;
                background: rgba(255, 255, 255, 0.05) !important;
                color: #aaa !important;
                border: 1px solid rgba(255, 255, 255, 0.1) !important;
            }

                .duration-btn.active {
                    background: #ffcc00 !important; /* أصفر دهبي */
                    color: #000 !important;
                    border-color: #ffcc00 !important;
                    font-weight: bold !important;
                    box-shadow: 0 0 8px rgba(255, 204, 0, 0.4) !important;
                }

            /* 8. السعر وزر الشراء */
            .rental-price-display {
                font-size: 1rem !important;
                margin: 5px 0 8px 0 !important;
                color: #4ade80 !important; /* أخضر فاتح مريح للعين */
                font-weight: bold !important;
                text-align: center;
            }

            .rental-card .buy-btn {
                font-size: 11px !important;
                padding: 8px !important;
                width: 100% !important;
                border-radius: 50px !important; /* زر دائري */
                /* تدرج لوني للزر */
                background: linear-gradient(90deg, #ff8c00, #ffaa00) !important;
                color: #fff !important;
                border: none !important;
                box-shadow: 0 4px 10px rgba(255, 140, 0, 0.3) !important;
            }
        }

        @media screen and (max-width: 768px) {
            #navbar {
                /* 1. الخلفية: تدرج لوني (Gradient) */
                /* من بنفسجي غامق جداً فوق -> لأسود بنفسجي تحت */
                background: linear-gradient(180deg, rgba(35, 15, 55, 0.98) 0%, rgba(10, 5, 20, 0.99) 100%) !important;
                /* 2. تغبيش قوي عشان التدرج يبان ناعم */
                backdrop-filter: blur(20px) !important;
                /* 3. ظل أسود تقيل عشان يفصله عن محتوى الموقع */
                box-shadow: 0 10px 40px rgba(0, 0, 0, 0.9) !important;
                /* 4. (لمسة فنية) خط رفيع جداً تحت بلون بنفسجي نيون خافت */
                border-bottom: 1px solid rgba(157, 78, 221, 0.2) !important;
            }
        }

        @media screen and (max-width: 768px) {

            /* 1. تنسيق عنوان القسم (Xbox/PC Products) */
            .playstation-subcategory-label {
                font-size: 1.3rem !important;
                text-align: center !important;
                /* مسافات مريحة فوق وتحت العنوان */
                margin: 25px 0 20px 0 !important;
                padding-bottom: 10px !important;
                /* خط فاصل خفيف تحت العنوان */
                border-bottom: 1px solid rgba(255, 255, 255, 0.1) !important;
                display: flex !important;
                justify-content: center !important;
                align-items: center !important;
                width: 100% !important;
            }

            /* 2. تنسيق الحاويات (Gift Cards & Popular Games) */
            #xboxGiftCardsContainer,
            #xboxPopularGamesContainer {
                display: grid !important;
                /* كارتين في الصف الواحد */
                grid-template-columns: repeat(2, 1fr) !important;
                /* مسافة بين الكروت وبعضها */
                gap: 15px !important;
                padding: 0 5px !important;
                /* 🔥 مسافة كبيرة تفصل بين مجموعة الكروت دي والمجموعة اللي تحتها */
                margin-bottom: 40px !important;
            }

                /* 3. التأكد إن الكروت واخدة حجمها صح داخل الشبكة */
                #xboxGiftCardsContainer .product-item,
                #xboxPopularGamesContainer .product-item {
                    width: 100% !important;
                    margin: 0 !important;
                    /* (اختياري) إضافة ظل خفيف للكارت ليفصله عن الخلفية */
                    box-shadow: 0 4px 10px rgba(0,0,0,0.2) !important;
                    border-radius: 10px !important;
                }

                /* (اختياري) إضافة عنوان صغير قبل كل مجموعة لو حابب تميزهم أكتر */
                /* يمكنك استخدام CSS ::before لإضافة نص توضيحي لو مش موجود في HTML */
                #xboxGiftCardsContainer::before {
                    content: "Gift Cards";
                    grid-column: span 2; /* ياخد العرض كله */
                    color: #ccc;
                    font-size: 0.9rem;
                    margin-bottom: 5px;
                    text-align: right;
                }

                #xboxPopularGamesContainer::before {
                    content: "Popular Games";
                    grid-column: span 2;
                    color: #ccc;
                    font-size: 0.9rem;
                    margin-bottom: 5px;
                    text-align: right;
                }
        }

        @media screen and (max-width: 768px) {

            /* =========================================
        1. تنسيق كروت خطوات العمل (Process Steps)
        ========================================= */
            .process-step-card {
                background: #ffffff !important; /* خلفية بيضاء */
                border: 1px solid #e0e0e0 !important; /* حدود رمادية خفيفة */
                box-shadow: 0 4px 15px rgba(0,0,0,0.05) !important; /* ظل خفيف جداً */
            }

                /* العنوان (بنفهم ونخطط، إلخ..) */
                .process-step-card h4 {
                    color: #000000 !important; /* أسود صريح */
                    text-shadow: none !important; /* إلغاء التوهج */
                    font-weight: 800 !important;
                }

                /* الوصف */
                .process-step-card p {
                    color: #333333 !important; /* رمادي غامق للقراءة */
                    font-weight: 500 !important;
                }

                /* الرقم الكبير (01, 02) */
                .process-step-card .step-number-giant {
                    color: rgba(0, 0, 0, 0.05) !important; /* لون أسود شفاف جداً */
                    -webkit-text-stroke: 1px rgba(0, 0, 0, 0.1) !important; /* حدود الرقم */
                }

                /* الأيقونة داخل كارت الخطوات */
                .process-step-card .step-icon-v2 {
                    color: #333 !important; /* لون الأيقونة غامق */
                    /* لو عايز الأيقونة بلون البراند بتاعك سيب السطر ده أو غير الكود */
                }


            /* =========================================
        2. تنسيق كروت الأسئلة الشائعة (FAQ)
        ========================================= */
            .faq-item-v2 {
                background: #ffffff !important; /* خلفية بيضاء */
                border: 1px solid #e0e0e0 !important;
                box-shadow: 0 4px 15px rgba(0,0,0,0.05) !important;
            }

                /* السؤال */
                .faq-item-v2 h4 {
                    color: #000000 !important; /* أسود */
                    text-shadow: none !important;
                }

                /* الإجابة */
                .faq-item-v2 p {
                    color: #333333 !important; /* رمادي غامق */
                }

            /* (اختياري) تحسين شكل الأيقونات العلوية في الأسئلة */
            .faq-icon-top {
                background: rgba(0, 0, 0, 0.05) !important; /* خلفية دايرة الأيقونة رمادي فاتح */
            }
        }
        /* ==================================================
   حل مشكلة خروج الكارت بره الشاشة (Mobile Fix)
   ================================================== */
        @media (max-width: 768px) {

            /* 1. الحاوية الخارجية (الكارت نفسه) */
            .ultimate-bundle-card {
                position: relative;
                /* 🔥 أهم سطرين: حساب العرض بدقة عشان ميبقاش عريض زيادة */
                width: calc(100% - 30px) !important;
                margin: 20px auto !important; /* توسيط الكارت */
                /* 🔥 ده اللي بيقص أي حاجة تخرج بره */
                overflow: hidden !important;
                border-radius: 16px;
                z-index: 1;
                padding: 2px; /* سمك الإطار الملون */
                box-shadow: 0 10px 20px rgba(0,0,0,0.5);
                box-sizing: border-box; /* عشان البادينج يتحسب جوه العرض */
            }

            /* 2. الإطار الملون المتحرك (الخلفية) */
            .animated-border-box {
                position: absolute;
                top: -50%;
                left: -50%;
                width: 200%; /* ده كبير، بس ال overflow: hidden فوق هيقصه */
                height: 200%;
                background: conic-gradient( transparent 0deg, transparent 90deg, #ffd700 180deg, #ffd700 270deg, transparent 360deg );
                animation: spinBorder 4s linear infinite;
                z-index: -1;
            }

            /* 3. صندوق المحتوى والنصوص */
            .bundle-content-wrapper {
                position: relative;
                background: #101015;
                width: 100%;
                height: 100%;
                border-radius: 14px; /* كيرف أصغر سنة من اللي بره */
                padding: 20px 15px;
                /* ترتيب العناصر */
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                text-align: center;
                z-index: 2;
                box-sizing: border-box; /* ضروري جداً */
            }

            /* 4. تنسيق الخطوط */
            .bundle-title {
                color: white;
                font-size: 1.3rem; /* تصغير الخط سنة عشان ميكسرش السطر */
                margin: 10px 0;
                font-weight: 800;
                line-height: 1.4;
            }

            .bundle-desc {
                color: #b0b0b0;
                font-size: 0.9rem;
                margin: 0;
                line-height: 1.6;
                padding: 0 10px; /* هوامش داخلية للنص */
            }

            .special-badge {
                font-size: 0.75rem;
                background: rgba(255, 59, 48, 0.15);
                color: #ff3b30;
                padding: 4px 12px;
                border-radius: 50px;
                border: 1px solid rgba(255, 59, 48, 0.3);
                font-weight: bold;
            }

            .price-pop {
                color: #ffd700;
                font-weight: 900;
                display: inline-block;
                margin-top: 5px;
            }

            /* الأنيميشن */
            @keyframes spinBorder {
                100% {
                    transform: rotate(360deg);
                }
            }
        }
        /* ==================================================
   🌟 تصميم صفحة المنتج الأسطوري (Mobile Legendary View)
   ================================================== */
        @media (max-width: 768px) {

            /* 1. الحاوية الرئيسية (إزالة الهوامش لتملأ الشاشة) */
            #productPage {
                padding: 0 !important;
                margin: 0 !important;
                background: #050507; /* خلفية داكنة جداً */
                width: 100vw;
                overflow-x: hidden;
            }

            .product-main-view {
                display: flex;
                flex-direction: column;
                padding-bottom: 80px; /* مسافة عشان السكرول */
            }

            /* 2. قسم الصورة (Immersive Header) */
            .product-image-section {
                position: relative;
                width: 100%;
                height: 420px; /* ارتفاع ثابت ومناسب */
                background: #101015;
            }

            /* الصورة الرئيسية */
            #productPageImage {
                width: 100%;
                height: 100%;
                object-fit: cover; /* تغطي المساحة بذكاء */
                border-radius: 0 0 30px 30px; /* كيرف ناعم من تحت بس */
                box-shadow: 0 10px 40px rgba(0,0,0,0.6); /* ظل عميق */
                filter: brightness(0.9); /* تقليل السطوع سنة للتركيز */
            }

            /* أزرار المشاركة والمفضلة العائمة (Glassmorphism) */
            .big-wishlist-btn,
            #product-share-btn {
                position: absolute;
                top: 20px;
                width: 45px;
                height: 45px;
                background: rgba(20, 20, 30, 0.4); /* شفاف */
                backdrop-filter: blur(12px); /* تأثير الزجاج */
                border: 1px solid rgba(255,255,255,0.1);
                border-radius: 50%; /* دائري */
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
                font-size: 1.2rem;
                z-index: 10;
                cursor: pointer;
                transition: 0.3s;
            }

            .big-wishlist-btn {
                right: 20px;
                color: #ff4757;
            }
            /* قلب أحمر */
            #product-share-btn {
                left: 20px;
                color: #fff;
            }

                .big-wishlist-btn:active, #product-share-btn:active {
                    transform: scale(0.9);
                    background: rgba(255, 255, 255, 0.1);
                }

            /* معرض الصور المصغر (تحت الصورة الكبيرة) */
            .product-image-gallery {
                position: absolute;
                bottom: 20px;
                left: 50%;
                transform: translateX(-50%);
                display: flex;
                gap: 8px;
                padding: 5px;
                background: rgba(0,0,0,0.5);
                border-radius: 20px;
                backdrop-filter: blur(5px);
            }

                .product-image-gallery img {
                    width: 40px;
                    height: 40px;
                    border-radius: 10px;
                    border: 2px solid transparent;
                }

            /* 3. قسم التفاصيل (Card overlap) */
            .product-details-section {
                position: relative;
                margin-top: -35px; /* 👈 الحركة السحرية: تداخل مع الصورة */
                background: #0f0f14;
                border-radius: 35px 35px 0 0;
                padding: 30px 25px;
                text-align: right;
                direction: rtl;
                z-index: 5; /* فوق الصورة */
                box-shadow: 0 -10px 30px rgba(0,0,0,0.5);
            }

            /* العنوان */
            #productPageTitle {
                font-size: 1.5rem;
                font-weight: 900;
                color: #fff;
                margin-bottom: 8px;
                line-height: 1.4;
            }

            /* السعر والبادج */
            .price-badge-container {
                display: flex;
                align-items: center;
                gap: 12px;
                margin-bottom: 20px;
            }

            #productPagePrice {
                font-size: 1.6rem;
                font-weight: 800;
                color: #ffd700; /* ذهبي */
                letter-spacing: 1px;
            }

            #productPageBadge {
                background: rgba(255, 215, 0, 0.15);
                color: #ffd700;
                padding: 4px 12px;
                border-radius: 8px;
                font-size: 0.8rem;
                font-weight: bold;
                border: 1px solid rgba(255, 215, 0, 0.3);
            }

            /* الوصف */
            #productPageShortDescription {
                color: #8f8f9b;
                font-size: 0.95rem;
                line-height: 1.7;
                margin-bottom: 25px;
                border-bottom: 1px solid rgba(255,255,255,0.05);
                padding-bottom: 20px;
            }

            /* معلومات المنصة والتقييم */
            .product-platform-info,
            .product-page-rating {
                display: inline-flex;
                align-items: center;
                gap: 5px;
                background: #181820;
                padding: 6px 15px;
                border-radius: 50px;
                color: #ccc;
                font-size: 0.85rem;
                margin-left: 10px;
                margin-bottom: 15px;
                border: 1px solid rgba(255,255,255,0.05);
            }

            /* 4. زر الإضافة للسلة (Compact & Modern) */
            .add-to-cart-product-page {
                display: flex;
                align-items: center;
                justify-content: center;
                width: 70% !important; /* حجم ملموم */
                margin: 20px auto 15px auto; /* توسيط */

                background: linear-gradient(135deg, #ffd700 0%, #ffb300 100%);
                color: #000;
                font-weight: 900;
                font-size: 1rem;
                padding: 12px 0;
                border: none;
                border-radius: 50px; /* كبسولة */
                box-shadow: 0 8px 25px rgba(255, 215, 0, 0.25);
                cursor: pointer;
                transition: transform 0.2s;
            }

                .add-to-cart-product-page:active {
                    transform: scale(0.96);
                    box-shadow: 0 4px 15px rgba(255, 215, 0, 0.15);
                }

            /* 5. اختيار الكمية (Sleek Design) */
            .quantity-selector {
                display: flex;
                align-items: center;
                justify-content: space-between;
                background: #181820;
                padding: 5px;
                border-radius: 12px;
                width: 140px;
                margin: 0 auto; /* توسيط تحت الزر */
                border: 1px solid rgba(255,255,255,0.08);
            }

                .quantity-selector label {
                    display: none; /* إخفاء كلمة "الكمية" لتوفير المساحة */
                }

                .quantity-selector button {
                    width: 32px;
                    height: 32px;
                    background: #252530;
                    color: white;
                    border: none;
                    border-radius: 8px;
                    font-size: 1.2rem;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                }

                .quantity-selector input {
                    width: 40px;
                    background: transparent;
                    border: none;
                    color: white;
                    text-align: center;
                    font-weight: bold;
                    font-size: 1.1rem;
                }
        }
        /* =========================================================
   إصلاح الصورة والفراغات (Mobile Final Fix)
   ========================================================= */
        @media (max-width: 768px) {

            /* 1. تصفير الحاوية الأم (عشان الصورة تاخد راحتها) */
            #productPage, #productPageContent, .product-main-view {
                width: 100vw !important; /* عرض الشاشة بالكامل */
                max-width: 100vw !important;
                margin: 0 !important;
                padding: 0 !important;
                overflow-x: hidden !important; /* ممنوع السكرول بالعرض */
                background: #000 !important;
            }

            /* 2. منطقة الصورة (البرواز) */
            .product-image-section {
                position: relative !important;
                width: 100% !important;
                height: 400px !important; /* ارتفاع ثابت ومناسب للموبايل */
                background-color: #111;
                display: block !important;
                margin: 0 !important;
                padding: 0 !important;
            }

            /* 3. الصورة نفسها (الحل الجذري) */
            #productPageImage {
                width: 100% !important;
                height: 100% !important;
                object-fit: cover !important; /* تملأ البرواز بدون ما تتمط */
                object-position: center !important; /* توسيط الصورة */
                display: block !important;
                margin: 0 !important;
                border: none !important;
                border-radius: 0 0 25px 25px !important; /* كيرف من تحت بس */
            }

            /* 4. كارت التفاصيل (عشان يطلع فوق الصورة ويغطي الفراغ) */
            .product-details-section {
                position: relative !important;
                z-index: 10 !important;
                /* ده الرقم السحري اللي بيلغي الفراغ ويخلي الكارت يركب ع الصورة */
                margin-top: -40px !important;
                background: #121218 !important;
                border-radius: 30px 30px 0 0 !important;
                padding: 30px 20px 80px 20px !important;
                min-height: 300px !important; /* عشان يغطي بقية الشاشة */
                text-align: right;
                direction: rtl;
            }

            /* 5. تنسيق العناصر الداخلية عشان الشكل يبقى حلو */
            #productPageTitle {
                margin-top: 0 !important;
                font-size: 1.5rem;
                color: white;
            }

            #productPagePrice {
                color: #ffd700;
                font-size: 1.4rem;
                font-weight: bold;
            }

            /* تصغير زر أضف للسلة وتنسيقه */
            .add-to-cart-product-page {
                width: auto !important;
                min-width: 200px;
                margin: 20px auto !important;
                display: flex !important;
                justify-content: center;
                padding: 10px 30px !important;
                border-radius: 50px !important;
                background: linear-gradient(45deg, #ffd700, #ffb300);
                color: black;
                font-weight: bold;
                border: none;
            }

            /* أزرار المشاركة والمفضلة فوق الصورة */
            .big-wishlist-btn, #product-share-btn {
                top: 15px !important;
                z-index: 20 !important;
                background: rgba(0,0,0,0.5) !important;
                backdrop-filter: blur(5px);
            }

            .big-wishlist-btn {
                right: 15px !important;
                left: auto !important;
            }

            #product-share-btn {
                left: 15px !important;
                right: auto !important;
            }
        }
        @media (max-width: 992px) {
            /* إخفاء اللوجو في الموبايل فقط */
            .store-logo-on-homepage {
                display: none !important;
            }
        }
        @media (max-width: 992px) {
            .glow-text-rtl {
                color: #FFFFFF !important; /* أبيض ناصع جداً */
                text-align: center;
                font-weight: 900; /* أقصى سماكة للخط لزيادة الوضوح */
                font-size: 1.9rem;
                margin: 25px 0;
                /* توهج أبيض "سوبر" مكثف */
                text-shadow: 0 0 5px #FFFFFF, /* الطبقة الأولى: تحديد الحواف */
                0 0 15px #FFFFFF, /* الطبقة الثانية: توهج قريب */
                0 0 30px rgba(255, 255, 255, 0.8), /* الطبقة الثالثة: انتشار ضوئي */
                0 0 50px rgba(255, 255, 255, 0.5); /* الطبقة الرابعة: هالة ضوئية واسعة */

                letter-spacing: 1px; /* مسافة بسيطة بين الحروف لتبدو أرقى */
                filter: brightness(1.5); /* زيادة سطوع العنصر ككل */
            }
        }
        button[onclick="openMyOrders()"] {
            margin-top: 25px !important;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3); /* ظل يعطي عمق للزر بعد نزوله */
            transition: all 0.3s ease;
        }

            button[onclick="openMyOrders()"]:hover {
                transform: translateY(-5px); /* حركة بسيطة للأعلى عند مرور الماوس */
                box-shadow: 0 15px 25px rgba(0, 0, 0, 0.4);
            }

    </style>

</head>
<body>


    <div id="dev-services-page" class="dev-wrapper-v2" style="display: none;">

        <div id="scroll-progress"></div>

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
        <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800;900&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">

        <style>



            @media (max-width: 768px) {
                /* استهداف نص الزر داخل حاوية nav-actions */
                .nav-actions .quote-btn {
                    font-size: 0 !important; /* إخفاء النص الأصلي */
                    padding: 8px 12px !important; /* ضبط الحواف ليكون الزر أصغر ومناسب */
                }

                    /* إعادة إظهار الأيقونة لأنها اختفت بسبب font-size: 0 */
                    .nav-actions .quote-btn i {
                        font-size: 16px !important;
                        margin-left: 0 !important;
                    }

                    /* إضافة النص الجديد "تواصل" باستخدام العنصر الزائف */
                    .nav-actions .quote-btn::after {
                        content: "تواصل";
                        font-size: 13px !important; /* تحديد حجم الخط للنص الجديد */
                        margin-right: 5px; /* مسافة بين الأيقونة والنص */
                        font-family: 'Cairo', sans-serif;
                    }

                    /* ضمان بقاء نقطة الأونلاين في مكانها الصحيح */
                    .nav-actions .quote-btn .online-status-dot {
                        right: 2px;
                        top: 2px;
                    }
            }

            @media (max-width: 768px) {
                /* 1. إخفاء نص الاسم في الناف بار */
                .nav-logo-v2 span {
                    display: none !important;
                }

                /* 2. إخفاء أيقونة الكود (اختياري لو مش عايزها تظهر جنب اللوجو) */
                .nav-logo-v2 i {
                    display: none !important;
                }

                /* 3. تكبير اللوجو وتحريكه لأقصى الزاوية */
                .nav-store-logo {
                    height: 45px !important; /* تكبير الحجم من 35px لـ 45px */
                    margin-left: 0 !important; /* إلغاء الهامش القديم */
                    margin-right: -5px !important; /* دفعه ناحية اليمين أكثر */
                }

                /* 4. التأكد من توزيع الناف بار بالكامل */
                .dev-navbar-v2 {
                    padding: 5px 10px !important; /* تقليل الحواف الجانبية */
                    justify-content: space-between !important;
                    /* نضمن أن اتجاه العناصر يبدأ من اليمين (اللوجو) لليسار (الأزرار) */
                    flex-direction: row-reverse !important;
                }

                /* 5. ضبط حاوية اللوجو لتكون في الزاوية تماماً */
                .nav-logo-v2 {
                    order: 1 !important; /* جعل اللوجو العنصر الأول */
                    margin-right: 0 !important;
                }

                /* 6. دفع الأزرار للجهة الأخرى */
                .nav-actions {
                    order: 2 !important;
                    gap: 8px !important; /* تقريب الأزرار من بعضها لتوفير مساحة */
                }
            }

            @media (max-width: 768px) {
                /* إضافة ظل تحت الناف بار */
                .dev-navbar-v2 {
                    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3) !important;
                    /* اختياري: إذا كنت تستخدم تأثير الزجاج (Glassmorphism)
            يفضل إضافة حدود خفيفة من الأسفل لزيادة التحديد */
                    border-bottom: 1px solid rgba(255, 255, 255, 0.1) !important;
                    /* التأكد من أن الناف بار دائماً فوق المحتوى */
                    z-index: 1000 !important;
                }
            }

            @media (max-width: 768px) {
                /* 1. التأكد من أن الحاوية تسمح بالتمرير اللانهائي */
                .testimonials-marquee-section {
                    display: block !important;
                    overflow: hidden !important;
                    direction: ltr !important; /* لضمان اتجاه الحركة */
                }

                /* 2. تفعيل التراك وإعادة ضبط الأنيميشن */
                .testimonials-track {
                    display: flex !important;
                    width: max-content !important;
                    /* إعادة تعريف الأنيميشن للموبايل */
                    animation: scrollReviews 40s linear infinite !important;
                    /* منع التوقف عند اللمس في الموبايل لضمان استمرار الحركة */
                    pointer-events: auto;
                    gap: 0 !important; /* نعتمد على margin الكروت */
                }

                /* 3. التأكد من أن الكروت لا تتقلص وتظل بجانب بعضها */
                .testimonial-card-wide {
                    flex-shrink: 0 !important;
                    margin-right: 20px !important;
                    min-width: 280px !important; /* عرض مناسب للموبايل */
                }

                /* 4. إجبار تفعيل الهاردوير لتسريع الأنيميشن ومنع التقطيع (FPS Fix) */
                .testimonials-track {
                    will-change: transform;
                    transform: translateZ(0);
                    backface-visibility: hidden;
                }
            }


            /* ========================================= */
            /* 💳 تنسيق الفوتر السفلي (زوايا + ألوان) */
            /* ========================================= */

            .footer-bottom-v2 {
                display: flex;
                /* ✅ هذا السطر يجعل النص يمين والصور يسار */
                justify-content: space-between;
                align-items: center;
                margin-top: 30px;
                padding-top: 20px;
                border-top: 1px solid rgba(255, 255, 255, 0.1);
                flex-wrap: wrap; /* عشان الموبايل */
                gap: 15px;
            }

            /* تنسيق النص */
            .copyright-text {
                margin: 0;
                font-size: 0.9rem;
                color: var(--text-secondary);
            }

            /* حاوية الصور في الزاوية */
            .payment-icons-corner {
                display: flex;
                align-items: center;
                gap: 10px; /* مسافة صغيرة بين الصور */
            }

            /* تنسيق الصور نفسها */
            .pay-img-corner {
                height: 25px !important; /* ✅ حجم صغير ومناسب */
                width: auto !important;
                /* ✅ إلغاء الفلتر الرمادي (الألوان طبيعية) */
                filter: none;
                opacity: 1;
                cursor: pointer;
                transition: transform 0.3s ease;
            }

                /* تكبير بسيط عند الماوس */
                .pay-img-corner:hover {
                    transform: scale(1.1);
                }

            /* 📱 للموبايل: ينزلوا تحت بعض وفي النص */
            @media (max-width: 768px) {
                .footer-bottom-v2 {
                    flex-direction: column;
                    justify-content: center;
                    text-align: center;
                }
            }
            /* ========================================= */
            /* 💳 تصغير صور طرق الدفع */
            /* ========================================= */

            .payment-icons-list {
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 15px; /* المسافة بين الصور */
                flex-wrap: wrap;
            }

            .pay-img-custom {
                /* ✅ هذا الرقم هو اللي بيتحكم في الحجم */
                height: 30px !important;
                width: auto !important; /* عشان الصورة مطمتش */
                object-fit: contain;
                /* جعل الصور رمادية (اختياري) */
                filter: grayscale(100%);
                opacity: 0.7;
                transition: 0.3s;
                cursor: pointer;
            }

                /* عند مرور الماوس ترجع لألوانها الطبيعية وتكبر سنة بسيطة */
                .pay-img-custom:hover {
                    filter: grayscale(0%);
                    opacity: 1;
                    transform: scale(1.1);
                }
            /* ========================================= */
            /* 📦 تنسيق "الكانفا البيضاء" (مشترك للسكشنين) */
            /* ========================================= */

            .testimonials-marquee-section,
            .faq-section-v2 {
                /* ده اللي بيعمل شكل الصندوق الأبيض */
                background: #ffffff;
                /* مسافات من اليمين والشمال عشان الصندوق يبان مفصول عن الشاشة */
                margin: 60px 8%;
                padding: 50px 30px; /* مساحة داخلية */
                /* تدوير الحواف */
                border-radius: 30px;
                /* ظل خفيف عشان يبرز الصندوق */
                box-shadow: 0 20px 50px rgba(0, 0, 0, 0.05);
                border: 1px solid rgba(0, 0, 0, 0.03);
                /* ضروري عشان أي حاجة جواه متطلعش بره الحواف المدورة */
                overflow: hidden;
                position: relative;
            }

            /* 🌑 تظبيط الوضع الليلي (عشان ميبقاش أبيض فاقع) */
            .dev-wrapper-v2[data-theme="dark"] .testimonials-marquee-section,
            .dev-wrapper-v2[data-theme="dark"] .faq-section-v2 {
                background: rgba(255, 255, 255, 0.03); /* لون شفاف غامق */
                border: 1px solid rgba(255, 255, 255, 0.1);
                box-shadow: none;
            }

            /* ========================================= */
            /* 🌟 1. تنسيق شريط الآراء (جوه الصندوق) */
            /* ========================================= */

            .testimonials-track {
                display: flex;
                width: max-content;
                animation: scrollReviews 40s linear infinite;
                padding: 20px 0; /* مسافة فوق وتحت الكروت عشان الضل */
                /* 🛑 تعديل مهم: عشان الحركة تبان جوه الصندوق بس */
                direction: ltr;
            }

                .testimonials-track:hover {
                    animation-play-state: paused;
                }

            /* الكارت الصغير جوه الشريط */
            .testimonial-card-wide {
                min-width: 320px;
                max-width: 320px;
                margin-right: 25px;
                padding: 25px;
                border-radius: 18px;
                /* لون خلفية مختلف شوية عن الصندوق الأبيض عشان يبان */
                background: #f8faff;
                border: 1px solid var(--border-glass);
                text-align: right;
                direction: rtl;
                user-select: none;
            }

            /* في الوضع الليلي، نرجع خلفية الكارت لشفاف */
            .dev-wrapper-v2[data-theme="dark"] .testimonial-card-wide {
                background: rgba(255, 255, 255, 0.05);
            }

            .testimonial-card-wide .review-content {
                font-size: 0.9rem;
                color: var(--text-secondary);
                line-height: 1.6;
                margin: 15px 0;
            }

            .testimonial-card-wide .stars {
                color: #ffd700;
            }

            .client-mini-info {
                display: flex;
                align-items: center;
                gap: 10px;
            }

            .mini-avatar {
                width: 35px;
                height: 35px;
                border-radius: 50%;
                background: var(--primary-color);
                color: white;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 0.9rem;
                font-weight: bold;
            }

            @keyframes scrollReviews {
                0% {
                    transform: translateX(0);
                }

                100% {
                    transform: translateX(-50%);
                }
            }


            /* ========================================= */
            /* ❓ 2. تنسيق الأسئلة (3 أعمدة جوه الصندوق) */
            /* ========================================= */

            .faq-container-v2.open-grid-layout {
                display: grid;
                /* ✅ 3 أعمدة إجباري */
                grid-template-columns: repeat(3, 1fr) !important;
                gap: 20px;
                margin-top: 30px;
            }

            .faq-item-v2 {
                height: 100%;
                padding: 30px 20px;
                text-align: center;
                border-radius: 20px;
                transition: 0.3s;
                /* خلفية مختلفة خفيفة لتمييز السؤال عن الصندوق الأبيض الكبير */
                background: #f8faff;
                border: 1px solid #edf2f7;
            }

            /* في الوضع الليلي */
            .dev-wrapper-v2[data-theme="dark"] .faq-item-v2 {
                background: rgba(255, 255, 255, 0.05);
                border-color: rgba(255, 255, 255, 0.1);
            }

            .faq-item-v2:hover {
                transform: translateY(-5px);
                border-color: var(--primary-color);
                box-shadow: 0 10px 20px var(--primary-glow);
            }

            .faq-icon-top {
                width: 60px;
                height: 60px;
                background: var(--primary-glow);
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 1.8rem;
                margin: 0 auto 20px;
            }

            .faq-static-content h4 {
                font-size: 1.1rem;
                font-weight: 800;
                margin-bottom: 10px;
                color: var(--text-primary);
            }

            .faq-static-content p {
                font-size: 0.9rem;
                color: var(--text-secondary);
                line-height: 1.6;
                margin: 0;
            }

            /* 📱 ريسبونسيف للموبايل */
            @media (max-width: 900px) {
                /* نلغي الهوامش الكبيرة في الموبايل عشان نستغل المساحة */
                .testimonials-marquee-section,
                .faq-section-v2 {
                    margin: 40px 15px; /* هوامش جانبية صغيرة */
                    padding: 40px 20px;
                }

                /* الأسئلة ترجع عمود واحد */
                .faq-container-v2.open-grid-layout {
                    grid-template-columns: 1fr !important;
                }
            }
            /* ========================================= */
            /* ❓ تعديل تنسيق الأسئلة (3 جنب بعض إجباري) */
            /* ========================================= */

            .faq-container-v2.open-grid-layout {
                display: grid;
                /* ✅ التعديل هنا: أجبرنا المتصفح يعمل 3 أعمدة بالتساوي */
                grid-template-columns: repeat(3, 1fr) !important;
                gap: 20px; /* قللنا المسافة شوية عشان ميتزنقوش */
                margin-top: 40px;
            }

            /* تنسيق المربع الواحد */
            .faq-item-v2 {
                height: 100%;
                padding: 30px 15px; /* قللنا الحواف الجانبية شوية */
                text-align: center;
                border: 1px solid var(--border-glass);
                transition: 0.3s;
                background: var(--bg-card);
                border-radius: 20px;
            }

                /* باقي التنسيقات زي ما هي... */
                .faq-item-v2:hover {
                    transform: translateY(-10px);
                    border-color: var(--primary-color);
                    box-shadow: 0 10px 30px var(--primary-glow);
                }

            .faq-icon-top {
                font-size: 2.5rem;
                margin-bottom: 20px;
                background: var(--primary-glow);
                width: 70px;
                height: 70px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                margin-left: auto;
                margin-right: auto;
            }

            .faq-static-content h4 {
                font-size: 1.1rem; /* تصغير الخط سنة بسيطة عشان العنوان يكفي سطر واحد */
                font-weight: 800;
                margin-bottom: 15px;
                color: var(--text-primary);
            }

            .faq-static-content p {
                color: var(--text-secondary);
                line-height: 1.6;
                font-size: 0.9rem;
                margin: 0;
            }

            /* 📱 للموبايل والتابلت الصغير: يرجعوا تحت بعض أو اتنين جنب بعض */
            @media (max-width: 900px) {
                .faq-container-v2.open-grid-layout {
                    /* لو الشاشة صغرت أوي (تابلت) خليهم اتنين او واحد عشان الكلام ميتعصرش */
                    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)) !important;
                }
            }
            /* ========================================= */
            /* 📏 1. شريط تقدم القراءة (Scroll Progress) */
            /* ========================================= */
            #scroll-progress {
                position: fixed;
                top: 0;
                left: 0;
                width: 0%; /* سيتغير بالجافاسكريبت */
                height: 3px;
                background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
                z-index: 100000; /* فوق كل حاجة بما فيها الناف بار */
                box-shadow: 0 0 10px var(--primary-color);
                transition: width 0.1s;
            }

            /* ========================================= */
            /* ❓ 2. تنسيق الأسئلة الشائعة (Accordion) */
            /* ========================================= */
            .faq-section-v2 {
                padding: 0 8% 80px;
            }

            .faq-container-v2 {
                max-width: 800px;
                margin: 0 auto;
                display: flex;
                flex-direction: column;
                gap: 15px;
            }

            .faq-item-v2 {
                border-radius: 15px;
                overflow: hidden;
                transition: 0.3s;
                border: 1px solid var(--border-glass);
            }

            .faq-question-v2 {
                padding: 20px 25px;
                cursor: pointer;
                display: flex;
                justify-content: space-between;
                align-items: center;
                font-weight: 700;
                color: var(--text-primary);
                transition: 0.3s;
            }

                .faq-question-v2 i {
                    transition: transform 0.3s ease;
                    color: var(--primary-color);
                }

            .faq-answer-v2 {
                max-height: 0;
                overflow: hidden;
                transition: max-height 0.4s ease-out, padding 0.3s ease;
                background: rgba(0, 0, 0, 0.02);
            }

                .faq-answer-v2 p {
                    padding: 0 25px 20px;
                    margin: 0;
                    color: var(--text-secondary);
                    line-height: 1.6;
                    font-size: 0.95rem;
                }

            /* حالة الفتح (Active Class) */
            .faq-item-v2.active {
                border-color: var(--primary-color);
                box-shadow: 0 5px 15px var(--primary-glow);
            }

                .faq-item-v2.active .faq-question-v2 i {
                    transform: rotate(180deg);
                }

                .faq-item-v2.active .faq-answer-v2 {
                    max-height: 200px; /* ارتفاع كافي للمحتوى */
                }

            /* ========================================= */
            /* 🧊 3. كلاسات الـ 3D Tilt (تجهيز) */
            /* ========================================= */
            .tilt-card {
                transform-style: preserve-3d;
                transform: perspective(1000px);
            }
            /* ========================================= */
            /* 🟢 3. حالة الأونلاين (دائماً نشط) */
            /* ========================================= */
            .online-status-dot {
                position: absolute;
                top: 5px;
                right: 5px; /* مكان النقطة */
                width: 8px;
                height: 8px;
                background-color: #00ff00; /* أخضر فاقع */
                border-radius: 50%;
                border: 1px solid rgba(255, 255, 255, 0.5);
                box-shadow: 0 0 5px #00ff00;
                animation: pulse-green 2s infinite;
            }

            @keyframes pulse-green {
                0% {
                    transform: scale(0.95);
                    box-shadow: 0 0 0 0 rgba(0, 255, 0, 0.7);
                }

                70% {
                    transform: scale(1);
                    box-shadow: 0 0 0 6px rgba(0, 255, 0, 0);
                }

                100% {
                    transform: scale(0.95);
                    box-shadow: 0 0 0 0 rgba(0, 255, 0, 0);
                }
            }
            /* تنسيق لوجو المتجر في الناف بار */
            .nav-store-logo {
                height: 40px; /* ✅ ارتفاع ثابت ومناسب (أقل من ارتفاع الناف بار 60px) */
                width: auto; /* العرض يتظبط تلقائي للحفاظ على أبعاد الصورة */
                margin-left: 15px; /* مسافة بينه وبين زر الثيم */
                border-radius: 8px; /* تدوير خفيف للحواف (اختياري) */
                transition: transform 0.3s ease;
                display: block; /* لضمان عدم وجود مسافات سفلية زائدة */
            }

            /* تأثير عند مرور الماوس */
            .store-logo-link:hover .nav-store-logo {
                transform: scale(1.1); /* تكبير بسيط جداً */
                filter: drop-shadow(0 0 5px rgba(0, 97, 255, 0.5)); /* ظل خفيف */
            }

            /* في الموبايل، ممكن نصغره سنة بسيطة لو المساحة ضيقة */
            @media (max-width: 768px) {
                .nav-store-logo {
                    height: 35px;
                    margin-left: 10px;
                }
            }
            /* ========================================= */
            /* 🎨 تعديل ألوان النوافذ في الوايت مود */
            /* ========================================= */

            /* 1. النافذة الرئيسية (تكون بيضاء بلمسة زرقاء خفيفة جداً) */
            .dev-wrapper-v2:not([data-theme="dark"]) .modal-content-v2 {
                /* لون أبيض متدرج لسماوي فاتح جداً جداً */
                background: linear-gradient(135deg, #ffffff 0%, #f0f9ff 100%) !important;
                /* إلغاء الشفافية عشان اللون الرمادي يختفي */
                backdrop-filter: none !important;
                -webkit-backdrop-filter: none !important;
                /* إطار أبيض ناصع */
                border: 2px solid #ffffff !important;
                /* ظل أزرق ناعم بدلاً من الأسود */
                box-shadow: 0 25px 60px -15px rgba(0, 102, 255, 0.15) !important;
            }

            /* 2. الكروت الداخلية (الاختيارات) تكون بيضاء ونظيفة */
            .dev-wrapper-v2:not([data-theme="dark"]) .type-card-v2 {
                background: #ffffff !important;
                border: 1px solid #e1e8f0 !important;
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.03) !important;
            }

                /* تأثير عند الوقوف على الكارت */
                .dev-wrapper-v2:not([data-theme="dark"]) .type-card-v2:hover {
                    border-color: var(--primary-color) !important;
                    background: #f8fbff !important; /* لون أزرق فاتح جداً عند اللمس */
                    box-shadow: 0 10px 25px rgba(0, 102, 255, 0.1) !important;
                }

            /* 3. زر الإغلاق (X) يكون واضح */
            .dev-wrapper-v2:not([data-theme="dark"]) .modal-close-v2 {
                background: #f1f5f9 !important;
                color: #64748b !important;
            }

                .dev-wrapper-v2:not([data-theme="dark"]) .modal-close-v2:hover {
                    background: #ff4757 !important;
                    color: #fff !important;
                }
            /* تنسيق حاوية الشريط المتحرك */
            .testimonials-marquee-section {
                padding: 20px 0 80px; /* مسافات فوق وتحت */
                overflow: hidden; /* إخفاء أي حاجة تخرج بره الشاشة */
                position: relative;
                direction: ltr; /* 🛑 ضروري جداً: إجبار الاتجاه لليسار لضبط الحركة */
            }

            /* التراك اللي شايل الكروت */
            .testimonials-track {
                display: flex;
                /* 🛑 تم إزالة gap واستبدالها بـ margin داخل الكارت */
                width: max-content; /* العرض ياخد مساحة الكروت كلها */
                animation: scrollReviews 40s linear infinite; /* سرعة الحركة */
            }

                /* وقف الحركة لما الماوس ييجي عليها عشان العميل يعرف يقرا */
                .testimonials-track:hover {
                    animation-play-state: paused;
                }

            /* تنسيق الكارت الواحد */
            .testimonial-card-wide {
                min-width: 350px; /* عرض ثابت للكارت عشان ميصغرش */
                max-width: 350px;
                /* 🛑 بديل الـ gap: مسافة من اليمين لكل كارت */
                margin-right: 30px;
                padding: 30px;
                border-radius: 20px;
                background: var(--bg-card);
                border: 1px solid var(--border-glass);
                position: relative;
                user-select: none; /* منع تحديد النص أثناء السحب */
                transition: 0.3s;
                /* 🛑 إعادة ضبط اتجاه النص للعربية */
                direction: rtl;
                text-align: right;
            }

                .testimonial-card-wide:hover {
                    border-color: var(--primary-color);
                    transform: translateY(-5px);
                    box-shadow: 0 10px 30px -10px var(--primary-glow);
                }

            /* تنسيق النصوص داخل الكارت */
            .review-content {
                margin: 20px 0;
                font-size: 0.95rem;
                color: var(--text-secondary);
                line-height: 1.6;
            }

            .client-mini-info {
                display: flex;
                align-items: center;
                gap: 12px;
            }

            .mini-avatar {
                width: 40px;
                height: 40px;
                border-radius: 50%;
                background: var(--primary-color);
                color: white;
                display: flex;
                align-items: center;
                justify-content: center;
                font-weight: bold;
            }

            /* الأنيميشن: بيتحرك لنصف المسافة */
            @keyframes scrollReviews {
                0% {
                    transform: translateX(0);
                }

                100% {
                    /* 🛑 الحركة لليسار بنسبة 50% بالظبط (دقيقة جداً الآن) */
                    transform: translateX(-50%);
                }
            }

            /* للموبايل: تصغير الكروت شوية */
            @media (max-width: 768px) {
                .testimonial-card-wide {
                    min-width: 280px;
                    max-width: 280px;
                    padding: 20px;
                    margin-right: 20px; /* تقليل المسافة في الموبايل */
                }
            }

            /* استدعاء خط Cairo للزر */
            @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@600;700&display=swap');

            /* تنسيق شريط التنقل لضمان التوزيع الصحيح */
            .dev-navbar-v2 {
                display: flex;
                justify-content: space-between; /* يوزع العناصر: اللوجو في طرف والأزرار في الطرف الآخر */
                align-items: center;
                padding: 10px 20px;
            }

            /* حاوية للأزرار (واتس + دارك مود) لتظهر بجانب بعضها */
            .nav-actions {
                display: flex;
                align-items: center;
                gap: 15px; /* المسافة بين زر الواتس وزر الدارك مود */
            }

            .quote-btn {
                font-family: 'Cairo', sans-serif;
                display: inline-flex;
                align-items: center;
                gap: 6px; /* تقليل المسافة بين الأيقونة والكلمة */

                background: linear-gradient(135deg, #25D366 0%, #128C7E 100%);
                color: white;
                text-decoration: none;
                /* التعديلات هنا لتصغير الحجم */
                padding: 6px 14px; /* تصغير الحشو الداخلي */
                font-size: 12px; /* تصغير الخط قليلاً */

                border-radius: 50px;
                font-weight: 700;
                box-shadow: 0 4px 10px rgba(37, 211, 102, 0.2); /* تخفيف الظل ليناسب الحجم الصغير */
                border: 1px solid rgba(255, 255, 255, 0.2);
                transition: all 0.3s ease;
            }

                .quote-btn:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 5px 15px rgba(37, 211, 102, 0.4);
                    filter: brightness(1.1);
                }

            /* مؤشر الكتابة (الخط الذي يظهر ويختفي) */
            #typewriter::after {
                content: '|';
                display: inline-block;
                animation: blink 0.7s infinite;
                color: var(--primary-color);
                margin-right: 5px;
                font-weight: 100;
            }

            @keyframes blink {
                0%, 100% {
                    opacity: 1;
                }

                50% {
                    opacity: 0;
                }
            }
            /* ========================================= */
            /* 🔵 Highlight Color (Dev Page Only) */
            /* ========================================= */

            /* لمتصفحات كروم وإيدج وسفاري */
            #dev-services-page ::selection {
                background-color: #00e5ff; /* أزرق فاتح نيون */
                color: #000000; /* لون النص أسود ليكون مقروءاً */
                text-shadow: none;
            }

            /* لمتصفح فايرفوكس */
            #dev-services-page ::-moz-selection {
                background-color: #00e5ff;
                color: #000000;
                text-shadow: none;
            }

            /* ========================================= */
            /* 🌗 LEGENDARY THEME SWITCH STYLES */
            /* ========================================= */

            /* الحاوية الرئيسية للسويتش */
            .theme-switch {
                position: relative;
                display: inline-block;
                width: 70px; /* عرض السويتش */
                height: 34px; /* ارتفاع السويتش */
                z-index: 1002;
            }

                /* إخفاء الـ Checkbox الافتراضي */
                .theme-switch input {
                    opacity: 0;
                    width: 0;
                    height: 0;
                }

            /* 🎨 تصميم المسار (الخلفية) */
            .slider {
                position: absolute;
                cursor: pointer;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); /* لون السماء (نهار) */
                border-radius: 34px;
                transition: 0.5s cubic-bezier(0.23, 1, 0.32, 1); /* حركة ناعمة جداً */
                border: 2px solid rgba(255, 255, 255, 0.2);
                box-shadow: 0 0 15px rgba(0, 242, 254, 0.4); /* توهج أزرق خفيف */
                overflow: hidden;
            }

                /* 🌕 تصميم الكرة (المقبض) */
                .slider::before {
                    content: "";
                    position: absolute;
                    height: 26px;
                    width: 26px;
                    left: 4px;
                    bottom: 2px;
                    background: #ffcc00; /* لون الشمس */
                    border-radius: 50%;
                    transition: 0.5s cubic-bezier(0.23, 1, 0.32, 1);
                    box-shadow: 0 0 10px rgba(255, 204, 0, 0.8), inset -2px -2px 5px rgba(255, 136, 0, 0.5); /* توهج الشمس 3D */
                    z-index: 2;
                }

            /* 🌑 حالة الوضع المظلم (عند التفعيل) */
            .theme-switch input:checked + .slider {
                background: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%); /* لون الفضاء */
                border-color: rgba(255, 255, 255, 0.1);
                box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
            }

                .theme-switch input:checked + .slider::before {
                    transform: translateX(36px); /* تحريك الكرة لليمين */
                    background: #ffffff; /* لون القمر */
                    box-shadow: 0 0 10px rgba(255, 255, 255, 0.8), inset -3px -2px 5px rgba(0, 0, 0, 0.2); /* تفاصيل القمر */
                }

            /* ☀️ أيقونة الشمس (داخل السلايدر) */
            .icon-sun {
                position: absolute;
                left: 8px;
                top: 50%;
                transform: translateY(-50%);
                color: #fff;
                opacity: 1;
                font-size: 14px;
                transition: 0.3s;
                pointer-events: none;
                text-shadow: 0 0 5px rgba(255,255,255,0.5);
            }

            /* 🌙 أيقونة القمر (داخل السلايدر) */
            .icon-moon {
                position: absolute;
                right: 9px;
                top: 50%;
                transform: translateY(-50%);
                color: #ffd700;
                opacity: 0;
                font-size: 14px;
                transition: 0.3s;
                pointer-events: none;
            }

            /* التبديل بين الأيقونات */
            .theme-switch input:checked + .slider .icon-sun {
                opacity: 0;
                transform: translateY(-50%) rotate(90deg);
            }

            .theme-switch input:checked + .slider .icon-moon {
                opacity: 1;
                transform: translateY(-50%) rotate(0);
            }

            /* ✨ النجوم (تظهر فقط في الوضع المظلم) */
            .star {
                position: absolute;
                background: white;
                border-radius: 50%;
                transition: 0.4s;
                opacity: 0;
            }

            .star-1 {
                width: 2px;
                height: 2px;
                top: 8px;
                left: 15px;
            }

            .star-2 {
                width: 1.5px;
                height: 1.5px;
                bottom: 8px;
                left: 25px;
            }

            /* ظهور النجوم عند التفعيل */
            .theme-switch input:checked + .slider .star {
                opacity: 1;
                animation: twinkle 2s infinite ease-in-out;
            }

            @keyframes twinkle {
                0%, 100% {
                    opacity: 0.4;
                    transform: scale(1);
                }

                50% {
                    opacity: 1;
                    transform: scale(1.2);
                }
            }
            /* تنسيق الأزرار الأساسي */
            .btn-v2.btn-primary-v2 {
                position: relative;
                overflow: hidden; /* ضروري عشان تأثير اللمعة ميتطلعش بره الزرار */
                background: linear-gradient(90deg, #0061ff 0%, #00d2ff 100%);
                border: none;
                color: white !important;
                padding: 12px 25px;
                border-radius: 12px;
                font-weight: bold;
                cursor: pointer;
                transition: all 0.4s ease;
                z-index: 1;
            }

                /* ✨ تأثير اللمعة (Shine Effect) */
                .btn-v2.btn-primary-v2::before {
                    content: '';
                    position: absolute;
                    top: 0;
                    left: -100%;
                    width: 100%;
                    height: 100%;
                    background: linear-gradient( 120deg, transparent, rgba(255, 255, 255, 0.3), transparent );
                    transition: all 0.6s ease;
                    z-index: -1;
                }

                /* 🚀 الأكشن عند مرور الماوس (Hover) */
                .btn-v2.btn-primary-v2:hover {
                    transform: translateY(-5px); /* يرتفع للأعلى */
                    box-shadow: 0 10px 20px rgba(0, 97, 255, 0.4); /* توهج أزرق */
                    filter: brightness(1.1); /* زيادة الإضاءة */
                }

                    /* تحريك اللمعة عند الـ Hover */
                    .btn-v2.btn-primary-v2:hover::before {
                        left: 100%;
                    }

                /* تأثير الضغط (Click) */
                .btn-v2.btn-primary-v2:active {
                    transform: scale(0.95);
                }
            /* ========================================= */
            /* 📦 سيكشن الخدمات - النسخة المتطابقة V2.0 */
            /* ========================================= */

            /* حاوية النافذة الكبيرة */
            .services-window-container {
                /* ✅ التعديل: جعلنا المسافة العلوية 0 بدلاً من 40px */
                padding: 0 5% 40px !important;
            }

            .services-window {
                background: var(--bg-card) !important;
                border-radius: 40px;
                /* ✅✅ التعديل هنا: جعلنا المسافة العلوية 15px فقط بدلاً من 60px */
                padding: 15px 40px 60px !important;
                border: 1px solid var(--border-glass);
                box-shadow: 0 30px 60px -20px rgba(0, 0, 0, 0.1);
            }

            /* تنسيق الجريد (الشبكة) */
            .services-grid-v2 {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 30px;
            }

            /* 💠 تنسيق الكروت الفردية (متطابقة للجميع) */
            .service-card-v2 {
                padding: 40px 30px;
                display: flex;
                flex-wrap: wrap;
                align-items: center;
                gap: 10px;
                border-radius: 30px;
                background: var(--bg-card); /* يتغير حسب الثيم */
                /* إطار شفاف خفيف في الحالة العادية */
                border: 1px solid var(--border-glass) !important;
                text-align: center;
                transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
                position: relative;
                /* ظل ناعم في الحالة العادية */
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
                overflow: hidden;
            }

            .card-icon-v2,
            .service-title-v2 {
                width: auto; /* يأخذون مساحة المحتوى فقط */
                margin: 0 !important; /* إلغاء أي هوامش قديمة تسبب نزول السطر */
            }



            /* 🌟 تأثير الـ Hover (الايفيكت والاوتلاين النحيف) */
            .service-card-v2:hover {
                transform: translateY(-12px); /* حركة الارتفاع */
                background: var(--bg-card); /* يحافظ على لون الثيم أو أبيض */
                /* ✅ اوتلاين أزرق نحيف وخفيف */
                border: 1px solid rgba(0, 102, 255, 0.3) !important;
                /* ظل متوهج أزرق */
                box-shadow: 0 20px 40px rgba(0, 102, 255, 0.12);
            }

            /* 🛑 إلغاء التميز الخاص بالكارت القديم (لجعلهم 3 زي بعض) */
            .featured-card {
                border: 1px solid var(--border-glass) !important;
                transform: scale(1) !important; /* إلغاء التكبير */
                z-index: 1 !important;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08) !important;
            }

                .featured-card:hover {
                    transform: translateY(-12px) !important;
                    border: 1px solid rgba(0, 102, 255, 0.3) !important;
                    box-shadow: 0 20px 40px rgba(0, 102, 255, 0.12) !important;
                }

            /* إلغاء بادج "الأكثر طلباً" إذا كنت تريدهم متطابقين تماماً */
            .badge-featured {
                display: none;
            }

            /* قائمة المميزات داخل الكارت */
            .service-features-v2 {
                list-style: none;
                padding: 0;
                margin: 25px 0 35px;
                text-align: right;
            }

                .service-features-v2 li {
                    margin-bottom: 12px;
                    font-size: 0.95rem;
                    color: var(--text-secondary);
                    display: flex;
                    align-items: center;
                    gap: 10px;
                }

                    .service-features-v2 li i {
                        color: var(--primary-color);
                    }

            /* الأيقونات */
            .card-icon-v2 {
                font-size: 2.5rem;
                color: var(--primary-color);
                margin-bottom: 20px;
                filter: drop-shadow(0 5px 10px var(--primary-glow));
                transition: 0.3s;
            }

            .service-card-v2:hover .card-icon-v2 {
                transform: scale(1.1);
            }

            /* زر العرض الكامل */
            .w-100 {
                width: 100%;
                justify-content: center;
            }
            /* ========================================= */
            /* 📱 تحسينات الموبايل (Responsive Media Query) */
            /* ========================================= */

            @media screen and (max-width: 768px) {

                /* 1. تقليل هوامش الحاوية الكبيرة لتوسيع العرض */
                .services-window-container {
                    padding: 0 15px 30px !important; /* مسافة جانبية صغيرة جداً */
                }

                /* 2. تصغير حواف وتدوير النافذة الخلفية */
                .services-window {
                    padding: 20px 15px 30px !important; /* تقليل الحشو الداخلي */
                    border-radius: 25px; /* تقليل التدوير ليناسب الشاشات الصغيرة */
                }

                /* 3. تحويل الشبكة لعمود واحد (One Column) */
                .services-grid-v2 {
                    grid-template-columns: 1fr; /* عمود واحد يملأ الشاشة */
                    gap: 20px; /* تقليل المسافة بين الكروت */
                }

                /* 4. تنسيق الكارت الداخلي للموبايل */
                .service-card-v2 {
                    padding: 20px 15px; /* تقليل الحشو الداخلي للكارت */
                    border-radius: 20px;
                    gap: 8px; /* تقريب العناصر من بعضها */
                }

                /* 5. تصغير الأيقونة والعنوان قليلاً ليظلوا بجانب بعض */
                .card-icon-v2 {
                    font-size: 1.8rem; /* تصغير الأيقونة */
                }

                .service-title-v2 {
                    font-size: 1.1rem; /* تصغير العنوان */
                }

                /* 6. تنسيق القائمة النقطية للموبايل */
                .service-features-v2 {
                    margin: 15px 0 25px; /* تقليل المسافات */
                }

                    .service-features-v2 li {
                        font-size: 0.85rem; /* تصغير الخط قليلاً */
                        margin-bottom: 8px;
                    }

                /* 7. تحسين تجربة اللمس (Hover لا يعمل جيداً على الموبايل) */
                /* نجعل الكارت يظهر وكأنه نشط دائماً بشكل خفيف */
                .service-card-v2 {
                    border: 1px solid rgba(255, 255, 255, 0.1) !important;
                }
            }
            /* ========================================= */
            /* 🔵 تخصيص السكرول بار لصفحة الديف فقط */
            /* ========================================= */

            /* 1. السكرول بار نفسه (العرض) */
            .dev-wrapper-v2::-webkit-scrollbar {
                width: 10px;
            }

            /* 2. الخلفية الخاصة بالسكرول (المسار) */
            .dev-wrapper-v2::-webkit-scrollbar-track {
                background: var(--bg-main);
            }

            /* 3. الجزء المتحرك (الزلاقة) */
            .dev-wrapper-v2::-webkit-scrollbar-thumb {
                background: linear-gradient(180deg, var(--primary-color), var(--accent-color));
                border-radius: 10px;
                border: 2px solid var(--bg-main); /* بيعمل فجوة بسيطة تخلي شكله شيك */
            }

                /* 4. تأثير عند مرور الماوس على السكرول */
                .dev-wrapper-v2::-webkit-scrollbar-thumb:hover {
                    background: var(--primary-color);
                    box-shadow: 0 0 10px var(--primary-glow);
                }

            /* للتوافق مع متصفح فايرفوكس */
            .dev-wrapper-v2 {
                scrollbar-width: thin;
                scrollbar-color: var(--primary-color) var(--bg-main);
            }

            /* ========================================= */
            /* 🛤️ تنسيق مربعات "كيف نعمل" التفاعلية */
            /* ========================================= */

            .process-section-v2 {
                padding: 60px 8% 80px;
            }

            .process-grid-v2 {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
                gap: 25px;
                margin-top: 40px;
            }

            /* الكارت الأساسي */
            .process-step-card {
                padding: 35px 25px;
                border-radius: 24px;
                text-align: center;
                position: relative;
                overflow: hidden;
                border: 1px solid var(--border-glass);
                transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            }

                /* تأثير عند مرور الماوس */
                .process-step-card:hover {
                    transform: translateY(-12px);
                    border-color: var(--primary-color);
                    background: var(--bg-card);
                    box-shadow: 0 20px 40px -10px var(--primary-glow);
                }

            /* رأس الكارت (الرقم والأيقونة) */
            .step-header {
                display: flex;
                flex-direction: column;
                align-items: center;
                margin-bottom: 20px;
            }

            /* الرقم العملاق في الخلفية */
            .step-number-giant {
                font-size: 4rem;
                font-weight: 900;
                color: var(--primary-color);
                opacity: 0.1;
                position: absolute;
                top: -10px;
                right: 15px;
                font-family: 'Fira Code', monospace;
                transition: 0.4s;
            }

            .process-step-card:hover .step-number-giant {
                opacity: 0.3;
                transform: scale(1.1) translateY(10px);
            }

            /* الأيقونة */
            .step-icon-v2 {
                font-size: 2.5rem;
                color: var(--primary-color);
                background: var(--gradient-primary);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                filter: drop-shadow(0 5px 10px var(--primary-glow));
                margin-bottom: 10px;
            }

            /* محتوى النص */
            .step-body h4 {
                font-size: 1.3rem;
                font-weight: 800;
                margin-bottom: 12px;
                color: var(--text-primary);
            }

            .step-body p {
                font-size: 0.95rem;
                color: var(--text-secondary);
                line-height: 1.6;
            }

            /* تحسينات الموبايل */
            @media (max-width: 768px) {
                .process-grid-v2 {
                    grid-template-columns: 1fr;
                }

                .process-step-card {
                    text-align: right;
                    padding: 30px 20px;
                }

                .step-header {
                    flex-direction: row;
                    justify-content: space-between;
                    margin-bottom: 15px;
                }

                .step-number-giant {
                    position: static;
                    font-size: 2.5rem;
                    opacity: 0.4;
                }
            }
            /* حاوية شريط التقنيات */
            .tech-stack-section {
                padding: 30px 0;
                overflow: hidden;
                background: var(--primary-glow);
                margin-bottom: 60px;
                direction: ltr; /* 🛑 ضروري جداً لضبط اتجاه الحركة */
                position: relative;
            }

            /* الشريط المتحرك */
            .tech-marquee {
                display: flex;
                width: max-content;
                /* 🛑 تم إزالة الـ gap عشان الحسابات تظبط */
                animation: techScroll 25s linear infinite; /* سرعة متوسطة */
            }

                /* وقف الحركة عند مرور الماوس */
                .tech-marquee:hover {
                    animation-play-state: paused;
                }

            /* العنصر الواحد (لغة البرمجة) */
            .tech-item {
                display: flex;
                align-items: center;
                gap: 10px;
                font-weight: 700;
                color: var(--text-secondary);
                font-size: 1.2rem;
                /* 🛑 بديل الـ gap: مسافة من اليمين لكل عنصر */
                margin-right: 50px;
                white-space: nowrap; /* منع النص ينزل سطر جديد */
                user-select: none;
                transition: 0.3s;
            }

                .tech-item i {
                    font-size: 2rem;
                    color: var(--primary-color);
                    transition: 0.3s;
                }

                /* تأثير بسيط عند الهوفر على العنصر */
                .tech-item:hover {
                    color: var(--primary-color);
                    transform: scale(1.1);
                }

            /* حركة الشريط */
            @keyframes techScroll {
                0% {
                    transform: translateX(0);
                }

                100% {
                    /* الحركة لليسار بنسبة 50% (نصف المسافة) */
                    transform: translateX(-50%);
                }
            }

            /* للموبايل: تقليل المسافات */
            @media (max-width: 768px) {
                .tech-item {
                    font-size: 1rem;
                    margin-right: 30px;
                }

                    .tech-item i {
                        font-size: 1.5rem;
                    }
            }
            /* ============================ */
            /* 🎨 THEME & VARIABLES */
            /* ============================ */
            .dev-wrapper-v2 {
                /* Light Mode */
                --bg-main: #f0f2f5;
                --bg-glass: rgba(255, 255, 255, 0.7);
                --bg-card: rgba(255, 255, 255, 0.85);
                --text-primary: #1a202c;
                --text-secondary: #4a5568;
                --primary-color: #0066ff;
                --accent-color: #00d4ff;
                --primary-glow: rgba(0, 102, 255, 0.1);
                --orb-opacity: 0.08; /* تخفيف الدوائر الضوئية في الخلفية */
                --border-glass: rgba(255, 255, 255, 0.2);
                --gradient-primary: linear-gradient(135deg, #0066ff 0%, #00d4ff 100%);
                --modal-overlay: rgba(0, 0, 0, 0.7);
            }

                .dev-wrapper-v2[data-theme="dark"] {
                    /* Dark Mode */
                    --bg-main: #0a0f1c;
                    --bg-glass: rgba(15, 23, 42, 0.7);
                    --bg-card: rgba(30, 41, 59, 0.75);
                    --text-primary: #f8fafc;
                    --text-secondary: #94a3b8;
                    --primary-color: #38bdf8;
                    --accent-color: #22d3ee;
                    --primary-glow: rgba(56, 189, 248, 0.25);
                    --border-glass: rgba(255, 255, 255, 0.08);
                    --gradient-primary: linear-gradient(135deg, #0ea5e9 0%, #22d3ee 100%);
                    --modal-overlay: rgba(0, 0, 0, 0.85);
                }

                /* Base Resets & Styles */
                .dev-wrapper-v2 * {
                    box-sizing: border-box;
                    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                }

            .dev-wrapper-v2 {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                z-index: 99999;
                overflow-y: auto;
                font-family: 'Tajawal', sans-serif;
                background-color: var(--bg-main);
                color: var(--text-primary);
                direction: rtl;
                background-image: radial-gradient(at 0% 0%, var(--primary-glow) 0px, transparent 50%), radial-gradient(at 100% 100%, var(--accent-color) 0px, transparent 50%);
                background-attachment: fixed;
                background-size: 100% 100%;
            }

            /* Utility Classes */
            .glass {
                background: var(--bg-glass);
                backdrop-filter: blur(16px);
                -webkit-backdrop-filter: blur(16px);
                border: 1px solid var(--border-glass);
            }

            .text-gradient {
                background: var(--gradient-primary);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
            }

            .code-font {
                font-family: 'Fira Code', monospace;
            }

            /* Buttons */
            .btn-v2 {
                padding: 12px 28px;
                border-radius: 12px;
                font-weight: 700;
                border: none;
                cursor: pointer;
                display: inline-flex;
                align-items: center;
                gap: 10px;
                position: relative;
                overflow: hidden;
                transition: 0.4s;
            }

            .btn-primary-v2 {
                background: var(--gradient-primary);
                color: white;
                box-shadow: 0 10px 20px -10px var(--primary-glow);
            }

                .btn-primary-v2:hover {
                    transform: translateY(-3px);
                    box-shadow: 0 15px 30px -10px var(--primary-glow);
                }

            .btn-outline-v2 {
                background: transparent;
                border: 2px solid var(--primary-color);
                color: var(--primary-color);
                /* ✅ أبعاد صغيرة */
                padding: 5px 12px;
                font-size: 0.8rem;
                border-radius: 8px;
                font-weight: bold;
                cursor: pointer;
                display: flex;
                align-items: center;
                gap: 5px;
            }

                .btn-outline-v2:hover {
                    background: var(--primary-color);
                    color: white !important;
                }

            /* ============================ */
            /* 🛸 NAVBAR V2 (FORCED LAYOUT) */
            /* ============================ */
            .dev-navbar-v2 {
                display: flex;
                align-items: center;
                justify-content: space-between;
                /* 🛑 هذا السطر هو الحل السحري: يجبر الناف بار على اتباع الاتجاه الطبيعي (يسار-يمين) بغض النظر عن لغة الموقع */
                direction: ltr !important;
                padding: 10px 5%;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 60px; /* ارتفاع ثابت */
                z-index: 1000;
                background: rgba(255, 255, 255, 0.05);
                backdrop-filter: blur(15px);
                -webkit-backdrop-filter: blur(15px);
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            }

            /* 1️⃣ اللوجو (BERLIN DEV) - نخليه يظهر الأول على اليسار */
            .nav-logo-v2 {
                order: 1; /* الترتيب الأول (يسار الشاشة) */

                font-size: 1.1rem;
                font-weight: 900;
                display: flex;
                align-items: center;
                gap: 8px;
                cursor: pointer;
                color: var(--text-primary);
            }

                .nav-logo-v2 i {
                    color: var(--primary-color);
                    font-size: 1.3rem;
                }

            /* 2️⃣ الأزرار - نخليها تظهر في الآخر على اليمين */
            .nav-actions-v2 {
                order: 2; /* الترتيب الثاني (يمين الشاشة) */

                display: flex;
                align-items: center;
                gap: 10px;
            }

            /* باقي التنسيقات (زر الرجوع والثيم) زي ما هي */
            .btn-outline-v2 {
                background: transparent;
                border: 1px solid var(--primary-color);
                color: var(--primary-color);
                padding: 6px 15px;
                font-size: 0.85rem;
                border-radius: 8px;
                font-weight: bold;
                cursor: pointer;
                display: flex;
                align-items: center;
                gap: 6px;
            }

                .btn-outline-v2:hover {
                    background: var(--primary-color);
                    color: white !important;
                }

            .theme-toggle-giant {
                width: 38px !important;
                height: 38px !important;
                border-radius: 50%;
                border: none;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                transition: 0.3s;
            }

                .theme-toggle-giant i {
                    font-size: 1rem !important;
                }

            .dev-wrapper-v2:not([data-theme="dark"]) .theme-toggle-giant {
                background: #0061ff;
                color: white !important;
            }

            .dev-wrapper-v2[data-theme="dark"] .theme-toggle-giant {
                background: rgba(255, 255, 255, 0.1);
                color: #ffd700 !important;
                border: 1px solid rgba(255, 255, 255, 0.2);
            }

            .theme-toggle-giant:hover {
                transform: rotate(15deg) scale(1.1);
            }

            /* ============================ */
            /* 🚀 HERO SECTION V2 */
            /* ============================ */
            .hero-v2 {
                /* ✅✅ الحل هنا: قللنا المسافة العلوية من 160px إلى 85px فقط */
                /* هذا الرقم يكفي ليكون تحت الناف بار مباشرة بدون فراغ كبير */
                padding: 85px 8% 60px !important;
                display: flex;
                align-items: center;
                justify-content: space-between;
                min-height: 90vh;
                position: relative;
                overflow: hidden;
                margin-top: 0 !important; /* ضمان عدم وجود هوامش خارجية */
            }

            .hero-content-v2 {
                flex: 1;
                max-width: 650px;
                z-index: 2;
            }

            .hero-title-v2 {
                font-size: 3.8rem;
                font-weight: 900;
                line-height: 1.15;
                margin-bottom: 25px;
            }

            .hero-subtitle-v2 {
                font-size: 1.2rem;
                color: var(--text-secondary);
                margin-bottom: 40px;
                max-width: 500px;
                line-height: 1.6;
            }

            .hero-visual-v2 {
                flex: 1;
                display: flex;
                justify-content: center;
                position: relative;
                z-index: 1;
            }

                .hero-visual-v2 img {
                    max-width: 100%;
                    width: 550px;
                    filter: drop-shadow(0 30px 60px var(--primary-glow));
                    animation: floatV2 5s ease-in-out infinite;
                }

            .glowing-orb {
                position: absolute;
                width: 300px;
                height: 300px;
                border-radius: 50%;
                background: var(--primary-color);
                filter: blur(100px);
                opacity: 0.2;
                z-index: -1;
            }

            .hero-content-v2 {
                flex: 1;
                max-width: 650px;
                z-index: 2;
            }

            .hero-badge-v2 {
                display: inline-flex;
                align-items: center;
                gap: 8px;
                padding: 8px 16px;
                border-radius: 30px;
                background: var(--primary-glow);
                color: var(--primary-color);
                font-weight: 700;
                font-size: 0.9rem;
                margin-bottom: 25px;
                border: 1px solid var(--primary-color);
            }

            .hero-title-v2 {
                font-size: 3.8rem;
                font-weight: 900;
                line-height: 1.15;
                margin-bottom: 25px;
            }

            .typewriter-text {
                color: var(--primary-color);
            }

            .hero-subtitle-v2 {
                font-size: 1.2rem;
                color: var(--text-secondary);
                margin-bottom: 40px;
                max-width: 500px;
                line-height: 1.6;
            }

            .hero-visual-v2 {
                flex: 1;
                display: flex;
                justify-content: center;
                position: relative;
                z-index: 1;
            }

                .hero-visual-v2 img {
                    max-width: 100%;
                    width: 550px;
                    filter: drop-shadow(0 30px 60px var(--primary-glow));
                    animation: floatV2 5s ease-in-out infinite;
                }

            .glowing-orb {
                position: absolute;
                width: 300px;
                height: 300px;
                border-radius: 50%;
                background: var(--primary-color);
                filter: blur(100px);
                opacity: 0.2;
                z-index: -1;
            }

            /* ============================ */
            /* 📊 STATS BANNER (NEW) */
            /* ============================ */
            .stats-banner {
                /* ✅ التعديل: قللنا المسافة السفلية لتقريب القسم التالي */
                margin: 0 8% 15px !important;
                padding: 30px 5%;
                border-radius: 20px;
                display: flex;
                justify-content: space-around;
                align-items: center;
                flex-wrap: wrap;
                gap: 30px;
            }

            .stat-item {
                text-align: center;
            }

            .stat-number {
                font-size: 2.5rem;
                font-weight: 800;
                color: var(--primary-color);
                display: block;
            }

            .stat-label {
                color: var(--text-secondary);
                font-weight: 600;
            }

            /* ============================ */
            /* 📦 SERVICES V2 */
            /* ============================ */
            .section-header-v2 {
                text-align: center;
                margin-bottom: 60px;
            }

                .section-header-v2 h2 {
                    font-size: 2.5rem;
                    font-weight: 800;
                    margin-bottom: 15px;
                }

                .section-header-v2 p {
                    color: var(--text-secondary);
                    max-width: 600px;
                    margin: 0 auto;
                }

            .services-grid-v2 {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 30px;
                padding: 0 8% 60px;
            }

            .service-card-v2 {
                padding: 40px 30px;
                border-radius: 24px;
                display: flex;
                flex-direction: column;
                position: relative;
                transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
                overflow: hidden;
            }

                .service-card-v2::before {
                    content: '';
                    position: absolute;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: var(--gradient-primary);
                    opacity: 0;
                    transition: 0.4s;
                    z-index: 0;
                }

                .service-card-v2:hover {
                    transform: translateY(-15px);
                    border-color: transparent;
                }

                    .service-card-v2:hover::before {
                        opacity: 0.05;
                    }

            .card-icon-v2 {
                width: 70px;
                height: 70px;
                border-radius: 18px;
                background: var(--primary-glow);
                color: var(--primary-color);
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 2rem;
                margin-bottom: 25px;
                position: relative;
                z-index: 1;
            }

            .service-card-v2:hover .card-icon-v2 {
                background: var(--primary-color);
                color: white;
                transform: rotate(-10deg) scale(1.1);
            }

            .card-content-v2 {
                position: relative;
                z-index: 1;
            }

            .service-title-v2 {
                font-size: 1.4rem;
                font-weight: 800;
                margin-bottom: 15px;
            }

            .service-features-v2 {
                list-style: none;
                padding: 0;
                margin: 20px 0 30px;
                color: var(--text-secondary);
            }

                .service-features-v2 li {
                    margin-bottom: 10px;
                    display: flex;
                    align-items: center;
                    gap: 10px;
                }

                .service-features-v2 i {
                    color: var(--primary-color);
                }

            .card-btn-v2 {
                width: 100%;
                padding: 15px;
                border-radius: 14px;
                font-weight: 700;
                cursor: pointer;
                background: rgba(var(--primary-color-rgb), 0.1);
                color: var(--primary-color);
                border: 2px solid rgba(var(--primary-color-rgb), 0.2);
                transition: 0.3s;
            }

                .card-btn-v2:hover {
                    background: var(--primary-color);
                    color: white;
                    border-color: transparent;
                }

            /* ============================ */
            /* 💻 TECH STACK MARQUEE (NEW) */
            /* ============================ */
            .tech-stack-section {
                padding: 40px 0;
                overflow: hidden;
                background: var(--primary-glow);
                margin-bottom: 60px;
            }

            .tech-marquee {
                display: flex;
                gap: 40px;
                animation: marquee 20s linear infinite;
                width: max-content;
            }

            .tech-item {
                display: flex;
                align-items: center;
                gap: 10px;
                font-weight: 700;
                color: var(--text-secondary);
                font-size: 1.2rem;
            }

                .tech-item i {
                    font-size: 2rem;
                    color: var(--primary-color);
                }

            /* ============================ */
            /* 🛤️ PROCESS TIMELINE (NEW) */
            /* ============================ */
            .process-section {
                padding: 0 8% 80px;
            }

            .timeline {
                display: flex;
                justify-content: space-between;
                margin-top: 50px;
                position: relative;
            }

                .timeline::before {
                    content: '';
                    position: absolute;
                    top: 40px;
                    left: 0;
                    width: 100%;
                    height: 3px;
                    background: var(--border-glass);
                    z-index: 0;
                }

            .timeline-step {
                text-align: center;
                position: relative;
                z-index: 1;
                flex: 1;
            }

            .step-icon {
                width: 80px;
                height: 80px;
                border-radius: 50%;
                background: var(--bg-card);
                border: 3px solid var(--primary-color);
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 2rem;
                color: var(--primary-color);
                margin: 0 auto 20px;
                position: relative;
            }

            .step-number {
                position: absolute;
                top: -5px;
                right: -5px;
                width: 30px;
                height: 30px;
                background: var(--primary-color);
                color: white;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                font-weight: bold;
            }

            .step-title {
                font-weight: 800;
                margin-bottom: 10px;
            }

            .step-desc {
                color: var(--text-secondary);
                font-size: 0.9rem;
                max-width: 200px;
                margin: 0 auto;
            }

            /* ============================ */
            /* 🖼️ PORTFOLIO V2 */
            /* ============================ */
            .portfolio-grid-v2 {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
                gap: 30px;
                padding: 0 8% 100px;
            }

            .portfolio-card-v2 {
                border-radius: 20px;
                overflow: hidden;
                position: relative;
                group;
                display: block;
            }

                .portfolio-card-v2 img {
                    width: 100%;
                    height: 280px;
                    object-fit: cover;
                    transition: 0.5s;
                }

            .portfolio-overlay {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
                display: flex;
                flex-direction: column;
                justify-content: flex-end;
                padding: 25px;
                opacity: 0;
                transition: 0.3s;
            }

            .portfolio-card-v2:hover img {
                transform: scale(1.1);
            }

            .portfolio-card-v2:hover .portfolio-overlay {
                opacity: 1;
            }

            .portfolio-info h4 {
                color: white;
                font-size: 1.3rem;
                margin-bottom: 5px;
            }

            .portfolio-tags {
                display: flex;
                gap: 8px;
            }

            .p-tag {
                background: var(--primary-color);
                color: white;
                font-size: 0.75rem;
                padding: 4px 10px;
                border-radius: 20px;
            }

            /* ============================ */
            /* 🧩 MODALS V2 */
            /* ============================ */
            /* 1. تنسيق الخلفية (الستارة) */
            .modal-overlay-v2 {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: var(--modal-overlay);
                backdrop-filter: blur(8px); /* تقليل البلور شوية لتحسين الأداء */
                z-index: 2147483647 !important;
                display: flex;
                align-items: center;
                justify-content: center;
                /* الحالة المخفية (Default) */
                opacity: 0;
                visibility: hidden;
                /* 🛑 السر هنا: وأنت بتقفل، استنى 0.3 ثانية قبل ما تخفي العنصر */
                transition: opacity 0.3s ease, visibility 0s linear 0.3s;
            }

                /* حالة الظهور (Active) */
                .modal-overlay-v2.active {
                    opacity: 1;
                    visibility: visible;
                    /* وأنت بتفتح، اظهر فوراً بدون تأخير */
                    transition: opacity 0.3s ease, visibility 0s linear 0s;
                }

            /* 2. تنسيق الصندوق نفسه (الكارت) */
            .modal-content-v2 {
                width: 90%;
                max-width: 600px;
                border-radius: 24px;
                padding: 40px;
                position: relative;
                /* الحركة: يبدأ صغير شوية وتحت */
                transform: scale(0.95) translateY(15px);
                opacity: 0;
                /* ربطنا حركته بنفس توقيت الخلفية (0.3s) */
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            }

            /* لما الكلاس active ينضاف، الكارت يظهر */
            .modal-overlay-v2.active .modal-content-v2 {
                transform: scale(1) translateY(0);
                opacity: 1;
            }

            .modal-close-v2 {
                position: absolute;
                top: 20px;
                left: 20px;
                width: 40px;
                height: 40px;
                border-radius: 50%;
                background: var(--bg-main);
                color: var(--text-secondary);
                border: none;
                font-size: 1.2rem;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
            }

                .modal-close-v2:hover {
                    background: #ff4757;
                    color: white;
                }

            .types-grid-v2 {
                display: grid;
                grid-template-columns: repeat(2, 1fr); /* عمودين */
                gap: 20px;
                margin-top: 30px;
            }

            /* التنسيق العام للكارت (الزرار) */
            .type-card-v2 {
                padding: 25px;
                border-radius: 18px;
                text-align: center;
                cursor: pointer;
                border: 2px solid var(--border-glass);
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                background: var(--bg-main);
                display: block;
                text-decoration: none; /* إلغاء الخط تحت الرابط */
            }

                /* تأثير الـ Hover (الارتفاع والتوهج) */
                .type-card-v2:hover {
                    border-color: var(--primary-color);
                    transform: translateY(-5px) scale(1.02);
                    box-shadow: 0 10px 20px -5px var(--primary-glow);
                }

                /* تنسيق الأيقونة */
                .type-card-v2 i {
                    font-size: 2.5rem;
                    margin-bottom: 15px;
                    display: block;
                    transition: transform 0.3s ease;
                }

                .type-card-v2:hover i {
                    transform: scale(1.1);
                }

                /* تنسيق النص تحت الأيقونة */
                .type-card-v2 h5 {
                    color: var(--text-primary);
                    margin: 10px 0 0;
                    font-weight: 700;
                    font-size: 1rem;
                    transition: color 0.3s;
                }

                .type-card-v2:hover h5 {
                    color: var(--primary-color);
                }

            /* جعل كارت الديسكورد يأخذ العرض الكامل (اختياري) */
            /* إذا أردت أن يكون في سطر وحده عريض، ابقِ على هذا الجزء */
            [style*="grid-column: span 2"] {
                grid-column: span 2 !important;
            }

            /* تحسين الموبايل: جعل كل الأزرار فوق بعضها */
            @media (max-width: 768px) {
                .types-grid-v2 {
                    grid-template-columns: 1fr;
                }

                [style*="grid-column: span 2"] {
                    grid-column: span 1 !important;
                }
            }

            .form-group-v2 {
                margin-bottom: 20px;
            }

            .form-label {
                display: block;
                margin-bottom: 8px;
                font-weight: 700;
                font-size: 0.9rem;
            }

            .form-input-v2 {
                width: 100%;
                padding: 15px 20px;
                border-radius: 12px;
                border: 2px solid var(--border-glass);
                background: var(--bg-main);
                color: var(--text-primary);
                outline: none;
                transition: 0.3s;
                font-family: inherit;
            }

                .form-input-v2:focus {
                    border-color: var(--primary-color);
                    box-shadow: 0 0 0 4px var(--primary-glow);
                }

            /* Animations & Media Queries */
            @keyframes floatV2 {
                0%, 100% {
                    transform: translateY(0);
                }

                50% {
                    transform: translateY(-20px);
                }
            }

            @keyframes marquee {
                0% {
                    transform: translateX(0);
                }

                100% {
                    transform: translateX(-50%);
                }
            }

            @media (max-width: 992px) {
                .hero-v2 {
                    flex-direction: column-reverse;
                    text-align: center;
                    padding-top: 120px;
                }

                .hero-content-v2 {
                    margin-top: 40px;
                }

                .stats-banner {
                    justify-content: center;
                }

                .timeline {
                    flex-direction: column;
                    gap: 30px;
                }

                    .timeline::before {
                        width: 3px;
                        height: 100%;
                        left: 50%;
                        top: 0;
                    }

                .types-grid-v2 {
                    grid-template-columns: 1fr;
                }
            }

            /* تخفيف التوهج الأزرق في الوايت مود فقط */
            .dev-wrapper-v2:not([data-theme="dark"]) {
                /* 1. تقليل شفافية الدوائر الضوئية في الخلفية */
                --orb-opacity: 0.04 !important;
                z-index: 99990 !important;
                /* 2. تخفيف التوهج الأساسي للهوية (Shadows & Glows) */
                --primary-glow: rgba(0, 102, 255, 0.05) !important;
                /* 3. إعادة رسم الخلفية بتدرجات شفافة جداً لمنع اللون الأزرق من السيطرة */
                background-image: radial-gradient(at 0% 0%, rgba(0, 97, 255, 0.03) 0px, transparent 50%), radial-gradient(at 100% 100%, rgba(0, 212, 255, 0.05) 0px, transparent 50%) !important;
            }

                /* تخفيف الظل الخاص بالكروت في الوايت مود لمنع اللون الأزرق القوي */
                .dev-wrapper-v2:not([data-theme="dark"]) .service-card-v2:hover,
                .dev-wrapper-v2:not([data-theme="dark"]) .portfolio-card-v2:hover {
                    box-shadow: 0 20px 25px -5px rgba(0, 97, 255, 0.08) !important;
                }
            /* تصميم زر التبديل العملاق المطور */
            .theme-toggle-giant {
                /* ✅ تصغير القطر من 65px لـ 35px */
                width: 35px !important;
                height: 35px !important;
                border-radius: 50%;
                border: none;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                transition: 0.3s;
            }

                .theme-toggle-giant i {
                    font-size: 1rem !important; /* ✅ تصغير الأيقونة */
                }

            /* ألوان زر الثيم (حسب الوضع) */
            .dev-wrapper-v2:not([data-theme="dark"]) .theme-toggle-giant {
                background: #0061ff;
                color: white !important;
            }

            .dev-wrapper-v2[data-theme="dark"] .theme-toggle-giant {
                background: rgba(255, 255, 255, 0.1);
                color: #ffd700 !important;
                border: 1px solid rgba(255, 255, 255, 0.2);
            }

            .theme-toggle-giant:hover {
                transform: rotate(15deg) scale(1.1);
            }

            .dev-wrapper-v2:not([data-theme="dark"]) .theme-toggle-giant:hover {
                background: #0052d9; /* أزرق أغمق سنة عند اللمس */
                box-shadow: 0 15px 30px rgba(0, 97, 255, 0.4);
            }

            /* أنيميشن الأيقونة داخل الزر */
            .theme-toggle-giant i {
                font-size: 1.8rem !important;
                animation: giant-pulse 3s infinite ease-in-out;
            }

            @keyframes giant-pulse {
                0%, 100% {
                    transform: scale(1);
                }

                50% {
                    transform: scale(1.1);
                }
            }
            /* تصميم الفوتر المطور باللون الأزرق */
            .dev-footer-v2 {
                background: linear-gradient(180deg, rgba(0, 97, 255, 0.05) 0%, rgba(0, 97, 255, 0.2) 100%) !important;
                border-top: 1px solid rgba(0, 97, 255, 0.3);
                padding: 60px 8% 20px;
                margin-top: 50px;
                color: var(--text-primary);
            }

            .footer-container-v2 {
                display: grid;
                grid-template-columns: 2fr 1fr 1fr;
                gap: 40px;
                margin-bottom: 40px;
            }

            .footer-brand p {
                color: var(--text-secondary);
                margin-top: 15px;
                max-width: 300px;
                line-height: 1.6;
            }

            .footer-links-v2, .footer-social-v2 {
                display: flex;
                flex-direction: column;
                gap: 15px;
            }

                .footer-links-v2 h4, .footer-social-v2 h4 {
                    color: var(--primary-color);
                    font-weight: 800;
                    margin-bottom: 5px;
                }

                .footer-links-v2 a {
                    text-decoration: none;
                    color: var(--text-secondary);
                    transition: 0.3s;
                    font-weight: 500;
                }

                    .footer-links-v2 a:hover {
                        color: var(--primary-color);
                        padding-right: 5px;
                    }

            .social-icons-v2 {
                display: flex;
                gap: 15px;
            }

                .social-icons-v2 a {
                    width: 40px;
                    height: 40px;
                    border-radius: 50%;
                    background: var(--primary-color);
                    color: white;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    text-decoration: none;
                    transition: 0.3s;
                }

                    .social-icons-v2 a:hover {
                        transform: translateY(-5px);
                        box-shadow: 0 5px 15px var(--primary-glow);
                        background: var(--accent-color);
                    }

            .footer-bottom-v2 {
                text-align: center;
                padding-top: 20px;
                border-top: 1px solid rgba(255, 255, 255, 0.1);
            }

                .footer-bottom-v2 p {
                    font-size: 0.9rem;
                    color: var(--text-secondary);
                }

            /* تحسين الموبايل */
            @media (max-width: 768px) {
                .footer-container-v2 {
                    grid-template-columns: 1fr;
                    text-align: center;
                }

                .footer-brand p {
                    margin: 15px auto;
                }

                .social-icons-v2 {
                    justify-content: center;
                }
            }

            .whatsapp-btn {
                display: inline-flex;
                align-items: center;
                gap: 8px; /* مسافة بين الأيقونة والنص */
                background-color: #25D366; /* لون واتساب الرسمي */
                color: white;
                text-decoration: none;
                padding: 10px 20px;
                border-radius: 5px; /* حواف دائرية */
                font-weight: bold;
                font-family: Arial, sans-serif;
                transition: 0.3s ease;
            }

                .whatsapp-btn:hover {
                    background-color: #1ebc57; /* لون أغمق قليلاً عند التحويم */
                    transform: translateY(-2px); /* حركة بسيطة للأعلى */
                    box-shadow: 0 4px 10px rgba(37, 211, 102, 0.3); /* ظل خفيف */
                }

            @media (max-width: 768px) {
                /* 1. ضبط حجم النافذة المنبثقة نفسها */
                .modal-content-v2 {
                    width: 95% !important; /* تأخذ عرض الشاشة تقريباً */
                    padding: 25px 15px !important; /* تقليل الحواف الداخلية */
                    max-height: 90vh !important; /* منع خروجها عن الشاشة طولياً */
                    overflow-y: auto !important; /* تفعيل السكرول لو المحتوى طويل */
                }

                    /* 2. ضبط العنوان داخل النافذة */
                    .modal-content-v2 h3 {
                        font-size: 1.2rem !important;
                        margin-bottom: 20px !important;
                    }

                /* 3. أهم جزء: ضبط شبكة الاختيارات (Types Grid) */
                .types-grid-v2 {
                    grid-template-columns: 1fr 1fr !important; /* جعلهم عمودين فقط بدلاً من التكدس */
                    gap: 10px !important; /* مسافة صغيرة ومنظمة */
                }

                /* 4. تصغير كارت الاختيار الواحد (Type Card) */
                .type-card-v2 {
                    padding: 15px 10px !important;
                    min-height: 100px !important; /* تقليل الارتفاع */
                    border-radius: 12px !important;
                }

                    /* 5. تصغير الأيقونات داخل الكروت */
                    .type-card-v2 i {
                        font-size: 1.6rem !important; /* تصغير حجم الأيقونة */
                        margin-bottom: 10px !important;
                    }

                    /* 6. تصغير اسم الاختيار */
                    .type-card-v2 h5 {
                        font-size: 0.85rem !important;
                        line-height: 1.2 !important;
                    }

                /* 7. جعل الكارت الذي يأخذ سطر كامل (مثل طلب مخصص) يلتزم بالعرض */
                [style*="grid-column: span 2"] {
                    grid-column: span 2 !important; /* الحفاظ على ظهوره كاملاً لكن بحجم أصغر */
                }

                /* 8. ضبط حقول الإدخال لو ظهرت داخل النافذة (Form) */
                .form-group-v2 {
                    margin-bottom: 12px !important;
                }

                .form-input-v2 {
                    padding: 10px 12px !important;
                    font-size: 0.9rem !important;
                }
            }

            /* للشاشات الصغيرة جداً (مثل iPhone 5) */
            @media (max-width: 380px) {
                .types-grid-v2 {
                    grid-template-columns: 1fr !important; /* عمود واحد فقط عشان ميتزنقوش */
                }

                [style*="grid-column: span 2"] {
                    grid-column: span 1 !important;
                }
            }

            /* ====================================================== */
            /* 📱 التنسيق الشامل للموبايل (Media Query) */
            /* ====================================================== */

            @media (max-width: 768px) {

                /* 1. الحاوية الرئيسية (إلغاء الضغط الجانبي) */
                .section.glass-card {
                    margin: 15px 10px !important;
                    padding: 20px 15px !important;
                    width: auto !important;
                    border-radius: 15px !important;
                }

                /* 2. حاسبة ديسكورد (Discord Decorations) - تحويلها لعمودية */
                #discord-calculator-card {
                    flex-direction: column !important;
                    align-items: center !important;
                    text-align: center !important;
                    gap: 25px !important;
                    padding: 30px 15px !important;
                }

                .card-info-section, .card-form-section {
                    width: 100% !important;
                    flex: none !important;
                }

                #discord-calculator-card .card-icon {
                    width: 120px !important;
                    height: 120px !important;
                    margin-top: -60px !important; /* رفع الأيقونة للأعلى بشكل متناسق */
                    margin-bottom: 5px !important;
                }

                #discord-calculator-card h3 {
                    font-size: 1.4rem !important;
                }

                /* 3. تنسيق حقول الإدخال (Inputs) لتملأ العرض */
                .input-wrapper,
                #discord-calculator-card select,
                #discord-price-display,
                .calculator-controls {
                    width: 100% !important;
                    max-width: 100% !important;
                    box-sizing: border-box !important;
                }

                .calculator-controls {
                    flex-direction: column !important;
                    align-items: center !important;
                    gap: 15px !important;
                }

                /* 4. حاسبة فالورانت (Valorant Boosting) */
                #boosting-calculator-container {
                    gap: 15px !important;
                }

                .rank-selection-area {
                    flex-direction: column !important;
                    gap: 20px !important;
                }

                .rank-selector-column {
                    min-width: 100% !important;
                    padding: 15px !important;
                }

                /* تصغير شبكة الرانكات لتناسب العرض */
                .rank-grid {
                    grid-template-columns: repeat(auto-fill, minmax(50px, 1fr)) !important;
                    gap: 8px !important;
                }

                .rank-option .rank-icon-wrapper img {
                    width: 40px !important;
                    height: 40px !important;
                }

                /* 5. حاسبة فورتنايت (Fortnite) */
                .fn-calculator {
                    flex-direction: column !important;
                    gap: 15px !important;
                }

                .level-input-group {
                    max-width: 100% !important;
                    width: 100% !important;
                }

                .fn-boosting-title {
                    font-size: 1.6rem !important;
                }

                /* 6. قسم الخدمات والتصاميم (Services) */
                .products-container {
                    display: grid !important;
                    grid-template-columns: 1fr !important; /* كارت واحد في السطر للطول الكبير */
                    gap: 20px !important;
                }

                /* لو كنت تفضل كارتين بجانب بعض للمنتجات الصغيرة */
                #discordDecorationsPageContainer .products-container,
                .wishlist-grid {
                    grid-template-columns: 1fr 1fr !important;
                    gap: 10px !important;
                }

                .custom-order-card {
                    min-height: auto !important;
                    padding: 20px !important;
                }

                /* 7. الأزرار (Buttons) */
                .buy-btn, .start-boosting-btn, #fn-order-btn {
                    width: 100% !important;
                    padding: 14px !important;
                    font-size: 1rem !important;
                }

                /* 8. القائمة المنسدلة (Navbar Search) */
                #navbar-search-results {
                    width: 90vw !important;
                    left: 5vw !important;
                    right: 5vw !important;
                }

                /* 9. تحسينات النصوص العامة */
                p {
                    font-size: 0.9rem !important;
                    line-height: 1.5 !important;
                }
            }

            /* 📱 للشاشات الصغيرة جداً (أقل من 380px) */
            @media (max-width: 380px) {
                .rank-grid {
                    grid-template-columns: repeat(4, 1fr) !important;
                }

                #discord-calculator-card h3 {
                    font-size: 1.2rem !important;
                }
            }
            /* ====================================================== */
            /* 📱 التنسيق الاحترافي الكامل للموبايل (Ultra Responsive) */
            /* ====================================================== */

            @media (max-width: 768px) {

                /* 1. ضبط الصفحة بشكل عام لتقليل الفراغات الميتة */
                .section.glass-card {
                    margin: 10px 8px !important;
                    padding: 25px 12px !important;
                    border-radius: 18px !important;
                }

                /* 2. حاسبة ديسكورد (Discord Decorations) */
                #discord-calculator-card {
                    flex-direction: column !important;
                    padding: 40px 15px 25px !important; /* مسافة علوية أكبر للأيقونة */
                    gap: 20px !important;
                }

                    #discord-calculator-card .card-icon {
                        width: 140px !important;
                        height: 140px !important;
                        margin-top: -85px !important; /* رفع الصورة للأعلى بشكل متناسق جداً */
                        margin-bottom: 0 !important;
                        filter: drop-shadow(0 10px 15px rgba(88, 101, 242, 0.4));
                    }

                    #discord-calculator-card h3 {
                        font-size: 1.3rem !important;
                        margin-bottom: 8px !important;
                        font-weight: 800 !important;
                    }

                    /* تحسين حقول الإدخال لتكون عريضة وسهلة اللمس */
                    .input-wrapper,
                    #discord-calculator-card select,
                    #discord-price-display {
                        width: 100% !important;
                        height: 50px !important; /* توحيد الارتفاع */
                        margin-bottom: 12px !important;
                        border-radius: 12px !important;
                    }

                .calculator-controls {
                    width: 100% !important;
                    gap: 12px !important;
                    flex-direction: column !important;
                }

                /* 3. حاسبة فالورانت (Valorant Boosting) */
                .rank-selection-area {
                    flex-direction: column !important;
                    gap: 15px !important;
                }

                .rank-selector-column {
                    width: 100% !important;
                    padding: 15px 10px !important;
                    background: rgba(255, 255, 255, 0.03) !important;
                    border-radius: 15px !important;
                }

                /* ضبط شبكة الرانكات لتكون مرتبة جداً */
                .rank-grid {
                    display: grid !important;
                    grid-template-columns: repeat(4, 1fr) !important; /* 4 أيقونات في السطر */
                    gap: 10px !important;
                    padding: 5px !important;
                }

                .rank-option .rank-icon-wrapper {
                    padding: 8px !important;
                    border-radius: 10px !important;
                }

                    .rank-option .rank-icon-wrapper img {
                        width: 35px !important;
                        height: 35px !important;
                    }

                /* 4. حاسبة فورتنايت (Fortnite) */
                .fn-boosting-card {
                    padding: 20px 12px !important;
                }

                .fn-calculator {
                    display: grid !important;
                    grid-template-columns: 1fr 1fr !important; /* حقلين بجانب بعض */
                    gap: 10px !important;
                }

                .level-input-group label {
                    font-size: 0.85rem !important;
                    margin-bottom: 5px !important;
                }

                /* 5. الأزرار الكبيرة (Buy Buttons) */
                .buy-btn, .start-boosting-btn, #fn-order-btn, .confirm-payment-btn {
                    height: 55px !important;
                    font-size: 1.1rem !important;
                    border-radius: 14px !important;
                    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3) !important;
                    margin-top: 10px !important;
                }

                /* 6. تحسينات النصوص والوصف */
                p, .modal-description {
                    font-size: 0.85rem !important;
                    line-height: 1.6 !important;
                    color: rgba(255, 255, 255, 0.8) !important;
                    margin-bottom: 15px !important;
                }

                /* 7. عرض السعر (Price Display) */
                #discord-price-display, #boosting-price-display, #fn-price-display {
                    background: rgba(0, 0, 0, 0.4) !important;
                    border: 1px solid rgba(255, 255, 255, 0.1) !important;
                    padding: 12px !important;
                    height: auto !important;
                }

                .price-value {
                    font-size: 1.6rem !important;
                }
            }

            /* 📱 للأجهزة الصغيرة جداً (iPhone SE / Fold) */
            @media (max-width: 380px) {
                .rank-grid {
                    grid-template-columns: repeat(3, 1fr) !important; /* 3 أيقونات فقط */
                }

                .fn-calculator {
                    grid-template-columns: 1fr !important; /* حقل واحد في السطر */
                }
            }

            /* ====================================================== */
            /* 🚀 تفعيل أنيميشن اللمس الإجباري (Force Touch Animation) */
            /* ====================================================== */

            /* تأثير الضغط (الكلاس ده الجافاسكريبت هو اللي هيضيفه) */
            .tap-active {
                transform: scale(0.95) !important; /* يصغر الزرار لـ 95% */
                opacity: 0.8 !important; /* يقلل لمعته شوية */
                transition: transform 0.05s ease-out, opacity 0.05s ease-out !important; /* حركة سريعة جداً */
            }

            /* الحالة العادية (لما تشيل صباعك) */
            button, a, .product-item, .category-btn, .subscription-item, .glass-card {
                transition: transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275), opacity 0.2s ease !important; /* رجوع ناعم بـ "نطة" خفيفة */
            }
            /* نظام الألوان المتغيرة الانسيابي - للموبايل فقط */
            @media (max-width: 992px) {
                :root {
                    /* تعريف أنيميشن الألوان في جذور الصفحة */
                    animation: hueRotate 20s infinite linear;
                }

                body {
                    background: #020205 !important;
                    overflow-x: hidden;
                }

                    /* 1. طبقة الإضاءة المنبثقة المتغيرة الألوان */
                    body::before {
                        content: "";
                        position: fixed;
                        inset: -50%;
                        /* استخدام خاصية الـ hue-rotate لتغيير الألوان تلقائياً */
                        background: radial-gradient(circle at 20% 30%, rgba(142, 68, 173, 0.5) 0%, transparent 40%), radial-gradient(circle at 80% 70%, rgba(41, 121, 255, 0.3) 0%, transparent 40%), radial-gradient(circle at 50% 50%, rgba(241, 196, 15, 0.15) 0%, transparent 50%);
                        z-index: -2;
                        filter: blur(70px);
                        animation: lightFlow 15s infinite alternate ease-in-out, colorShift 30s infinite linear; /* أنيميشن تغيير الألوان */
                    }

                /* 2. قسم الهيرو العلوي - أشكال هندسية تتفاعل مع اللون */
                #sec-products::before {
                    content: "";
                    position: absolute;
                    top: -50px;
                    left: 50%;
                    transform: translateX(-50%);
                    width: 150%;
                    height: 350px;
                    background: repeating-linear-gradient(45deg, rgba(255, 255, 255, 0.03) 0px, rgba(255, 255, 255, 0.03) 1px, transparent 1px, transparent 20px), radial-gradient(ellipse at top, var(--primary), transparent 70%);
                    mask-image: linear-gradient(to bottom, black 50%, transparent);
                    z-index: 0;
                    opacity: 0.6;
                    animation: colorShift 30s infinite linear;
                }

                /* 3. الكروت الزجاجية بحدود مضيئة متغيرة */
                .card {
                    background: rgba(10, 10, 15, 0.75) !important;
                    backdrop-filter: blur(20px) saturate(200%);
                    border: 1px solid rgba(255, 255, 255, 0.1) !important;
                    /* حدود علوية مضيئة تتغير مع الألوان */
                    border-top: 1px solid var(--primary) !important;
                    box-shadow: 0 20px 40px rgba(0,0,0,0.8);
                    animation: borderShift 30s infinite linear;
                }

                /* 4. جزيئات النجوم المتحركة */
                .main-wrapper::after {
                    content: "";
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background-image: radial-gradient(rgba(255, 255, 255, 0.15) 1px, transparent 1px);
                    background-size: 40px 40px;
                    z-index: -1;
                    animation: particlesMove 30s linear infinite;
                }

                /* -------------------------------------------
       محركات الأنميشن (Animations Engines)
    ------------------------------------------- */

                /* أنيميشن تدوير الألوان (تغيير الدرجة اللونية ببطء) */
                @keyframes colorShift {
                    0% {
                        filter: hue-rotate(0deg) blur(70px);
                    }

                    100% {
                        filter: hue-rotate(360deg) blur(70px);
                    }
                }

                /* أنيميشن خاص بحدود الكروت لضمان تناسق الألوان */
                @keyframes borderShift {
                    0% {
                        border-top-color: #8e44ad;
                    }

                    25% {
                        border-top-color: #3498db;
                    }

                    50% {
                        border-top-color: #2ecc71;
                    }

                    75% {
                        border-top-color: #f1c40f;
                    }

                    100% {
                        border-top-color: #8e44ad;
                    }
                }

                @keyframes lightFlow {
                    0% {
                        transform: translate(0, 0) scale(1);
                    }

                    50% {
                        transform: translate(5%, -5%) scale(1.1);
                    }

                    100% {
                        transform: translate(-5%, 5%) scale(1);
                    }
                }

                @keyframes particlesMove {
                    from {
                        background-position: 0 0;
                    }

                    to {
                        background-position: 1000px 1000px;
                    }
                }
            }
            #currency-selector {
                font-size: 10px !important;
                background: rgba(255,255,255,0.05) !important;
                border: 1px solid rgba(255,255,255,0.1) !important;
                color: white !important;
                border-radius: 4px !important;
                padding: 2px 4px !important;
            }

/* --- تنسيقات الموبايل الأسطورية (Legendary Mobile View) --- */
@media only screen and (max-width: 768px) {

    /* --- 0. إعدادات عامة ومتغيرات للألوان --- */
    :root {
        --mobile-primary: #00d2ff; /* لون أساسي مودرن */
        --mobile-secondary: #3a7bd5; /* تدرج لوني */
        --mobile-bg-glass: rgba(20, 20, 20, 0.6);
        --mobile-border: rgba(255, 255, 255, 0.1);
        --mobile-text: #ffffff;
    }

    /* إصلاح شامل للصناديق */
    #productPage * {
        max-width: 100% !important;
        box-sizing: border-box !important;
        font-family: 'Cairo', sans-serif !important; /* لو بتستخدم خط عربي */
    }

    /* --- 1. الحاوية الزجاجية الرئيسية --- */
    #productPage.section.glass-card {
        width: 95% !important; /* نسيب هامش صغير يمين وشمال للشياكة */
        margin: 10px auto !important;
        padding: 20px 15px !important;
        border-radius: 20px !important;
        background: var(--mobile-bg-glass) !important;
        backdrop-filter: blur(15px) !important; /* تأثير الزجاج الضبابي */
        -webkit-backdrop-filter: blur(15px) !important;
        border: 1px solid var(--mobile-border) !important;
        box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37) !important;
        overflow: hidden !important;
    }

    #productPageContent {
        width: 100% !important;
        padding: 0 !important;
    }

    /* ترتيب العناصر: الصورة الأول */
    .product-main-view {
        display: flex !important;
        flex-direction: column !important;
        gap: 25px !important;
    }

    .product-image-section {
        order: 1 !important;
        width: 100% !important;
    }

    .product-details-section {
        order: 2 !important;
        text-align: right !important; /* نخلي الكلام يمين للعربي */
        direction: rtl !important;
    }

    /* إخفاء الوصف الطويل مؤقتاً للحفاظ على النظافة */
    #productPageFullDescription {
        display: none !important;
    }

    /* --- 2. قسم الصورة السينمائي --- */
    #mainImageContainer {
        width: 100% !important;
        height: 350px !important; /* ارتفاع ثابت ومناسب */
        position: relative !important;
        border-radius: 16px !important;
        background: radial-gradient(circle, rgba(255,255,255,0.05) 0%, rgba(0,0,0,0) 70%) !important; /* إضاءة خفيفة خلف الصورة */
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        overflow: hidden !important;
        border: 1px solid rgba(255,255,255,0.05) !important;
    }

    #mainImageContainer img.main-image {
        max-width: 90% !important;
        max-height: 90% !important;
        object-fit: contain !important;
        filter: drop-shadow(0 10px 20px rgba(0,0,0,0.5)) !important; /* ضل للصورة نفسها تبان مجسمة */
        transition: transform 0.3s ease !important;
    }

    /* أزرار المشاركة والقلب (ستايل عائم) */
    .big-wishlist-btn, #product-share-btn {
        position: absolute !important;
        top: 15px !important;
        width: 40px !important;
        height: 40px !important;
        border-radius: 50% !important;
        background: rgba(0, 0, 0, 0.4) !important;
        backdrop-filter: blur(5px) !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        color: #fff !important;
        border: 1px solid rgba(255,255,255,0.1) !important;
        z-index: 10 !important;
        cursor: pointer !important;
    }
    
    .big-wishlist-btn { right: 15px !important; }
    #product-share-btn { left: 15px !important; }

    .big-wishlist-btn i, #product-share-btn svg {
        font-size: 18px !important;
        transition: transform 0.2s !important;
    }

    /* --- 3. العناوين والأسعار --- */
    #productPageTitle {
        font-size: 22px !important;
        font-weight: 800 !important;
        color: #fff !important;
        line-height: 1.4 !important;
        margin-bottom: 10px !important;
        text-shadow: 0 2px 4px rgba(0,0,0,0.5) !important;
    }

    .price-badge-container {
        display: flex !important;
        align-items: center !important;
        justify-content: flex-start !important; /* محاذاة لليمين */
        gap: 15px !important;
        margin-bottom: 20px !important;
        padding-bottom: 15px !important;
        border-bottom: 1px solid rgba(255,255,255,0.1) !important;
    }

    #productPagePrice {
        font-size: 26px !important;
        font-weight: 900 !important;
        color: #2ecc71 !important; /* لون أخضر فاقع للسعر */
        letter-spacing: 0.5px !important;
    }

    /* زرار الإضافة للسلة (Call to Action) */
    #addToCartBtn {
        width: 100% !important;
        padding: 16px !important;
        font-size: 18px !important;
        font-weight: bold !important;
        border: none !important;
        border-radius: 12px !important;
        background: linear-gradient(90deg, #00d2ff 0%, #3a7bd5 100%) !important; /* تدرج أزرق مودرن */
        color: #fff !important;
        box-shadow: 0 4px 15px rgba(0, 210, 255, 0.4) !important; /* توهج للزرار */
        margin-top: 20px !important;
        cursor: pointer !important;
        transition: transform 0.1s !important;
    }

    #addToCartBtn:active {
        transform: scale(0.97) !important; /* تأثير ضغطة الزر */
    }

    /* محدد الكمية (ستايل متصل) */
    .quantity-selector {
        display: flex !important;
        align-items: center !important;
        justify-content: space-between !important;
        background: rgba(255,255,255,0.05) !important;
        border-radius: 10px !important;
        padding: 5px !important;
        margin-top: 20px !important;
        border: 1px solid rgba(255,255,255,0.1) !important;
    }

    .quantity-selector label {
        margin-right: 15px !important;
        font-weight: bold !important;
        color: #ccc !important;
    }

    .quantity-selector button {
        width: 40px !important;
        height: 40px !important;
        border-radius: 8px !important;
        border: none !important;
        background: rgba(255,255,255,0.1) !important;
        color: #fff !important;
        font-size: 20px !important;
    }

    .quantity-selector input {
        width: 50px !important;
        background: transparent !important;
        border: none !important;
        color: #fff !important;
        font-size: 18px !important;
        font-weight: bold !important;
        text-align: center !important;
    }

    /* --- 4. التابات (Tabs) الحديثة --- */
    .tabs-container {
        margin-top: 30px !important;
    }

    .tab-buttons {
        display: flex !important;
        gap: 10px !important;
        overflow-x: auto !important;
        padding-bottom: 10px !important;
        scrollbar-width: none !important; /* إخفاء السكرول بار */
    }
    .tab-buttons::-webkit-scrollbar { display: none !important; }

    .tab-button {
        flex: 0 0 auto !important;
        padding: 10px 20px !important;
        border-radius: 50px !important; /* شكل كبسولة */
        background: rgba(255,255,255,0.05) !important;
        border: 1px solid rgba(255,255,255,0.1) !important;
        color: #aaa !important;
        font-size: 14px !important;
        transition: all 0.3s ease !important;
    }

    .tab-button.active {
        background: #fff !important;
        color: #000 !important;
        font-weight: bold !important;
        box-shadow: 0 0 10px rgba(255,255,255,0.3) !important;
        border-color: #fff !important;
    }

    .tab-content {
        padding: 20px 5px !important;
        color: #ddd !important;
        line-height: 1.6 !important;
        text-align: right !important;
        direction: rtl !important;
        animation: fadeIn 0.5s ease-in-out !important;
    }

    /* تأثيرات إضافية للفورم */
    .comment-form input, .comment-form textarea {
        background: rgba(0,0,0,0.3) !important;
        border: 1px solid rgba(255,255,255,0.1) !important;
        color: #fff !important;
        border-radius: 8px !important;
    }
    .comment-form input:focus, .comment-form textarea:focus {
        border-color: var(--mobile-primary) !important;
        outline: none !important;
    }

    /* أنيميشن بسيط للظهور */
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }
}

            /* الحاوية الرئيسية */
            .product-action-container {
                display: flex !important;
                align-items: center !important;
                gap: 8px !important;
                background-color: rgba(25, 10, 50, 0.7) !important;
                backdrop-filter: blur(15px) !important;
                -webkit-backdrop-filter: blur(15px) !important;
                border: 1px solid rgba(139, 92, 246, 0.2) !important;
                border-radius: 10px !important;
                /* 1. تقليل المساحة الفاضية من تحت للصفر، وزيادة اللي فوق عشان ينزل السيليكتور */
                padding: 8px 10px 0px 10px !important;
                width: fit-content !important;
                height: auto !important;
            }

            /* منطقة الكمية */
            .quantity-selector {
                display: flex !important;
                align-items: center !important;
                background-color: rgba(0, 0, 0, 0.3) !important;
                border-radius: 6px !important;
                height: 36px !important;
                overflow: hidden !important;
                margin-bottom: 4px !important; /* مسافة صغيرة جداً تفصله عن الحافة السفلية */
            }

                /* تنسيق أزرار الزائد والناقص */
                .quantity-selector button {
                    background: none !important;
                    border: none !important;
                    color: #fff !important;
                    width: 32px !important;
                    height: 100% !important;
                    cursor: pointer !important;
                    display: flex !important;
                    justify-content: center !important;
                    /* 2. جعل المحاذاة تبدأ من القاع تماماً */
                    align-items: flex-end !important;
                    padding-bottom: 0px !important; /* إلغاء الدفع للأعلى لينزل لأقصى حد */

                    transition: background 0.2s !important;
                    outline: none !important;
                    font-size: 0 !important;
                }

            /* 3. تحكم قوي في نزول العلامات للأسفل */
            #decreaseProductPageQuantity::before {
                content: "−" !important;
                font-size: 2rem !important; /* تكبير الخط قليلاً ليملأ المكان */
                font-weight: bold !important;
                transform: translateY(6px) !important; /* دفع قوي للأسفل */
                line-height: 1 !important;
            }

            #increaseProductPageQuantity::before {
                content: "+" !important;
                font-size: 1.6rem !important;
                font-weight: bold !important;
                transform: translateY(4px) !important; /* دفع قوي للأسفل */
                line-height: 1 !important;
            }

            .quantity-selector button:hover {
                background-color: rgba(255, 255, 255, 0.1) !important;
            }

            /* تنسيق حقل الإدخال */
            .quantity-selector input {
                background: transparent !important;
                border: none !important;
                color: #fff !important;
                text-align: center !important;
                width: 35px !important;
                height: 100% !important;
                font-size: 1rem !important;
                font-weight: bold !important;
                outline: none !important;
                display: flex !important;
                align-items: center !important;
            }

            /* زر أضف إلى السلة */
            .add-to-cart-product-page {
                /* تدرج أخضر ليموني نيون فائق السطوع */
                background: linear-gradient(135deg, #22c55e, #16a34a) !important;
                color: #ffffff !important;
                border: none !important;
                height: 48px !important; /* طول مثالي للموبايل لسهولة الضغط */
                padding: 0 30px !important;
                border-radius: 12px !important;
                font-size: 1.1rem !important;
                font-weight: 900 !important; /* خط سميك جداً للوضوح */
                cursor: pointer !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                margin-bottom: 20px !important;
                /* توهج أخضر نيون مكثف (Neon Glow) */
                box-shadow: 0 0 10px rgba(34, 197, 94, 0.5), 0 10px 20px rgba(0, 0, 0, 0.4) !important;
                /* لمعان داخلي ليعطي مظهر الـ 3D */
                border-top: 1px solid rgba(255, 255, 255, 0.3) !important;
                transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275) !important;
                text-shadow: 0 1px 3px rgba(0,0,0,0.3);
            }

            /* تأثير "النبض الضوئي" المستمر للزر لجذب الانتباه */
            @keyframes greenPulse {
                0% {
                    box-shadow: 0 0 10px rgba(34, 197, 94, 0.4);
                }

                50% {
                    box-shadow: 0 0 25px rgba(34, 197, 94, 0.8);
                }

                100% {
                    box-shadow: 0 0 10px rgba(34, 197, 94, 0.4);
                }
            }

            .add-to-cart-product-page {
                animation: greenPulse 2s infinite ease-in-out !important;
            }

                /* عند الضغط */
                .add-to-cart-product-page:active {
                    transform: scale(0.92) !important;
                    background: #22c55e !important;
                }

            /* إخفاء أسهم الكروم */
            .quantity-selector input::-webkit-outer-spin-button,
            .quantity-selector input::-webkit-inner-spin-button {
                -webkit-appearance: none !important;
                margin: 0 !important;
            }
            @media (max-width: 992px) {
                /* تحويل منطقة الصور الرمزية لتعمل بالسكرول العرضي */
                .avatars-grid {
                    display: flex !important; /* تغيير من grid إلى flex */
                    overflow-x: auto !important; /* تفعيل السكرول الأفقي */
                    overflow-y: hidden !important;
                    scroll-snap-type: x mandatory; /* لجعل الصور تقف في مكانها عند السكرول */
                    gap: 12px !important;
                    padding: 10px 5px !important;
                    scrollbar-width: none; /* إخفاء السكرول في فايرفوكس */
                    -ms-overflow-style: none; /* إخفاء السكرول في إيدج */
                }

                    /* إخفاء السكرول بار في كروم وسفاري */
                    .avatars-grid::-webkit-scrollbar {
                        display: none;
                    }

                    /* تنسيق الصور داخل السكرول */
                    .avatars-grid img {
                        flex: 0 0 65px !important; /* تثبيت حجم الصورة ومنعها من الانضغاط */
                        height: 65px !important;
                        border-radius: 50%;
                        border: 2px solid rgba(255, 255, 255, 0.1);
                        scroll-snap-align: start;
                        transition: transform 0.2s;
                        cursor: pointer;
                    }

                        /* تأثير بسيط عند الضغط */
                        .avatars-grid img:active {
                            transform: scale(0.9);
                            border-color: var(--accent-yellow);
                        }

                /* تحسين العناوين */
                #avatar-selection-area h3 {
                    margin-right: 5px !important;
                    letter-spacing: 0.5px;
                }
            }
            @media (max-width: 992px) {
                /* تصغير الحاوية لتقليل المسافات */
                .profile-actions-container {
                    display: flex !important;
                    flex-direction: row !important; /* بجانب بعضهما */
                    justify-content: center !important;
                    gap: 8px !important; /* تقليل المسافة بين الزرين */
                    margin-bottom: 20px !important;
                }

                    /* التنسيق الجديد للأزرار المصغرة */
                    .profile-actions-container button {
                        width: 110px !important; /* عرض أصغر ومحدد */
                        height: 38px !important; /* تقليل الطول ليكون رشيقاً */
                        padding: 0 10px !important; /* تقليل المساحة الداخلية */
                        font-size: 0.85rem !important; /* تصغير الخط قليلاً */
                        border-radius: 8px !important; /* زوايا أنعم */
                        display: flex !important;
                        align-items: center !important;
                        justify-content: center !important;
                        white-space: nowrap !important; /* منع النص من النزول لسطر جديد */
                    }

                        /* تعديل حجم الأيقونات لتناسب الزر الصغير */
                        .profile-actions-container button i {
                            font-size: 0.9rem !important;
                            margin-left: 5px !important;
                        }

                /* زر الحفظ - أخضر هادئ */
                .confirm-payment-btn {
                    background: linear-gradient(135deg, #22c55e, #16a34a) !important;
                }

                /* زر الإلغاء - شفاف زجاجي */
                .buy-btn {
                    background: rgba(255, 255, 255, 0.1) !important;
                    color: #eee !important;
                    border: 1px solid rgba(255, 255, 255, 0.05) !important;
                }
            }

        </style>

        <nav class="dev-navbar-v2 glass">

            <div class="nav-logo-v2">
                <img src="./images/BerlinStorefff.png" alt="Berlin Store" class="nav-store-logo">
                <span>GOE BERLIN DEV</span>
                <i class="fas fa-code"></i>
            </div>

            <div class="nav-actions">
                <a href="https://wa.me/201060292953?text=اهلا" class="quote-btn" target="_blank" style="position: relative;">
                    <i class="fa-brands fa-whatsapp"></i> طلب عرض سعر
                    <span class="online-status-dot"></span>
                </a>

                <label class="theme-switch">
                    <input type="checkbox" id="theme-checkbox" onchange="toggleThemeV2()">
                    <span class="slider">
                        <span class="icon-sun"><i class="fas fa-sun"></i></span>
                        <span class="icon-moon"><i class="fas fa-moon"></i></span>
                        <span class="star star-1"></span>
                        <span class="star star-2"></span>
                    </span>
                </label>
            </div>

        </nav>

        <header class="hero-v2">
            <div class="glowing-orb" style="top: 20%; left: 20%;"></div>
            <div class="glowing-orb" style="bottom: 10%; right: 10%; background: var(--accent-color);"></div>

            <div class="hero-content-v2">
                <div class="hero-badge-v2 code-font">
                    <i class="fas fa-terminal"></i> <span> &lt;GOE TEAM&gt; </span>
                </div>
                <h1 class="hero-title-v2">
                    نحول أفكارك إلى <br>
                    <span class="text-gradient" id="typewriter"></span>
                </h1>
                <p class="hero-subtitle-v2">
                    شريكك التقني المتكامل. نقدم حلولاً برمجية مبتكرة، تصميمات تفاعلية، وسكربتات أتمتة ذكية تدفع بمشروعك نحو المستقبل.
                </p>

                <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                    <button onclick="scrollToSectionV2('services-v2')" class="btn-v2 btn-primary-v2">
                        اكتشف خدماتنا <i class="fas fa-rocket"></i>
                    </button>

                    <button onclick="openDevModalV2('modal-contact-options')" class="btn-v2 btn-outline-v2">
                        تواصل معنا <i class="fas fa-comments"></i>
                    </button>
                </div>
            </div>

            <div class="hero-visual-v2">
                <img src="./images/developing-card.png" alt="Future Tech">
            </div>
        </header>

        <div id="modal-contact-options" class="modal-overlay-v2" onclick="handleDevOverlayClickV2(event, 'modal-contact-options')">
            <div class="modal-content-v2 glass">
                <button class="modal-close-v2 glass" onclick="closeDevModalV2('modal-contact-options')"><i class="fas fa-times"></i></button>
                <h3 style="text-align: center; font-size: 1.8rem; margin-bottom: 30px;">تواصل مباشرة مع المطور</h3>
                <div class="types-grid-v2">
                    <a href="https://wa.me/201060292953" target="_blank" class="type-card-v2">
                        <i class="fab fa-whatsapp" style="color: #25D366;"></i>
                        <h5>واتساب</h5>
                    </a>
                    <a href="https://www.facebook.com/profile.php?id=61550828833554" target="_blank" class="type-card-v2">
                        <i class="fab fa-facebook" style="color: #1877F2;"></i>
                        <h5>فيسبوك</h5>
                    </a>
                    <a href="https://discord.gg/D3shcEb5xe" target="_blank" class="type-card-v2" style="grid-column: span 2;">
                        <i class="fab fa-discord" style="color: #5865F2;"></i>
                        <h5>ديسكورد</h5>
                    </a>
                </div>
            </div>
        </div>

        <div class="stats-banner glass">
            <div class="stat-item">
                <span class="stat-number">+20</span>
                <span class="stat-label">مشروع ناجح</span>
            </div>
            <div class="stat-item">
                <span class="stat-number">+5</span>
                <span class="stat-label">سنوات خبرة</span>
            </div>
            <div class="stat-item">
                <span class="stat-number">100%</span>
                <span class="stat-label">عملاء سعداء</span>
            </div>
            <div class="stat-item">
                <span class="stat-number">24/7</span>
                <span class="stat-label">دعم فني</span>
            </div>
        </div>

        <section id="services-v2" class="services-window-container">
            <div class="services-window glass">
                <div class="section-header-v2">
                    <h2>خدماتنا <span class="text-gradient">الاحترافية</span></h2>
                    <p>باقات التطوير الشاملة والمبتكرة</p>
                </div>

                <div class="services-grid-v2">
                    <div class="service-card-v2 glass-hover">
                        <div class="card-icon-v2"><i class="fas fa-globe"></i></div>
                        <h3 class="service-title-v2">تطوير المواقع</h3>
                        <ul class="service-features-v2">
                            <li><i class="fas fa-check"></i> بناء وتصميم مواقع</li>
                            <li><i class="fas fa-check"></i> تصميم انيق متجاوب </li>
                            <li><i class="fas fa-check"></i> متاجر إلكترونية</li>
                            <li><i class="fas fa-check"></i> واجهات UI/UX</li>
                            <li><i class="fas fa-check"></i> لوحات تحكم</li>
                        </ul>
                        <button onclick="openDevModalV2('modal-websites-v2')" class="btn-v2 btn-primary-v2 w-100">عرض الباقات</button>
                    </div>

                    <div class="service-card-v2 featured-card">
                        <div class="card-icon-v2 featured-icon"><i class="fas fa-robot"></i></div>
                        <h3 class="service-title-v2">السكربتات والبوتات</h3>
                        <ul class="service-features-v2">
                            <li><i class="fas fa-check"></i> اكواد نظيفة لموقعك</li>
                            <li><i class="fas fa-check"></i> بوابات دفع</li>
                            <li><i class="fas fa-check"></i> عمل لوحة تحكم بمنتجاتك</li>
                            <li><i class="fas fa-check"></i> طلب مخصص</li>
                            <li><i class="fas fa-check"></i> ربط API مخصص</li>
                        </ul>
                        <button onclick="openDevModalV2('modal-scripts-v2')" class="btn-v2 btn-primary-v2 w-100">اطلب الآن</button>
                    </div>

                    <div class="service-card-v2 glass-hover">
                        <div class="card-icon-v2"><i class="fa-brands fa-discord"></i></div>

                        <h3 class="service-title-v2">سيرفرات ديسكورد</h3>

                        <ul class="service-features-v2">
                            <li><i class="fas fa-check"></i> تصميم وتنظيم الرومات</li>
                            <li><i class="fas fa-check"></i> ضبط الرولات والصلاحيات</li>
                            <li><i class="fas fa-check"></i> برمجة البوتات</li>
                            <li><i class="fas fa-check"></i> لوجو وبانر</li>
                            <li><i class="fas fa-check"></i> حماية وتأمين السيرفر</li>
                        </ul>

                        <button onclick="openProjectFormV2('سيرفر ديسكورد')" class="btn-v2 btn-primary-v2 w-100">ابدأ مشروعك</button>
                    </div>
                    <div class="service-card-v2 glass-hover">
                        <div class="card-icon-v2"><i class="fas fa-laptop-code"></i></div>

                        <h3 class="service-title-v2">تنظيم بيدج + موقع لمشروعك</h3>

                        <ul class="service-features-v2">
                            <li><i class="fas fa-check"></i> تنظيم صفحة بالكامل (فيسبوك - انستا)</li>
                            <li><i class="fas fa-check"></i> موقع كامل مخصص لمشروعك</li>
                            <li><i class="fas fa-check"></i> ادارة الصفحة ومتابعتها </li>
                            <li><i class="fas fa-check"></i> تصميم لوجو وبانر احترافي </li>

                        </ul>

                        <button onclick="openProjectFormV2('تطوير مواقع')" class="btn-v2 btn-primary-v2 w-100">ابدأ مشروعك</button>
                    </div>

                </div>
            </div>
        </section>

        <div id="modal-websites-v2" class="modal-overlay-v2" onclick="handleDevOverlayClickV2(event, 'modal-websites-v2')">
            <div class="modal-content-v2 glass">
                <button class="modal-close-v2 glass" onclick="closeDevModalV2('modal-websites-v2')"><i class="fas fa-times"></i></button>
                <h3 style="text-align: center; margin-bottom: 20px;">اختر نوع الموقع</h3>

                <div class="types-grid-v2">
                    <div class="type-card-v2" onclick="selectTypeV2('موقع تعريفي (Landing Page)', 'modal-websites-v2')">
                        <i class="fas fa-desktop" style="color: var(--primary-color);"></i>
                        <h5>موقع تعريفي</h5>
                    </div>

                    <div class="type-card-v2" onclick="selectTypeV2('بورتفوليو', 'modal-websites-v2')">
                        <i class="fas fa-blog" style="color: #9b59b6;"></i> <h5>بورتفوليو</h5>
                    </div>

                    <div class="type-card-v2" onclick="selectTypeV2('متجر إلكتروني كامل', 'modal-websites-v2')">
                        <i class="fas fa-shopping-cart" style="color: var(--accent-color);"></i>
                        <h5>متجر إلكتروني</h5>
                    </div>

                    <div class="type-card-v2" onclick="selectTypeV2('لوحة تحكم (Dashboard)', 'modal-websites-v2')">
                        <i class="fas fa-chart-line" style="color: #ff4757;"></i>
                        <h5>لوحة تحكم</h5>
                    </div>

                    <div class="type-card-v2" onclick="selectTypeV2('تطوير موقع خاص (Custom)', 'modal-websites-v2')" style="grid-column: span 2;">
                        <i class="fas fa-code" style="color: #2ed573;"></i>
                        <h5>طلب خاص / أخرى</h5>
                    </div>
                </div>
            </div>
        </div>

        <div id="modal-scripts-v2" class="modal-overlay-v2" onclick="handleDevOverlayClickV2(event, 'modal-scripts-v2')">
            <div class="modal-content-v2 glass">
                <button class="modal-close-v2 glass" onclick="closeDevModalV2('modal-scripts-v2')"><i class="fas fa-times"></i></button>
                <h3 style="text-align: center; margin-bottom: 20px;">نوع البرمجة المطلوبة</h3>

                <div class="types-grid-v2">
                    <div class="type-card-v2" onclick="selectTypeV2('بوت ديسكورد احترافي', 'modal-scripts-v2')">
                        <i class="fab fa-discord" style="color: #5865F2;"></i>
                        <h5>بوت ديسكورد</h5>
                    </div>
                    <div class="type-card-v2" onclick="selectTypeV2('سكربت موقع (Backend)', 'modal-scripts-v2')">
                        <i class="fas fa-server" style="color: var(--primary-color);"></i>
                        <h5>سكربت موقع</h5>
                    </div>
                    <div class="type-card-v2" onclick="selectTypeV2('ربط بوابات دفع', 'modal-scripts-v2')">
                        <i class="fas fa-credit-card" style="color: #ffa502;"></i>
                        <h5>بوابات دفع</h5>
                    </div>
                    <div class="type-card-v2" onclick="selectTypeV2('API Integration', 'modal-scripts-v2')">
                        <i class="fas fa-plug" style="color: var(--text-secondary);"></i>
                        <h5>ربط API</h5>
                    </div>
                </div>
            </div>
        </div>

        <div id="modal-discord-v2" class="modal-overlay-v2" onclick="handleDevOverlayClickV2(event, 'modal-discord-v2')">
            <div class="modal-content-v2 glass">
                <button class="modal-close-v2 glass" onclick="closeDevModalV2('modal-discord-v2')"><i class="fas fa-times"></i></button>
                <h3 style="text-align: center; margin-bottom: 20px;">خدمات ديسكورد</h3>

                <div class="types-grid-v2">
                    <div class="type-card-v2" onclick="selectTypeV2('تصميم سيرفر كامل', 'modal-discord-v2')">
                        <i class="fas fa-layer-group" style="color: #5865F2;"></i>
                        <h5>تصميم سيرفر</h5>
                    </div>
                    <div class="type-card-v2" onclick="selectTypeV2('حماية وتأمين السيرفر', 'modal-discord-v2')">
                        <i class="fas fa-shield-alt" style="color: #2ed573;"></i>
                        <h5>حماية وتأمين</h5>
                    </div>
                    <div class="type-card-v2" onclick="selectTypeV2('تصميم شعار وبانر', 'modal-discord-v2')">
                        <i class="fas fa-paint-brush" style="color: #ff4757;"></i>
                        <h5>لوجو وبانر</h5>
                    </div>
                    <div class="type-card-v2" onclick="selectTypeV2('صيانة وتطوير', 'modal-discord-v2')">
                        <i class="fas fa-tools" style="color: var(--text-secondary);"></i>
                        <h5>صيانة وتطوير</h5>
                    </div>
                </div>
            </div>
        </div>

        <div id="modal-marketing-v2" class="modal-overlay-v2" onclick="handleDevOverlayClickV2(event, 'modal-marketing-v2')">
            <div class="modal-content-v2 glass">
                <button class="modal-close-v2 glass" onclick="closeDevModalV2('modal-marketing-v2')"><i class="fas fa-times"></i></button>
                <h3 style="text-align: center; margin-bottom: 20px;">باقة المشروع المتكامل</h3>

                <div class="types-grid-v2">
                    <div class="type-card-v2" onclick="selectTypeV2('تنظيم صفحات سوشيال ميديا', 'modal-marketing-v2')">
                        <i class="fab fa-facebook" style="color: #1877F2;"></i>
                        <h5>إدارة صفحات</h5>
                    </div>
                    <div class="type-card-v2" onclick="selectTypeV2('موقع + صفحة فيسبوك', 'modal-marketing-v2')">
                        <i class="fas fa-gem" style="color: #ff6b81;"></i>
                        <h5>الباقة الشاملة</h5>
                    </div>
                    <div class="type-card-v2" onclick="selectTypeV2('هوية بصرية كاملة', 'modal-marketing-v2')">
                        <i class="fas fa-palette" style="color: #ffa502;"></i>
                        <h5>هوية بصرية</h5>
                    </div>
                    <div class="type-card-v2" onclick="selectTypeV2('استشارة تسويقية', 'modal-marketing-v2')">
                        <i class="fas fa-comments-dollar" style="color: var(--primary-color);"></i>
                        <h5>استشارة</h5>
                    </div>
                </div>
            </div>
        </div>

        <div id="modal-form-v2" class="modal-overlay-v2" onclick="handleDevOverlayClickV2(event, 'modal-form-v2')">
            <div class="modal-content-v2 glass">
                <button class="modal-close-v2 glass" onclick="closeDevModalV2('modal-form-v2')"><i class="fas fa-times"></i></button>

                <h3 style="text-align: center; margin-bottom: 10px;">إكمال الطلب</h3>
                <p style="text-align: center; color: var(--text-secondary); margin-bottom: 20px;">
                    الخدمة المختارة: <br>
                    <span id="selected-service-name-v2" style="font-weight: bold; color: var(--primary-color); font-size: 1.1rem;"></span>
                </p>

                <form onsubmit="sendWhatsAppV2(event)">
                    <div class="form-group-v2">
                        <label class="form-label">الاسم الكريم</label>
                        <input type="text" id="client-name-v2" class="form-input-v2" placeholder="أدخل اسمك هنا" required>
                    </div>

                    <div class="form-group-v2">
                        <label class="form-label">تفاصيل إضافية عن المشروع</label>
                        <textarea id="project-details-v2" class="form-input-v2" rows="4" placeholder="اكتب أي تفاصيل إضافية تهمك..."></textarea>
                    </div>

                    <button type="submit" class="btn-v2 btn-primary-v2 w-100" style="justify-content: center;">
                        إرسال العرض واتساب <i class="fab fa-whatsapp"></i>
                    </button>
                </form>
            </div>
        </div>

        <div class="process-section-v2">
            <div class="section-header-v2">
                <h2>إزاي <span class="text-gradient">بنشتغل؟</span></h2>
                <p>رحلة تحويل فكرتك من مجرد خيال لمشروع حقيقي على أرض الواقع.</p>
            </div>

            <div class="process-grid-v2">
                <div class="process-step-card glass">
                    <div class="step-header">
                        <span class="step-number-giant">01</span>
                        <i class="fas fa-magnifying-glass-chart step-icon-v2"></i>
                    </div>
                    <div class="step-body">
                        <h4>بنفهم ونخطط</h4>
                        <p>أول حاجة بنقعد معاك نفهم اللي في دماغك بالظبط، وبندرس السوق والمنافسين، وبنحط خطة زمنية عشان نضمن نجاح المشروع.</p>
                    </div>
                </div>

                <div class="process-step-card glass">
                    <div class="step-header">
                        <span class="step-number-giant">02</span>
                        <i class="fas fa-wand-magic-sparkles step-icon-v2"></i>
                    </div>
                    <div class="step-body">
                        <h4>التصميم والواجهة</h4>
                        <p>بنصمم واجهات (UI) تخطف العين، وبنركز إن تجربة المستخدم (UX) تكون سهلة ومريحة عشان الزوار يحبوا الموقع ويكون ممتاز.</p>
                    </div>
                </div>

                <div class="process-step-card glass">
                    <div class="step-header">
                        <span class="step-number-giant">03</span>
                        <i class="fas fa-laptop-code step-icon-v2"></i>
                    </div>
                    <div class="step-body">
                        <h4>البرمجة والتطوير</h4>
                        <p>بنحول التصميمات دي لكود نضيف (Clean Code) باستخدام أحدث التقنيات، عشان نضمن إن الموقع يكون سريع ومحمي بالكامل.</p>
                    </div>
                </div>

                <div class="process-step-card glass">
                    <div class="step-header">
                        <span class="step-number-giant">04</span>
                        <i class="fas fa-rocket step-icon-v2"></i>
                    </div>
                    <div class="step-body">
                        <h4>التجربة والتسليم</h4>
                        <p>مبنسلمش الشغل غير لما نتأكد إنه شغال 100% بدون أي أخطاء (Bugs)، وبنكون معاك لحظة الإطلاق الرسمي للجمهور. وفي متابعة دائمة</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="section-header-v2">
            <h2>معرض <span class="text-gradient">أعمالنا</span></h2>
        </div>

        <div class="portfolio-grid-v2">
            <a href="https://www.berlingoestore.com/" target="_blank" class="portfolio-card-v2 glass">
                <img src="./images/berlin3132.png" alt="Berlin GOE Store">
                <div class="portfolio-overlay">
                    <div class="portfolio-info">
                        <h4>Berlin GOE Store</h4>
                        <div class="portfolio-tags">
                            <span class="p-tag">E-Commerce</span>
                            <span class="p-tag">Gaming Store</span>
                        </div>
                    </div>
                </div>
            </a>

            <a href="https://mzr3a.com/" target="_blank" class="portfolio-card-v2 glass">
                <img src="./images/mzr3a.png" alt="Mzr3a Website">
                <div class="portfolio-overlay">
                    <div class="portfolio-info">
                        <h4>متجز المزرعة</h4>
                        <div class="portfolio-tags">
                            <span class="p-tag">Web Application</span>
                            <span class="p-tag">Management System</span>
                        </div>
                    </div>
                </div>
            </a>

            <a href="https://z3tag.store/" target="_blank" class="portfolio-card-v2 glass">
                <img src="./images/z3tag.png" alt="Z3tag Store">
                <div class="portfolio-overlay">
                    <div class="portfolio-info">
                        <h4>Z3tag Store</h4>
                        <div class="portfolio-tags">
                            <span class="p-tag">Digital Assets</span>
                            <span class="p-tag">Automation</span>
                        </div>
                    </div>
                </div>
            </a>
            <a href="https://lms-z3tag.vercel.app/" target="_blank" class="portfolio-card-v2 glass">
                <img src="./images/مدرس.png" alt="مدرس">
                <div class="portfolio-overlay">
                    <div class="portfolio-info">
                        <h4>منصة مدرسين</h4>
                        <div class="portfolio-tags">
                            <span class="p-tag">Web Application</span>
                            <span class="p-tag">Management System</span>
                        </div>
                    </div>
                </div>
            </a>
        </div>

        <section class="testimonials-marquee-section">
            <div class="section-header-v2">
                <h2>آراء <span class="text-gradient">العملاء</span></h2>
                <p>شكرا على ثقتكم الدائمة بنا</p>
            </div>

            <div class="testimonials-track">

                <div class="testimonial-card-wide glass">
                    <div class="stars" style="color: #ffd700; margin-bottom: 10px;">
                        <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                    </div>
                    <p class="review-content">بصراحة الخدمة اللي حصلت عليها أكثر من اللي دفعته استلمت الموقع بأفضل شكل وبسرعة، وكل التعديلات اللي طلبتها تم تنفيذها بأفضل شكل ❤️</p>
                    <div class="client-mini-info">
                        <div class="mini-avatar">Y</div>
                        <div>
                            <h5 style="margin:0; font-size:0.9rem;">Yousof Haggag</h5>
                        </div>
                    </div>
                </div>

                <div class="testimonial-card-wide glass">
                    <div class="stars" style="color: #ffd700; margin-bottom: 10px;">
                        <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                    </div>
                    <p class="review-content">الديزاين رايق جدا وسريع وأهم حاجة إن الدعم الفني معاك خطوة بخطوة لحد ما تظبط كل حاجة زي ما انت عايز. 🧡</p>
                    <div class="client-mini-info">
                        <div class="mini-avatar" style="background: #5865F2;">A</div>
                        <div>
                            <h5 style="margin:0; font-size:0.9rem;">Ahmed Kamal</h5>
                        </div>
                    </div>
                </div>

                <div class="testimonial-card-wide glass">
                    <div class="stars" style="color: #ffd700; margin-bottom: 10px;">
                        <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                    </div>
                    <p class="review-content">يا جماعة البوت مظبوط بالمللي كنت خايف يحصل لاج بس شغال زي الفل تسلم ايديكم بجد</p>
                    <div class="client-mini-info">
                        <div class="mini-avatar" style="background: #25D366;">S</div>
                        <div>
                            <h5 style="margin:0; font-size:0.9rem;">Samir Wahid</h5>
                        </div>
                    </div>
                </div>

                <div class="testimonial-card-wide glass">
                    <div class="stars" style="color: #ffd700; margin-bottom: 10px;">
                        <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                    </div>
                    <p class="review-content">تجربة ممتازة، استلمت المشروع في ميعاده بالظبط والجودة أحسن من اللي كنت متخيله. أكيد مش آخر تعامل. ❤️</p>
                    <div class="client-mini-info">
                        <div class="mini-avatar" style="background: var(--accent-color);">M</div>
                        <div>
                            <h5 style="margin:0; font-size:0.9rem;">Mahmoud Hassan</h5>
                        </div>
                    </div>
                </div>

                <div class="testimonial-card-wide glass">
                    <div class="stars" style="color: #ffd700; margin-bottom: 10px;">
                        <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                    </div>
                    <p class="review-content">المواقع الي بيصمموها سريع جدا وتصميمه احترافي تسلم ايدك يا هندسة ❤️</p>
                    <div class="client-mini-info">
                        <div class="mini-avatar" style="background: #ff4757;">O</div>
                        <div>
                            <h5 style="margin:0; font-size:0.9rem;">Omar Khaled</h5>
                        </div>
                    </div>
                </div>

                <div class="testimonial-card-wide glass">
                    <div class="stars" style="color: #ffd700; margin-bottom: 10px;">
                        <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                    </div>
                    <p class="review-content">بصراحة الخدمة اللي حصلت عليها أكثر من اللي دفعته. استلمت الموقع بأفضل شكل وبسرعة، وكل التعديلات اللي طلبتها تم تنفيذها بأفضل شكل ❤️</p>
                    <div class="client-mini-info">
                        <div class="mini-avatar">Y</div>
                        <div>
                            <h5 style="margin:0; font-size:0.9rem;">Yousof Haggag</h5>
                        </div>
                    </div>
                </div>

                <div class="testimonial-card-wide glass">
                    <div class="stars" style="color: #ffd700; margin-bottom: 10px;">
                        <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                    </div>
                    <p class="review-content">الديزاين رايق جداً وسريع، وأهم حاجة إن الدعم الفني معاك خطوة بخطوة لحد ما تظبط كل حاجة زي ما انت عايز. 🧡</p>
                    <div class="client-mini-info">
                        <div class="mini-avatar" style="background: #5865F2;">A</div>
                        <div>
                            <h5 style="margin:0; font-size:0.9rem;">Ahmed Kamal</h5>
                        </div>
                    </div>
                </div>

                <div class="testimonial-card-wide glass">
                    <div class="stars" style="color: #ffd700; margin-bottom: 10px;">
                        <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                    </div>
                    <p class="review-content">يا جدعان البوت مظبوط بالمللي! كنت خايف يحصل لاج بس شغال زي الفل، تسلم ايديكم بجد.</p>
                    <div class="client-mini-info">
                        <div class="mini-avatar" style="background: #25D366;">S</div>
                        <div>
                            <h5 style="margin:0; font-size:0.9rem;">Samir Wahid</h5>
                        </div>
                    </div>
                </div>

                <div class="testimonial-card-wide glass">
                    <div class="stars" style="color: #ffd700; margin-bottom: 10px;">
                        <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                    </div>
                    <p class="review-content">تجربة ممتازة، استلمت المشروع في ميعاده بالظبط والجودة أحسن من اللي كنت متخيله. أكيد مش آخر تعامل. ❤️</p>
                    <div class="client-mini-info">
                        <div class="mini-avatar" style="background: var(--accent-color);">M</div>
                        <div>
                            <h5 style="margin:0; font-size:0.9rem;">Mahmoud Hassan</h5>
                        </div>
                    </div>
                </div>

                <div class="testimonial-card-wide glass">
                    <div class="stars" style="color: #ffd700; margin-bottom: 10px;">
                        <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                    </div>
                    <p class="review-content">السكربت وفر عليا وقت ومجهود كبير في الشغل. الكود نضيف وسهل التعدي</p>
                    <div class="client-mini-info">
                        <div class="mini-avatar" style="background: #ff4757;">O</div>
                        <div>
                            <h5 style="margin:0; font-size:0.9rem;">Omar Khaled</h5>
                        </div>
                    </div>
                </div>

            </div>
        </section>

        <section class="faq-section-v2">
            <div class="section-header-v2">
                <h2>أسئلة <span class="text-gradient">بتتكرر كتير</span></h2>
                <p>إجابات سريعة على أغلب الاسئلة</p>
            </div>

            <div class="faq-container-v2 open-grid-layout">

                <div class="faq-item-v2 glass">
                    <div class="faq-static-content">
                        <div class="faq-icon-top">
                            <i class="fas fa-wallet" style="color: var(--accent-color);"></i>
                        </div>
                        <h4>إيه طرق الدفع المتاحة؟</h4>
                        <p>بنقبل الدفع عن طريق فودافون كاش، إنستا باي (Instapay)، تحويلات بنكية، ولو أنت بره مصر متاح الدفع عبر PayPal.</p>
                    </div>
                </div>

                <div class="faq-item-v2 glass">
                    <div class="faq-static-content">
                        <div class="faq-icon-top">
                            <i class="fas fa-clock" style="color: var(--primary-color);"></i>
                        </div>
                        <h4>الشغل بياخد وقت قد إيه؟</h4>
                        <p>مدة التنفيذ بتبدأ من يومين لحد 9 أيام بالكتير حسب حجم المشروع، وطول الفترة دي بنكون متابعين معاك خطوة بخطوة عشان تطلع بأحسن نتيجة.</p>
                    </div>
                </div>

                <div class="faq-item-v2 glass">
                    <div class="faq-static-content">
                        <div class="faq-icon-top">
                            <i class="fas fa-headset" style="color: #ff4757;"></i>
                        </div>
                        <h4>فيه دعم فني وتعديلات؟</h4>
                        <p>أكيد طبعاً! إحنا معاك بدعم فني كامل، وبنستقبل أي تعديلات محتاجها بعد التسليم عشان نضمن إن كل حاجة شغالة تمام زي ما أنت عايز.</p>
                    </div>
                </div>

            </div>
        </section>

        <div class="tech-stack-section">
            <div class="tech-marquee">

                <div class="tech-item"><i class="fab fa-react"></i> React.js</div>
                <div class="tech-item"><i class="fab fa-node-js"></i> Node.js</div>
                <div class="tech-item"><i class="fab fa-python"></i> Python</div>
                <div class="tech-item"><i class="fab fa-js"></i> JavaScript</div>
                <div class="tech-item"><i class="fab fa-discord"></i> Discord.js</div>
                <div class="tech-item"><i class="fas fa-database"></i> Firebase</div>
                <div class="tech-item"><i class="fab fa-html5"></i> HTML5</div>
                <div class="tech-item"><i class="fab fa-css3-alt"></i> CSS3</div>

                <div class="tech-item"><i class="fab fa-react"></i> React.js</div>
                <div class="tech-item"><i class="fab fa-node-js"></i> Node.js</div>
                <div class="tech-item"><i class="fab fa-python"></i> Python</div>
                <div class="tech-item"><i class="fab fa-js"></i> JavaScript</div>
                <div class="tech-item"><i class="fab fa-discord"></i> Discord.js</div>
                <div class="tech-item"><i class="fas fa-database"></i> Firebase</div>
                <div class="tech-item"><i class="fab fa-html5"></i> HTML5</div>
                <div class="tech-item"><i class="fab fa-css3-alt"></i> CSS3</div>

            </div>
        </div>

        <footer class="dev-footer-v2 glass">
            <div class="footer-container-v2">

                <div class="footer-brand">
                    <div class="nav-logo-v2">
                        <img src="./images/BerlinStoreff.png" alt="Berlin Store" class="nav-store-logo">
                        <span>GOE BERLIN DEV</span>
                    </div>
                    <p>شريكك التقني لتحويل أفكارك لواقع ملموس. حلول برمجية متكاملة تضمن لك النجاح.</p>
                </div>

                <div class="footer-links-v2">
                    <h4>روابط تهمك</h4>
                    <a href="javascript:void(0)" onclick="scrollToSectionV2('services-v2')">خدماتنا</a>
                    <a href="javascript:void(0)" onclick="openDevModalV2('modal-all-reviews')">آراء العملاء</a>
                    <a href="https://wa.me/201060292953" target="_blank">تواصل معنا</a>
                </div>

                <div class="footer-social-v2">
                    <h4>خليك متابعنا</h4>
                    <div class="social-icons-v2">
                        <a href="https://www.facebook.com/profile.php?id=61550828833554" target="_blank"><i class="fab fa-facebook-f"></i></a>
                        <a href="https://wa.me/201060292953" target="_blank"><i class="fab fa-whatsapp"></i></a>
                        <a href="https://discord.gg/D3shcEb5xe" target="_blank"><i class="fab fa-discord"></i></a>
                    </div>
                </div>
            </div>

            <div class="footer-bottom-v2">

                <p class="copyright-text">&copy; 2026 جميع الحقوق محفوظة لـ <span class="text-gradient">Berlin Dev Team</span></p>

                <div class="payment-icons-corner">
                    <img src="./images/paypal.png" alt="PayPal" class="pay-img-corner" title="PayPal">
                    <img src="./images/vf-cash.png" alt="Vodafone Cash" class="pay-img-corner" title="Vodafone Cash">
                </div>

            </div>
        </footer>

        <script>


                                    let leafInterval;

                                    function createFallingLeavesEffect() {
                                        const container = document.body;
                                        const imagePath = './images/';
                                        const leafImages = [
                                            'crim1.png', 'crim2.png', 'crim3.png', 'crim4.png',
                                            'crim5.png', 'crim6.png', 'crim7.png', 'crim8.png'
                                        ];

                                        const duration = 180000; // 3 دقائق
                                        const burstTime = 52000; // الثانية 52

                                        // دالة إنشاء ورقة واحدة
                                        function spawnOneLeaf(isBurstMode = false) {
                                            const leaf = document.createElement('img');
                                            leaf.classList.add('crimson-leaf');

                                            // صورة عشوائية
                                            const randomIndex = Math.floor(Math.random() * leafImages.length);
                                            leaf.src = imagePath + leafImages[randomIndex];

                                            // 1. حجم عشوائي (من 30px لـ 100px)
                                            const size = Math.random() * 70 + 30;
                                            leaf.style.width = size + 'px';
                                            leaf.style.height = 'auto';

                                            // 2. مكان عشوائي
                                            // بنخليها تبدأ من -10% لـ 110% عشان تغطي الجناب كمان
                                            leaf.style.left = (Math.random() * 120 - 10) + 'vw';

                                            // 3. سرعة النزول
                                            let fallDuration = isBurstMode ? (Math.random() * 4 + 3) : (Math.random() * 8 + 6);
                                            leaf.style.animationDuration = `${fallDuration}s, ${fallDuration * 1.5}s`;

                                            // =================================================
                                            // 🌬️ كود الدفع بالماوس (Push Effect) 🌬️
                                            // =================================================
                                            leaf.onmouseenter = function () {
                                                // 1. وقف أنيميشن السقوط فوراً عشان نتحكم احنا في الحركة
                                                // بنستخدم !important في JS عشان نلغي تأثير CSS
                                                this.style.cssText += 'animation: none !important;';

                                                // 2. حساب اتجاه "الزقة" (عشوائي وقوي)
                                                // يمين أو شمال (مسافة كبيرة من 200 لـ 500 بكسل)
                                                let flyX = (Math.random() < 0.5 ? -1 : 1) * (Math.random() * 300 + 200);

                                                // لفوق أو لتحت (غالبا لفوق كأن الهوا طيرها)
                                                let flyY = (Math.random() < 0.5 ? -1 : 1) * (Math.random() * 300 + 100);

                                                // دوران سريع جداً مع الطيران
                                                let spin = Math.random() * 720 - 360;

                                                // 3. تطبيق الحركة
                                                // بنحتفظ بمكانها الحالي ونضيف عليه الحركة الجديدة
                                                const currentLeft = this.getBoundingClientRect().left;
                                                const currentTop = this.getBoundingClientRect().top;

                                                this.style.position = 'fixed';
                                                this.style.left = currentLeft + 'px';
                                                this.style.top = currentTop + 'px';

                                                // (خدعة) بنستنى جزء من الثانية عشان المتصفح يلحق يطبق الـ position الجديد قبل الحركة
                                                setTimeout(() => {
                                                    this.style.transform = `translate(${flyX}px, ${flyY}px) rotate(${spin}deg) scale(0.5)`;
                                                    this.style.opacity = "0"; // تختفي وهي بتطير
                                                }, 10);

                                                // 4. مسح الورقة من الذاكرة بعد ما تختفي
                                                setTimeout(() => {
                                                    this.remove();
                                                }, 600);
                                            };
                                            // =================================================

                                            container.appendChild(leaf);

                                            // تنظيف تلقائي لو محدش لمسها
                                            leaf.addEventListener('animationend', () => {
                                                leaf.remove();
                                            });
                                        }

                                        // --- تشغيل النظام ---
                                        console.log("🍂 بدء تساقط الأوراق...");
                                        clearInterval(leafInterval);

                                        // المرحلة 1: الوضع العادي
                                        leafInterval = setInterval(() => {
                                            spawnOneLeaf(false);
                                        }, 200);

                                        // المرحلة 2: الانفجار (ثانية 52)
                                        setTimeout(() => {
                                            console.log("🔥 تفعيل الانفجار!");
                                            clearInterval(leafInterval);
                                            leafInterval = setInterval(() => {
                                                spawnOneLeaf(true);
                                            }, 40); // كثافة عالية جداً
                                        }, burstTime);

                                        // المرحلة 3: التوقف (3 دقائق)
                                        setTimeout(() => {
                                            console.log("🛑 انتهاء.");
                                            clearInterval(leafInterval);
                                        }, duration);
                                    }

                                    /* ========================================= */
                                    /* 📏 1. Scroll Progress Logic */
                                    /* ========================================= */
                                    window.addEventListener('scroll', () => {
                                        const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
                                        const scrollHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
                                        const scrolled = (scrollTop / scrollHeight) * 100;
                                        document.getElementById('scroll-progress').style.width = scrolled + '%';
                                    });

                                    /* ========================================= */
                                    /* ❓ 2. FAQ Accordion Logic */
                                    /* ========================================= */
                                    function toggleFaqV2(element) {
                                        const parent = element.parentElement;

                                        // لو عايز تقفل الباقي لما تفتح واحد (اختياري)
                                        document.querySelectorAll('.faq-item-v2').forEach(item => {
                                            if (item !== parent) item.classList.remove('active');
                                        });

                                        parent.classList.toggle('active');
                                    }

                                    /* ========================================= */
                                    /* 🧊 3. 3D Tilt Effect Logic */
                                    /* ========================================= */
                                    // تحديد الكروت اللي هيتعمل عليها التأثير
                                    const tiltCards = document.querySelectorAll('.service-card-v2, .portfolio-card-v2, .process-step-card, .testimonial-card-wide');

                                    tiltCards.forEach(card => {
                                        card.classList.add('tilt-card'); // إضافة كلاس CSS للتجهيز

                                        card.addEventListener('mousemove', (e) => {
                                            const rect = card.getBoundingClientRect();
                                            const x = e.clientX - rect.left; // مكان الماوس داخل الكارت X
                                            const y = e.clientY - rect.top;  // مكان الماوس داخل الكارت Y

                                            const centerX = rect.width / 2;
                                            const centerY = rect.height / 2;

                                            // حساب زاوية الميل (كل ما الرقم 20 يزيد، الميل يقل)
                                            const rotateX = ((y - centerY) / 20) * -1; // عكس الاتجاه لعمل تأثير 3D
                                            const rotateY = (x - centerX) / 20;

                                            card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale3d(1.02, 1.02, 1.02)`;
                                            // إضافة لمعة خفيفة (اختياري)
                                            // card.style.borderColor = 'var(--primary-color)';
                                        });

                                        card.addEventListener('mouseleave', () => {
                                            // إعادة الكارت لوضعه الطبيعي
                                            card.style.transform = `perspective(1000px) rotateX(0) rotateY(0) scale3d(1, 1, 1)`;
                                            // card.style.borderColor = 'var(--border-glass)';
                                        });
                                    });

                                    const MY_WHATSAPP_NUMBER = "201060292953";

                                    // 🔹 Typewriter Effect (Updated)
                                    const typeText = [
                                        "مشروع ناجح ",
                                        "موقع احترافي ",
                                        "واقع ملموس ",
                                        "تطبيق ذكي "

                                    ];

                                    let typeIndex = 0;
                                    let charIndex = 0;
                                    let isDeleting = false;
                                    const typeElement = document.getElementById('typewriter');

                                    function type() {
                                        // حماية: التأكد من وجود العنصر قبل الكتابة
                                        if (!typeElement) return;

                                        const current = typeIndex % typeText.length;
                                        const fullTxt = typeText[current];

                                        if (isDeleting) {
                                            charIndex--;
                                        } else {
                                            charIndex++;
                                        }

                                        typeElement.textContent = fullTxt.substring(0, charIndex);

                                        let typeSpeed = isDeleting ? 50 : 100;

                                        if (!isDeleting && charIndex === fullTxt.length) {
                                            // توقف لمدة ثانيتين بعد اكتمال الكلمة
                                            typeSpeed = 2000;
                                            isDeleting = true;
                                        } else if (isDeleting && charIndex === 0) {
                                            isDeleting = false;
                                            typeIndex++;
                                            // توقف نصف ثانية قبل البدء في الكلمة التالية
                                            typeSpeed = 500;
                                        }

                                        setTimeout(type, typeSpeed);
                                    }

                                    // تشغيل الأنيميشن تلقائياً عند اكتمال تحميل الصفحة
                                    document.addEventListener("DOMContentLoaded", function () {
                                        setTimeout(type, 1000);
                                    });

                                    // 🔹 Show/Hide Functions
                                    function showDevPageV2() {
                                        window.location.hash = 'developing';
                                        const devPage = document.getElementById('dev-services-page');
                                        const mainNavbar = document.getElementById('navbar');
                                        const cartBtn = document.querySelector('.fixed-cart-button');

                                        if (devPage) {
                                            devPage.style.display = 'block';
                                            if (mainNavbar) mainNavbar.style.display = 'none';
                                            if (cartBtn) cartBtn.style.display = 'none';

                                            if (typeElement && typeElement.textContent === "") {
                                                setTimeout(type, 500);
                                            }
                                        }
                                    }

                                    function returnToHome() {
                                        hideDevPageV2();
                                        window.location.hash = '#home';
                                        document.querySelectorAll('.main-products-section, .glass-card').forEach(section => {
                                            section.style.display = 'block';
                                        });
                                    }

                                    function hideDevPageV2() {
                                        const devPage = document.getElementById('dev-services-page');
                                        if (devPage) devPage.style.display = 'none';

                                        const mainNavbar = document.getElementById('navbar');
                                        if (mainNavbar) mainNavbar.style.display = 'flex';

                                        const cartBtn = document.querySelector('.fixed-cart-button');
                                        if (cartBtn) cartBtn.style.display = 'flex';

                                        const storePage = document.getElementById('main-store-container');
                                        if (storePage) {
                                            storePage.style.display = 'block';
                                        } else {
                                            window.location.hash = '#home';
                                        }
                                    }

                                    // 🔹 Theme Management
                                    const devWrapperV2 = document.querySelector('.dev-wrapper-v2');
                                    const themeIconV2 = document.getElementById('theme-icon-v2');

                                    const savedThemeV2 = localStorage.getItem('berlin_theme_v2');
                                    if (savedThemeV2 === 'dark') {
                                        devWrapperV2.setAttribute('data-theme', 'dark');
                                    }

                                    function toggleThemeV2() {
                                        const currentTheme = devWrapperV2.getAttribute('data-theme');
                                        if (currentTheme === 'dark') {
                                            devWrapperV2.removeAttribute('data-theme');
                                            localStorage.setItem('berlin_theme_v2', 'light');
                                        } else {
                                            devWrapperV2.setAttribute('data-theme', 'dark');
                                            localStorage.setItem('berlin_theme_v2', 'dark');
                                        }
                                    }

                                    // 🔹 Smooth Scroll
                                    function scrollToSectionV2(id) {
                                        const el = document.getElementById(id);
                                        if (el) el.scrollIntoView({ behavior: 'smooth' });
                                    }

                                    // 🔹 Modal Logic V2
                                    let currentServiceV2 = '';

                                    function openDevModalV2(modalId) {
                                        const modal = document.getElementById(modalId);
                                        if (modal) modal.classList.add('active');
                                    }

                                    // دالة الإغلاق (بسيطة جداً)
                                    function closeDevModalV2(modalId) {
                                        const modal = document.getElementById(modalId);
                                        if (modal) {
                                            modal.classList.remove('active');
                                            // CSS هيتصرف في التوقيت والنعومة
                                        }
                                    }

                                    // دالة الاختيار والتبديل (بدون رمشة)
                                    function selectTypeV2(type, currentModalId) {
                                        // 1. جهز النافذة الجديدة وافتحها (هتغطي القديمة)
                                        openProjectFormV2(type);

                                        // 2. اقفل القديمة من تحتها (مش هتبان عشان الجديدة غطتها)
                                        const currentModal = document.getElementById(currentModalId);
                                        if (currentModal) {
                                            currentModal.classList.remove('active');
                                        }
                                    }

                                    function handleDevOverlayClickV2(event, modalId) {
                                        if (event.target.classList.contains('modal-overlay-v2')) {
                                            closeDevModalV2(modalId);
                                        }
                                    }
                                    // ✅ الحل النهائي: إيقاف الأنيميشن مؤقتاً أثناء التبديل
                                    function selectTypeV2(type, currentModalId) {
                                        const currentModal = document.getElementById(currentModalId);
                                        const nextModal = document.getElementById('modal-form-v2'); // النافذة اللي هنروح ليها

                                        // 1. نلغي تأثير الحركة (Transition) مؤقتاً من النافذتين
                                        // عشان التبديل يحصل في "فيمتو ثانية" بدون أي رمشة
                                        if (currentModal) currentModal.style.transition = "none";
                                        if (nextModal) nextModal.style.transition = "none";

                                        // 2. ننفذ التبديل (نقفل دي ونفتح دي فوراً)
                                        closeDevModalV2(currentModalId);
                                        openProjectFormV2(type);

                                        // 3. نرجع تأثير الحركة تاني بعد لحظة بسيطة
                                        // عشان لما العميل ييجي يقفل الفورم في الآخر، تقفل بنعومة
                                        setTimeout(() => {
                                            if (currentModal) currentModal.style.transition = "";
                                            if (nextModal) nextModal.style.transition = "";
                                        }, 50);
                                    }

                                    function openProjectFormV2(serviceName) {
                                        currentServiceV2 = serviceName;
                                        const titleElement = document.getElementById('selected-service-name-v2');
                                        if (titleElement) {
                                            titleElement.innerText = serviceName;
                                            titleElement.style.color = "var(--accent-color)";
                                        }
                                        openDevModalV2('modal-form-v2');
                                    }

                                    // 🔹 WhatsApp Sending Logic
                                    function sendWhatsAppV2(e) {
                                        e.preventDefault();
                                        const name = document.getElementById('client-name-v2').value;
                                        const details = document.getElementById('project-details-v2').value;

                                        const text = `*🚀 طلب مشروع جديد (V2.0)*%0a` +
                                            `➖➖➖➖➖➖➖➖%0a` +
                                            `👤 *العميل:* ${name}%0a` +
                                            `🛠 *الخدمة المطلوبة:* ${currentServiceV2}%0a` +
                                            `📝 *التفاصيل:*%0a ${details}%0a` +
                                            `➖➖➖➖➖➖➖➖`;

                                        window.open(`https://wa.me/${MY_WHATSAPP_NUMBER}?text=${text}`, '_blank');

                                        closeDevModalV2('modal-form-v2');
                                        e.target.reset();
                                    }

        </script>
    </div>

    <div id="orderDetailModal" class="modal">
        <span class="close-btn" onclick="closeModal('orderDetailModal')">&times;</span>

        <div class="modal-body" style="padding: 0;">

            <div class="order-receipt-header">
                <h2 style="margin: 0; color: var(--accent-yellow); font-size: 1.8rem;">تفاصيل الطلب</h2>
                <p id="detail-order-id" style="color: #ccc; font-family: monospace; letter-spacing: 1px;">#123456</p>
                <div id="detail-order-status" class="order-status-badge">مكتمل</div>
            </div>

            <div class="order-receipt-body">

                <div class="receipt-info-row">
                    <span><i class="far fa-calendar-alt"></i> التاريخ:</span>
                    <span id="detail-order-date" style="direction: ltr;">-</span>
                </div>

                <hr class="receipt-divider">

                <h4 style="color: #fff; margin-bottom: 15px; border-right: 3px solid var(--main-purple); padding-right: 10px;">المنتج:</h4>

                <div id="detail-items-container">
                </div>

                <hr class="receipt-divider">

                <div class="receipt-total-row">
                    <span>الإجمالي المدفوع:</span>
                    <span id="detail-order-total" style="color: #00ff00;">0 EGP</span>
                </div>

            </div>


            <a href="https://discord.gg/D3shcEb5xe" target="_blank" style="display: block; margin-top: 15px; color: #7289DA; text-decoration: none; font-size: 13px; transition: color 0.3s;">
                <i class="fab fa-discord"></i> واجهت مشكلة؟ تواصل معنا
            </a>
        </div>

    </div>


    <div id="daily-reward-section" class="section glass-card" style="display: none; text-align: center;">

        <h2 style="color: #ffd700; text-shadow: 0 0 15px #ffd700; font-size: 2.5rem; margin-bottom: 10px;">
            <i class="fas fa-calendar-check"></i> المكافأة اليومية
        </h2>

        <p style="color: #e0e0e0; font-size: 1.2rem; margin-bottom: 30px;">
            سجل دخولك يومياً واجمع النقاط! كل ما تفتح المتجر كل يوم، بتاخد جوائز أكبر 🔥
        </p>

        <div id="streak-message" style="font-size: 1.5rem; font-weight: bold; color: #fff; margin-bottom: 20px;">
            الستريك الحالي: 0 يوم <i class="fas fa-fire" style="color: #ff4500;"></i>
        </div>

        <div class="daily-days-container"></div>

        <button id="claim-daily-btn" class="buy-btn" onclick="claimDailyReward()" style="
            background: linear-gradient(45deg, #ffd700, #ffaa00);
            color: #000;
            font-size: 1.5rem;
            padding: 15px 40px;
            border-radius: 50px;
            margin-top: 30px;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.4);
            border: none;
            cursor: pointer;
            font-weight: bold;">
            استلام المكافأة
        </button>

        <p id="next-claim-timer" style="color: #ff4757; font-weight: bold; margin-top: 15px; display: none; font-size: 1.2rem;"></p>

        <br><br>
        <button onclick="window.location.hash='#home'; document.querySelectorAll('.section').forEach(s => s.style.display = 'none'); document.getElementById('home').style.display='block';"
                style="background: transparent; border: 1px solid #fff; color: #fff; padding: 10px 20px; border-radius: 20px; cursor: pointer;">
            &larr; العودة للرئيسية
        </button>
    </div>

    <div id="spinWheelModal" class="modal" style="z-index: 10005;">
        <span class="close-btn" onclick="closeModal('spinWheelModal')">&times;</span>
        <div class="modal-body" style="align-items: center; background: linear-gradient(145deg, #1a0b2e, #000); border: 2px solid #ffd700; overflow: hidden;">

            <h2 style="color: #ffd700; text-shadow: 0 0 10px #ffd700;">🎡 عجلة الحظ</h2>
            <p style="color: #ccc; margin-bottom: 20px;">تكلفة اللفة: <span style="color: #ff4757; font-weight: bold;">300 BP</span></p>

            <div class="wheel-container">
                <div class="wheel-pointer"></div>
                <div class="the-wheel" id="theWheel">
                    <div class="segment" style="--i:1; --clr:#ff4757;"><span>حظ أوفر</span></div>
                    <div class="segment" style="--i:2; --clr:#2ecc71;"><span>500 BP</span></div>
                    <div class="segment" style="--i:3; --clr:#00c0ff;"><span>300 BP</span></div>
                    <div class="segment" style="--i:4; --clr:#ffd700;"><span>1000 BP</span></div>
                    <div class="segment" style="--i:5; --clr:#00c0ff;"><span>300 BP</span></div>
                    <div class="segment" style="--i:6; --clr:#00c0ff;"><span>100 BP</span></div>
                    <div class="segment" style="--i:7; --clr:#00c0ff;"><span>300 BP</span></div>
                    <div class="segment" style="--i:8; --clr:#cda1ff;"><span>CODE</span></div>
                </div>
                <div class="wheel-center">
                    <div class="spin-btn" onclick="spinTheWheel()">SPIN</div>
                </div>
            </div>

            <p id="spin-result-msg" style="margin-top: 20px; font-weight: bold; min-height: 24px; font-size: 18px;"></p>
        </div>
    </div>


    <div id="reward-success-modal" class="modal" style="display: none;">
        <span class="close-btn" onclick="document.getElementById('reward-success-modal').style.display='none'">&times;</span>
        <div class="modal-body" style="text-align: center; align-items: center; justify-content: center;">
            <img src="https://cdn-icons-png.flaticon.com/512/7491/7491966.png" alt="Success" style="width: 80px; margin-bottom: 15px;">
            <h3 id="success-modal-title" style="color: #28a745; border:none; font-size: 24px; margin: 10px 0;"></h3>
            <div id="success-modal-body" style="width: 100%; margin-top: 10px;"></div>
            <button onclick="document.getElementById('reward-success-modal').style.display='none'" class="confirm-payment-btn" style="margin-top: 20px; width: 50%;">حسناً</button>
        </div>
    </div>

    <div id="wishlistModal" class="modal">
        <span class="close-btn" onclick="closeModal('wishlistModal')">&times;</span>
        <div class="modal-body">
            <h2 style="text-align: center; color: var(--accent-yellow);">
                <i class="fas fa-heart" style="color: #960026; "></i> قائمة أمنياتي
            </h2>

            <div id="wishlistItemsContainer" class="wishlist-grid">
            </div>

            <div id="emptyWishlistMsg" style="text-align: center; display: none; margin-top: 30px;">
                <i class="far fa-heart" style="font-size: 50px; color: #555; margin-bottom: 15px;"></i>
                <p style="color: #ccc;">قائمتك فارغة حالياً.</p>
                <button onclick="closeModal('wishlistModal')" class="buy-btn" style="width: auto; padding: 8px 20px;">تصفح المنتجات</button>
            </div>
        </div>
    </div>

    <div id="offlineSteamGuideModal" class="modal">
        <span class="close-btn" onclick="closeModal('offlineSteamGuideModal')">&times;</span>

        <div class="modal-body redeem-modal-body">
            <h2 style="color: #66c0f4; text-align: center; margin-bottom: 10px;">
                <i class="fab fa-steam"></i> نظام حسابات ستيم الأوفلاين
            </h2>

            <div class="security-guarantee-box">
                <div class="icon-check"><i class="fas fa-shield-alt"></i></div>
                <div class="text">
                    <h4>آمن 100% ومضمون</h4>
                    <p>الحسابات رسمية بالكامل، لا يوجد أي خطر، بدون أي مشاكل أو بان. الوصول للعبة بشكل قانوني وآمن.</p>
                </div>
            </div>

            <p style="text-align: center; color: #ccc; margin: 20px 0;">كيف تعمل الطريقة؟ بسيطة جداً!</p>

            <div class="offline-steps-container">
                <div class="step-item">
                    <span class="step-num">1</span>
                    <p>بعد الشراء، ستستلم <strong>اسم مستخدم وكلمة مرور</strong> لحساب ستيم يحتوي على اللعبة.</p>
                </div>
                <div class="step-item">
                    <span class="step-num">2</span>
                    <p>سجل الدخول في برنامج Steam وقم <strong>بتحميل اللعبة</strong> بالكامل.</p>
                </div>
                <div class="step-item">
                    <span class="step-num">3</span>
                    <p>بعد التحميل، اضغط على قائمة Steam واختر <strong>Go Offline</strong>.</p>
                </div>
                <div class="step-item">
                    <span class="step-num">4</span>
                    <p>استمتع باللعبة <strong>مدى الحياة</strong> (Story Mode / Offline) بدون أي مقاطعة!</p>
                </div>
            </div>

            <div style="text-align: center; margin-top: 20px;">
                <button class="confirm-payment-btn" onclick="closeModal('offlineSteamGuideModal')">فهمت، أريد الشراء الآن</button>
            </div>

        </div>
    </div>

    <div id="google_translate_element"></div>

    <script type="text/javascript">
                        function googleTranslateElementInit() {
                            new google.translate.TranslateElement({
                                pageLanguage: 'ar', // اللغة الأصلية للموقع
                                includedLanguages: 'ar,en', // اللغات المتاحة
                                layout: google.translate.TranslateElement.InlineLayout.SIMPLE,
                                autoDisplay: false
                            }, 'google_translate_element');
                        }
    </script>
    <script type="text/javascript" src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>


    <img id="aptx-pill" src="./images/aptx4869.png" class="interactive-pill" onclick="consumeAptx()">

    <img id="antidote-pill" src="./images/antidote.png" class="interactive-pill" onclick="consumeAntidote()">

    <input type="hidden" name="image_url" id="vodafone_image_url">
    <input type="hidden" name="image_url" id="paypal_image_url">
    <input type="hidden" name="image_url" id="creditcard_image_url">

    <div id="xboxGiftingModal" class="modal">
        <span class="close-btn" onclick="closeModal('xboxGiftingModal')">&times;</span>
        <div class="modal-body">
            <h2>شراء لعبة (Xbox/PC)</h2>
            <p class="modal-description">أدخل بيانات اللعبة وحسابك لحساب التكلفة.</p>

            <div class="input-wrapper">
                <svg xmlns="https://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5z" /><path d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm15 0a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2z" /></svg>
                <input type="text" id="xboxGameName" placeholder="اسم اللعبة (باللغة الإنجليزية)" required>
            </div>

            <div class="input-wrapper" id="xbox-price-wrapper">
                <svg xmlns="https://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-currency-dollar" viewBox="0 0 16 16">
                    <path d="M4 10.781c.524 1.637 1.82 2.77 3.432 2.77 1.622 0 2.567-.83 2.567-2.11 0-1.153-.746-1.854-2.283-2.197l-.773-.181c-1.121-.26-1.488-.591-1.488-1.136 0-.548.422-.949 1.162-.949.717 0 1.114.332 1.173.811h1.074c-.03-.905-.621-1.611-1.633-1.764V1.5h-1v1.235c-1.133.17-1.895.918-1.895 1.954 0 1.056.762 1.706 2.155 2.03l.773.182c1.238.287 1.6.63 1.6 1.22 0 .666-.492 1.096-1.31 1.096-.846 0-1.288-.413-1.353-1.04h-1.094zm0-5.187a1.05 1.05 0 0 1 0-2.1h1.07v2.1H4zM11 1.5v1.235c.101.015.197.036.287.063V1.5h-1.353z" />
                    <path d="M8 15a7 7 0 1 1 0-14 7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
                    <path d="M8 13.5a5.5 5.5 0 1 1 0-11 5.5 5.5 0 0 1 0 11zm0 1A6.5 6.5 0 1 0 8 1a6.5 6.5 0 0 0 0 13z" />
                </svg>
                <input type="number" id="xboxGamePriceEGP" placeholder="أدخل سعر اللعبة" required oninput="calculateXboxGiftingPrice()">

                <select id="xboxGameCurrency" onchange="calculateXboxGiftingPrice()">
                    <option value="EGP" selected>EGP</option>
                    <option value="USD">USD</option>
                </select>
            </div>

            <div class="input-wrapper">
                <svg xmlns="https://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-envelope-fill" viewBox="0 0 16 16">
                    <path d="M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555ZM0 4.697v7.104l5.803-3.558L0 4.697ZM6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757Zm3.436-.586L16 11.803V4.697l-5.803 3.546Z" />
                </svg>
                <input type="email" id="xboxAccountEmail" placeholder="إيميل حساب مايكروسوفت" required>
            </div>

            <div class="input-wrapper">
                <svg xmlns="https://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-key-fill" viewBox="0 0 16 16">
                    <path d="M3.5 11.5a3.5 3.5 0 1 1 3.163-5H14L15.5 8 14 9.5l-1-1-1 1-1-1-1 1-1-1-1 1H6.663a3.5 3.5 0 0 1-3.163 2zM2.5 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" />
                </svg>
                <input type="password" id="xboxAccountPassword" placeholder="باسورد حساب مايكروسوفت" required>
            </div>

            <div id="xboxFinalPriceDisplay" style="margin-top: 15px;">
            </div>

            <div style="text-align: center; margin-top: 20px;">
                <button id="proceedToXboxPaymentBtn" class="button-primary" onclick="proceedToXboxPayment()">اذهب للدفع</button>
            </div>
        </div>
    </div>

    <div id="loading-screen">
        <img src="./images/minecraft_loading.gif" alt="Loading..." class="loading-animation">
        <p class="loading-text">جاري التحميل...</p>
    </div>


    <div id="kaito-card" style="display: none; position: fixed; z-index: 10000; width: 60px;">
        <img src="./images/kid-card.png" style="width: 100%; filter: drop-shadow(5px 5px 10px rgba(0,0,0,0.5));">
    </div>
    <div id="kid-smoke"></div>

    <script>

                   

                        function openScriptTypeModal() {
                            const modal = document.getElementById('scriptTypeModal');
                            if (modal) {
                                modal.style.display = 'flex';
                                modal.style.zIndex = '999999'; // لضمان ظهورها فوق الناف بار
                                // تأخير بسيط لتفعيل الترانزيشن
                                setTimeout(() => {
                                    modal.classList.add('active');
                                    modal.style.opacity = '1';
                                }, 10);
                            } else {
                                console.error("خطأ: مودال السكربت غير موجود ID: scriptTypeModal");
                            }
                        }


                        window.isLoginMode = true;

                        // 2. دالة فتح النافذة (التي كانت ناقصة)
                        window.openAuthModal = function (mode) {
                            const modal = document.getElementById('authModal');
                            const overlay = document.getElementById('overlay');

                            // تحديد الوضع بناءً على الزر الذي تم ضغطه
                            if (mode === 'login') {
                                window.isLoginMode = true;
                            } else {
                                window.isLoginMode = false;
                            }

                            // تحديث النصوص (عنوان النافذة وزر التنفيذ)
                            if (typeof updateAuthModalUI === 'function') {
                                updateAuthModalUI();
                            }

                            // إظهار النافذة والخلفية
                            if (overlay) overlay.style.display = 'block';
                            if (modal) {
                                modal.style.display = 'flex';
                                // مهلة بسيطة لتفعيل الأنيميشن
                                setTimeout(() => {
                                    modal.classList.add('is-visible');
                                }, 10);
                            }
                        };

                        // 3. دالة إغلاق النوافذ (لضمان عمل زر الإغلاق)
                        window.closeModal = function (modalId) {
                            const overlay = document.getElementById('overlay');

                            if (modalId === 'all') {
                                // إغلاق كل النوافذ المفتوحة
                                document.querySelectorAll('.modal').forEach(modal => {
                                    modal.classList.remove('is-visible');
                                    setTimeout(() => { modal.style.display = 'none'; }, 300);
                                });
                            } else {
                                // إغلاق نافذة محددة
                                const modal = document.getElementById(modalId);
                                if (modal) {
                                    modal.classList.remove('is-visible');
                                    setTimeout(() => { modal.style.display = 'none'; }, 300);
                                }
                            }

                            // إخفاء الخلفية
                            if (overlay) overlay.style.display = 'none';
                        };

                        // 4. التأكد من تفعيل زر التنفيذ (Submit) داخل النافذة
                        document.addEventListener('DOMContentLoaded', function () {
                            const submitBtn = document.getElementById('submitAuthBtn');
                            const emailInput = document.getElementById('userEmail');
                            const passInput = document.getElementById('userPassword');
                            const msgBox = document.getElementById('authMessage');

                            if (submitBtn) {
                                // إزالة أي مستمعين سابقين لتجنب التكرار (اختياري ولكن جيد)
                                const newBtn = submitBtn.cloneNode(true);
                                submitBtn.parentNode.replaceChild(newBtn, submitBtn);

                                newBtn.addEventListener('click', function () {
                                    const email = emailInput.value;
                                    const pass = passInput.value;
                                    const auth = firebase.auth();

                                    if (!email || !pass) {
                                        msgBox.style.color = "red";
                                        msgBox.textContent = "يرجى ملء جميع الحقول";
                                        return;
                                    }

                                    if (pass.length < 6) {
                                        msgBox.style.color = "red";
                                        msgBox.textContent = "كلمة المرور يجب أن تكون 6 أحرف على الأقل";
                                        return;
                                    }

                                    msgBox.style.color = "yellow";
                                    msgBox.textContent = "جاري المعالجة...";

                                    // تنفيذ الأمر بناءً على الوضع الحالي
                                    let authPromise;
                                    if (window.isLoginMode) {
                                        authPromise = auth.signInWithEmailAndPassword(email, pass);
                                    } else {
                                        authPromise = auth.createUserWithEmailAndPassword(email, pass);
                                    }

                                    authPromise.then((userCredential) => {
                                        msgBox.style.color = "#00ff00";
                                        msgBox.innerHTML = window.isLoginMode ?
                                            "<i class='fas fa-check'></i> تم تسجيل الدخول!" :
                                            "<i class='fas fa-check'></i> تم إنشاء الحساب!";

                                        // إغلاق النافذة بعد ثانية ونصف
                                        setTimeout(() => {
                                            closeModal('all');
                                            // تحديث بيانات البروفايل
                                            if (typeof loadProfileData === 'function') {
                                                loadProfileData(userCredential.user);
                                            }
                                            // إعادة التوجيه لصفحة الطلبات إذا لزم الأمر
                                            window.location.hash = '#my-orders-page';
                                        }, 1500);
                                    })
                                        .catch((error) => {
                                            console.error("Auth Error:", error);
                                            let errorText = "حدث خطأ: " + error.message;
                                            if (error.code === 'auth/email-already-in-use') errorText = "البريد الإلكتروني مستخدم بالفعل";
                                            if (error.code === 'auth/user-not-found') errorText = "المستخدم غير موجود";
                                            if (error.code === 'auth/wrong-password') errorText = "كلمة المرور غير صحيحة";
                                            if (error.code === 'auth/invalid-email') errorText = "البريد الإلكتروني غير صالح";

                                            msgBox.style.color = "red";
                                            msgBox.textContent = errorText;
                                        });
                                });
                            }
                        });
                        // ==========================================
                        // 🎮 OFFLINE GAMES PREVIEW ON HOVER
                        // ==========================================

                        function showOfflinePreview() {
                            const previewBox = document.getElementById('offline-preview-box');

                            // 1. تجميع ألعاب الأوفلاين فقط
                            const offlineGames = Object.values(productsData).filter(p => p.category === 'offline-steam');

                            // 2. ✅ التعديل هنا: غيرنا الرقم من 12 لـ 14 عشان يجيب 6 ألعاب (من 8 لـ 14)
                            // (الرقم 8 ده هو عدد الألعاب الظاهرة أصلاً في الصفحة، والفرق بينهم هو عدد صور البريفيو)
                            const nextGames = offlineGames.slice(8, 14);

                            // لو مفيش ألعاب متبقية، نخرج ومتعرضش حاجة
                            if (nextGames.length === 0) return;

                            // 3. بناء HTML الصور
                            let imagesHTML = '';
                            nextGames.forEach((game, index) => {
                                // إضافة تأخير بسيط لكل صورة عشان تظهر بشكل متتابع (Animation Delay)
                                const delay = index * 0.1;
                                imagesHTML += `<img src="${game.image}" class="mini-preview-img" style="transition-delay: ${delay}s" alt="${game.title}">`;
                            });

                            // 4. وضع الصور وإظهار الصندوق
                            previewBox.innerHTML = imagesHTML;
                            previewBox.classList.add('active');
                        }

                        function hideOfflinePreview() {
                            const previewBox = document.getElementById('offline-preview-box');
                            if (previewBox) {
                                previewBox.classList.remove('active');
                            }
                        }

        // ✅ دالة فتح تفاصيل الطلب (محدثة: تاريخ دقيق + تحديث لحظي للحالة)
        function openOrderDetails(index) {
            const order = allUserOrders[index];
            if (!order) return;

            // 1. تعبئة البيانات الأساسية
            document.getElementById('detail-order-id').textContent = `#${order.orderId}`;
            document.getElementById('detail-order-total').textContent = `${order.price} EGP`;

            // 2. 🔥 معالجة التاريخ بدقة 🔥
            const today = new Date();
            let orderDateObj = new Date();
            const rawDate = String(order.date).split(' ')[0];

            if (rawDate.includes('/')) {
                const parts = rawDate.split('/');
                orderDateObj = new Date(parts[2], parts[1] - 1, parts[0]);
            } else {
                orderDateObj = new Date(rawDate);
            }

            const dateStr = orderDateObj.toLocaleDateString('en-US');
            document.getElementById('detail-order-date').textContent = dateStr;

            // 3. 🔥 نظام الحالة الذكي (Smart Status System) 🔥
            const statusContainer = document.getElementById('detail-order-status');
            const todayString = today.toDateString();
            const orderDateString = orderDateObj.toDateString();

            // وضع حالة مبدئية بناءً على التاريخ
            let initialStatusHTML = '';
            if (todayString === orderDateString) {
                initialStatusHTML = `
        <div id="detail-order-status" class="status-message-box">
            <i class="fas fa-clock" style="font-size: 18px; display: block; margin-bottom: 5px;"></i>
            جاري تحضير الطلب...
            <br>
            <span style="color: #fff; font-weight: normal; font-size: 12px; display: block;">يرجى انتظار إشعار التسليم</span>
        </div>`;
            } else {
                initialStatusHTML = `
        <div id="detail-order-status" class="order-status-badge completed" style="width: 100%; text-align: center; padding: 10px; background: rgba(16, 185, 129, 0.2); color: #10b981; border: 1px solid #10b981;">
            <i class="fas fa-check-circle"></i> مكتمل
        </div>`;
            }
            statusContainer.outerHTML = initialStatusHTML;

            // 📡 الاتصال المباشر (Live Sync)
            // هذا الجزء هو الذي يحدث الحالة فوراً عند تغييرها من الداشبورد
            if (typeof firebase !== 'undefined' && firebase.apps.length) {
                const db = firebase.firestore();
                const currentStatusEl = document.getElementById('detail-order-status'); // إعادة تحديد العنصر

                db.collection('orders').where('orderId', '==', String(order.orderId)).limit(1)
                    .onSnapshot((snapshot) => {
                        if (!snapshot.empty) {
                            const liveData = snapshot.docs[0].data();
                            const newStatus = liveData.status;
                            const freshStatusEl = document.getElementById('detail-order-status'); // تحديد العنصر الجديد

                            if (newStatus === 'completed') {
                                freshStatusEl.outerHTML = `
                        <div id="detail-order-status" class="order-status-badge completed" style="width: 100%; text-align: center; padding: 10px; font-size: 16px; background: rgba(16, 185, 129, 0.2); color: #10b981; border: 1px solid #10b981;">
                            <i class="fas fa-check-circle"></i> الطلب مكتمل وتم الإرسال!
                            <div style="font-size:12px; margin-top:5px; color:#ccc;">(راجع الإيميل الخاص بك)</div>
                        </div>`;
                            } else if (newStatus === 'cancelled') {
                                freshStatusEl.outerHTML = `
                        <div id="detail-order-status" class="order-status-badge cancelled" style="width: 100%; text-align: center; padding: 10px; font-size: 16px; background: rgba(239, 68, 68, 0.2); color: #ef4444; border: 1px solid #ef4444;">
                            <i class="fas fa-times-circle"></i> تم إلغاء الطلب
                        </div>`;
                            } else if (newStatus === 'pending') {
                                freshStatusEl.outerHTML = `
                        <div id="detail-order-status" class="status-message-box">
                            <i class="fas fa-clock" style="font-size: 18px; display: block; margin-bottom: 5px;"></i>
                            قيد المراجعة والتنفيذ...
                        </div>`;
                            }
                        }
                    });
            }

            // 4. تعبئة المنتجات
            const itemsContainer = document.getElementById('detail-items-container');
            const itemImage = order.image || './images/BerlinStore.png';

            itemsContainer.innerHTML = `
    <div class="receipt-item">
        <img src="${itemImage}" alt="${order.product}">
        <div class="receipt-item-details">
            <span class="receipt-item-title">${order.product}</span>
            <span class="receipt-item-price">الكمية: 1</span>
        </div>
        <span style="color: #fff; font-weight: bold;">${order.price} EGP</span>
    </div>`;

            showModal('orderDetailModal');
        }

                        // ✅ إصلاح مزامنة النقاط في البروفايل
                        function syncProfilePoints() {
                            // 1. جلب النقاط الحقيقية من الذاكرة
                            // (استخدمنا نفس المفتاح v3 اللي انت بتستخدمه في باقي الكود)
                            let realPoints = parseInt(localStorage.getItem('berlin_store_points_v3')) || 0;

                            // 2. تحديث المتغير العالمي في الصفحة
                            userPoints = realPoints;

                            // 3. البحث عن عنصر النقاط في صفحة البروفايل وتحديثه
                            const profilePointsEl = document.getElementById('user-points-display');
                            if (profilePointsEl) {
                                profilePointsEl.textContent = realPoints;
                            }

                            // 4. تحديث النقاط في المتجر بالمرة (للتأكيد)
                            const shopPointsEl = document.getElementById('shop-user-points');
                            const shopCurrentPointsEl = document.getElementById('shop-current-points');

                            if (shopPointsEl) shopPointsEl.textContent = realPoints;
                            if (shopCurrentPointsEl) shopCurrentPointsEl.textContent = realPoints;
                        }

                        // ✅ تشغيل دالة الإصلاح دي بشكل تلقائي كلما فتحت صفحة البروفايل
                        // نحن هنا بنعدل على دالة فتح البروفايل الأصلية لنضيف لها التحديث
                        const oldOpenProfileSettings = window.openProfileSettings;
                        window.openProfileSettings = function () {
                            // تشغيل الدالة القديمة عشان تفتح الصفحة
                            if (oldOpenProfileSettings) oldOpenProfileSettings();

                            // تشغيل دالة تحديث النقاط فوراً
                            syncProfilePoints();
                        };

                        // تشغيل التحديث أيضاً عند تحميل الصفحة لأول مرة
                        document.addEventListener('DOMContentLoaded', syncProfilePoints);


                        // **هذا الكود مغلف بالكامل لمنع التعارضات والاعتماد على دوال خارجية**
                        (function () {

                            // =========================================================================
                            // 1. المتغيرات وإعدادات العجلة
                            // =========================================================================

                            let userPoints = 0;
                            let wheelSpinning = false;
                            const SPIN_COST = 300;

                            // تعريف الجوائز كما طلبت: حظ أوفر واحدة فقط و 300 نقطة كتعويض
                            const SEGMENTS = [
                                { label: "حظ أوفر", type: "loss", value: 0 },
                                { label: "500 نقطة", type: "win", value: 500 },
                                { label: "300 نقطة", type: "win", value: 300 },
                                { label: "1000 نقطة", type: "win", value: 1000 },
                                { label: "300 نقطة", type: "win", value: 300 },
                                { label: "100 نقطة", type: "win", value: 100 },
                                { label: "300 نقطة", type: "win", value: 300 },
                                { label: "كود خصم", type: "code", value: "LUCKY5" }
                            ];


                            // =========================================================================
                            // 2. دوال تحديث الشاشة والحفظ (Functions for Display and Persistence)
                            // =========================================================================

                            // تحديث رقم النقاط الظاهر في الموقع
                            function updatePointsDisplay() {
                                const displayElement = document.getElementById('user-points-display');
                                if (displayElement) {
                                    displayElement.textContent = userPoints.toLocaleString() + ' BP';
                                }
                            }

                            // حفظ النقاط في LocalStorage
                            function saveUserPoints() {
                                localStorage.setItem('user_points_balance', userPoints);
                                // يمكنك إضافة دالة حفظ الـ Firestore هنا إذا كنت متأكداً من أنها تعمل (مثال: saveCustomDataToFirestore('pointsBalance', userPoints);)
                            }

                            // تحميل النقاط من LocalStorage
                            function loadUserPoints() {
                                const savedPoints = localStorage.getItem('user_points_balance');
                                userPoints = savedPoints ? parseInt(savedPoints) : 0;
                                updatePointsDisplay();
                            }

                            // فتح نافذة العجلة
                            window.openSpinWheelModal = function () {
                                document.getElementById('spinWheelModal').style.display = 'flex';
                            }

                            // =========================================================================
                            // 3. دالة اللف الرئيسية (Core Spin Logic - Angle Fix Included)
                            // =========================================================================

                            window.spinTheWheel = function () {
                                if (wheelSpinning) return;

                                if (userPoints < SPIN_COST) {
                                    alert(`❌ رصيدك غير كافٍ! تحتاج ${SPIN_COST} نقطة.`);
                                    return;
                                }

                                // خصم النقاط وحفظها
                                userPoints -= SPIN_COST;
                                updatePointsDisplay();
                                saveUserPoints();

                                const spinSound = new Audio('https://www.myinstants.com/media/sounds/roulette-wheel-sound-effect.mp3');
                                spinSound.volume = 0.5;
                                spinSound.play().catch(() => { });

                                wheelSpinning = true;
                                const wheel = document.getElementById('theWheel');
                                const resultMsg = document.getElementById('spin-result-msg');

                                resultMsg.textContent = "جاري اللف... 🤞";
                                resultMsg.style.color = "#fff";

                                // حساب زاوية عشوائية
                                const randomDegree = Math.floor(2000 + Math.random() * 3000);

                                // تطبيق الحركة
                                wheel.style.transform = `rotate(${randomDegree}deg)`;

                                // انتظار انتهاء الحركة وحساب النتيجة
                                setTimeout(() => {
                                    wheelSpinning = false;

                                    const actualDeg = randomDegree % 360;

                                    // تصحيح مشكلة الزاوية (لضمان تطابق النتيجة مع الشكل البصري)
                                    const calculatedIndex = Math.floor(((360 - actualDeg + 22.5) % 360) / 45);
                                    const segmentIndex = (calculatedIndex + 7) % 8;

                                    const prize = SEGMENTS[segmentIndex];
                                    handleSpinResult(prize);

                                }, 5000);
                            }


                            // =========================================================================
                            // 4. دالة معالجة النتيجة
                            // =========================================================================

                            function handleSpinResult(prize) {
                                const resultMsg = document.getElementById('spin-result-msg');
                                const wheel = document.getElementById('theWheel');

                                // إعادة تصفير العجلة (بدون أنيميشن)
                                setTimeout(() => {
                                    wheel.style.transition = 'none';
                                    wheel.style.transform = `rotate(0deg)`;
                                    setTimeout(() => wheel.style.transition = 'transform 5s cubic-bezier(0.17, 0.67, 0.83, 0.67)', 50);
                                }, 2000);

                                if (prize.type === 'loss') {
                                    resultMsg.textContent = "😢 حظ أوفر المرة القادمة!";
                                    resultMsg.style.color = "#ff4757";
                                    new Audio('https://www.myinstants.com/media/sounds/minecraft-damage-oof-sound-effect.mp3').play().catch(() => { });
                                }
                                else if (prize.type === 'win') {
                                    resultMsg.textContent = `🎉 مبروك! كسبت ${prize.value} نقطة!`;
                                    resultMsg.style.color = "#2ecc71";

                                    // إضافة الجائزة وحفظها
                                    userPoints += prize.value;
                                    updatePointsDisplay();
                                    saveUserPoints();

                                    new Audio('https://www.myinstants.com/media/sounds/tada-fanfare-a.mp3').play().catch(() => { });
                                }
                                else if (prize.type === 'code') {
                                    resultMsg.innerHTML = `🎉 مبروك! كود الخصم: <span style="background:#fff; color:#000; padding:2px 5px; border-radius:4px;">${prize.value}</span>`;
                                    resultMsg.style.color = "#cda1ff";

                                    // حفظ الكود في المحفظة
                                    let inv = JSON.parse(localStorage.getItem('my_coupon_inventory') || "[]");
                                    inv.push(prize.value);
                                    localStorage.setItem('my_coupon_inventory', JSON.stringify(inv));

                                    new Audio('https://www.myinstants.com/media/sounds/tada-fanfare-a.mp3').play().catch(() => { });
                                }
                            }

                            // تحميل النقاط عند بداية التشغيل
                            document.addEventListener('DOMContentLoaded', loadUserPoints);
                        })(); // نهاية التغليف

                        // ==========================================
                        // 🎁 DAILY REWARD SYSTEM LOGIC
                        // ==========================================

                        // إعدادات المكافآت (الأيام 1-7)
                        const DAILY_CONFIG = [
                            { day: 1, reward: 50 },
                            { day: 2, reward: 75 },
                            { day: 3, reward: 80 },
                            { day: 4, reward: 100 },
                            { day: 5, reward: 120 },
                            { day: 6, reward: 140 },
                            { day: 7, reward: 200 } // الجائزة الكبرى
                        ];

                        // دالة التهيئة (تستدعى عند تحميل الصفحة)
                        function initDailyRewardSystem() {
                            renderDailyUI();
                            checkClaimStatus();
                        }

                        // دالة رسم الواجهة
                        function renderDailyUI() {
                            const container = document.querySelector('.daily-days-container');
                            if (!container) return;

                            container.innerHTML = '';

                            // جلب الستريك الحالي (أو 1 كبداية للعرض)
                            const savedData = JSON.parse(localStorage.getItem('daily_reward_data')) || { streak: 0 };
                            let currentStreakDisplay = savedData.streak;

                            // لو كسر الستريك في المنطق، سنعرضه مكسوراً، لكن هنا نعرض فقط الشكل
                            DAILY_CONFIG.forEach((item, index) => {
                                const card = document.createElement('div');
                                card.className = 'daily-day-card';
                                card.id = `day-card-${item.day}`;

                                // أيقونة مختلفة لليوم السابع
                                let icon = item.day === 7 ? 'fas fa-gem' : 'fas fa-coins';
                                let extraClass = item.day === 7 ? 'big-reward' : '';

                                card.className += ` ${extraClass}`;

                                card.innerHTML = `
                                                                                                                                <span style="font-size: 12px; font-weight:bold;">Day ${item.day}</span>
                                                                                                                                <i class="${icon}"></i>
                                                                                                                                <span style="font-size: 14px; font-weight:bold;">${item.reward}</span>
                                                                                                                            `;

                                container.appendChild(card);
                            });
                        }

                        // دالة التحقق من الحالة (هل يمكنه الاستلام؟)
                        function checkClaimStatus() {
                            const savedData = JSON.parse(localStorage.getItem('daily_reward_data')) || { lastClaimDate: null, streak: 0 };
                            const btn = document.getElementById('claim-daily-btn');
                            const streakMsg = document.getElementById('streak-message');
                            const timerMsg = document.getElementById('next-claim-timer');

                            const today = new Date().toDateString(); // "Fri Dec 05 2025"
                            const lastClaim = savedData.lastClaimDate;

                            let currentStreak = savedData.streak;

                            // 1. التحقق إذا كان المستخدم قد فوت يوم (كسر الستريك)
                            if (lastClaim) {
                                const lastDate = new Date(lastClaim);
                                const currentDate = new Date();
                                const diffTime = Math.abs(currentDate - lastDate);
                                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

                                // إذا مر أكثر من يومين (يعني فوت يوم أمس)، نعيد الستريك للصفر
                                // (ملاحظة: diffDays = 1 يعني أمس، diffDays > 2 يعني فوت يوم)
                                // الأدق: نستخدم مقارنة التواريخ

                                const yesterday = new Date();
                                yesterday.setDate(yesterday.getDate() - 1);

                                if (lastClaim !== today && lastClaim !== yesterday.toDateString()) {
                                    // المستخدم فوت يوم أمس
                                    currentStreak = 0; // ريست
                                }
                            }

                            // تحديث واجهة الكروت
                            DAILY_CONFIG.forEach((item, index) => {
                                const card = document.getElementById(`day-card-${item.day}`);
                                card.classList.remove('active', 'claimed');

                                if (index < currentStreak) {
                                    card.classList.add('claimed'); // أيام تم استلامها
                                    card.innerHTML += `<div style="position:absolute; inset:0; background:rgba(0,0,0,0.3); border-radius:10px; display:flex; align-items:center; justify-content:center; color:#28a745; font-size:24px;"><i class="fas fa-check"></i></div>`;
                                } else if (index === currentStreak) {
                                    // هذا هو اليوم الحالي للاستلام
                                    if (lastClaim !== today) {
                                        card.classList.add('active'); // جاهز للاستلام
                                    } else {
                                        // تم استلام هذا اليوم بالفعل (ينتظر الغد)
                                        card.classList.add('claimed');
                                    }
                                }
                            });

                            streakMsg.innerHTML = `الستريك الحالي: ${currentStreak} يوم <i class="fas fa-fire"></i>`;

                            // منطق الزر
                            if (lastClaim === today) {
                                // لقد استلم اليوم بالفعل
                                btn.disabled = true;
                                btn.innerHTML = 'عد غداً <i class="fas fa-hourglass-half" style="margin-right: 8px; animation: spin 3s infinite linear;"></i>';
                                btn.style.background = "#555";
                                timerMsg.style.display = "block";
                                startCountdown(); // تشغيل العد التنازلي لمنتصف الليل
                            } else {
                                // متاح للاستلام
                                btn.disabled = false;
                                btn.textContent = "استلام المكافأة";
                                btn.style.background = "var(--green-buy-btn)";
                                timerMsg.style.display = "none";

                                // إذا انتهى الأسبوع (الستريك 7)، نعيده للبداية في الكود المنطقي عند الضغط
                            }
                        }

                        // دالة تنفيذ الاستلام
                        function claimDailyReward() {
                            let savedData = JSON.parse(localStorage.getItem('daily_reward_data')) || { lastClaimDate: null, streak: 0 };
                            const today = new Date().toDateString();

                            // منطق الريست إذا كان الستريك 7 (أتم الدورة)
                            if (savedData.streak >= 7) {
                                savedData.streak = 0;
                            }

                            // تحديد الجائزة لليوم الحالي (المصفوفة تبدأ من 0، الستريك يبدأ من 0)
                            // اليوم الأول = index 0
                            const rewardAmount = DAILY_CONFIG[savedData.streak].reward;

                            // 1. إضافة النقاط
                            // نفترض أن المتغير userPoints موجود، ودالة التحديث موجودة
                            if (typeof userPoints !== 'undefined') {
                                userPoints += rewardAmount;
                                // حفظ النقاط في السيرفر والمحلي
                                localStorage.setItem('berlin_store_points_v3', userPoints);
                                updatePointsDisplaySafe(); // دالتك الموجودة لتحديث الشاشة
                                if (typeof saveCustomDataToFirestore === 'function') {
                                    saveCustomDataToFirestore('pointsBalance', userPoints);
                                }
                            }

                            // 2. تحديث بيانات الستريك
                            savedData.streak += 1;
                            savedData.lastClaimDate = today;
                            localStorage.setItem('daily_reward_data', JSON.stringify(savedData));

                            // 3. فيدباك بصري
                            showInfoToast(`🎉 تم استلام ${rewardAmount} نقطة!`, 3000, 'success');

                            // صوت النجاح
                            new Audio('https://www.myinstants.com/media/sounds/level-up-sound-effect.mp3').play().catch(() => { });

                            // تحديث الواجهة
                            checkClaimStatus();
                        }

                        // عداد تنازلي لليوم التالي
                        function startCountdown() {
                            const timerElem = document.getElementById('next-claim-timer');

                            const updateTimer = () => {
                                const now = new Date();
                                const tomorrow = new Date(now);
                                tomorrow.setDate(tomorrow.getDate() + 1);
                                tomorrow.setHours(0, 0, 0, 0);

                                const diff = tomorrow - now;

                                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                                const seconds = Math.floor((diff % (1000 * 60)) / 1000);

                                timerElem.textContent = `متاح بعد: ${hours}س ${minutes}د ${seconds}ث`;
                            };

                            updateTimer();
                            setInterval(updateTimer, 1000);
                        }

                        // تشغيل النظام
                        document.addEventListener('DOMContentLoaded', initDailyRewardSystem);

                        // =========================================================
                        // ✅ دوال النسخ والمكافآت (نسخة Global محسنة)
                        // =========================================================

                        // 1. دالة النسخ الشاملة (تعمل على الموبايل والكمبيوتر)
                        window.copyRewardCode = function (text, element) {
                            // التأكد من وجود النص
                            if (!text) return alert("لا يوجد كود للنسخ!");

                            // محاولة النسخ بالطريقة الحديثة
                            if (navigator.clipboard && window.isSecureContext) {
                                navigator.clipboard.writeText(text)
                                    .then(() => handleCopySuccess(element))
                                    .catch(() => legacyCopyMethod(text, element));
                            } else {
                                // النسخ بالطريقة التقليدية (للمتصفحات القديمة أو http)
                                legacyCopyMethod(text, element);
                            }
                        };

                        // 2. طريقة النسخ التقليدية (Fallback)
                        function legacyCopyMethod(text, element) {
                            const textArea = document.createElement("textarea");
                            textArea.value = text;

                            // إخفاء العنصر بطريقة لا تمنع التحديد
                            textArea.style.position = "fixed";
                            textArea.style.left = "-9999px";
                            textArea.style.top = "0";
                            textArea.setAttribute("readonly", "");
                            document.body.appendChild(textArea);

                            textArea.focus();
                            textArea.select();
                            textArea.setSelectionRange(0, 99999); // دعم iOS

                            try {
                                const successful = document.execCommand('copy');
                                if (successful) {
                                    handleCopySuccess(element);
                                } else {
                                    prompt("اضغط نسخ (Copy) يدوياً:", text);
                                }
                            } catch (err) {
                                console.error('Fallback copy failed', err);
                                prompt("اضغط نسخ (Copy) يدوياً:", text);
                            }

                            document.body.removeChild(textArea);
                        }

                        // 3. تأثير النجاح البصري
                        function handleCopySuccess(element) {
                            // تغيير شكل الزر
                            if (element) {
                                element.classList.add('copied');
                                const icon = element.querySelector('i');
                                if (icon) {
                                    // تغيير الأيقونة لصح
                                    icon.className = 'fas fa-check-circle';
                                    // إرجاع الأيقونة بعد ثانيتين
                                    setTimeout(() => {
                                        icon.className = 'fas fa-copy';
                                    }, 2000);
                                }
                                // إرجاع شكل الزر
                                setTimeout(() => {
                                    element.classList.remove('copied');
                                }, 2000);
                            }

                            // إظهار رسالة الموقع
                            if (typeof showInfoToast === 'function') {
                                showInfoToast("تم نسخ الكود بنجاح!", 4000, 'success');
                            } else {
                                alert("تم النسخ!");
                            }
                        }

                        // 4. دالة عرض نافذة المكافأة (الإجبارية)
                        window.showRewardModalForce = function (item) {
                            console.log("🎁 فتح نافذة المكافأة:", item.title);

                            // إزالة أي نافذة قديمة
                            const old = document.getElementById('force-reward-modal');
                            if (old) old.remove();

                            // إنشاء النافذة
                            const modal = document.createElement('div');
                            modal.id = 'force-reward-modal';

                            // تنسيق النافذة (Z-Index أقل من التوست)
                            modal.style.cssText = `
                                                                                                                                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                                                                                                                                background: rgba(0,0,0,0.9);
                                                                                                                                z-index: 2147483640; /* ⚠️ تأكدنا أن الرقم هنا أقل من التوست */
                                                                                                                                display: flex; flex-direction: column; align-items: center; justify-content: center;
                                                                                                                                font-family: 'Tajawal', sans-serif; backdrop-filter: blur(5px);
                                                                                                                                animation: fadeIn 0.3s ease-out;
                                                                                                                            `;

                            let extraContent = '';
                            if (item.type === 'code') {
                                const cleanValue = item.value.trim(); // تنظيف الكود
                                extraContent = `
                                                                                                                                    <p style="color:#e0e0e0; margin-bottom:10px; font-size:16px;">اضغط على الصندوق لنسخ البيانات:</p>
                                                                                                                                    <div class="code-box" onclick="window.copyRewardCode('${cleanValue}', this)" title="اضغط للنسخ">
                                                                                                                                        <span>${cleanValue}</span>
                                                                                                                                        <i class="fas fa-copy"></i>
                                                                                                                                    </div>
                                                                                                                                    <p style="color:#aaa; font-size:12px; margin-top:5px;">(تم حفظ نسخة في محفظتك)</p>
                                                                                                                                `;
                            } else {
                                extraContent = `
                                                                                                                                    <div style="background:rgba(255,255,255,0.1); padding:15px; border-radius:10px; margin:20px 0;">
                                                                                                                                        <p style="color:#fff; font-size:18px;">تم تفعيل اللقب بنجاح ✅</p>
                                                                                                                                        <p style="color:#ffd700; font-size:20px; margin-top:5px;">👑 ${item.title}</p>
                                                                                                                                    </div>`;
                            }

                            modal.innerHTML = `
                                                                                                                                <div style="background: linear-gradient(145deg, #1a1a2e, #16213e); padding:40px; border-radius:20px; text-align:center; border:2px solid #28a745; box-shadow: 0 0 50px rgba(40, 167, 69, 0.3); max-width:90%; width: 400px; position: relative;">
                                                                                                                                    <img src="https://cdn-icons-png.flaticon.com/512/7491/7491966.png" style="width: 80px; margin-bottom: 15px;">
                                                                                                                                    <h2 style="color:#28a745; margin:0 0 10px 0;">🎉 مبروووك!</h2>
                                                                                                                                    <h3 style="color:white; font-weight:normal; margin:0;">حصلت على: <span style="color:#ffd700; font-weight:bold;">${item.title}</span></h3>
                                                                                                                                    ${extraContent}
                                                                                                                                    <button onclick="document.getElementById('force-reward-modal').remove()"
                                                                                                                                            style="background: linear-gradient(45deg, #28a745, #218838); color:white; border:none; padding:12px 40px; font-size:16px; border-radius:50px; cursor:pointer; margin-top:20px; font-weight:bold; box-shadow: 0 5px 15px rgba(40,167,69,0.4);">
                                                                                                                                        حسناً، شكراً
                                                                                                                                    </button>
                                                                                                                                </div>
                                                                                                                            `;

                            document.body.appendChild(modal);

                            // تشغيل صوت الاحتفال
                            const audio = new Audio('https://www.myinstants.com/media/sounds/tada-fanfare-a.mp3');
                            audio.volume = 0.5;
                            audio.play().catch(() => { });
                        };

                        function copyRewardCode(text, element) {
                            // التأكد من أن النص موجود
                            if (!text) return alert("لا يوجد نص للنسخ!");

                            // محاولة النسخ بالطريقة الأولى (Modern API)
                            if (navigator.clipboard && window.isSecureContext) {
                                navigator.clipboard.writeText(text)
                                    .then(() => handleCopySuccess(element))
                                    .catch(() => legacyCopyMethod(text, element)); // لو فشلت، روح للطريقة القديمة
                            } else {
                                // لو المتصفح قديم أو مش آمن، استخدم الطريقة القديمة فوراً
                                legacyCopyMethod(text, element);
                            }
                        }

                        // طريقة النسخ التقليدية (المضمونة للموبايل والمتصفحات القديمة)
                        function legacyCopyMethod(text, element) {
                            const textArea = document.createElement("textarea");
                            textArea.value = text;

                            // خصائص لإخفاء العنصر دون التأثير على قابليته للتحديد
                            textArea.style.position = "fixed";
                            textArea.style.left = "-9999px";
                            textArea.style.top = "0";
                            textArea.setAttribute("readonly", ""); // لمنع ظهور الكيبورد في الموبايل
                            document.body.appendChild(textArea);

                            // تحديد النص (مهم جداً للموبايل)
                            textArea.focus();
                            textArea.select();
                            textArea.setSelectionRange(0, 99999); // دعم إضافي لأجهزة iOS

                            try {
                                const successful = document.execCommand('copy');
                                if (successful) {
                                    handleCopySuccess(element);
                                } else {
                                    // لو كل الطرق فشلت، اظهر النص في prompt للمستخدم ينسخه بنفسه
                                    prompt("فشل النسخ التلقائي. من فضلك انسخ الكود يدوياً:", text);
                                }
                            } catch (err) {
                                console.error('Fallback copy failed', err);
                                prompt("فشل النسخ التلقائي. من فضلك انسخ الكود يدوياً:", text);
                            }

                            document.body.removeChild(textArea);
                        }

                        // دالة التأثيرات البصرية (الأخضر وعلامة الصح)
                        function handleCopySuccess(element) {
                            // 1. تغيير شكل الصندوق
                            element.classList.add('copied');

                            // 2. تغيير الأيقونة
                            const icon = element.querySelector('i');
                            if (icon) {
                                const originalIcon = icon.className; // حفظ الأيقونة الأصلية
                                icon.className = 'fas fa-check-circle'; // تحويل لعلامة صح

                                // إرجاع الأيقونة بعد ثانيتين
                                setTimeout(() => {
                                    icon.className = 'fas fa-copy';
                                }, 2000);
                            }

                            // 3. إظهار الإشعار (Toast)
                            if (typeof showInfoToast === 'function') {
                                showInfoToast("تم نسخ الكود بنجاح! 📋", 2000, 'success');
                            } else {
                                alert("تم النسخ!"); // احتياطي لو دالة التوست مش موجودة
                            }

                            // 4. إرجاع الشكل للأصل بعد ثانيتين
                            setTimeout(() => {
                                element.classList.remove('copied');
                            }, 2000);
                        }

                        // دالة النسخ الاحتياطية (Fallback)
                        function fallbackCopyTextToClipboard(text, element) {
                            const textArea = document.createElement("textarea");
                            textArea.value = text;

                            // جعل العنصر غير مرئي
                            textArea.style.position = "fixed";
                            textArea.style.left = "-9999px";
                            textArea.style.top = "0";
                            document.body.appendChild(textArea);

                            textArea.focus();
                            textArea.select();

                            try {
                                const successful = document.execCommand('copy');
                                if (successful) {
                                    handleCopySuccess(element);
                                } else {
                                    showInfoToast("❌ فشل النسخ، يرجى التحديد والنسخ يدوياً", 3000, 'error');
                                }
                            } catch (err) {
                                console.error('Fallback: Oops, unable to copy', err);
                                showInfoToast("❌ حدث خطأ أثناء النسخ", 3000, 'error');
                            }

                            document.body.removeChild(textArea);
                        }

                        // دالة التأثير البصري عند النجاح
                        function handleCopySuccess(element) {
                            // 1. تغيير شكل الصندوق
                            element.classList.add('copied');

                            // 2. تغيير الأيقونة
                            const icon = element.querySelector('i');
                            if (icon) icon.className = 'fas fa-check-circle';

                            // 3. إظهار رسالة الموقع (Toast) بدلاً من الـ Alert
                            showInfoToast("تم نسخ الكود بنجاح! 📋", 2000, 'success');

                            // 4. إعادة الشكل للأصل بعد ثانيتين
                            setTimeout(() => {
                                element.classList.remove('copied');
                                if (icon) icon.className = 'fas fa-copy';
                            }, 2000);
                        }

                        // دالة عرض الإشعار (تأكد إنها موجودة عندك)
                        function showInfoToast(message, duration = 3000, type = 'default') {
                            let container = document.getElementById('toast-container');
                            if (!container) {
                                container = document.createElement('div');
                                container.id = 'toast-container';
                                document.body.appendChild(container);
                            }

                            const toast = document.createElement('div');
                            toast.className = `toast-notification ${type}`;

                            // إضافة أيقونة حسب النوع
                            let iconHtml = '';
                            if (type === 'success') iconHtml = '<i class="fas fa-check-circle"></i>';
                            if (type === 'error') iconHtml = '<i class="fas fa-times-circle"></i>';

                            toast.innerHTML = `${iconHtml} <span>${message}</span>`;
                            container.appendChild(toast);

                            // تفعيل الأنيميشن (Show)
                            requestAnimationFrame(() => {
                                toast.classList.add('show');
                            });

                            // إخفاء وحذف بعد المدة المحددة
                            setTimeout(() => {
                                toast.classList.remove('show');
                                setTimeout(() => {
                                    toast.remove();
                                }, 300);
                            }, duration);
                        }

                        // ==========================================
                        // 🔊 MONEY SOUND EFFECT (KA-CHING)
                        // ==========================================

                        // 1. تعريف رابط الصوت (صوت كاشير واضح)
                        const cashSoundEffect = new Audio('https://www.myinstants.com/en/instant/buy/?utm_source=copy&utm_medium=share');
                        cashSoundEffect.volume = 0.6; // مستوى الصوت (عشان ميكونش مزعج)

                        // 2. دالة التشغيل
                        function playCashSound() {
                            // نرجع الصوت للبداية لو كان شغال قبل كده
                            cashSoundEffect.currentTime = 0;
                            // تشغيل
                            cashSoundEffect.play().catch(e => console.log("Audio play failed:", e));
                        }

                        // 3. ربط الصوت بزر تأكيد فودافون كاش
                        document.addEventListener('DOMContentLoaded', function () {
                            const vfConfirmBtn = document.getElementById('vodafone-confirm-yes');

                            if (vfConfirmBtn) {
                                // حفظ الوظيفة القديمة للزر (عشان منلغيش الدفع)
                                const oldOnClick = vfConfirmBtn.onclick;

                                vfConfirmBtn.onclick = function (e) {
                                    // تشغيل الصوت أولاً
                                    playCashSound();

                                    // ثم تنفيذ الدفع الطبيعي
                                    if (typeof oldOnClick === 'function') {
                                        oldOnClick(e);
                                    }

                                    // لو مكنش فيه دالة قديمة، ممكن يكون الزر ده بيعمل submit للفورم
                                    // الكود الحالي عندك بيعتمد على event listener، فإحنا هنضيف الصوت كـ Listener جديد
                                };

                                // طريقة أضمن: إضافة مستمع حدث جديد
                                vfConfirmBtn.addEventListener('click', playCashSound);
                            }

                            // 4. ربط الصوت بزر تأكيد بايبال (اختياري)
                            const ppConfirmBtn = document.getElementById('paypal-confirm-yes');
                            if (ppConfirmBtn) {
                                ppConfirmBtn.addEventListener('click', playCashSound);
                            }
                        });

                        // 1. تهيئة الويش ليست من الذاكرة
                        let wishlist = JSON.parse(localStorage.getItem('my_wishlist')) || [];

                        // تحديث العداد عند تحميل الصفحة
                        document.addEventListener('DOMContentLoaded', () => {
                            updateWishlistCount();
                            // سنقوم بتحديث أيقونات المنتجات بعد تحميلها
                            setTimeout(updateAllProductHearts, 1000);
                        });

                        // 2. دالة التبديل (إضافة/حذف)
                        function toggleWishlist(productId, btnElement) {
                            // منع الحدث من الانتقال للعنصر الأب (عشان لما تدوس قلب مايفتحش صفحة المنتج)
                            if (event) event.stopPropagation();

                            const index = wishlist.indexOf(productId);

                            if (index === -1) {
                                // غير موجود -> ضيفه
                                wishlist.push(productId);
                                btnElement.classList.add('active');
                                btnElement.innerHTML = '<i class="fas fa-heart"></i>'; // قلب ممتلئ
                                showInfoToast(" تمت الإضافة الى قائمة الأمنيات", 2000, 'success');
                            } else {
                                // موجود -> احذفه
                                wishlist.splice(index, 1);
                                btnElement.classList.remove('active');
                                btnElement.innerHTML = '<i class="far fa-heart"></i>'; // قلب فارغ
                                showInfoToast(" تمت الإزالة من قائمة الأمنيات", 2000);

                                // لو النافذة مفتوحة، حدثها عشان المنتج يختفي فوراً
                                if (document.getElementById('wishlistModal').classList.contains('is-visible')) {
                                    renderWishlist();
                                }
                            }

                            // الحفظ في الذاكرة وتحديث العداد
                            localStorage.setItem('my_wishlist', JSON.stringify(wishlist));
                            updateWishlistCount();
                        }

                        function updateWishlistCount() {
                            const count = wishlist.length;

                            // 1. العداد القديم (لو لسه موجود في الناف بار من بره)
                            const navCountEl = document.getElementById('wishlist-count');
                            if (navCountEl) {
                                navCountEl.textContent = count;
                                navCountEl.style.display = count > 0 ? 'flex' : 'none'; // أو block حسب تنسيقك
                            }

                            // 2. العداد الجديد (داخل القائمة المنسدلة)
                            const dropdownCountEl = document.getElementById('dropdown-wishlist-count');
                            if (dropdownCountEl) {
                                dropdownCountEl.textContent = count;
                                // نظهره بس لو فيه منتجات
                                dropdownCountEl.style.display = count > 0 ? 'inline-block' : 'none';
                            }
                        }

                        function openWishlistModal() {
                            const modal = document.getElementById('wishlistModal');
                            const container = document.getElementById('wishlistItemsContainer');
                            const emptyMsg = document.getElementById('emptyWishlistMsg');

                            if (!modal || !container) return;

                            container.innerHTML = ''; // تنظيف

                            if (wishlist.length === 0) {
                                if (emptyMsg) emptyMsg.style.display = 'block';
                            } else {
                                if (emptyMsg) emptyMsg.style.display = 'none';

                                wishlist.forEach(id => {
                                    const product = productsData[id];
                                    if (product) {
                                        const card = document.createElement('div');
                                        card.className = 'product-item';

                                        // 👇 الكود الجديد للكارت مع زر الحذف
                                        card.innerHTML = `
                                                                                                                                                    <div class="wishlist-remove-btn" onclick="removeFromWishlist(event, '${id}', this)" title="حذف من القائمة">
                                                                                                                                                        <i class="fas fa-times"></i>
                                                                                                                                                    </div>

                                                                                                                                                    <div class="product-image-wrapper" style="height: 100px;">
                                                                                                                                                        <img src="${product.image}" alt="${product.title}">
                                                                                                                                                    </div>
                                                                                                                                                    <h3 style="font-size: 13px; margin: 5px 0; min-height: 30px;">${product.title}</h3>
                                                                                                                                                    <p style="color: var(--accent-yellow); font-weight: bold; font-size: 14px;">${product.price} EGP</p>
                                                                                                                                                    <button class="buy-btn" onclick="performAddToCart('${id}', 1); closeModal('wishlistModal');" style="padding: 5px 10px; font-size: 12px; width: 100%;">
                                                                                                                                                        أضف للسلة
                                                                                                                                                    </button>
                                                                                                                                                `;
                                        container.appendChild(card);
                                    }
                                });
                            }

                            showModal('wishlistModal');
                        }

                        // دالة الحذف المباشر من نافذة الويش ليست
                        function removeFromWishlist(event, productId, btnElement) {
                            event.stopPropagation(); // منع فتح صفحة المنتج

                            // 1. الحذف من المصفوفة والذاكرة (باستخدام الدالة الأساسية)
                            // نمرر null مكان العنصر لأننا مش بنحدث زرار القلب، احنا بنحذف الكارت كله
                            const index = wishlist.indexOf(productId);
                            if (index > -1) {
                                wishlist.splice(index, 1);
                                localStorage.setItem('my_wishlist', JSON.stringify(wishlist));
                                updateWishlistCount();
                                showInfoToast("🗑️ تم الحذف من القائمة", 2000);
                            }

                            // 2. حذف الكارت من الشاشة فوراً (أنيميشن اختفاء)
                            const card = btnElement.closest('.product-item');
                            if (card) {
                                card.style.transition = "all 0.3s ease";
                                card.style.transform = "scale(0)";
                                setTimeout(() => {
                                    card.remove();
                                    // لو القائمة فضيت، نظهر رسالة "فارغة"
                                    if (wishlist.length === 0) {
                                        const emptyMsg = document.getElementById('emptyWishlistMsg');
                                        if (emptyMsg) emptyMsg.style.display = 'block';
                                    }
                                }, 300);
                            }

                            // 3. تحديث زر القلب في الصفحة الرئيسية (لو مفتوح)
                            const mainPageBtn = document.getElementById('productPageWishlistBtn');
                            if (mainPageBtn && window.location.hash.includes(productId)) {
                                mainPageBtn.classList.remove('active');
                                mainPageBtn.innerHTML = '<i class="far fa-heart"></i>';
                            }
                        }

                        // =========================================
                        // 🔥 دوال التعامل مع البيانات (نظام هجين ذكي)
                        // =========================================

                        // 1. دالة الحفظ (Save)
                        function saveCustomDataToFirestore(key, value) {
                            // 🛑 شرط المرور: لو البيانات هي "نقاط"، احفظها محلياً فقط
                            if (key === 'pointsBalance') {
                                localStorage.setItem('berlin_store_points_v2', value);
                                // تحديث متغير النقاط العام لضمان تزامن الصفحة
                                if (typeof window.userPoints !== 'undefined') {
                                    window.userPoints = value;
                                }
                                console.log(`[LOCAL-SAVE] 💰 Points saved locally: ${value}`);
                                return; // وقف الدالة هنا، لا تروح للفايربيس
                            }

                            // ✅ لو البيانات مش نقاط (رتب، ألقاب..)، كمل للفايربيس عادي
                            const user = firebase.auth().currentUser;
                            if (!user || typeof firebase.firestore !== 'function') return;

                            const db = firebase.firestore();
                            const dataToSave = {};
                            dataToSave[key] = value;

                            db.collection('user_data').doc(user.uid).set(dataToSave, { merge: true })
                                .then(() => {
                                    console.log(`[FIREBASE-SAVE] 🔥 Data saved: ${key} = ${value}`);
                                })
                                .catch(error => console.error(`[FIREBASE-ERROR] ❌ Error saving ${key}:`, error));
                        }

                        // 2. دالة الاسترجاع (Load)
                        function getCustomDataFromFirestore(key, defaultValue) {
                            // 🛑 شرط المرور: لو بنطلب "نقاط"، هاتها من LocalStorage
                            if (key === 'pointsBalance') {
                                return new Promise((resolve) => {
                                    const localPoints = localStorage.getItem('berlin_store_points_v2');
                                    if (localPoints !== null) {
                                        const parsedPoints = parseInt(localPoints);
                                        // تحديث المتغير العام
                                        window.userPoints = parsedPoints;
                                        console.log(`[LOCAL-LOAD] 💰 Loaded points: ${parsedPoints}`);
                                        resolve(parsedPoints);
                                    } else {
                                        console.log(`[LOCAL-LOAD] ⚠️ No local points found, returning default.`);
                                        resolve(defaultValue);
                                    }
                                });
                            }

                            // ✅ لو بنطلب (رتب، ألقاب..)، هاتها من الفايربيس
                            const user = firebase.auth().currentUser;
                            // لو المستخدم مش مسجل أو الفايربيس مش جاهز، رجع القيمة الافتراضية
                            if (!user || typeof firebase.firestore !== 'function') return Promise.resolve(defaultValue);

                            const db = firebase.firestore();

                            return db.collection('user_data').doc(user.uid).get()
                                .then(doc => {
                                    if (doc.exists && doc.data()[key] !== undefined) {
                                        console.log(`[FIREBASE-LOAD] 🔥 Data loaded: ${key} = ${doc.data()[key]}`);
                                        return doc.data()[key];
                                    } else {
                                        console.log(`[FIREBASE-LOAD] ⚠️ Value for ${key} not found on server.`);
                                        return defaultValue;
                                    }
                                })
                                .catch(error => {
                                    console.error(`[FIREBASE-ERROR] ❌ Error reading ${key}:`, error);
                                    return defaultValue;
                                });
                        }

                        function loadUserPoints() {
                            // تم التعطيل لاستخدام النظام المحلي
                        }


                        // ==========================================
                        // 📦 نظام "اصنع الباندل الخاص بك"
                        // ==========================================

                        // 1. قائمة الألعاب المتاحة في الباندل (استخدم IDs الموجودة في productsData)
                        // يمكنك إضافة أي عدد تريده هنا
                        const bundlePoolIds = [
                            'cod_mw_2007_offline', 'cod_world_at_war_offline', 'cod2_offline',
                            'cod1_offline', 'gta', 'witcher3_offline', 'hollowknight',
                            'residentevil_offline', 'residentevil2_remake_offline', 'residentevil3_remake_offline',
                            'mafia', 'batman_arkham', 'mad_max', 'assassins_creed_2' // ضيف IDs منتجاتك الحقيقية هنا
                        ];

                        let selectedBundleItems = []; // مصفوفة لتخزين الـ IDs المختارة

                        // ==========================================
                        // 🎮 SYSTEM V2.0: إعدادات الرتب والنقاط
                        // ==========================================

                        // 1. إعدادات الرتب (يمكنك تعديل الأرقام هنا بسهولة)
                        const RANK_SYSTEM_CONFIG = [
                            { name: 'BRONZE', minOrders: 0, color: '#cd7f32', cssClass: 'rank-bronze', icon: '🥉' },
                            { name: 'GOLD', minOrders: 5, color: '#ffd700', cssClass: 'rank-gold', icon: '🥇' },
                            { name: 'DIAMOND', minOrders: 10, color: '#00e5ff', cssClass: 'rank-diamond', icon: '💎' },
                        ];

                        // 2. إعدادات النقاط
                        const POINTS_PER_ORDER = 100; // عدد النقاط لكل طلب مكتمل

                        // ==========================================
                        // ⚙️ دوال الحساب والمعالجة
                        // ==========================================

                        // دالة تحديد الرتبة الحالية بناءً على عدد الطلبات
                        function getCurrentRank(orderCount) {
                            // نقوم بعكس المصفوفة للعثور على أعلى رتبة حققها المستخدم
                            return [...RANK_SYSTEM_CONFIG].reverse().find(rank => orderCount >= rank.minOrders) || RANK_SYSTEM_CONFIG[0];
                        }

                        // دالة تحديد الهدف القادم
                        function getNextRank(orderCount) {
                            return RANK_SYSTEM_CONFIG.find(rank => rank.minOrders > orderCount) || null;
                        }

                        function updateGamificationUI(orderCount) {
                            // التأكد من أن العدد رقم صحيح
                            const count = parseInt(orderCount) || 0;

                            // جلب بيانات الرتبة الحالية والقادمة
                            const currentRank = getCurrentRank(count);
                            const nextRank = getNextRank(count);

                            // 1. حساب النقاط التراكمي (في حال لم تكن محملة من قاعدة البيانات)
                            const calculatedPoints = count * POINTS_PER_ORDER;

                            // 🔥 تحديث المتغير العالمي (البنك) 🔥
                            // إذا لم يكن المتغير معرفاً (لم يتم تحميله من Firebase بعد)، نستخدم القيمة المحسوبة
                            if (typeof window.userPoints === 'undefined') {
                                window.userPoints = calculatedPoints;
                            }

                            // 2. تعريف عناصر الواجهة التي تحتاج لتحديث
                            const elements = {
                                rankName: document.getElementById('user-rank-name'),
                                rankIcon: document.getElementById('user-rank-icon'),
                                nextTarget: document.getElementById('next-rank-message'),
                                progressBar: document.getElementById('rank-progress-bar'),
                                navBadge: document.getElementById('navbar-rank-badge'),
                                dropdownBadge: document.getElementById('dropdown-rank-badge')
                            };

                            // 3. تحديث الأرقام في كل مكان (المتجر والبروفايل)
                            if (elements.pointsProfile) elements.pointsProfile.textContent = window.userPoints;
                            if (elements.pointsShop) elements.pointsShop.textContent = window.userPoints;

                            // 4. تحديث بيانات الرتبة (الاسم والأيقونة)
                            if (elements.rankName) {
                                elements.rankName.textContent = currentRank.name;
                                elements.rankName.style.color = currentRank.color;
                                elements.rankName.style.textShadow = `0 0 10px ${currentRank.color}`;
                            }
                            if (elements.rankIcon) elements.rankIcon.textContent = currentRank.icon;

                            // 5. تحديث البادجات في الهيدر والقائمة المنسدلة
                            [elements.navBadge, elements.dropdownBadge].forEach(badge => {
                                if (badge) {
                                    badge.textContent = `${currentRank.icon} ${currentRank.name}`;
                                    badge.style.background = currentRank.color;
                                    badge.style.color = '#000'; // نص أسود ليكون واضحاً
                                    badge.style.boxShadow = `0 0 10px ${currentRank.color}`;
                                    badge.style.display = 'inline-block';
                                }
                            });

                            // 6. منطق شريط التقدم (Progress Bar)
                            if (elements.progressBar) {
                                if (nextRank) {
                                    const prevRankOrders = currentRank.minOrders || 0;
                                    const totalSteps = nextRank.minOrders - prevRankOrders;
                                    const currentSteps = count - prevRankOrders;

                                    // معادلة النسبة المئوية
                                    let progress = 0;
                                    if (totalSteps > 0) {
                                        progress = (currentSteps / totalSteps) * 100;
                                    }
                                    // التأكد أن النسبة لا تتعدى 100%
                                    progress = Math.min(100, Math.max(0, progress));

                                    elements.progressBar.style.width = `${progress}%`;

                                    if (elements.nextTarget) {
                                        const remaining = nextRank.minOrders - count;
                                        elements.nextTarget.innerHTML = `باقي <strong>${remaining}</strong> طلبات للوصول إلى <span style="color:${nextRank.color}">${nextRank.name}</span>`;
                                    }
                                } else {
                                    // وصل لأعلى رتبة
                                    elements.progressBar.style.width = '100%';
                                    if (elements.nextTarget) elements.nextTarget.innerHTML = "🎉 أنت أسطورة المتجر! وصلت للحد الأقصى.";
                                }
                            }

                            // 7. تحديث إطار الصور (Avatar Border)
                            const avatarImages = document.querySelectorAll('.profile-avatar-large, #nav-user-img, #dropdown-user-img');
                            avatarImages.forEach(img => {
                                // إزالة الكلاسات القديمة
                                if (typeof RANK_SYSTEM_CONFIG !== 'undefined') {
                                    RANK_SYSTEM_CONFIG.forEach(r => img.classList.remove(r.cssClass));
                                }
                                // إضافة الستايل الجديد
                                img.classList.add(currentRank.cssClass);
                                img.style.borderColor = currentRank.color;
                                img.style.boxShadow = `0 0 15px ${currentRank.color}`;
                            });
                        }

                        function openBundleBuilder() {
                            // 1. إخفاء كل الأقسام وإظهار قسم الباندل
                            document.querySelectorAll('.section').forEach(s => s.style.display = 'none');
                            const section = document.getElementById('build-bundle-section');
                            if (section) section.style.display = 'block';
                            window.scrollTo(0, 0);

                            const container = document.getElementById('bundle-games-grid');
                            if (!container) return;

                            container.innerHTML = '';
                            selectedBundleItems = []; // تصفير الاختيارات
                            updateBundleUI();

                            // 2. ✅ تعريف منتج الديسكورد المخصص للباندل (حقن مباشر في البيانات)
                            // بنعمل ده عشان يبقى ليه "ID" ونقدر نختاره زي باقي المنتجات
                            productsData['discord_deco_499_bundle'] = {
                                id: 'discord_deco_499_bundle',
                                title: 'Discord Decoration ($4.99)',
                                image: './images/discord-decorations.png',
                                shortDescription: 'أي ديكور بسعر 4.99$',
                                price: 0 // السعر مش مهم هنا لأن الباندل سعره ثابت
                            };

                            // 3. ✅ القائمة الثابتة (الاشتراكات والبرامج المطلوبة)
                            // تأكد ان الـ IDs دي مطابقة للموجودة في productsData عندك
                            let bundlePoolIds = [
                                'netflix',           // نتفليكس
                                'crunchyroll',       // كرانشي رول
                                'disney',            // ديزني بلس
                                'wallpaperEngine',   // والبيبر إنجن
                                'discord_deco_499_bundle' // ديكور الديسكورد اللي ضفناه فوق
                            ];

                            // 4. ✅ الإضافة الديناميكية: هات كل ألعاب الأوفلاين تلقائياً
                            for (const productId in productsData) {
                                const product = productsData[productId];
                                // الشرط: الكاتيجوري يكون offline-steam أو cod-games (لأنها أوفلاين برضه)
                                // ونتأكد إننا مش بنضيف حاجة متكررة
                                if ((product.category === 'offline-steam' || product.category === 'cod-games') && !bundlePoolIds.includes(productId)) {
                                    bundlePoolIds.push(productId);
                                }
                            }

                            // 5. رسم الكروت في الصفحة
                            bundlePoolIds.forEach(id => {
                                if (productsData[id]) {
                                    const product = productsData[id];

                                    // تحسين: لو المنتج اشتراك، نوضح انه "شهر واحد" في العنوان
                                    let displayTitle = product.title;
                                    if (['netflix', 'crunchyroll', 'disney'].includes(id)) {
                                        displayTitle += " (1 Month)";
                                    }

                                    const card = document.createElement('div');
                                    card.className = 'product-item';
                                    card.style.cursor = 'pointer';
                                    // إضافة data-id للمساعدة في التحديد
                                    card.dataset.id = id;

                                    card.onclick = () => toggleBundleItem(id, card);

                                    card.innerHTML = `
                                                                                                                                                                <div class="product-image-wrapper" style="height: 120px; pointer-events: none;">
                                                                                                                                                                    <img src="${product.image}" alt="${product.title}">
                                                                                                                                                                </div>
                                                                                                                                                                <h3 style="font-size: 13px; min-height: 35px; margin: 5px 0; pointer-events: none;">${displayTitle}</h3>
                                                                                                                                                                <p style="color: #ccc; font-size: 11px; pointer-events: none;">اضغط للإضافة</p>
                                                                                                                                                            `;
                                    container.appendChild(card);
                                }
                            });
                        }

                        // دالة اختيار/إلغاء اختيار لعبة
                        function toggleBundleItem(id, cardElement) {
                            const index = selectedBundleItems.indexOf(id);

                            if (index > -1) {
                                // اللعبة موجودة بالفعل -> قم بإزالتها
                                selectedBundleItems.splice(index, 1);
                                cardElement.classList.remove('selected-in-bundle');
                            } else {
                                // اللعبة غير موجودة -> تحقق من العدد قبل الإضافة
                                if (selectedBundleItems.length < 3) {
                                    selectedBundleItems.push(id);
                                    cardElement.classList.add('selected-in-bundle');
                                } else {
                                    showInfoToast("⚠️ يمكنك اختيار 3 ألعاب فقط!", 2000, 'error');
                                    // هزة بسيطة للكارت ليعرف المستخدم أنه لا يمكنه الاختيار
                                    cardElement.style.animation = "shake 0.3s ease";
                                    setTimeout(() => cardElement.style.animation = "", 300);
                                }
                            }
                            updateBundleUI();
                        }

                        // تحديث الشريط السفلي (العداد والزر)
                        function updateBundleUI() {
                            const counter = document.getElementById('bundle-counter');
                            const btn = document.getElementById('add-bundle-btn');

                            counter.textContent = selectedBundleItems.length;

                            if (selectedBundleItems.length === 3) {
                                btn.disabled = false;
                                btn.innerHTML = '<i class="fas fa-check"></i> إضافة للسلة';
                                btn.style.backgroundColor = "var(--green-buy-btn)";
                            } else {
                                btn.disabled = true;
                                const remaining = 3 - selectedBundleItems.length;
                                btn.innerHTML = `اختر ${remaining} ألعاب أخرى`;
                                btn.style.backgroundColor = "#555";
                            }
                        }

                        function addCustomBundleToCart() {
                            if (selectedBundleItems.length !== 3) return;

                            // 1. تجميع أسماء الألعاب المختارة
                            const gameNames = selectedBundleItems.map(id => productsData[id].title).join(" + ");

                            // 2. تحديد السعر (150 جنيه)
                            let bundlePrice = 150;
                            if (typeof currentCurrency !== 'undefined' && currentCurrency === 'USD') {
                                bundlePrice = (150 / exchangeRate).toFixed(2);
                            }

                            // 3. إنشاء كائن السلة
                            const uniqueID = 'custom_bundle_' + Date.now();
                            const cartItem = {
                                id: uniqueID,
                                title: 'Custom Gamer Bundle (3 Games)',
                                price: parseFloat(bundlePrice),
                                image: './images/bundle_box_icon.png', // تأكد من وجود الصورة
                                quantity: 1,
                                selectedOption: {
                                    title: `3 Games Pack`,
                                    price: parseFloat(bundlePrice)
                                },
                                // البيانات الإضافية
                                'Bundle Contents': gameNames,
                                'Bundle Type': '3 for 150 Offer',
                                'Games IDs': selectedBundleItems.join(', ')
                            };

                            // 4. الحفظ في السلة (Local Storage)
                            let currentCart = JSON.parse(localStorage.getItem('cart')) || {};
                            currentCart[uniqueID] = cartItem;
                            localStorage.setItem('cart', JSON.stringify(currentCart));

                            // 🔥🔥🔥 5. الإصلاح: تحديث الواجهة فوراً 🔥🔥🔥
                            // تحديث المتغير العالمي للسلة عشان باقي الدوال تشوفه
                            if (typeof window.cart !== 'undefined') {
                                window.cart = currentCart;
                            } else {
                                cart = currentCart;
                            }

                            // تحديث العداد الأحمر
                            if (typeof updateCartCount === 'function') {
                                updateCartCount();
                            }

                            // 6. إظهار رسالة نجاح وفتح السلة
                            showInfoToast(" تمت إضافة الباندل للسلة!", 2000, 'success');

                            // تأخير بسيط ثم فتح السلة وتحديث محتواها
                            setTimeout(() => {
                                showModal('cartModal');
                                if (typeof renderCart === 'function') {
                                    renderCart(); // إعادة رسم السلة فوراً
                                }
                            }, 300);
                        }

                        // دالة للتحكم في ترجمة جوجل
                        function triggerGoogleTranslate(langCode) {
                            // البحث عن القائمة المنسدلة الخاصة بجوجل
                            const googleCombo = document.querySelector(".goog-te-combo");

                            if (googleCombo) {
                                googleCombo.value = langCode;
                                // محاكاة حدث التغيير ليبدأ جوجل في الترجمة
                                googleCombo.dispatchEvent(new Event("change"));
                            } else {
                                console.error("Google Translate dropdown not found yet.");
                            }
                        }

                        // دالة تغيير العملة واللغة (الموجودة عندك، قم بتحديثها)
                        function changeCurrency() {
                            const selector = document.getElementById('currency-selector');
                            if (!selector) return;

                            currentCurrency = selector.value;

                            if (currentCurrency === 'USD') {
                                // تحويل للإنجليزية
                                triggerGoogleTranslate('en');
                                setLanguage('en'); // دالتك الخاصة بتغيير النصوص الثابتة
                            } else {
                                // تحويل للعربية
                                triggerGoogleTranslate('ar');
                                setLanguage('ar'); // دالتك الخاصة بتغيير النصوص الثابتة
                            }

                            // إعادة تحميل الأقسام لتحديث الأسعار
                            loadAllSections();
                            loadPlaystationSection();
                            renderCart();

                            // تحديث حاسبة البوستينج لو موجودة
                            if (typeof calculateBoostingPrice === 'function') {
                                calculateBoostingPrice();
                            }

                            const message = `Currency changed to ${currentCurrency}`;
                            showInfoToast(message, 3000);
                        }



                        // ==========================================
                        // 🎁 LOOT BOX SYSTEM (REWARDS SHOP)
                        // ==========================================

                        const lootItems = [

                            {
                                id: 'title_king',
                                title: 'لقب "KING" 👑',
                                description: 'إضافة لقب "KING" ذهبي يظهر بجوار اسمك في المتجر.',
                                price: 4000,
                                image: './images/king-icon.png',
                                type: 'title-badge', // 👈 النوع الجديد
                                value: 'king-title-badge', // 👈 كلاس CSS الذي يمثل اللقب
                                category: 'status'
                            },
                            {
                                id: 'discount_5', // تغيير الـ ID ليعكس القيمة
                                title: 'كود خصم 5%',
                                description: 'كود خصم صالح لجميع المنتجات.',
                                price: 1000,
                                image: './images/chest_bronze.png',
                                type: 'code',
                                value: 'BERLLINSTOREEEE541241251251251', // الكود الجديد
                                category: 'discount'
                            },
                            {
                                id: 'discount_10',
                                title: 'كود خصم 10%',
                                description: 'خصم قوي لطلباتك القادمة!',
                                price: 2500,
                                image: './images/chest_silver.png',
                                type: 'code',
                                value: 'MEGA10', // الكود الجديد
                                category: 'discount'
                            },
                            // ... (باقي العناصر كما هي)
                        ];

                        // 2. دالة رسم الصناديق في الصفحة


                        // 5. دوال مساعدة (للحفظ والنسخ)
                        function copyRewardCode() {
                            const code = document.getElementById('rewardCodeText').innerText;
                            navigator.clipboard.writeText(code);
                            showInfoToast("تم نسخ الكود! استخدمه في السلة.", 2000);
                        }

                        function saveDiscountCode(code) {
                            // جلب المحفظة الحالية أو إنشاء واحدة فارغة
                            let inventory = JSON.parse(localStorage.getItem('my_coupon_inventory')) || [];

                            // إضافة الكود الجديد إلى المحفظة (نسمح بالتكرار هنا)
                            inventory.push(code);

                            // حفظ المحفظة في ذاكرة المتصفح
                            localStorage.setItem('my_coupon_inventory', JSON.stringify(inventory));

                            console.log(`تم إضافة الكود ${code} إلى محفظة LocalStorage. المحفظة الحالية:`, inventory);
                        }

                        function unlockFrame(frameId) {
                            let unlocked = JSON.parse(localStorage.getItem('unlocked_frames')) || [];
                            if (!unlocked.includes(frameId)) {
                                unlocked.push(frameId);
                                localStorage.setItem('unlocked_frames', JSON.stringify(unlocked));
                            }
                        }

                        // تشغيل المتجر عند التحميل
                        document.addEventListener('DOMContentLoaded', () => {
                            // استدعاء الدالة بعد تحميل الصفحة لضمان وجود العناصر
                            renderLootShop();
                        });

                        function loadProfileData(user) {
                            if (user) {
                                console.log("✅ جاري تحميل بيانات البروفايل...");

                                // 1. تعبئة البيانات الأساسية
                                document.getElementById('currentProfileEmail').textContent = user.email;
                                const displayName = user.displayName || user.email.split('@')[0];

                                const nameInput = document.getElementById('profileDisplayName');
                                if (nameInput) nameInput.value = displayName;

                                const headerNameEl = document.getElementById('header-display-name');
                                if (headerNameEl) headerNameEl.textContent = displayName;

                                // 🔥🔥 بداية التعديلات 🔥🔥
                                const dropdownNameEl = document.getElementById('dropdown-user-name');
                                if (dropdownNameEl) dropdownNameEl.textContent = displayName;

                                // 🚨 يجب التأكد من وجود عنصر لعرض اللقب في البروفايل (سواء كان بجوار الاسم أو كبادج)

                                // 1. قراءة اللقب المحفوظ (مثل 'king-title-badge')
                                const savedTitleClass = localStorage.getItem('user_active_title');

                                // 2. تطبيق اللقب على اسم العرض في البروفايل والقائمة المنسدلة
                                if (savedTitleClass && typeof applyUserTitle === 'function') {
                                    applyUserTitle(savedTitleClass);
                                }
                                // 🔥🔥 نهاية التعديلات 🔥🔥

                                const profilePic = document.getElementById('currentProfilePic');
                                if (profilePic) profilePic.src = user.photoURL || "./images/BerlinStore.png";

                                // 📅 2. (إصلاح قوي) كود إظهار تاريخ الانضمام
                                const joinDateEl = document.getElementById('join-date-text');

                                if (joinDateEl) {
                                    // طباعة البيانات في الكونسول للتأكد
                                    console.log("User Metadata:", user.metadata);

                                    // محاولة قراءة التاريخ من خاصيتين مختلفتين (حسب اصدار فايربيس)
                                    const rawDate = user.metadata.creationTime || user.metadata.createdAt;

                                    if (rawDate) {
                                        const date = new Date(rawDate);
                                        // التأكد أن التاريخ صحيح
                                        if (!isNaN(date.getTime())) {
                                            // تنسيق التاريخ: شهر وسنة فقط (أشيك) أو يوم شهر سنة
                                            joinDateEl.textContent = date.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' });
                                        } else {
                                            joinDateEl.textContent = "غير متاح";
                                        }
                                    } else {
                                        joinDateEl.textContent = "جديد";
                                    }
                                } else {
                                    console.error("❌ عنصر التاريخ (join-date-text) غير موجود في HTML!");
                                }

                                // 3. تحديث المتغيرات العامة
                                initialDisplayName = displayName;
                                selectedAvatarUrl = null;

                                // 4. استدعاء جلب الطلبات لتحديث باقي الإحصائيات
                                if (typeof fetchUserOrders === 'function') {
                                    fetchUserOrders(true);
                                }
                            }
                        }

                        function updateRankProgress(orderCount) {
                            const progressBar = document.getElementById('rank-progress-fill');
                            const currentRankText = document.getElementById('current-rank-text');
                            const nextRankTarget = document.getElementById('next-rank-target');

                            if (!progressBar || !currentRankText) return;

                            let progressPercent = 0;
                            let currentRankName = "";
                            let message = "";

                            // منطق الرانكات: برونز (<1)، جولد (1-4)، دايموند (5+)
                            if (orderCount >= 5) {
                                // 💎 واصل للماكس (Diamond)
                                currentRankName = '<i class="fas fa-gem" style="color: #00e5ff; margin-left: 5px;"></i> DIAMOND';
                                progressPercent = 100;
                                message = "أنت في أعلى مستوى! أنت أسطورة 👑";
                                progressBar.style.background = "linear-gradient(90deg, #00e5ff, #2979ff)"; // لون أزرق للدايموند
                            }
                            else if (orderCount >= 1) {
                                // 🥇 جولد (في الطريق للدايموند)
                                currentRankName = '<i class="fas fa-medal" style="color: #ffd700; margin-left: 5px;"></i> GOLD';
                                // الهدف القادم هو 5 طلبات
                                // هو عنده حالياً بين 1 و 4. النسبة تحسب بناء على المسافة للرقم 5
                                // المعادلة: (عدد الطلبات / 5) * 100
                                progressPercent = (orderCount / 5) * 100;
                                const remaining = 5 - orderCount;
                                message = `باقي ${remaining} طلبات للوصول إلى DIAMOND 💎`;
                                progressBar.style.background = "linear-gradient(90deg, #ffd700, #ffaa00)"; // لون ذهبي
                            }
                            else {
                                // 🥉 برونز (في الطريق للجولد)
                                currentRankName = '<i class="fas fa-medal" style="color: #cd7f32; margin-left: 5px;"></i> BRONZE';
                                // الهدف القادم هو 1 طلب
                                progressPercent = 10; // نعطيه نسبة صغيرة كتشجيع
                                message = "قم بأول طلب للوصول إلى GOLD 🥇";
                                progressBar.style.background = "#cd7f32"; // لون برونزي
                            }

                            // تطبيق القيم
                            currentRankText.innerHTML = currentRankName;
                            nextRankTarget.innerHTML = message;

                            // أنيميشن بسيط
                            setTimeout(() => {
                                progressBar.style.width = `${progressPercent}%`;
                            }, 100);
                        }



                        // ✅ دالة لنسخ النص وتغيير شكل الأيقونة مؤقتاً
                        function copyToClipboard(text, element) {
                            navigator.clipboard.writeText(text).then(() => {
                                const icon = element.querySelector('.copy-icon');

                                // حفظ الكلاس الأصلي للأيقونة
                                const originalIconClass = 'fas fa-copy copy-icon';

                                // تغيير الشكل لعلامة صح وتغيير الستايل
                                icon.className = 'fas fa-check copy-icon';
                                element.classList.add('copied');

                                // إظهار رسالة صغيرة (Toast)
                                if (typeof showInfoToast === 'function') {
                                    showInfoToast("تم نسخ الرقم بنجاح.", 2000);
                                }

                                // إرجاع الشكل الأصلي بعد ثانيتين
                                setTimeout(() => {
                                    icon.className = originalIconClass;
                                    element.classList.remove('copied');
                                }, 2000);
                            }).catch(err => {
                                console.error('فشل النسخ', err);
                            });
                        }
                        function copySupportEmail(cardElement) {
                            const emailText = document.getElementById('supportEmailText').innerText;

                            navigator.clipboard.writeText(emailText).then(() => {
                                // تغيير الأيقونة والنص لتوضيح النسخ
                                const icon = cardElement.querySelector('.action-icon i');
                                const tooltip = cardElement.querySelector('.tooltip');

                                // حفظ الحالة الأصلية
                                const originalIconClass = icon.className;
                                const originalTooltipText = tooltip.innerText;

                                // التغيير لحالة "تم النسخ"
                                icon.className = 'fas fa-check';
                                icon.style.color = '#2ecc71';
                                tooltip.innerText = 'تم النسخ!';
                                cardElement.classList.add('copied');

                                // إعادة الحالة الأصلية بعد ثانيتين
                                setTimeout(() => {
                                    icon.className = originalIconClass;
                                    icon.style.color = '';
                                    tooltip.innerText = originalTooltipText;
                                    cardElement.classList.remove('copied');
                                }, 2000);
                            });
                        }
                        // ✅ دالة فحص ما إذا كانت هناك تغييرات جديدة
                        function checkFormChanges() {
                            const saveBtn = document.querySelector('.profile-actions-container .confirm-payment-btn');
                            const currentName = document.getElementById('profileDisplayName').value.trim();

                            // التحقق من تغيير الاسم أو تغيير الصورة (يفترض أن selectedAvatarUrl يتغير عند اختيار صورة جديدة)
                            const isNameChanged = currentName !== initialDisplayName;
                            const isPhotoChanged = selectedAvatarUrl !== null;

                            if (isNameChanged || isPhotoChanged) {
                                // يوجد تغيير، قم بتمكين الزر
                                saveBtn.disabled = false;
                            } else {
                                // لا يوجد تغيير، قم بتعطيل الزر
                                saveBtn.disabled = true;
                            }
                        }
                        // ✅ دالة التروفي (صورة وصوت من ملفاتك الشخصية)
                        function showPlaystationTrophy(title, subtitle = "You earned a trophy") {

                            // 1. تشغيل الصوت (من مجلد sounds اللي في الصورة)
                            // ⚠️ تأكد إن اسم الملف جوه الفولدر هو trophy.mp3
                            const audio = new Audio('./sounds/trophy.mp3');

                            audio.volume = 1.0; // أعلى صوت

                            // محاولة التشغيل واكتشاف الأخطاء
                            audio.play().then(() => {
                                console.log("✅ الصوت اشتغل تمام!");
                            }).catch(error => {
                                console.error("❌ مشكلة في الصوت:", error);
                                console.log("تأكد إن الملف trophy.mp3 موجود جوه فولدر sounds");
                            });

                            // 2. إنشاء التروفي
                            const trophy = document.createElement('div');
                            trophy.className = 'ps-trophy-alert';

                            // 3. المحتوى (استخدام أيقونة من مجلد images اللي في الصورة)
                            // ⚠️ تأكد إنك حطيت الصورة جوه فولدر images وسميتها trophy.png
                            trophy.innerHTML = `
                                                                                                                                                                                            <div class="trophy-icon-container">
                                                                                                                                                                                                <img src="./images/trophy.png" alt="Trophy" style="width: 40px; height: 40px; object-fit: contain;">
                                                                                                                                                                                            </div>
                                                                                                                                                                                            <div class="trophy-details">
                                                                                                                                                                                                <span class="trophy-subtitle">${subtitle}</span>
                                                                                                                                                                                                <div class="trophy-title">${title}</div>
                                                                                                                                                                                            </div>
                                                                                                                                                                                        `;

                            // 4. الإضافة للصفحة
                            document.body.appendChild(trophy);

                            // 5. الإخفاء بعد 4 ثواني
                            setTimeout(() => {
                                trophy.classList.add('hide');
                                setTimeout(() => {
                                    trophy.remove();
                                }, 600);
                            }, 4000);
                        }


                        function updateRankAndPoints(orderCount) {
                            const count = orderCount || 0;

                            // 1. حساب الرتبة والبروجريس
                            let rankData = {};

                            if (count >= 5) {
                                // رتبة DIAMOND
                                rankData = {
                                    name: 'DIAMOND',
                                    icon: 'fas fa-gem', // أو 'diamond-icon' لو بتستخدم مكتبة تانية
                                    class: 'rank-diamond',
                                    target: 5,
                                    bg: '...'
                                };
                            } else if (count >= 1) {
                                // رتبة GOLD
                                rankData = {
                                    name: 'GOLD',
                                    icon: 'fas fa-trophy', // أو 'gold-medal-icon'
                                    class: 'rank-gold',
                                    target: 5,
                                    bg: '...'
                                };
                            } else {
                                // رتبة BRONZE
                                rankData = {
                                    name: 'BRONZE',
                                    icon: 'fas fa-medal', // أو 'bronze-medal-icon'
                                    class: 'rank-bronze',
                                    target: 1,
                                    bg: '...'
                                };
                            }

                            // 2. حساب النقاط
                            // نستخدم الرصيد المحفوظ (userPoints) بدلاً من إعادة الحساب من الطلبات
                            // (لأن النقاط يتم خصمها عند الشراء، ولا يجب إعادة احتسابها من الطلبات)

                            // 3. تحديث واجهة المستخدم (الرانك وشريط التقدم)
                            if (typeof applyUserRankUI === 'function') {
                                applyUserRankUI(count);
                            }
                            if (typeof updateRankProgress === 'function') {
                                updateRankProgress(count);
                            }

                            // 4. تحديث رصيد النقاط المعروض في الصفحة
                            document.getElementById('user-points-val').textContent = userPoints;
                            if (document.getElementById('shop-user-points')) {
                                document.getElementById('shop-user-points').textContent = userPoints;
                            }
                        }
                        //

                        // ==========================================
                        // 🎮 دالة تطبيق الرتبة على الواجهة (Navbar + Settings)
                        // ==========================================
                        function applyUserRankUI(orderCount) {
                            const count = orderCount || 0;
                            let rankData;

                            // --- تحديد الرتبة (Rank Logic) ---
                            if (count >= 5) {
                                rankData = {
                                    // ✅ هنا التغيير: أيقونة الجوهرة السماوية
                                    name: '<i class="fas fa-gem" style="margin-left: 5px;"></i> DIAMOND',
                                    bg: 'linear-gradient(90deg, #00e5ff, #2979ff)',
                                    color: '#000',
                                    border: '#00e5ff',
                                    class: 'rank-diamond'
                                };
                            } else if (count >= 1) {
                                rankData = {
                                    // ✅ هنا التغيير: أيقونة الميدالية الذهبية
                                    name: '<i class="fas fa-medal" style="margin-left: 5px;"></i> GOLD',
                                    bg: 'linear-gradient(90deg, #ffd700, #ffaa00)',
                                    color: '#000',
                                    border: '#ffd700',
                                    class: 'rank-gold'
                                };
                            } else {
                                rankData = {
                                    // ✅ هنا التغيير: أيقونة الميدالية البرونزية
                                    name: '<i class="fas fa-medal" style="margin-left: 5px;"></i> BRONZE',
                                    bg: '#cd7f32',
                                    color: '#fff',
                                    borderColor: '#cd7f32',
                                    class: 'rank-bronze'
                                };
                            }

                            // 1. تحديد العناصر المستهدفة
                            const dropdownBadge = document.getElementById('dropdown-rank-badge');
                            const navbarBadge = document.getElementById('navbar-rank-badge');
                            const settingsBadge = document.getElementById('user-rank-display');
                            const dropdownImg = document.getElementById('dropdown-user-img');
                            const activeFrame = localStorage.getItem('user_active_frame');
                            const hasCustomFrame = activeFrame && activeFrame !== 'default';

                            // 2. تحديث شارة الناف بار (ضمانة كاملة)
                            if (navbarBadge) {
                                // تحديث النص بالرتبة المحسوبة (BRONZE, GOLD, DIAMOND)
                                navbarBadge.textContent = rankData.name;

                                // 🛑 تطبيق الستايل المباشر (خلفية ولون) لضمان التغيير الفوري
                                navbarBadge.style.background = rankData.bg;
                                navbarBadge.style.color = rankData.color;

                                // تحديث الكلاسات لـ CSS (لأجل الإطار/التوهج)
                                navbarBadge.classList.remove('rank-bronze', 'rank-gold', 'rank-diamond');
                                navbarBadge.classList.add(rankData.class);

                                // 🛑 التأكد من ظهورها (لأنها مخفية افتراضياً)
                                navbarBadge.style.display = 'inline-block';
                                navbarBadge.style.boxShadow = "0 0 8px rgba(0,0,0,0.4)"; // لإضافة التوهج الخارجي

                                // 🛑 إلغاء أي تنسيقات خطأ أخرى قد تكون موجودة
                                navbarBadge.style.fontWeight = '900';
                                navbarBadge.style.textShadow = 'none';

                                // 🛑🛑 ضمانة إضافية للحل: إزالة أي هامش أو عرض موروث من كود آخر
                                navbarBadge.style.minWidth = 'auto';
                                navbarBadge.style.margin = '0';
                            }

                            // 3. تحديث الدروب داون (للتأكيد، لكي لا تعود المشكلة)
                            if (dropdownBadge) {
                                dropdownBadge.textContent = rankData.name;
                                dropdownBadge.style.background = rankData.bg;
                                dropdownBadge.style.color = rankData.color;
                                dropdownBadge.classList.remove('rank-bronze', 'rank-gold', 'rank-diamond');
                                dropdownBadge.classList.add(rankData.class);
                            }

                            // 4. تحديث صفحة الإعدادات (يبقى كما هو)
                            if (settingsBadge) {
                                settingsBadge.textContent = rankData.name;
                                settingsBadge.style.background = rankData.bg;
                                settingsBadge.style.color = rankData.color;
                            }

                            // 5. تحديث إطار الصورة (يبقى كما هو)
                            const navImg = document.getElementById('nav-user-img');
                            if (navImg) {
                                navImg.classList.remove('rank-bronze', 'rank-gold', 'rank-diamond');
                                navImg.classList.add(rankData.class);
                            }
                        }


                        // ==========================================
                        // 🌐 دالة تسجيل الدخول بجوجل
                        // ==========================================
                        function signInWithGoogle() {
                            const provider = new firebase.auth.GoogleAuthProvider();
                            const msgBox = document.getElementById('authMessage');

                            msgBox.style.color = "yellow";
                            msgBox.textContent = "جاري الاتصال بجوجل...";

                            firebase.auth().signInWithPopup(provider)
                                .then((result) => {
                                    // تم الدخول بنجاح
                                    const user = result.user;
                                    console.log("Google User:", user);

                                    msgBox.style.color = "#00ff00";
                                    msgBox.textContent = `أهلاً بك، ${user.displayName}!`;

                                    // إغلاق النافذة
                                    setTimeout(() => {
                                        closeModal('all');

                                        // تحديث البيانات فوراً
                                        if (typeof loadProfileData === 'function') loadProfileData(user);

                                        // توجيه المستخدم للصفحة المطلوبة
                                        if (window.location.hash === '#my-orders-auth-page') {
                                            window.location.hash = '#my-orders-page';
                                        }

                                        showInfoToast("تم تسجيل الدخول بنجاح", 3000);
                                    }, 1500);

                                }).catch((error) => {
                                    console.error("Google Sign-In Error:", error);
                                    msgBox.style.color = "red";
                                    msgBox.textContent = "فشل تسجيل الدخول: " + error.message;
                                });
                        }

                        // 1. دالة فتح صفحة الإعدادات وتعبئة البيانات
                        function openProfileSettings() {
                            const user = firebase.auth().currentUser;
                            if (!user) {
                                showInfoToast("يجب تسجيل الدخول أولاً", 3000, 'error');
                                window.location.hash = '#my-orders-auth-page';
                                return;
                            }

                            // تعبئة البيانات الحالية
                            document.getElementById('currentProfileEmail').textContent = user.email;
                            document.getElementById('profileDisplayName').value = user.displayName || "";
                            document.getElementById('currentProfilePic').src = user.photoURL || "./images/BerlinStore.png";

                            // إظهار الصفحة
                            window.location.hash = '#profile-settings';
                        }

                        function toggleAvatarSelection(forceClose = false) {
                            const area = document.getElementById('avatar-selection-area');
                            const editIcon = document.querySelector('.edit-avatar-icon');

                            if (!area) return;

                            const isOpen = area.classList.contains('open-dropdown');

                            // 🛑 المنطق الجديد: إذا كانت (forceClose = true) أو (isOpen = true)، قم بالإغلاق
                            const shouldClose = forceClose || isOpen;

                            area.classList.toggle('open-dropdown', !shouldClose);

                            // تحديث الأيقونة
                            if (editIcon) {
                                editIcon.innerHTML = shouldClose ? '<i class="fas fa-pen"></i>' : '<i class="fas fa-times"></i>';
                            }
                        }
                        let selectedAvatarUrl = null;

                        function selectNewAvatar(url) {
                            selectedAvatarUrl = url;
                            const profilePicElement = document.getElementById('currentProfilePic');
                            if (profilePicElement) {
                                profilePicElement.src = url.split('?')[0] + '?' + new Date().getTime();
                                const navImg = document.getElementById('nav-user-img');
                                if (navImg) navImg.src = url.split('?')[0] + '?' + new Date().getTime();
                            }

                            const selectionArea = document.getElementById('avatar-selection-area');
                            if (!selectionArea) return;

                            selectionArea.querySelectorAll('img').forEach(img => {
                                img.classList.remove('selected-avatar');
                            });


                            const clickedImages = document.querySelectorAll(`img[src="${url}"]`);

                            clickedImages.forEach(clickedImage => {
                                if (clickedImage) {
                                    clickedImage.classList.add('selected-avatar');
                                }
                            });
                            if (typeof checkFormChanges === 'function') {
                                checkFormChanges();
                            }
                        }

                        // ✅ متغير لتخزين الاسم الأصلي عند تحميل البيانات (يجب أن يكون خارج الدالة)
                        // let initialDisplayName = "";
                        // let selectedAvatarUrl = null;
                        function saveProfileChanges() {
                            const user = firebase.auth().currentUser;
                            const saveBtn = document.querySelector('.profile-actions-container .confirm-payment-btn');
                            const newNameInput = document.getElementById('profileDisplayName');

                            // رابط الصورة الجديدة (يتم تعيينه في دالة selectNewAvatar)
                            const photoURLToSave = selectedAvatarUrl || (user ? user.photoURL : null);

                            if (!user) {
                                showInfoToast("يجب تسجيل الدخول أولاً لحفظ التغييرات.", 4000, 'error');
                                return;
                            }

                            const newName = newNameInput.value.trim();
                            const isNameChanged = newName !== initialDisplayName;
                            const isPhotoChanged = selectedAvatarUrl !== null;

                            // 🛑 المنطق الجديد: إذا لم يكن هناك تغيير في الاسم أو الصورة أو الإطار
                            // (isFrameModified المتغير اللي ضفناه فوق)
                            if (!isNameChanged && !isPhotoChanged && !isFrameModified) {
                                if (!saveBtn.disabled) {
                                    saveBtn.disabled = true;
                                }

                                // 🎨 تغيير اللون إلى الأخضر عند إظهار حالة "لا توجد تعديلات"
                                saveBtn.style.background = 'var(--green-buy-btn)';
                                saveBtn.innerHTML = '<i class="fas fa-check"></i> لا توجد تعديلات جديدة';

                                setTimeout(() => {
                                    saveBtn.innerHTML = '<i class="fas fa-save"></i> حفظ التغييرات';

                                    // 🛑 إعادة الزر إلى شكله المعطل
                                    if (typeof checkFormChanges === 'function') {
                                        checkFormChanges();
                                    }
                                    // إعادة تعيين الخلفية لإتاحة التنسيق الأصلي للزر المعطل
                                    saveBtn.style.background = '';
                                    saveBtn.style.boxShadow = '';

                                    // showInfoToast("لا يوجد تعديل جديد للحفظ.", 3000, 'error'); // اختياري عشان متبقاش مزعجة
                                }, 1500);
                                return;
                            }

                            if (!newName) {
                                showInfoToast("الرجاء إدخال اسم عرض صحيح.", 3000, 'error');
                                return;
                            }

                            // 1. تفعيل وضع التحميل
                            saveBtn.disabled = true;

                            // 🎨 فرض الخلفية الخضراء عند "جاري الحفظ..."
                            saveBtn.style.background = 'linear-gradient(135deg, var(--green-buy-btn) 0%, #208e40 100%)';
                            saveBtn.innerHTML = '<div class="loading-spinner" style="width: 16px; height: 16px; border-width: 2px;"></div> جاري الحفظ...';
                            saveBtn.style.boxShadow = '0 5px 15px rgba(33, 150, 83, 0.4)';

                            // 2. تحديث Firebase
                            user.updateProfile({
                                displayName: newName,
                                photoURL: photoURLToSave
                            }).then(() => {

                                const cacheBuster = '?' + new Date().getTime();
                                initialDisplayName = newName;
                                selectedAvatarUrl = null; // إعادة تعيين رابط الصورة المختارة

                                // ✅✅ مهم جداً: إعادة تعيين مؤشر تعديل الإطار
                                isFrameModified = false;

                                // 🚀🚀 تحديث جميع العناصر المرئية 🚀🚀

                                // 1. تحديث الصور في كل مكان
                                if (photoURLToSave) {
                                    const newSrc = photoURLToSave.split('?')[0] + cacheBuster;

                                    // صورة البروفايل الكبيرة
                                    const profilePicElement = document.getElementById('currentProfilePic');
                                    if (profilePicElement) profilePicElement.src = newSrc;

                                    // صورة الناف بار الصغيرة
                                    const navImg = document.getElementById('nav-user-img');
                                    if (navImg) navImg.src = newSrc;

                                    // ✅ صورة القائمة المنسدلة (Dropdown)
                                    const dropdownImg = document.getElementById('dropdown-user-img');
                                    if (dropdownImg) dropdownImg.src = newSrc;
                                }

                                // 2. تحديث الاسم في القائمة المنسدلة (Dropdown)
                                const dropdownNameEl = document.getElementById('dropdown-user-name');
                                if (dropdownNameEl) {
                                    dropdownNameEl.textContent = newName;
                                }

                                // 3. تحديث الاسم في وضع العرض (Overview)
                                const staticNameEl = document.getElementById('static-display-name');
                                if (staticNameEl) {
                                    staticNameEl.textContent = newName;
                                }

                                // 4. تحديث الاسم في الهيدر الكبير (Header Name)
                                const headerNameEl = document.getElementById('header-display-name');
                                if (headerNameEl) {
                                    headerNameEl.textContent = newName;
                                }

                                // 5. تحديث الاسم في الناف بار (#nav-user-email)
                                const navUserEmail = document.getElementById('nav-user-email');
                                if (navUserEmail) {
                                    navUserEmail.textContent = newName.split(' ')[0];
                                }

                                // 🚀🚀 نهاية التحديثات 🚀🚀

                                // 6. رسالة النجاح وإغلاق التعديل
                                showInfoToast("تم تحديث بياناتك بنجاح!", 3000);

                                // ✅ إغلاق وضع التعديل والعودة لوضع العرض
                                if (typeof toggleProfileEdit === 'function') {
                                    toggleProfileEdit(false);
                                }

                                // 🛑 تعطيل الزر مباشرة بعد الحفظ الناجح
                                if (typeof checkFormChanges === 'function') {
                                    checkFormChanges();
                                }

                            }).catch((error) => {
                                console.error("Firebase Update Error:", error);
                                showInfoToast("حدث خطأ أثناء الحفظ: " + error.message, 5000, 'error');
                            }).finally(() => {
                                // 7. إعادة النص الأصلي للزر
                                saveBtn.innerHTML = '<i class="fas fa-save"></i> حفظ التغييرات';

                                // 🛑 إعادة تعيين الخلفية إلى حالتها الأصلية لـ CSS
                                saveBtn.style.background = '';
                                saveBtn.style.boxShadow = '';
                            });
                        }

                        function handleUserClick() {
                            const user = firebase.auth().currentUser;

                            if (user) {
                                const menu = document.getElementById('user-dropdown-menu');

                                // التأكد من وجود القائمة لتجنب الأخطاء
                                if (!menu) return;

                                if (menu.style.visibility === 'visible') {
                                    // 🔽 إخفاء القائمة
                                    menu.style.opacity = '0';
                                    menu.style.visibility = 'hidden';
                                    menu.style.transform = 'translateY(10px)';
                                } else {
                                    // 🟢 فتح القائمة (وتحديث البيانات)

                                    // 1. تحضير مانع الكاش للصورة
                                    const cacheBuster = user.photoURL ? ('?t=' + new Date().getTime()) : '';

                                    // ✅ 2. تحديث صورة البروفايل داخل الدروب داون
                                    const dropdownImg = document.getElementById('dropdown-user-img');
                                    if (dropdownImg) {
                                        dropdownImg.src = (user.photoURL ? user.photoURL + cacheBuster : "./images/BerlinStore.png");
                                    }

                                    // ✅ 3. (الإضافة الجديدة) تحديث اسم المستخدم تحت الصورة
                                    const dropdownName = document.getElementById('dropdown-user-name');
                                    if (dropdownName) {
                                        // استخدام الاسم المعروض أو الجزء الأول من الإيميل
                                        dropdownName.textContent = user.displayName || user.email.split('@')[0];
                                    }

                                    // ✅ 4. تحديث الرانك (الرتبة)
                                    const dropdownBadge = document.getElementById('dropdown-rank-badge');
                                    if (dropdownBadge && typeof getCachedRankData === 'function') {
                                        const cachedData = getCachedRankData();
                                        dropdownBadge.textContent = cachedData.name;
                                        dropdownBadge.style.background = cachedData.bg;
                                        dropdownBadge.style.color = cachedData.color;

                                        // إزالة الكلاسات القديمة وإضافة الجديد
                                        ['rank-bronze', 'rank-gold', 'rank-diamond'].forEach(cls => dropdownBadge.classList.remove(cls));
                                        dropdownBadge.classList.add(cachedData.class);
                                    }

                                    // ✅ 5. تحديث الطلبات في الخلفية (لضمان دقة الرانك)
                                    if (typeof fetchUserOrders === 'function') {
                                        fetchUserOrders(true);
                                    }

                                    // 🔽 إظهار القائمة
                                    menu.style.opacity = '1';
                                    menu.style.visibility = 'visible';
                                    menu.style.transform = 'translateY(0)';
                                }
                            } else {
                                // إذا لم يكن مسجلاً، اذهب لصفحة الدخول
                                window.location.hash = '#my-orders-auth-page';
                            }
                        }

                        function loadProfileData(user) {
                            if (user) {
                                // 1. تعبئة البيانات الأساسية (الاسم، الإيميل، الصورة)
                                document.getElementById('currentProfileEmail').textContent = user.email;

                                // التحقق من الاسم، إذا لم يوجد نستخدم الجزء الأول من الإيميل
                                const displayName = user.displayName || user.email.split('@')[0];

                                const nameInput = document.getElementById('profileDisplayName');
                                if (nameInput) nameInput.value = displayName;

                                // تحديث الاسم في الهيدر الكبير
                                const headerNameEl = document.getElementById('header-display-name');
                                if (headerNameEl) headerNameEl.textContent = displayName;

                                // تحديث الاسم في الناف بار الصغير
                                const navUserEmail = document.getElementById('nav-user-email');
                                if (navUserEmail) navUserEmail.textContent = displayName.split(' ')[0];

                                // تحديث الصورة
                                const profilePic = document.getElementById('currentProfilePic');
                                if (profilePic) profilePic.src = user.photoURL || "./images/BerlinStore.png";

                                // 📅 2. (الإصلاح) كود إظهار تاريخ الانضمام بشكل صحيح
                                const joinDateEl = document.getElementById('join-date-text');
                                if (joinDateEl) {
                                    // التأكد من وجود الميتا داتا
                                    if (user.metadata && (user.metadata.creationTime || user.metadata.createdAt)) {
                                        // الحصول على التاريخ الخام
                                        const rawDate = user.metadata.creationTime || user.metadata.createdAt;
                                        const date = new Date(rawDate);

                                        // تنسيق التاريخ للإنجليزية
                                        const options = { year: 'numeric', month: 'short', day: 'numeric' };
                                        // ✅ هنا التغيير: خلينا اللغة en-US
                                        joinDateEl.textContent = date.toLocaleDateString('en-US', options);

                                        // ✅ تغيير الاتجاه ليكون من اليسار لليمين عشان الإنجليزي يظهر صح
                                        joinDateEl.style.direction = "ltr";
                                        joinDateEl.style.fontFamily = "sans-serif"; // خط مناسب للأرقام الإنجليزية
                                    } else {
                                        joinDateEl.textContent = "New";
                                    }
                                }

                                // 3. تحديث المتغيرات العامة
                                initialDisplayName = displayName;
                                selectedAvatarUrl = null;

                                // 4. استدعاء جلب الطلبات لتحديث باقي الإحصائيات (مثل الرانك وعدد الطلبات)
                                if (typeof fetchUserOrders === 'function') {
                                    // نمرر true عشان يحدث في الخلفية بدون ما يفتح الصفحة
                                    fetchUserOrders(true);
                                }
                            }
                        }


                        function toggleProfileEdit(showEdit) {
                            const viewMode = document.getElementById('profile-view-mode');
                            const editMode = document.getElementById('profile-edit-mode');
                            const avatarTrigger = document.getElementById('avatar-edit-trigger');
                            const nameInput = document.getElementById('profileDisplayName');
                            const headerName = document.getElementById('header-display-name');
                            const editBtn = document.querySelector('.edit-profile-trigger-corner');

                            const pointsPill = document.querySelector('#profile-settings-page .points-pill');
                            // ✅ 1. تعريف لوحة التحكم الجديدة (التي تحتوي على الرانك والإحصائيات معاً)
                            const dashboard = document.querySelector('.dashboard-container');

                            if (showEdit) {
                                renderFramesSelection();
                                // 🟢 فتح التعديل (إخفاء العناصر)
                                if (viewMode) viewMode.style.display = 'none';
                                editMode.style.display = 'block';
                                avatarTrigger.style.display = 'flex';

                                // ✅ إخفاء لوحة التحكم بالكامل عند التعديل
                                if (dashboard) dashboard.style.display = 'none';

                                // إخفاء زر القلم
                                if (editBtn) editBtn.style.display = 'none';

                                if (pointsPill) pointsPill.style.display = 'none';

                                // وضع الاسم الحالي في حقل الإدخال
                                if (headerName) nameInput.value = headerName.innerText;

                                if (typeof checkFormChanges === 'function') checkFormChanges();

                            } else {
                                // 🔴 غلق التعديل (إظهار العناصر)
                                // viewMode نتركه مخفي لأننا استبدلناه بالداشبورد الجديدة
                                if (viewMode) viewMode.style.display = 'none';

                                editMode.style.display = 'none';
                                avatarTrigger.style.display = 'none';

                                // ✅ إظهار لوحة التحكم مرة أخرى
                                if (dashboard) dashboard.style.display = 'block';

                                // إعادة إظهار زر القلم
                                if (editBtn) editBtn.style.display = 'flex';

                                if (pointsPill) pointsPill.style.display = 'inline-flex';

                                // إعادة تعيين الصورة لو تم الإلغاء بدون حفظ
                                selectedAvatarUrl = null;
                                if (typeof firebase !== 'undefined') {
                                    const user = firebase.auth().currentUser;
                                    if (user) {
                                        const imgEl = document.getElementById('currentProfilePic');
                                        if (imgEl) imgEl.src = user.photoURL || "./images/BerlinStore.png";
                                    }
                                }
                            }
                        }

                        // ✅ إضافة المراقب (Listener) لحقل الاسم
                        document.addEventListener('DOMContentLoaded', () => {
                            const nameInput = document.getElementById('profileDisplayName');
                            // عندما يقوم المستخدم بالكتابة، قم بفحص حالة التغييرات
                            if (nameInput) {
                                nameInput.addEventListener('input', checkFormChanges);
                            }
                        });

                        function saveAvatarOnly() {
                            const user = firebase.auth().currentUser;
                            const photoURLToSave = selectedAvatarUrl || (user ? user.photoURL : null);

                            if (!user) {
                                showInfoToast("يجب تسجيل الدخول أولاً لحفظ التغييرات.", 4000, 'error');
                                return;
                            }

                            if (!photoURLToSave) {
                                showInfoToast("الرجاء اختيار صورة أولاً.", 3000, 'error');
                                return;
                            }

                            // 1. إغلاق قائمة الاختيار أولاً
                            toggleAvatarSelection(true);

                            // 2. استخدام دالة Firebase الأساسية لتحديث البروفايل (الصورة فقط)
                            user.updateProfile({
                                photoURL: photoURLToSave
                            }).then(() => {
                                // 3. تحديث صورة الناف بار لتجاوز الـ Cache
                                const navImg = document.getElementById('nav-user-img');
                                if (navImg && photoURLToSave) {
                                    const cacheBuster = `?t=${new Date().getTime()}`;
                                    navImg.src = photoURLToSave + cacheBuster;
                                }

                                // 4. إظهار رسالة تأكيد
                                showInfoToast("تم تغيير الصورة وحفظها بنجاح!", 3000);

                            }).catch((error) => {
                                console.error("Firebase Update Error:", error);
                                showInfoToast("حدث خطأ أثناء حفظ الصورة: " + error.message, 5000, 'error');
                            });
                        }

                        // 5. إرسال إيميل تغيير الباسورد
                        function sendPasswordReset() {
                            const user = firebase.auth().currentUser;
                            if (!user) return;

                            firebase.auth().sendPasswordResetEmail(user.email).then(() => {
                                showInfoToast(`📧 تم إرسال رابط تغيير كلمة المرور إلى ${user.email}`, 5000);
                            }).catch((error) => {
                                showInfoToast("خطأ: " + error.message, 3000, 'error');
                            });
                        }


                        // ==========================================
                        // 🎮 دوال نظام الرتب (Gamification Logic)
                        // ==========================================

                        // 1. دالة حساب الرتبة بناءً على العدد
                        function calculateUserRank(orderCount) {
                            if (orderCount >= 5) {
                                return {
                                    name: 'DIAMOND',
                                    icon: 'fas fa-gem', // أيقونة الألماسة
                                    class: 'rank-diamond',
                                    bg: 'linear-gradient(45deg, #00e5ff, #2979ff)',
                                    color: '#fff'
                                };
                            } else if (orderCount >= 1) {
                                return {
                                    name: 'GOLD',
                                    icon: 'fas fa-trophy', // أيقونة الكأس أو الميدالية الذهبية
                                    class: 'rank-gold',
                                    bg: 'linear-gradient(45deg, #ffd700, #ffaa00)',
                                    color: '#000'
                                };
                            } else {
                                return {
                                    name: 'BRONZE',
                                    icon: 'fas fa-medal', // أيقونة الميدالية (مناسبة للبرونز)
                                    class: 'rank-bronze',
                                    bg: '#cd7f32',
                                    color: '#fff'
                                };
                            }
                        }

                        // 2. دالة تطبيق الرتبة على الواجهة (الصور والنصوص)
                        function applyUserRankUI(orderCount) {
                            const rankData = calculateUserRank(orderCount);

                            // أ. تحديث إطار الصور (في الهيدر وصفحة الإعدادات)
                            const navImg = document.getElementById('nav-user-img');
                            const profileImg = document.getElementById('currentProfilePic');

                            [navImg, profileImg].forEach(img => {
                                if (img) {
                                    // حذف الكلاسات القديمة عشان ميتراكموش
                                    img.classList.remove('rank-bronze', 'rank-gold', 'rank-diamond');
                                    // إضافة كلاس الرتبة الجديدة
                                    img.classList.add(rankData.class);
                                }
                            });

                            // ب. تحديث بادج الرتبة في صفحة الإعدادات (تحت الإيميل)
                            const profileHeader = document.querySelector('.profile-header-section');
                            let rankBadge = document.getElementById('user-rank-display');

                            // لو البادج مش موجود، ننشئه
                            if (!rankBadge && profileHeader) {
                                rankBadge = document.createElement('div');
                                rankBadge.id = 'user-rank-display';
                                rankBadge.className = 'user-rank-badge';
                                // نضعه بعد عنصر الإيميل
                                const emailElem = document.getElementById('currentProfileEmail');
                                if (emailElem) emailElem.after(rankBadge);
                            }

                            // تحديث محتوى البادج
                            if (rankBadge) {
                                rankBadge.textContent = rankData.name;
                                rankBadge.style.background = rankData.bg;
                                rankBadge.style.color = rankData.color;
                                rankBadge.style.display = 'inline-block';
                                rankBadge.style.boxShadow = "0 0 10px rgba(0,0,0,0.5)";
                            }
                        }
                        // ==========================================
                        // 📦 دالة جلب الطلبات (النسخة المصلحة 100%)
                        // ==========================================
                        function fetchUserOrders(isBackground = false) {
                            const user = firebase.auth().currentUser;

                            if (!user) return;

                            // 🛑 التعديل الأهم: لو التحديث في الخلفية (زي أول ما تفتح الموقع)، متفتحش الصفحة ولا تظهر اللودر
                            if (isBackground === false) {
                                showSection('my-orders-page'); // افتح الصفحة بس لو المستخدم داس بنفسه

                                const loader = document.getElementById('orders-loader');
                                const listContainer = document.getElementById('orders-list-container');
                                const noOrdersMsg = document.getElementById('no-orders-msg');

                                if (loader) loader.style.display = 'block';
                                if (listContainer) listContainer.innerHTML = '';
                                if (noOrdersMsg) noOrdersMsg.style.display = 'none';
                            }

                            // رابط السكربت (يرجى التأكد من صلاحيته)
                            const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzTnc9hTa4-Ho4r1p7rMdfJhRhVaP7ZQ1hE5Pg_4PaQEUVSB2CFs5cmJQFDSzVEopZI/exec";

                            // إرسال طلب لجلب البيانات
                            fetch(SCRIPT_URL, {
                                method: 'POST',
                                body: JSON.stringify({
                                    action: "get_user_orders",
                                    email: user.email
                                })
                            })
                                .then(response => response.json())
                                .then(data => {
                                    // إخفاء اللودر فقط لو كنا فاتحين الصفحة
                                    if (isBackground === false) {
                                        const loader = document.getElementById('orders-loader');
                                        if (loader) loader.style.display = 'none';
                                    }

                                    let completedCount = 0;
                                    let ordersToRender = [];

                                    if (data.orders && data.orders.length > 0) {

                                        allUserOrders = data.orders;
                                        // ✅✅ 1. المنطق الجديد: كل الطلبات هي مكتملة (كما طلبت سابقاً)
                                        completedCount = data.orders.length;

                                        updateGamificationUI(completedCount);

                                        // 2. تعديل حالة جميع الطلبات لتظهر "مكتمل"
                                        ordersToRender = data.orders.map(order => {
                                            return { ...order, status: 'مكتمل' };
                                        });

                                        // 3. رسم الطلبات المعدلة
                                        if (isBackground === false) renderOrdersList(ordersToRender);

                                    } else {
                                        if (isBackground === false) {
                                            const noOrdersMsg = document.getElementById('no-orders-msg');
                                            if (noOrdersMsg) {
                                                noOrdersMsg.style.display = 'block';
                                                noOrdersMsg.textContent = "لا توجد طلبات مسجلة لهذا الحساب.";
                                            }
                                        }
                                    }
                                    const overviewOrdersEl = document.getElementById('overview-orders-count');
                                    if (overviewOrdersEl) {
                                        overviewOrdersEl.textContent = completedCount;
                                    }

                                    // ✅ تحديث العداد الجديد في واجهة المستخدم
                                    const completedOrdersEl = document.getElementById('total-completed-orders');
                                    if (completedOrdersEl) {
                                        completedOrdersEl.textContent = completedCount;
                                    }

                                    // 🔥🔥🔥 الإضافة الجديدة: تحديث بطاقة الإحصائيات في البروفايل 🔥🔥🔥
                                    const profileStatsOrderText = document.getElementById('total-orders-text');
                                    if (profileStatsOrderText) {
                                        profileStatsOrderText.textContent = completedCount;
                                    }

                                    // 🔥🔥🔥 الإضافة الجديدة: تشغيل شريط التقدم والشارات 🔥🔥🔥
                                    if (typeof updateRankProgress === 'function') updateRankProgress(completedCount);
                                    if (typeof updateUserBadges === 'function') updateUserBadges(user, completedCount);

                                    // ==========================================
                                    // 🎮 GAMIFICATION UPDATE (NEW ADDITION)
                                    // ==========================================

                                    // 2. تحديث قائمة الإطارات بناءً على الرانك الحالي وتحميل الإطار المختار
                                    if (typeof calculateUserRank === 'function' && typeof renderFramesSelection === 'function') {
                                        // نحصل على بيانات الرانك الحالية
                                        const rankDataForFrames = calculateUserRank(completedCount);

                                        // نستخرج اسم الرانك "الخام" (GOLD, DIAMOND) لاستخدامه في شروط قفل الإطارات
                                        let cleanRankName = 'BRONZE';
                                        if (rankDataForFrames.name.includes('GOLD')) cleanRankName = 'GOLD';
                                        if (rankDataForFrames.name.includes('DIAMOND')) cleanRankName = 'DIAMOND';

                                        // إعادة رسم قائمة الإطارات بالصلاحيات الجديدة
                                        renderFramesSelection(cleanRankName);
                                    }

                                    // 3. تحميل الإطار المحفوظ للمستخدم (إن وجد)
                                    if (typeof loadUserFrame === 'function') {
                                        loadUserFrame();
                                    }
                                    // ==========================================

                                    // ✅✅ الخطوة الحاسمة: تحديث الرانك على جميع العناصر
                                    if (typeof applyUserRankUI === 'function' && typeof calculateUserRank === 'function') {

                                        // 🛑 نستخدم الدالة لحساب rankData محلياً
                                        const rankData = calculateUserRank(completedCount);

                                        // نحدث جميع عناصر الرتبة الأخرى (الناف بار/الدروب داون)
                                        applyUserRankUI(completedCount);

                                        // 🛑🛑 التعديل لضمان تحديث العنصر الجديد بشكل صحيح 🛑🛑
                                        const userRankEl = document.getElementById('total-orders-rank');
                                        if (userRankEl) {
                                            userRankEl.textContent = rankData.name; // الاسم الصحيح (Diamond)
                                            userRankEl.style.color = rankData.color; // اللون الصحيح (الأخضر/الأزرق)
                                        }

                                        // الكود الخاص بتحديث الدروب داون (لضمان التناسق)
                                        const dropdownBadge = document.getElementById('dropdown-rank-badge');
                                        if (dropdownBadge) {
                                            dropdownBadge.textContent = rankData.name;
                                            dropdownBadge.style.background = rankData.bg;
                                            dropdownBadge.style.color = rankData.color;

                                            ['rank-bronze', 'rank-gold', 'rank-diamond'].forEach(cls => {
                                                dropdownBadge.classList.remove(cls);
                                            });
                                            dropdownBadge.classList.add(rankData.class);

                                            const navbarBadge = document.getElementById('navbar-rank-badge');
                                            if (navbarBadge) navbarBadge.style.display = 'inline-block';
                                        }
                                    }

                                })
                                .catch(error => {
                                    console.error("Error fetching orders:", error);
                                    if (isBackground === false) {
                                        const loader = document.getElementById('orders-loader');
                                        const noOrdersMsg = document.getElementById('no-orders-msg');
                                        if (loader) loader.style.display = 'none';
                                        if (noOrdersMsg) {
                                            noOrdersMsg.innerHTML = "حدث خطأ في الاتصال.";
                                            noOrdersMsg.style.display = 'block';
                                        }
                                        // في حالة الخطأ، نثبت العداد والرانك على صفر
                                        const completedOrdersEl = document.getElementById('total-completed-orders');
                                        if (completedOrdersEl) completedOrdersEl.textContent = 0;
                                    }
                                    // في حالة الخطأ، نثبت الرانك على برونز
                                    if (typeof applyUserRankUI === 'function') applyUserRankUI(0);

                                    // 🔥 في حالة الخطأ، صفّر شريط التقدم أيضاً
                                    if (typeof updateRankProgress === 'function') updateRankProgress(0);

                                    // في حالة الخطأ، صفّر النقاط
                                    if (typeof calculatePoints === 'function') calculatePoints(0);
                                });
                        }

                        // ==========================================
                        // 📦 دالة رسم قائمة الطلبات (المعدلة والمصححة)
                        // ==========================================
                        function renderOrdersList(orders) {
                            const container = document.getElementById('orders-list-container');
                            // تفريغ الحاوية قبل البناء
                            if (container) container.innerHTML = '';

                            // ⚠️ التعديل المهم هنا: ضفنا (index) عشان الكود يشوفه
                            orders.forEach((order, index) => {

                                // 1. معالجة التاريخ لتجنب "Invalid Date"
                                const rawDate = order.date;
                                let dateObj;
                                if (rawDate && typeof rawDate === 'string' && rawDate.includes('/')) {
                                    const dateParts = rawDate.split(' ')[0].split('/');
                                    if (dateParts.length === 3) {
                                        const robustDateString = `${dateParts[1]}/${dateParts[0]}/${dateParts[2]}`;
                                        dateObj = new Date(robustDateString);
                                    } else {
                                        dateObj = new Date(rawDate);
                                    }
                                } else {
                                    dateObj = new Date(rawDate);
                                }
                                const dateStr = dateObj instanceof Date && !isNaN(dateObj) ?
                                    dateObj.toLocaleDateString('en-US') : "Date N/A";

                                // 2. معالجة الحالة
                                let statusClass = 'status-pending';
                                let displayedStatus = order.status;
                                if (displayedStatus === 'قيد المراجعة' || displayedStatus.toLowerCase() === 'pending') {
                                    displayedStatus = 'تم الاستلام';
                                }
                                if (order.status.includes('تم') || order.status.includes('Sent')) statusClass = 'status-completed';
                                if (order.status.includes('رفض') || order.status.includes('Cancelled')) statusClass = 'status-rejected';

                                // 3. معالجة الصورة
                                const itemImage = order.image || './images/BerlinStore.png';

                                // 4. كود الكارت (مع التعديل الذي طلبته)
                                const cardHTML = `
                                                                                                            <div class="order-history-card" onclick="openOrderDetails(${index})" style="cursor: pointer;">
                                                                                                                <img src="${itemImage}" alt="Product" class="order-card-img">
                                                                                                                <div class="order-card-info">
                                                                                                                    <div class="order-card-header">
                                                                                                                        <span class="order-product-name">${order.product}</span>
                                                                                                                        <span class="order-id">#${order.orderId}</span>
                                                                                                                    </div>
                                                                                                                    <div class="order-date">${dateStr}</div>
                                                                                                                    <div class="order-card-footer">
                                                                                                                        <span class="order-price">${order.price} EGP</span>
                                                                                                                        <span class="order-status ${statusClass}">${displayedStatus}</span>
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        `;

                                // التأكد من أن الحاوية موجودة قبل الإضافة
                                if (container) container.innerHTML += cardHTML;
                            });
                        }

                        // دالة مساعدة لتحديث نصوص النافذة
                        function updateAuthModalUI() {
                            const authTitle = document.getElementById('authTitle');
                            const submitBtn = document.getElementById('submitAuthBtn');
                            const toggleText = document.getElementById('toggleAuthText');
                            const toggleBtn = document.getElementById('toggleAuthBtn');

                            if (window.isLoginMode) {
                                if (authTitle) authTitle.textContent = "تسجيل الدخول";
                                if (submitBtn) submitBtn.textContent = "تسجيل الدخول";
                                if (toggleText) toggleText.textContent = "ليس لديك حساب؟";
                                if (toggleBtn) toggleBtn.textContent = "إنشاء حساب جديد";
                            } else {
                                if (authTitle) authTitle.textContent = "إنشاء حساب جديد";
                                if (submitBtn) submitBtn.textContent = "إنشاء حساب";
                                if (toggleText) toggleText.textContent = "لديك حساب بالفعل؟";
                                if (toggleBtn) toggleBtn.textContent = "تسجيل الدخول";
                            }
                        }



                        // ================================================================
                        // 4. تهيئة النظام عند تحميل الصفحة (DOM Content Loaded)
                        // ================================================================
                        document.addEventListener('DOMContentLoaded', function () {
                            console.log("🚀 System Initialized...");

                            // --- إعدادات فايربيس ---
                            const firebaseConfig = {
                                apiKey: "AIzaSyAsrl6fyQ65lGU22WlTsm8HDtjhKYKw4bs",
                                authDomain: "berlin-storegoe-login.firebaseapp.com",
                                projectId: "berlin-storegoe-login",
                                storageBucket: "berlin-storegoe-login.firebasestorage.app",
                                messagingSenderId: "429636991312",
                                appId: "1:429636991312:web:38bb70e5186173ae809455",
                                measurementId: "G-WGF1G0B6FD"
                            };


                            if (!firebase.apps.length) {
                                firebase.initializeApp(firebaseConfig);
                            }
                            const auth = firebase.auth();

                            // --- تعريف العناصر ---
                            const btnSignupMain = document.getElementById('btn-signup'); // زر الهيدر
                            const btnLoginMain = document.getElementById('btn-login');   // زر الهيدر
                            const emailInput = document.getElementById('userEmail');
                            const passInput = document.getElementById('userPassword');
                            const submitBtn = document.getElementById('submitAuthBtn'); // زر التنفيذ داخل النافذة
                            const toggleBtn = document.getElementById('toggleAuthBtn'); // زر التبديل داخل النافذة
                            const msgBox = document.getElementById('authMessage');

                            const authInputs = [emailInput, passInput];
                            authInputs.forEach(input => {
                                if (input) {
                                    input.addEventListener('keydown', function (event) {
                                        if (event.key === 'Enter') {
                                            event.preventDefault();
                                            if (submitBtn) submitBtn.click();
                                        }
                                    });
                                }
                            });
                            // --- تفعيل أزرار الهيدر الرئيسية (إن وجدت) ---
                            if (btnSignupMain) btnSignupMain.onclick = () => window.openAuthModal('signup');
                            if (btnLoginMain) btnLoginMain.onclick = () => window.openAuthModal('login');

                            // --- تفعيل زر التبديل (Toggle) داخل النافذة ---
                            if (toggleBtn) {
                                toggleBtn.onclick = () => {
                                    window.isLoginMode = !window.isLoginMode;
                                    updateAuthModalUI();
                                };
                            }

                            // --- تفعيل زر التنفيذ (Submit) ---
                            if (submitBtn) {
                                submitBtn.addEventListener('click', function () {
                                    const email = emailInput.value;
                                    const pass = passInput.value;

                                    msgBox.style.color = "yellow";
                                    msgBox.textContent = "جاري المعالجة...";

                                    if (pass.length < 6) {
                                        msgBox.style.color = "red";
                                        msgBox.textContent = "كلمة المرور ضعيفة (6 أرقام على الأقل)";
                                        return;
                                    }

                                    // اختيار الدالة المناسبة بناءً على الوضع الحالي
                                    const authAction = window.isLoginMode
                                        ? auth.signInWithEmailAndPassword(email, pass)
                                        : auth.createUserWithEmailAndPassword(email, pass);

                                    authAction
                                        .then((userCredential) => {
                                            msgBox.style.color = "#00ff00";
                                            msgBox.innerHTML = window.isLoginMode
                                                ? "<i class='fas fa-unlock-alt'></i> تم تسجيل الدخول!"
                                                : "<i class='fas fa-check-circle'></i> تم إنشاء الحساب!";

                                            setTimeout(() => {
                                                document.getElementById('authModal').classList.remove('is-visible');
                                                document.getElementById('authModal').style.display = 'none';
                                                document.getElementById('overlay').style.display = 'none';
                                                window.location.hash = '#my-orders-page';
                                                // إذا كان المستخدم يحاول فتح طلباتي، حوله للصفحة الصحيحة
                                                if (window.location.hash === '#my-orders-auth-page') {
                                                    window.location.hash = '#shipping';
                                                }
                                            }, 1500);
                                        })
                                        .catch((error) => {
                                            console.error(error);
                                            let errorText = "حدث خطأ: " + error.message;
                                            if (error.code === 'auth/email-already-in-use') errorText = "هذا الإيميل مسجل بالفعل!";
                                            if (error.code === 'auth/user-not-found' || error.code === 'auth/wrong-password') errorText = "بيانات الدخول غير صحيحة!";
                                            if (error.code === 'auth/invalid-email') errorText = "شكل الإيميل غير صحيح!";

                                            msgBox.style.color = "red";
                                            msgBox.textContent = errorText;
                                        });
                                });
                            }

                            auth.onAuthStateChanged((user) => {
                                const loginContent = document.getElementById('login-state-content');
                                const userContent = document.getElementById('logged-user-content');
                                const navUserImg = document.getElementById('nav-user-img');
                                const navUserEmail = document.getElementById('nav-user-email');
                                const btnLoginMain = document.getElementById('btn-login');
                                const btnSignupMain = document.getElementById('btn-signup');

                                if (user) {
                                    // --- 🟢 المستخدم مسجل دخول ---

                                    // 1. استدعاء فوري للرتبة (BRONZE) وبدء جلب الطلبات
                                    if (typeof applyUserRankUI === 'function') applyUserRankUI(0);
                                    if (typeof fetchUserOrders === 'function') fetchUserOrders(true);

                                    // 2. تحديث واجهة المستخدم
                                    if (loginContent) loginContent.style.display = 'none';
                                    if (userContent) userContent.style.display = 'flex';

                                    if (navUserImg) navUserImg.src = user.photoURL || "./images/BerlinStore.png";

                                    // ✅✅ التعديل الحاسم: استخدام الاسم المحفوظ أولاً ✅✅
                                    if (navUserEmail) {
                                        // إذا كان user.displayName موجوداً، استخدمه، وإلا استخدم جزء من البريد الإلكتروني
                                        const nameToDisplay = user.displayName
                                            ? user.displayName.split(' ')[0] // نأخذ الكلمة الأولى فقط من الاسم المحفوظ
                                            : user.email.split('@')[0];

                                        navUserEmail.textContent = nameToDisplay;
                                    }

                                    // تحميل بيانات البروفايل (لصفحة الإعدادات)
                                    if (typeof loadProfileData === 'function') loadProfileData(user);

                                    // إخفاء أزرار الهيدر
                                    if (btnLoginMain) btnLoginMain.style.display = 'none';
                                    if (btnSignupMain) {
                                        btnSignupMain.textContent = "👤 حسابي";
                                        btnSignupMain.onclick = () => window.location.hash = '#shipping';
                                    }

                                } else {
                                    // --- 🔴 المستخدم غير مسجل ---
                                    if (loginContent) loginContent.style.display = 'flex';
                                    if (userContent) userContent.style.display = 'none';

                                    if (btnLoginMain) btnLoginMain.style.display = 'inline-block';
                                    if (btnSignupMain) {
                                        btnSignupMain.textContent = "إنشاء حساب جديد";
                                        btnSignupMain.onclick = () => window.openAuthModal('signup');
                                    }
                                }
                            });

                            // --- مراقبة حالة المستخدم ---
                            auth.onAuthStateChanged((user) => {
                                if (user) {
                                    // إخفاء أزرار الدخول في الهيدر وإظهار الاسم
                                    if (btnLoginMain) btnLoginMain.style.display = 'none';
                                    if (btnSignupMain) {
                                        btnSignupMain.textContent = "👤 حسابي";
                                        btnSignupMain.onclick = () => window.location.hash = '#shipping'; // يفتح صفحة الطلبات
                                    }
                                } else {
                                    // إعادة الأزرار لطبيعتها عند تسجيل الخروج
                                    if (btnLoginMain) btnLoginMain.style.display = 'inline-block';
                                    if (btnSignupMain) {
                                        btnSignupMain.textContent = "إنشاء حساب جديد";
                                        btnSignupMain.onclick = () => window.openAuthModal('signup');
                                    }
                                }
                            });
                        });

                        // متغير لتخزين الموسيقى الحالية لمنع التداخل
                        let currentKaitoMusic = null;

                        function triggerKaitouKidFullEffect() {
                            console.log("🎩 Showtime! Starting Kaito Kid Effect with SFX...");

                            const logo = document.querySelector('#navbar .logo-area img');
                            const card = document.getElementById('kaito-card');
                            const smoke = document.getElementById('kid-smoke');

                            if (!logo || !card || !smoke) {
                                console.error("❌ خطأ: تأكد من وجود عناصر HTML (الكارت والدخان) والصورة");
                                return;
                            }

                            // --- 1. تعريف الأصوات ---
                            const music = new Audio('./sounds/kid_theme.mp3');  // الموسيقى
                            const flySfx = new Audio('./sounds/card_fly.mp3');  // صوت الطيران
                            const poofSfx = new Audio('./sounds/smoke_poof.mp3'); // صوت الدخان

                            // ضبط مستويات الصوت (اختياري)
                            music.volume = 0.8;
                            flySfx.volume = 1.0; // صوت الرمية عالي
                            poofSfx.volume = 1.0; // صوت الاختفاء عالي

                            // --- 2. إدارة الموسيقى (عشان ميتداخلوش لو ضغطت مرتين) ---
                            if (currentKaitoMusic) {
                                currentKaitoMusic.pause();
                                currentKaitoMusic.currentTime = 0;
                            }
                            currentKaitoMusic = music; // حفظ الموسيقى الجديدة

                            // تشغيل الموسيقى + صوت رمي الكارت فوراً
                            music.play().catch(e => console.warn("Music error:", e));
                            flySfx.play().catch(e => console.warn("Fly SFX error:", e));


                            // --- 3. حركة الكارت (Visuals) ---
                            const rect = logo.getBoundingClientRect();

                            // تجهيز الكارت
                            card.style.display = 'block';
                            card.style.top = '-150px';
                            card.style.left = '110%';
                            card.style.transform = 'rotate(0deg)';

                            // الأنيميشن (دخول الكارت)
                            setTimeout(() => {
                                card.style.top = `${rect.top}px`;
                                card.style.left = `${rect.left}px`;
                                card.style.width = `${rect.width}px`;
                                card.style.transform = 'rotate(-15deg)';
                            }, 100);

                            // إخفاء اللوجو
                            setTimeout(() => {
                                logo.style.opacity = '0';
                                logo.style.transition = 'opacity 0.2s';
                            }, 800);

                            // --- 4. مرحلة النهاية (بعد 8 ثواني) ---
                            setTimeout(() => {
                                // تشغيل صوت الدخان
                                poofSfx.play().catch(e => console.warn("Poof SFX error:", e));

                                // تحريك الدخان
                                smoke.style.top = `${rect.top - 20}px`;
                                smoke.style.left = `${rect.left - 20}px`;
                                smoke.classList.add('poof-effect');

                                // اختفاء الكارت وظهور اللوجو
                                card.style.display = 'none';
                                logo.style.opacity = '1';

                                // تنظيف كلاس الأنيميشن
                                setTimeout(() => {
                                    smoke.classList.remove('poof-effect');
                                }, 1000);

                            }, 8000); // الموسيقى ستستمر في العمل لأننا لم نوقفها هنا
                        }

                        function openItakuraDiary() {
                            const overlay = document.getElementById('itakura-diary-overlay');
                            const sohaylDiary = document.getElementById('sohayl-diary-overlay');

                            if (sohaylDiary) sohaylDiary.style.display = 'none'; // إغلاق مذكرة سهيل أولا

                            if (overlay) {
                                overlay.classList.add('active'); // الكلاس Active هو اللي بيظهرها في CSS
                                overlay.style.display = 'block';
                                document.body.style.overflow = 'hidden';
                            }
                        }
                        function closeOverlay(type) {
                            if (type === 'diary') {
                                const diary = document.getElementById('itakura-diary-overlay');
                                if (diary) {
                                    diary.classList.remove('active');
                                    diary.style.display = 'none'; // ✅ التأكد من الإخفاء التام
                                }
                            } else if (type === 'hacking') {
                                const hacking = document.getElementById('vermouth-console-overlay');
                                if (hacking) hacking.style.display = 'none';
                            }
                            // التأكد من إعادة التمرير للموقع
                            document.body.style.overflow = 'auto';
                        }
                        function openSohaylDiary() {
                            console.log("🚀 محاولة فتح مذكرات سهيل...");

                            // 1. إغلاق أي نوافذ أخرى
                            const itakuraOverlay = document.getElementById('itakura-diary-overlay');
                            if (itakuraOverlay) itakuraOverlay.style.display = 'none';

                            // 🛑 لو موسيقى إيتاكورا شغالة، نوقفها
                            if (typeof itakuraAudio !== 'undefined' && itakuraAudio) {
                                itakuraAudio.pause();
                                itakuraAudio.currentTime = 0;
                            }

                            // 2. إظهار المذكرة
                            const sohaylDiary = document.getElementById('sohayl-diary-overlay');
                            if (sohaylDiary) {
                                sohaylDiary.style.display = 'block';
                                document.body.style.overflow = 'hidden';
                                console.log("✅ تم فتح نافذة المذكرة.");

                                // --- 🎵 تشغيل موسيقى سهيل ---
                                // التأكد من إيقاف أي صوت سابق لسهيل
                                if (sohaylAudio) {
                                    sohaylAudio.pause();
                                    sohaylAudio.currentTime = 0;
                                }

                                // تعريف الصوت الجديد
                                console.log("🎵 جاري تحميل ملف الصوت: ./sounds/sohayl.mp3");
                                sohaylAudio = new Audio('./sounds/sohayl.mp3');
                                sohaylAudio.volume = 0.6;
                                sohaylAudio.loop = true; // تكرار

                                // محاولة التشغيل
                                const playPromise = sohaylAudio.play();

                                if (playPromise !== undefined) {
                                    playPromise.then(_ => {
                                        console.log("✅ الصوت اشتغل بنجاح!");
                                    })
                                        .catch(error => {
                                            console.error("❌ فشل تشغيل الصوت:", error);
                                            console.log("💡 تأكد أن الملف 'sohayl.mp3' موجود داخل مجلد 'sounds'");
                                        });
                                }
                            } else {
                                console.error("❌ لم يتم العثور على عنصر 'sohayl-diary-overlay' في HTML");
                            }

                            // إخفاء الناف بار للموبايل
                            const mobileNav = document.getElementById('mobile-nav');
                            if (mobileNav) mobileNav.style.display = 'none';

                            // إظهار التروفي
                            if (typeof showPlaystationTrophy === 'function') {
                                showPlaystationTrophy("مذكرات سهيل السرية");
                            }
                        }
                        function closeSohaylDiary() {
                            const sohaylDiary = document.getElementById('sohayl-diary-overlay');
                            if (sohaylDiary) {
                                sohaylDiary.style.display = 'none';

                                // --- 🔇 إيقاف الموسيقى عند الإغلاق ---
                                if (sohaylAudio) {
                                    console.log("🔇 تم إيقاف الموسيقى.");
                                    sohaylAudio.pause();
                                    sohaylAudio.currentTime = 0;
                                }
                            }

                            if (window.innerWidth <= 768) {
                                const mobileNav = document.getElementById('mobile-nav');
                                if (mobileNav) mobileNav.style.display = 'flex';
                            }

                            document.body.style.overflow = 'auto';
                        }

                        const siteTypes = [
                            {
                                name: "موقع تعريفي", details: "عرض خدمات، معلومات، فريق عمل، تواصل.",
                                svg: '<svg xmlns="https://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2L2 7l10 5 10-5-10-5z"></path><path d="M2 17l10 5 10-5M2 12l10 5 10-5"></path></svg>'
                            },

                            {
                                name: "متجر إلكتروني", details: "عرض منتجات، سلة، دفع، لوحة تحكم بسيطة.",
                                svg: '<svg xmlns="https://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>'
                            },

                            {
                                name: "بورتفوليو", details: "نشر محتوى مقالات، تصنيفات، وأداء سريع.",
                                svg: '<svg xmlns="https://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><line x1="10" y1="9" x2="8" y2="9"></line></svg>'
                            },

                            {
                                name: "صفحة هبوط ", details: "صفحة واحدة لمنتج أو خدمة معينة (Landing Page) .",
                                svg: '<svg xmlns="https://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="3" y1="9" x2="21" y2="9"></line><line x1="9" y1="21" x2="9" y2="9"></line></svg>'
                            },

                            {
                                name: "طلب مخصص / أخرى", details: "لطلب أي نوع موقع أو خدمة غير مدرجة أعلاه.",
                                svg: '<svg xmlns="https://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line></svg>'
                            }
                        ];

                        // 💡 دالة 1: لإظهار اختيارات نوع الموقع (تم التعديل لدمج SVG)
                        function showSiteTypeOptions() {
                            const cardElement = document.getElementById('website-design-card');
                            const overlay = cardElement.querySelector('.offer-overlay');
                            const selectionDiv = cardElement.querySelector('.site-type-selection');
                            const optionsContainer = document.getElementById('site-type-options-container');

                            overlay.classList.add('hidden');
                            overlay.style.pointerEvents = 'none';

                            selectionDiv.style.opacity = '1';
                            selectionDiv.style.pointerEvents = 'auto';

                            optionsContainer.innerHTML = '';
                            siteTypes.forEach(type => {
                                const option = document.createElement('div');
                                option.className = 'site-type-option';

                                if (type.name === "أمر مخصص / أخرى") {
                                    option.classList.add('custom-order-type');
                                }

                                // 💡 التعديل هنا: إضافة الـ SVG
                                option.innerHTML = `
                                                                                                                                                                                                                                                                                        <div style="margin-bottom: 8px;">${type.svg}</div>
                                                                                                                                                                                                                                                                                        <div>${type.name}</div>
                                                                                                                                                                                                                                                                                        <small style="font-weight: normal; margin-top: 5px;">${type.details}</small>
                                                                                                                                                                                                                                                                                    `;
                                option.onclick = () => selectSiteType(type.name);
                                optionsContainer.appendChild(option);
                            });
                        }

                        // 💡 دالة 2: لمعالجة اختيار نوع الموقع والانتقال لنموذج الطلب
                        function selectSiteType(siteType) {
                            const cardElement = document.getElementById('website-design-card');
                            const selectionDiv = cardElement.querySelector('.site-type-selection');
                            const form = cardElement.querySelector('.custom-order-form');

                            // 1. إخفاء شاشة الاختيار
                            selectionDiv.style.opacity = '0';
                            selectionDiv.style.pointerEvents = 'none';

                            // 2. تحديث عنوان النموذج والحقل المخفي
                            document.getElementById('selected-site-type-title').textContent = `[ ${siteType} ]`;
                            document.getElementById('site-type-hidden-input').value = siteType;

                            // 3. إظهار نموذج الطلب
                            form.classList.add('visible');
                        }

                        // 💡 دالة 3: للرجوع من شاشة الاختيار إلى الغلاف الأولي
                        function goBackToOffer(cardId) {
                            const cardElement = document.getElementById(cardId);
                            const overlay = cardElement.querySelector('.offer-overlay');
                            const selectionDiv = cardElement.querySelector('.site-type-selection');

                            // إخفاء شاشة الاختيار
                            selectionDiv.style.opacity = '0';
                            selectionDiv.style.pointerEvents = 'none';

                            // إظهار الغلاف الأولي
                            overlay.classList.remove('hidden');
                            overlay.style.pointerEvents = 'auto';
                        }

                        /* ====================================================== */
                        /* ✅ START: دالة إظهار رسالة السلة الفارغة (النسخة المعدلة) */
                        /* ====================================================== */
                        function showEmptyCartModal() {
                            const modal = document.getElementById('confirmationModal');
                            const title = modal.querySelector('#confirmationTitle');
                            const message = modal.querySelector('#confirmationMessage');
                            const yesBtn = modal.querySelector('#confirm-yes-btn');
                            const noBtn = modal.querySelector('#confirm-no-btn');
                            const closeBtn = modal.querySelector('.close-btn');
                            const overlay = document.getElementById('overlay');

                            // 1. إخفاء العناصر التي لا نريدها
                            message.style.display = 'none'; // إخفاء سطر الرسالة "الرجاء إضافة..."
                            noBtn.style.display = 'none';   // إخفاء زر "إغلاق"

                            // 2. تغيير نص العنوان والزر المتبقي
                            title.textContent = 'سلة التسوق فارغة!';
                            yesBtn.textContent = 'متابعة التسوق';

                            // 3. (مهم) دالة لإعادة النافذة لحالتها الأصلية عند الإغلاق
                            function restoreModalDefaults() {
                                message.style.display = 'block'; // إعادة إظهار الرسالة
                                noBtn.style.display = 'inline-block'; // إعادة إظهار الزر

                                // إعادة النصوص الأصلية الخاصة بتأكيد الدفع
                                title.textContent = 'تأكيد العملية';
                                message.textContent = 'هل قمت بإتمام عملية الدفع بالفعل؟';
                                yesBtn.textContent = 'نعم، قمت بالدفع';
                                noBtn.textContent = 'لا';

                                // إعادة وظائف الأزرار الأصلية (سيتم تحديدها عند استدعاء الدفع)
                                yesBtn.onclick = null;
                                noBtn.onclick = null;
                                closeBtn.onclick = () => closeModal('confirmationModal');
                                overlay.onclick = () => closeModal('all');
                            }

                            // 4. تغيير وظيفة زر "متابعة التسوق"
                            yesBtn.onclick = () => {
                                closeModal('confirmationModal');
                                window.location.hash = '#home'; // الانتقال للصفحة الرئيسية
                                restoreModalDefaults(); // إعادة النافذة لوضعها الطبيعي
                            };

                            // 5. تعديل زر الإغلاق (X) في الزاوية ليعيد النافذة لوضعها الطبيعي
                            closeBtn.onclick = () => {
                                closeModal('confirmationModal');
                                restoreModalDefaults();
                            };

                            // 6. تعديل الـ overlay ليعيد النافذة لوضعها الطبيعي
                            overlay.onclick = () => {
                                closeModal('all');
                                restoreModalDefaults();
                            };

                            // 7. إظهار النافذة
                            showModal('confirmationModal');
                        }
                        /* ====================================================== */
                        /* ✅ END: دالة إظهار رسالة السلة الفارغة */
                        /* ====================================================== */

                        // ======================================================
                        // ✅ START: دالة الترجمة وتغيير اتجاه الموقع
                        // ======================================================

                        function setLanguage(lang) {
                            currentLanguage = lang; // تحديث المتغير العام
                            const translationData = translations[lang];

                            // 1. تحديث اتجاه ولغة الصفحة بالكامل
                            document.documentElement.setAttribute('lang', lang);
                            document.documentElement.setAttribute('dir', lang === 'ar' ? 'rtl' : 'ltr');

                            // 2. البحث عن كل العناصر التي تحتاج ترجمة
                            document.querySelectorAll('[data-translate]').forEach(element => {
                                const key = element.dataset.translate;
                                if (translationData[key]) {

                                    // 3. التحقق إذا كان العنصر هو input (لتغيير الـ placeholder)
                                    if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                                        element.placeholder = translationData[key];
                                    }
                                    // 4. التحقق إذا كان العنصر هو زر (لتغيير القيمة)
                                    else if (element.tagName === 'INPUT' && (element.type === 'submit' || element.type === 'button')) {
                                        element.value = translationData[key];
                                    }
                                    // 5. باقي العناصر (لتغيير المحتوى النصي)
                                    else {
                                        // استخدام querySelector لإيجاد النص فقط وتجنب استبدال الأيقونات
                                        const textNode = element.firstChild;
                                        if (textNode && textNode.nodeType === Node.TEXT_NODE) {
                                            textNode.textContent = translationData[key] + (element.querySelector('svg') ? ' ' : ''); // إضافة مسافة إذا كان هناك أيقونة
                                        } else {
                                            element.textContent = translationData[key];
                                        }
                                    }
                                }
                            });

                            // 6. (اختياري) تحديث النصوص التي ليس لها data-translate (مثل زر الديسكورد)
                            // يمكنك إضافة أي عناصر أخرى هنا بنفس الطريقة
                            const discordBtn = document.querySelector('.discord-button span');
                            if (discordBtn) discordBtn.textContent = translationData['join_discord'];

                            const trackBtn = document.querySelector('button[onclick*="#shipping"]');
                            if (trackBtn) trackBtn.textContent = translationData['track_order'];

                            const searchInput = document.getElementById('navbarProductSearch');
                            if (searchInput) searchInput.placeholder = translationData['search_placeholder'];

                            // إعادة تحميل الأقسام لتحديث أسعار المنتجات
                            // (هذه الخطوة ضرورية لأن دالة تغيير العملة أصبحت جزءًا من هذه الدالة)
                            loadAllSections();
                            renderCart();

                            // تحديث حاسبات الأسعار
                            if (document.getElementById('valorant-boosting').style.display === 'block') {
                                calculateBoostingPrice();
                            }
                            if (document.getElementById('fortnite-boosting').style.display === 'block') {
                                calculateFortniteBoostingPrice();
                            }
                            if (document.getElementById('xboxGiftingModal').classList.contains('is-visible')) {
                                calculateXboxGiftingPrice();
                            }
                        }

                        // ======================================================
                        // ✅ END: دالة الترجمة وتغيير اتجاه الموقع
                        // ======================================================

                        function loadXboxSection() {
                            const cardsContainer = document.getElementById('xboxGiftCardsContainer');
                            const gamesContainer = document.getElementById('xboxPopularGamesContainer');

                            if (!cardsContainer || !gamesContainer) return;

                            cardsContainer.innerHTML = '';
                            gamesContainer.innerHTML = '';

                            for (const productId in productsData) {
                                const product = productsData[productId];

                                if (product.category === 'xbox-cards') {
                                    // هنا هيتحط (الكروت الرفيعة) فقط
                                    renderProductItem(product, cardsContainer, 'xbox-cards', true);
                                } else if (product.category === 'xbox-popular') {
                                    // هنا هيتحط (ماينكرافت والجيم باس) فقط
                                    renderProductItem(product, gamesContainer, 'xbox-popular', true);
                                }
                            }

                            /* --- ✅✅ START: تم إيقاف كود المضاعفة لأنه غير مطلوب مع 'alternate' ✅✅ ---
                            const productsInContainer = gamesContainer.querySelectorAll('.product-item');
                            if (productsInContainer.length > 0) {
                                // مضاعفة المنتجات لضمان حركة مستمرة
                                productsInContainer.forEach(productCard => {
                                    const clone = productCard.cloneNode(true); // استنساخ الكارت
                                    gamesContainer.appendChild(clone); // إضافة النسخة في الآخر
                                });
                            }
                            --- ✅✅ END: كود مضاعفة المنتجات --- */
                        }


                        // ✅ استبدل الدالة القديمة بهذه النسخة النهائية والمطورة
                        function performInstantSearch(isExpanded = false) {
                            const query = document.getElementById('navbarProductSearch').value.toLowerCase().trim();
                            const resultsContainer = document.getElementById('navbar-search-results');
                            if (!resultsContainer) return;

                            // ✅ التحكم في كلاس التوسيع بناءً على ضغطة Enter
                            if (isExpanded) {
                                resultsContainer.classList.add('expanded');
                            } else {
                                resultsContainer.classList.remove('expanded');
                            }

                            if (query.length < 2) {
                                resultsContainer.classList.remove('visible');
                                return;
                            }

                            const searchTerm = query;
                            resultsContainer.innerHTML = '';

                            let matches = [];
                            const knownPlatforms = ['steam', 'riot', 'epic', 'roblox', 'microsoft', 'hoyoverse', 'activision', 'discord'];

                            for (const id in productsData) {
                                const product = productsData[id];
                                let score = 0;
                                const title = product.title.toLowerCase();
                                const shortDesc = (product.shortDescription || '').toLowerCase();
                                const platform = (product.platform || '').toLowerCase();
                                const category = (product.category || '').toLowerCase();

                                if (knownPlatforms.includes(searchTerm) && (category === 'games' || category === 'offline-steam')) {
                                    continue;
                                }

                                if (searchTerm === 'steam' && product.id.startsWith('steamGift')) {
                                    score += 100;
                                }

                                if (title.includes(searchTerm)) {
                                    score += 10;
                                }

                                if (platform.includes(searchTerm)) {
                                    score += 8;
                                }

                                if (shortDesc.includes(searchTerm)) {
                                    score += 2;
                                }

                                if (score > 0) {
                                    matches.push({ product, score });
                                }
                            }

                            matches.sort((a, b) => b.score - a.score);

                            // ✅ تحديد عدد النتائج للعرض (5 نتائج أو كل النتائج)
                            const resultsToShow = isExpanded ? matches : matches.slice(0, 5);

                            if (resultsToShow.length > 0) {
                                resultsToShow.forEach(match => {
                                    const product = match.product;
                                    let price = product.price || 0;
                                    let currencySymbol = 'EGP';

                                    if (product.options) {
                                        const firstOptionKey = Object.keys(product.options)[0];
                                        price = product.options[firstOptionKey].price;
                                    }

                                    if (currentCurrency === 'USD') {
                                        const usdPrice = product.usd_price || (product.options ? product.options[Object.keys(product.options)[0]].usd_price : null) || price / exchangeRate;
                                        price = usdPrice.toFixed(2);
                                        currencySymbol = 'USD';
                                    }

                                    const resultItem = document.createElement('a');
                                    resultItem.className = 'search-result-item';
                                    resultItem.href = `#product/${product.id}`;
                                    resultItem.onclick = closeInstantSearch;
                                    resultItem.innerHTML = `
                                                                                                                                                                                                                                                                                                                                                    <img src="${product.image}" alt="${product.title}" loading="lazy">
                                                                                                                                                                                                                                                                                                                                                    <div class="result-details">
                                                                                                                                                                                                                                                                                                                                                        <span class="result-title">${product.title}</span>
                                                                                                                                                                                                                                                                                                                                                        <span class="result-price">${price} ${currencySymbol}</span>
                                                                                                                                                                                                                                                                                                                                                    </div>
                                                                                                                                                                                                                                                                                                                                                `;
                                    resultsContainer.appendChild(resultItem);
                                });
                            } else {
                                resultsContainer.innerHTML = `<div class="no-results-item">لا توجد نتائج مطابقة</div>`;
                            }

                            resultsContainer.classList.add('visible');
                        }

                        document.addEventListener('DOMContentLoaded', function () {
                            // --- (1) كود شاشة التحميل (هذا الكود صحيح وموجود عندك) ---
                            const loadingScreen = document.getElementById('loading-screen');
                            if (loadingScreen) {
                                setTimeout(() => {
                                    loadingScreen.classList.add('hidden');
                                }, 1500);
                            }

                            // --- (2) ✅✅ الكود الكامل والصحيح للمؤشر الجديد ✅✅ ---
                            const cursorRing = document.querySelector('.custom-cursor-ring');
                            const cursorDot = document.querySelector('.custom-cursor-dot');
                            // هنا نحدد كل العناصر التي نريد أن يتفاعل معها المؤشر
                            const interactiveElements = document.querySelectorAll('a, button, input, select, .product-item, .service-offer-card, .rank-option, .close-btn, .tab-button');

                            window.addEventListener('mousemove', e => {
                                // تحريك الحلقة والنقطة مع الماوس
                                cursorRing.style.left = `${e.clientX}px`;
                                cursorRing.style.top = `${e.clientY}px`;
                                cursorDot.style.left = `${e.clientX}px`;
                                cursorDot.style.top = `${e.clientY}px`;
                            });

                            // هذا الجزء هو المسؤول عن التأثير التفاعلي
                            interactiveElements.forEach(el => {
                                el.addEventListener('mouseenter', () => {
                                    document.body.classList.add('cursor-interactive');
                                });
                                el.addEventListener('mouseleave', () => {
                                    document.body.classList.remove('cursor-interactive');
                                });
                            });

                            // --- (3) باقي كود الـ JavaScript الخاص بك يبدأ من هنا ---
                            // ( ... باقي الدوال مثل handleRouting, loadGamesToHome, etc ... )

                        });

                        document.querySelectorAll('.product-item, .subscription-item, .service-offer-card, .rental-card').forEach(card => {
                            card.addEventListener('mousemove', e => {
                                const rect = card.getBoundingClientRect();
                                const x = e.clientX - rect.left;
                                const y = e.clientY - rect.top;
                                card.style.setProperty('--mouse-x', `${x}px`);
                                card.style.setProperty('--mouse-y', `${y}px`);
                            });
                            card.addEventListener('mouseleave', () => {
                                card.style.setProperty('--mouse-x', `-100%`);
                                card.style.setProperty('--mouse-y', `-100%`);
                            });
                        });

    </script>
    <div id="minecraft-product-page" class="category-main-content" style="display: none;">
    </div>


    <div id="discordDecorationsPage" class="section glass-card">
        <div id="discordDecorationsPageContainer">

            <div id="discord-calculator-card">
                <div class="card-info-section">
                    <img src="./images/discord-decorations.png" alt="Discord Decorations" class="card-icon">
                    <h3>زين بروفايلك في ديسكورد</h3>

                    <div class="volume-discount-badge">🎉 خصم 5% على كل قطعة إضافية!</div>

                    <p>اختر قيمة الديكور الذي تريده، حدد الكمية، ثم اذكر أسماء الديكورات المطلوبة ليتم شحنها مباشرة لحسابك.</p>
                </div>

                <div class="card-form-section">
                    <div class="input-wrapper" style="width: 100%;">
                        <svg xmlns="https://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil-square" viewBox="0 0 16 16">
                            <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z" />
                            <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z" />
                        </svg>
                        <textarea id="discord-deco-names" placeholder="اكتب أسماء الديكورات هنا (افصل بينها بفاصلة)" rows="2"></textarea>
                    </div>

                    <div class="input-wrapper" style="width: 100%; margin-top: 10px;">
                        <i class="fab fa-discord" style="color: white; margin-left: 8px;"></i>
                        <input type="text" id="discord-deco-username" placeholder="يوزر الديسكورد الخاص بك" style="background: transparent; border: none; color: white; width: 100%; outline: none; padding: 5px;">
                    </div>

                    <div class="calculator-controls">
                        <div class="input-group">
                            <select id="discord-usd-amount" onchange="calculateDiscordDecoPrice()">
                                <option value="" disabled selected>سعر الديكور</option>
                                <option value="4.99">$4.99</option>
                                <option value="5.99">$5.99</option>
                                <option value="6.99">$6.99</option>
                                <option value="7.99">$7.99</option>
                                <option value="8.49">$8.49</option>
                                <option value="8.99">$8.99</option>
                                <option value="9.99">$9.99</option>
                                <option value="10.99">$10.99</option>
                                <option value="11.99">$11.99</option>
                                <option value="12.99">$12.99</option>
                                <option value="13.99">$13.99</option>
                                <option value="17.99">$17.99</option>
                                <option value="21.99">$21.99</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label>الكمية</label>
                            <div class="quantity-selector-inline">
                                <button id="discord-deco-decrease">-</button>
                                <input type="number" id="discord-deco-quantity" value="1" min="1" oninput="calculateDiscordDecoPrice()">
                                <button id="discord-deco-increase">+</button>
                            </div>
                        </div>
                    </div>

                    <div id="discord-price-display">
                        <span class="price-label">التكلفة الإجمالية:</span>
                        <span class="price-value">...</span>
                    </div>
                    <p id="discord-calc-error" class="error-message"></p>

                    <button class="buy-btn" onclick="handleDiscordDecoOrder()">
                        <i class="fas fa-cart-plus" style="margin-left: 8px;"></i> أضف إلى السلة
                    </button>
                </div>
            </div>

        </div>
    </div>


    <div id="valorant-boosting" class="section">
        <span class="close-btn" onclick="closeBoostingSection()">&times;</span>
        <h2 style="text-align: center;">Rank Boosting in Valorant 🚀</h2>

        <div id="boosting-cover">
            <img src="./images/5979-valorant-radiant.png" alt="Valorant Boosting" class="cover-image">
            <h3>الرانك بوستينج في فالورانت</h3>
            <p>استخدم حاسبتنا الدقيقة لمعرفة تكلفة الوصول للرانك الذي تحلم به واطلب الخدمة مباشرة. أمان وسرعة في التنفيذ مع أفضل اللاعبين.</p>
            <button class="start-boosting-btn" onclick="showBoostingCalculator()">ابدأ الآن</button>
        </div>

        <div id="boosting-calculator-container">
            <div class="calculator-inputs">
                <p class="form-step-title">الخطوة 1: أدخل بيانات حسابك</p>

                <div class="input-wrapper">
                    <svg xmlns="https://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-envelope-fill" viewBox="0 0 16 16">
                        <path d="M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555ZM0 4.697v7.104l5.803-3.558L0 4.697ZM6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757Zm3.436-.586L16 11.803V4.697l-5.803 3.546Z" />
                    </svg>
                    <input type="email" id="boosting-email" placeholder="ايميل الحساب" required>
                </div>

                <div class="input-wrapper">
                    <svg xmlns="https://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-key-fill" viewBox="0 0 16 16">
                        <path d="M3.5 11.5a3.5 3.5 0 1 1 3.163-5H14L15.5 8 14 9.5l-1-1-1 1-1-1-1 1-1-1-1 1H6.663a3.5 3.5 0 0 1-3.163 2zM2.5 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" />
                    </svg>
                    <input type="password" id="boosting-password" placeholder="كلمة المرور" required>
                </div>

                <div class="input-wrapper">
                    <svg xmlns="https://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chat-dots-fill" viewBox="0 0 16 16">
                        <path d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" />
                    </svg>
                    <input type="text" id="boosting-contact" placeholder="وسيلة تواصل (واتس او ديس..)" required>
                </div>
            </div>

            <div class="rank-selection-area">
                <div class="rank-selector-column">
                    <p class="form-step-title">الخطوة 2: اختر رانكك الحالي</p>
                    <div id="current-rank-selector" class="rank-grid">
                    </div>
                </div>
                <div class="rank-selector-column">
                    <p class="form-step-title">الخطوة 3: اختر الرانك المطلوب</p>
                    <div id="desired-rank-selector" class="rank-grid">
                    </div>
                </div>
            </div>

            <div class="boosting-summary">
                <div id="boosting-price-display">
                    <span class="price-label">المبلغ المطلوب</span>
                    <span class="price-value">0.00 EGP</span>
                </div>
                <button id="boosting-order-btn" class="buy-btn" onclick="handleBoostingOrder()">اطلب الآن</button>
                <p id="boosting-error-message"></p>
            </div>
        </div>
    </div>

    <div id="valorant-coaching" class="section glass-card" style="text-align: center;">
        <h2>اتقن فالورانت مع أفضل المدربين! 🧠</h2>
    </div>

    <div id="fortnite-boosting" class="section">

        <div class="fn-boosting-card">

            <h2 class="fn-boosting-title">Fortnite Level Boosting 🚀</h2>

            <div class="fn-boosting-content">
                <h3>ارفع مستواك الآن في الباتل باس!</h3>

                <div class="fn-calculator">
                    <div class="level-input-group">
                        <label for="fn-current-level">مستواك الحالي:</label>
                        <input type="number" id="fn-current-level" placeholder="لفلك الحالي" min="1" oninput="calculateFortniteBoostingPrice()">
                    </div>
                    <div class="level-input-group">
                        <label for="fn-desired-level">المستوى المطلوب:</label>
                        <input type="number" id="fn-desired-level" placeholder="اللفل المطلوب" min="2" oninput="calculateFortniteBoostingPrice()">
                    </div>
                </div>

                <div id="fn-price-display">
                    <span class="price-label">Total:</span>
                    <span class="price-value">...</span>
                </div>

                <p id="fn-error-message" class="error-message"></p>

                <div class="fn-user-info-form">
                    <p class="form-step-title">بيانات الحساب (مطلوبة للتنفيذ)</p>
                    <div class="input-wrapper">
                        <svg xmlns="https://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555zM0 4.697v7.104l5.803-3.558L0 4.697zm6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757zm3.436-.586L16 11.803V4.697l-5.803 3.546z" /></svg>
                        <input type="email" id="fn-email" placeholder="إيميل حساب Epic Games" required>
                    </div>
                    <div class="input-wrapper">
                        <svg xmlns="https://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M3.5 11.5a3.5 3.5 0 1 1 3.163-5H14l1.5 1.5-1.5 1.5-1-1-1 1-1-1-1 1-1-1-1 1H6.663a3.5 3.5 0 0 1-3.163 2zM2.5 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" /></svg>
                        <input type="password" id="fn-password" placeholder="باسورد الحساب" required>
                    </div>
                    <div class="input-wrapper">
                        <svg xmlns="https://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" /></svg>
                        <input type="text" id="fn-contact" placeholder="وسيلة تواصل (واتساب أو ديسكورد)" required>
                    </div>
                </div>

                <button id="fn-order-btn" class="buy-btn" onclick="handleFortniteBoostingOrder()">اطلب الآن</button>
            </div>
        </div>
    </div>


    <div id="designs" class="section glass-card">
        <div class="products-container" id="designsContainer">

            <div class="custom-order-card">
                <div class="offer-overlay">
                    <img src="./images/design-offer.png" alt="تصميم جرافيك" class="offer-image">
                    <h3>تصاميم سوشيال ميديا وجرافيك ديزاين</h3>
                    <p class="custom-order-description">احصل على تصاميم احترافية لصفحاتك على السوشيال ميديا، شعارات، أو أي عمل فني تحتاجه..</p>
                    <p class="offer-price-range" style="color: #cda1ff;">السعر يبدأ من 25 ج.م إلى 3000 ج.م</p>

                    <div class="offer-buttons-container">
                        <button type="button" class="offer-order-btn" onclick="revealOrderForm(this)">اطلب</button>
                        <a href="https://discord.gg/D3shcEb5xe" target="_blank" class="offer-discord-btn">
                            <img src="./images/discord.png" alt="Discord">
                            <span>اطلب من</span>
                        </a>
                    </div>
                </div>
                <form id="graphic-design-form" class="custom-order-form">
                    <input type="text" name="name" placeholder="اسمك " required>
                    <input type="email" name="email" placeholder="بريدك الإلكتروني" required>
                    <input type="text" name="contact" placeholder="وسيلة تواصل (واتساب/انستجرام/ديسكورد)" required>
                    <textarea name="order_details" placeholder="اكتب تفاصيل طلبك هنا (نوع التصميم، الألوان المفضلة، أي أفكار لديك)" required></textarea>
                    <p style="font-size: 14px; color: var(--accent-yellow); margin: 10px 0 5px 0; text-align: center;">

                        بعد إرسال الطلب سيتم التواصل معك للاتفاق على التسعير النهائي.

                    </p><button type="submit">إرسال الطلب</button>
                </form>
            </div>

            <div class="custom-order-card">
                <div class="offer-overlay">
                    <img src="./images/design-offer-two.png" alt="تصميم فيديو" class="offer-image">
                    <h3>تصميم مقاطع فيديو وموشن جرافيك</h3>
                    <p class="custom-order-description">حوّل أفكارك إلى فيديو متحرك.خدمة تصميم فيديوهات إعلانية، مقدمات قنوات، ومقاطع موشن جرافيك.</p>
                    <p class="offer-price-range" style="color: #cda1ff;">السعر يبدأ من 50 ج.م إلى 5000 ج.م</p>

                    <div class="offer-buttons-container">
                        <button type="button" class="offer-order-btn" onclick="revealOrderForm(this)">اطلب</button>
                        <a href="https://discord.gg/D3shcEb5xe" target="_blank" class="offer-discord-btn">
                            <img src="./images/discord.png" alt="Discord">
                            <span>اطلب من</span>
                        </a>
                    </div>
                </div>
                <form id="video-editing-form" class="custom-order-form">
                    <input type="text" name="name" placeholder="اسمك " required>
                    <input type="email" name="email" placeholder="بريدك الإلكتروني" required>
                    <input type="text" name="contact" placeholder="وسيلة تواصل (واتساب/انستجرام/ديسكورد)" required>
                    <textarea name="order_details" placeholder="اكتب تفاصيل طلبك هنا (فكرة الفيديو، مدته، المراجع التي تريدها)" required></textarea>
                    <p style="font-size: 14px; color: var(--accent-yellow); margin: 10px 0 5px 0; text-align: center;">

                        بعد إرسال الطلب سيتم التواصل معك للاتفاق على التسعير النهائي.

                    </p>
                    <button type="submit">إرسال الطلب</button>
                </form>
            </div>

            <div class="custom-order-card">
                <div class="offer-overlay">
                    <img src="./images/gaming-content-design.png" alt="تصميمات جيمنج وصناعة محتوى" class="offer-image">
                    <h3>تصميمات للجيمنج وصناعة المحتوى</h3>
                    <p class="custom-order-description">تصميمات مخصصة للاعبين وصناع المحتوى: انترو قنوات، شعارات وبنرات للفرق،أي تصميم آخر لتجعل محتواك مميزًا.</p>
                    <p class="offer-price-range" style="color: #cda1ff;">السعر يبدأ من 40 ج.م إلى 4500 ج.م</p>

                    <div class="offer-buttons-container">
                        <button type="button" class="offer-order-btn" onclick="revealOrderForm(this)">اطلب </button>
                        <a href="https://discord.gg/D3shcEb5xe" target="_blank" class="offer-discord-btn">
                            <img src="./images/discord.png" alt="Discord">
                            <span>اطلب من</span>
                        </a>
                    </div>
                </div>
                <form id="gaming-content-form" class="custom-order-form">
                    <input type="text" name="name" placeholder="اسمك " required>
                    <input type="email" name="email" placeholder="بريدك الإلكتروني" required>
                    <input type="text" name="contact" placeholder="وسيلة تواصل (واتساب/انستجرام/ديسكورد)" required>
                    <textarea name="order_details" placeholder="اكتب تفاصيل طلبك هنا (نوع التصميم، المنصة، المراجع التي تريدها)" required></textarea>
                    <p style="font-size: 14px; color: var(--accent-yellow); margin: 10px 0 5px 0; text-align: center;">

                        بعد إرسال الطلب سيتم التواصل معك للاتفاق على التسعير النهائي.

                    </p>
                    <button type="submit">إرسال الطلب</button>
                </form>
            </div>

        </div>
    </div>




    <div id="developing" class="section glass-card">
        <h2 style="margin: 0 auto; text-align: center;">خدمات التطوير والبرمجة</h2>
        <div class="products-container" id="developingContainer">

            <div class="custom-order-card" id="website-design-card">
                <div class="offer-overlay">
                    <img src="./images/das.png" alt="تصميم موقع" class="offer-image">
                    <h3>باقة تطوير وتصميم موقع إلكتروني</h3>
                    <p class="custom-order-description">امتلك موقعك الخاص. نقوم بتصميم وبرمجة مواقع تعريفية، متاجر إلكترونية، أو أي فكرة لديك.</p>
                    <p class="offer-price-range" style="color: #cda1ff;">السعر يبدأ من 100 ج.م إلى 8000 ج.م</p>
                    <button type="button" class="offer-order-btn" onclick="showSiteTypeOptions()">اطلب الآن</button>
                </div>

                <div class="site-type-selection" style="opacity: 0; pointer-events: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; padding: 25px; box-sizing: border-box; z-index: 3; display: flex; flex-direction: column; align-items: center; justify-content: center; background: linear-gradient(145deg, rgba(44, 26, 64, 0.95), rgba(30, 17, 50, 1));">
                    <h3 style="margin-bottom: 20px; color: var(--accent-yellow);">ما هو نوع الموقع المطلوب؟</h3>
                    <div class="site-type-grid" id="site-type-options-container">
                    </div>
                    <button type="button" onclick="goBackToOffer('website-design-card')" style="margin-top: 25px; background-color: transparent; border: 1px solid #cda1ff; color: #cda1ff; padding: 8px 20px;">&larr; رجوع</button>
                </div>

                <form id="website-design-form" class="custom-order-form">
                    <h3 style="color: var(--green-buy-btn);">الخطوة الأخيرة: بيانات طلب <span id="selected-site-type-title"></span></h3>
                    <input type="text" name="name" placeholder="اسمك " required>
                    <input type="email" name="email" placeholder="بريدك الإلكتروني" required>
                    <input type="text" name="contact" placeholder="وسيلة تواصل (واتساب/انستجرام/ديسكورد)" required>
                    <input type="hidden" name="site_type" id="site-type-hidden-input">
                    <textarea name="order_details" placeholder="اكتب تفاصيل طلبك هنا (الأقسام المطلوبة المطلوب، الميزات، الثيم و الألوان، وأي أفكار عندك)" required></textarea>
                    <p style="font-size: 14px; color: var(--accent-yellow); margin: 10px 0 5px 0; text-align: center;">

                        بعد إرسال الطلب سيتم التواصل معك للاتفاق على التسعير النهائي.

                    </p>
                    <button type="submit">إرسال الطلب</button>
                </form>
            </div>

            <div class="custom-order-card">
                <div class="offer-overlay">
                    <img src="./images/dass.png" alt="تصميم ديسكورد" class="offer-image">
                    <h3>باقة تطوير وتصميم سيرفر ديسكورد</h3>
                    <p class="custom-order-description">حوّل سيرفرك إلى مجتمع احترافي متكامل. نقوم بإعداد الرومات، البوتات، الصلاحيات، وكل ما يلزم لنجاح سيرفرك الخاص.</p>
                    <p class="offer-price-range" style="color: #cda1ff;">السعر يبدأ من 50 ج.م إلى 900 ج.م</p>
                    <button type="button" class="offer-order-btn" onclick="revealOrderForm(this)">اطلب الآن</button>
                </div>

                <form id="discord-server-form" class="custom-order-form">
                    <input type="text" name="name" placeholder="اسمك " required>
                    <input type="email" name="email" placeholder="بريدك الإلكتروني" required>
                    <input type="text" name="contact" placeholder="وسيلة تواصل (واتساب/انستجرام/ديسكورد)" required>
                    <textarea name="order_details" placeholder="اكتب تفاصيل طلبك هنا (فكرة السيرفر، عدد الرومات، البوتات المطلوبة)" required></textarea>
                    <p style="font-size: 14px; color: var(--accent-yellow); margin: 10px 0 5px 0; text-align: center;">
                        بعد إرسال الطلب سيتم التواصل معك للاتفاق على التسعير النهائي.
                    </p>
                    <button type="submit">إرسال الطلب</button>
                </form>
            </div>

        </div>
    </div>

    <div id="toast-container"></div>

    <div id="navbar">


        <div class="logo-area">
            <a href="#home" style="text-decoration: none; line-height: 0;">
                <img src="./images/BerlinStore.png" alt="Store Logo">
            </a>
            <div class="logo-text-container">
                <span class="by-sohayl">By <a href="https://konect.gg/sohayl" target="_blank">Sohayl</a></span>
                <select id="currency-selector" onchange="changeCurrency()">
                    <option value="EGP">🌐𝗘𝗚𝗬𝗣𝗧</option>
                    <option value="USD">🌐𝗚𝗟𝗢𝗕𝗔𝗟</option>
                </select>
            </div>
        </div>

        <div class="user-menu-wrapper" style="position: relative; display: flex; align-items: center;">

            <div id="user-account-btn" class="nav-link" onclick="handleUserClick()" style="cursor: pointer;">

                <div id="login-state-content" style="display: flex; align-items: center; gap: 5px;">
                    <svg xmlns="https://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--accent-yellow);">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                    <span style="font-size: 14px; font-weight: bold;">تسجيل الدخول</span>
                </div>

                <div id="logged-user-content" style="
    display: none !important;
    flex-direction: column !important; /* ✅ القوة: يجبر الترتيب على أن يكون عمودياً */
    align-items: center !important;  /* توسيط كل شيء أفقياً */
    gap: 4px !important;
">
                    <img id="nav-user-img" src="" alt="Profile" style="
        width: 35px;
        height: 35px;
        border-radius: 50%;
        object-fit: cover;
        border: 2px solid var(--accent-yellow);
        flex-shrink: 0;
    ">
                    <span id="nav-user-email" style="
        font-size: 11px !important;
        color: #fff;
        font-weight: bold;
        line-height: 1.1;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        display: block;
        max-width: 90px;
        text-align: center; /* لضمان توسيط النص إن كان أقصر */
    "></span>
                </div>

                <div id="user-dropdown-menu" class="dropdown-content" style="min-width: 240px; left: 0; right: auto; top: 100%; margin-top: 10px;">

                    <div style="
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 25px 15px;
        background: rgba(0, 0, 0, 0.3);
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        margin-bottom: 8px;
        cursor: pointer;
        transition: background 0.3s;
    " onclick="openProfileSettings()" onmouseover="this.style.background='rgba(255,255,255,0.05)'" onmouseout="this.style.background='rgba(0,0,0,0.3)'">

                        <img id="dropdown-user-img" src="./images/BerlinStore.png" alt="Profile" class="dropdown-profile-pic" style="
            width: 70px;
            height: 70px;
            margin-bottom: 12px; /* مسافة بين الصورة والاسم */
            border: 3px solid var(--accent-yellow);
        ">

                        <h3 id="dropdown-user-name" style="
            color: white;
            font-size: 18px;
            margin: 0 0 8px 0;
            padding: 0;
            border: none;
            font-weight: bold;
            line-height: 1.2;
        ">
                            ...
                        </h3>

                        <span id="dropdown-rank-badge" style="
            font-size: 11px;
            font-weight: 900;
            padding: 4px 12px;
            border-radius: 20px;
            display: inline-block;
            color: #fff;
            background: #5D4037;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            letter-spacing: 1px;
        ">
                            🥉 BRONZE
                        </span>
                    </div>
                    <a href="javascript:void(0)" onclick="openProfileSettings()" class="nav-link" style="text-align: right; color: white; padding: 12px 15px; display: flex; align-items: center; justify-content: flex-start;">
                        <i class="fas fa-user" style="font-size: 16px; margin-left: 10px; color: #ccc;"></i>
                        <span>حسابي</span>
                    </a>

                    <a href="#my-orders-page" onclick="showSection('my-orders-page')" class="nav-link" style="text-align: right; color: white; padding: 12px 15px; display: flex; align-items: center; justify-content: flex-start;">
                        <i class="fas fa-box-open" style="font-size: 16px; margin-left: 10px; color: var(--light-text);"></i>
                        <span>طلباتي</span>
                    </a>

                    <a href="#" onclick="openWishlistModal(); return false;" class="nav-link" style="text-align: right; color: white; padding: 12px 15px; display: flex; align-items: center; justify-content: flex-start;">
                        <i class="fas fa-heart" style="font-size: 16px; margin-left: 10px; color: #ff4757;"></i>

                        <div style="display: flex; justify-content: space-between; width: 100%; align-items: center;">
                            <span>قائمة الأمنيات</span>
                            <span id="dropdown-wishlist-count" style="background: #ff4757; color: white; font-size: 10px; padding: 2px 6px; border-radius: 10px; display: none;">0</span>
                        </div>
                    </a>

                    <a href="javascript:void(0)" onclick="openRewardShop()" class="nav-link" style="text-align: right; color: white; padding: 12px 15px; display: flex; align-items: center; justify-content: flex-start;">
                        <i class="fas fa-gem" style="font-size: 16px; margin-left: 10px; color: var(--accent-yellow);"></i>
                        <span>متجر المكافآت</span>
                    </a>

                    <div class="dropdown-divider"></div>

                    <a href="admin.html" target="_blank" id="admin-dashboard-btn" class="nav-link"
                       style="display: none !important; text-align: right; color: #ffd700; padding: 12px 15px; align-items: center; justify-content: flex-start; border-bottom: 1px solid rgba(255,255,255,0.1);">
                        <i class="fas fa-user-shield" style="font-size: 16px; margin-left: 10px;"></i>
                        <span>ادارة</span>
                    </a>

                    <div class="dropdown-divider"></div>

                    <a href="#" onclick="logoutUser()" class="nav-link logout-btn" style="
        text-align: right;
        color: #ff4757 !important;
        padding: 12px 15px;
        display: flex;
        align-items: center;
        justify-content: flex-start;
    ">
                        <i class="fas fa-sign-out-alt" style="font-size: 16px; margin-left: 10px; color: #ff4757;"></i>
                        <span>تسجيل الخروج</span>
                    </a>
                </div>
            </div>

        </div> <div class="nav-middle-section">
            <a href="#home" class="nav-link">الرئيسية</a>
            <a href="#subscriptions-section" class="nav-link">الاشتراكات</a>
            <div class="dropdown">
                <div class="nav-link">شـحـن</div>
                <div class="dropdown-content">
                    <a href="#valorantPoints" class="nav-link">Valorant Points</a>
                    <a href="#fortnite" class="nav-link">Fortnite</a>
                    <a href="#roblox" class="nav-link">Roblox</a>
                    <a href="#genshinImpact" class="nav-link">Genshin Impact</a>
                    <a href="#rocketleague" class="nav-link">Rocket League</a>
                    <a href="#marvelRivals" class="nav-link">Marvel Rivals</a>

                    <div class="dropdown-divider"></div>
                    <a href="#playstation-section" class="nav-link">PlayStation</a>
                    <a href="#xbox-gifting-section" class="nav-link">Xbox</a>

                    <div class="dropdown-divider"></div>
                    <a href="#discordDecorationsPage" class="nav-link">Discord Decorations</a>
                </div>
            </div>


            <div class="dropdown">
                <div class="nav-link">ستـيـم</div>
                <div class="dropdown-content">
                    <a href="#personal-gifting-section" class="nav-link">جيفت لحسابي الشخصي</a>
                    <a href="#steamGiftCards" class="nav-link">Steam Gift Cards</a>
                    <a href="#steam-points-section" class="nav-link">Steam Points</a>
                    <a href="#offline-steam-section" class="nav-link">حسابات ستيم أوفلاين</a>
                </div>
            </div>


            <div class="dropdown">
                <div class="nav-link">Services</div> <div class="dropdown-content">
                    <a href="#designs" class="nav-link">
                        Designing
                        <svg class="dropdown-logo" xmlns="https://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polygon points="12 2 2 7 12 12 22 7 12 2"></polygon>
                            <polyline points="2 17 12 22 22 17"></polyline>
                            <polyline points="2 12 12 17 22 12"></polyline>
                        </svg>
                    </a>
                    <a href="#developing" class="nav-link">
                        Developing
                        <svg class="dropdown-logo" xmlns="https://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="16 18 22 12 16 6"></polyline>
                            <polyline points="8 6 2 12 8 18"></polyline>
                        </svg>
                    </a>
                    <div class="dropdown-divider"></div>
                    <a href="#valorant-boosting" class="nav-link">Valorant Boosting</a>
                    <a href="#fortnite-boosting" class="nav-link">Fortnite Level Boosting</a>
                    <a href="#cod-services" class="nav-link">Call of Duty Services</a>
                    <a href="#valorant-coaching" class="nav-link">Valorant Coaching</a>
                </div>
            </div>
            <div class="navbar-search-container">
                <input type="text" id="navbarProductSearch" class="navbar-search-input" placeholder="ابحث..." oninput="performInstantSearch()" onkeyup="handleSearchEnter(event)">
                <svg xmlns="https://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"></path>
                </svg>
                <div id="navbar-search-results"></div>
            </div>
        </div>


        <div class="support-button" onclick="showModal('supportModal')">
            <img class="support-icon" src="./images/supp.png" alt="Support Icon">
            Support
        </div>
    </div>

    <div class="fixed-cart-button" onclick="showModal('cartModal'); renderCart();">
        <img src="./images/cartt.png" alt="Cart Icon">
        <span id="cart-count">0</span>
    </div>



    <div id="home" class="section glass-card" style="text-align: center;">

        <div class="header-inline-container">
            <h2 class="glow-text-rtl-inline">أهلاً بك في Berlin Store!</h2>
            <img src="./images/BerlinStore.png" alt="Berlin Store Logo" class="logo-inline">
        </div>

        <div class="main-ad-banner" id="ad-banner-container">
            <a href="#" id="ad-banner-link" class="ad-link-wrapper">

                <div class="slide-item current-pos" id="slide-1-container">
                    <div class="skeleton-loader"></div>
                    <img src="" id="current-img" class="hero-ad-img" alt="" onload="hideSkeleton(this)">
                </div>

                <div class="slide-item next-pos" id="slide-2-container">
                    <div class="skeleton-loader"></div>
                    <img src="" id="next-img" class="hero-ad-img" alt="" onload="hideSkeleton(this)">
                </div>

            </a>
        </div>

        <style>
            /* 1. الحاوية الرئيسية */
            .main-ad-banner {
                position: relative;
                width: 100%;
                aspect-ratio: 16 / 9;
                overflow: hidden;
                border-radius: 12px;
                background: #0f172a; /* لون الخلفية */
                box-shadow: 0 10px 30px rgba(0,0,0,0.4);
            }

            .ad-link-wrapper {
                display: block;
                width: 100%;
                height: 100%;
                position: relative;
            }

            /* 2. حاويات الشرائح (لكل شريحة لودر وصورة) */
            .slide-item {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                overflow: hidden;
                will-change: transform;
            }

            /* 3. اللودر الشيك (Skeleton Effect) */
            .skeleton-loader {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: #1a1a2e; /* لون رمادي غامق */
                z-index: 1; /* فوق الصورة حتى تتحمل */
                /* تأثير اللمعان */
                background-image: linear-gradient( 90deg, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.05) 50%, /* أبيض شفاف خفيف جداً */
                rgba(255, 255, 255, 0) 100% );
                background-size: 200% 100%;
                animation: shimmer 1.5s infinite;
            }

            @keyframes shimmer {
                0% {
                    background-position: -200% 0;
                }

                100% {
                    background-position: 200% 0;
                }
            }

            /* 4. الصور */
            .hero-ad-img {
                width: 100%;
                height: 100%;
                object-fit: cover;
                opacity: 0; /* مخفية في البداية */
                transition: opacity 0.5s ease;
                position: relative;
                z-index: 2;
            }

            /* كلاس لإظهار الصورة وإخفاء اللودر */
            .img-loaded {
                opacity: 1;
            }

                /* عندما تتحمل الصورة، نخفي اللودر */
                .img-loaded + .skeleton-loader {
                    /* ملاحظة: بما أن اللودر قبل الصورة في الـ HTML، سنخفيه بالجافاسكريبت أفضل */
                }

            /* 5. الأوضاع والحركة */
            .current-pos {
                transform: translateX(0);
                z-index: 2;
            }

            .next-pos {
                transform: translateX(100%);
                z-index: 2;
            }

            .animate-move {
                transition: transform 0.8s cubic-bezier(0.4, 0.0, 0.2, 1);
            }

            .move-left {
                transform: translateX(-100%) !important;
            }

            .move-center {
                transform: translateX(0) !important;
            }

            @media (max-width: 768px) {
                .main-ad-banner {
                    aspect-ratio: 4 / 3;
                }
            }
        </style>

        <script>
                // دالة مساعدة لإخفاء اللودر عند تحميل الصورة
                function hideSkeleton(imgElement) {
                    // 1. أظهر الصورة
                    imgElement.classList.add('img-loaded');
                    // 2. اخفي اللودر الذي يسبقها (الأخ السابق)
                    const loader = imgElement.previousElementSibling;
                    if(loader && loader.classList.contains('skeleton-loader')) {
                        loader.style.display = 'none';
                    }
                }

                window.addEventListener('load', function() {
                    let adsData = [];
                    let currentIndex = 0;
                    let sliderInterval;

                    const currImg = document.getElementById('current-img');
                    const nextImg = document.getElementById('next-img');

                    // الحاويات التي تتحرك (وليس الصور مباشرة عشان اللودر يتحرك معاهم)
                    const currContainer = document.getElementById('slide-1-container');
                    const nextContainer = document.getElementById('slide-2-container');

                    const linkWrapper = document.getElementById('ad-banner-link');

                    // إعادة إظهار اللودر لصورة معينة
                    function showSkeleton(imgElement) {
                        imgElement.classList.remove('img-loaded');
                        const loader = imgElement.previousElementSibling;
                        if(loader) loader.style.display = 'block';
                    }

                    function setupAdBanner() {
                        if (typeof db !== 'undefined') {
                            db.collection("settings").doc("mainAd").onSnapshot((doc) => {
                                if (doc.exists) {
                                    const data = doc.data();

                                    const newAds = [
                                        { img: data.ad1?.img, url: data.ad1?.url },
                                        { img: data.ad2?.img, url: data.ad2?.url },
                                        { img: data.ad3?.img, url: data.ad3?.url }
                                    ].filter(ad => ad.img && ad.img.trim() !== "");

                                    if (JSON.stringify(newAds) !== JSON.stringify(adsData)) {
                                        adsData = newAds;

                                        if (adsData.length > 0) {
                                            // Reset
                                            if(sliderInterval) clearInterval(sliderInterval);
                                            currentIndex = 0;

                                            // Load First Image
                                            showSkeleton(currImg); // أظهر اللودر حتى تتحمل الصورة
                                            currImg.src = adsData[0].img;
                                            linkWrapper.href = adsData[0].url || "#";

                                            if (adsData.length > 1) {
                                                // Preload Second Image
                                                showSkeleton(nextImg);
                                                nextImg.src = adsData[1].img;
                                                startSlider();
                                            }
                                        }
                                    }
                                }
                            });
                        } else {
                            setTimeout(setupAdBanner, 1000);
                        }
                    }

                    function slideNext() {
                        if (adsData.length <= 1) return;

                        const nextIndex = (currentIndex + 1) % adsData.length;
                        const nextAd = adsData[nextIndex];

                        // تفعيل الأنيميشن على الحاويات
                        currContainer.classList.add('animate-move');
                        nextContainer.classList.add('animate-move');

                        // التحريك
                        requestAnimationFrame(() => {
                            currContainer.classList.add('move-left');
                            nextContainer.classList.add('move-center');
                        });

                        linkWrapper.href = nextAd.url || "#";

                        // بعد انتهاء الحركة (Swap logic)
                        setTimeout(() => {
                            // إيقاف الأنيميشن
                            currContainer.classList.remove('animate-move');
                            nextContainer.classList.remove('animate-move');

                            // التبديل السحري:
                            // 1. ضع الصورة الجديدة في الحاوية "الحالية"
                            // (ملاحظة: لضمان عدم ظهور اللودر فجأة، ننسخ الحالة أيضاً)
                            if(nextImg.classList.contains('img-loaded')) {
                                hideSkeleton(currImg); // تأكد ان اللودر مخفي
                            } else {
                                showSkeleton(currImg);
                            }
                            currImg.src = nextAd.img;

                            // 2. أعد الحاويات لمكانها الأصلي
                            currContainer.classList.remove('move-left');
                            nextContainer.classList.remove('move-center');

                            // 3. جهز الصورة *اللي بعدها* في الحاوية اليمين (Next Container)
                            currentIndex = nextIndex;
                            const futureIndex = (currentIndex + 1) % adsData.length;

                            // أظهر اللودر للصورة المستقبلية ريثما تتحمل
                            showSkeleton(nextImg);
                            nextImg.src = adsData[futureIndex].img;

                        }, 800);
                    }

                    function startSlider() {
                        if (sliderInterval) clearInterval(sliderInterval);
                        sliderInterval = setInterval(slideNext, 5000);
                    }

                    setupAdBanner();
                });
        </script>

        <p class="glow-text-rtl" style="font-size: 1.2rem; text-align: center !important;">اكتشف منتجاتنا الجديدة وانطلق في عالم الجيمنج.</p>

        <div class="home-section-buttons" style="justify-content: center !important;">


            <a href="https://discord.gg/D3shcEb5xe" target="_blank" class="discord-button">
                <span>سيرفر الديسكورد</span>
                <img src="./images/discord.png" alt="Discord Logo">
            </a>
            <button onclick="openMyOrders()" style="background-color: var(--accent-yellow); color: var(--black-text); border: none; padding: 12px 28px; border-radius: 50px; font-weight: bold; font-size: 1.05rem; cursor: pointer; transition: transform 0.3s; display: inline-flex; align-items: center; justify-content: center; height: 48px; margin-top: 15px;">
                <i class="fas fa-box-open" style="margin-left: 8px;"></i>
                <span>طلباتي</span>
            </button>
        </div>
        <div style="margin-top: 25px; display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">


        </div>
        <div id="games-section" class="main-products-section glass-card darker">
            <h2>الأكثر مبيعا <i class="fas fa-fire" style="color: #ff4500; margin-left: 10px; font-size: 28px; vertical-align: middle; text-shadow: 0 0 15px rgba(255, 69, 0, 0.8);"></i></h2>
            <div class="products-container" id="gamesContainer">
                <br class="Apple-interchange-newline">
            </div>

            <div id="home-bundle-promo" class="ultimate-bundle-card" onclick="openBundleBuilder()">

                <div class="animated-border-box-glow"></div>
                <div class="animated-border-box"></div>

                <div class="bundle-content-wrapper">
                    <div class="bundle-left">
                        <div class="special-badge">🔥 عرض محدود</div>
                        <h2 class="bundle-title">
                            اصنع <span class="highlight-text">الباندل</span> الخاص بك
                        </h2>
                        <p class="bundle-desc">
                            اختر أي <span class="number-pop">3</span> ألعاب قوية بسعر خيالي
                            <br>
                            فقط بـ <span class="price-pop">150 EGP</span>
                        </p>

                        <button class="bundle-cta-btn">
                            <span>ابنِ الباندل الآن</span>
                            <svg xmlns="https://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14M12 5l7 7-7 7" /></svg>
                        </button>
                    </div>
                </div>

                <div class="bundle-right">
                    <img src="./images/bundle_box_icon.png" alt="Gaming Bundle" class="bundle-main-image" onerror="this.src='https://cdn-icons-png.flaticon.com/512/686/686589.png'">
                    <div class="floating-circle circle-1"></div>
                    <div class="floating-circle circle-2"></div>
                </div>
            </div>
        </div>


        <div id="subscriptions-section" class="main-products-section glass-card darker">
            <h2>الاشتراكات</h2>

            <h3 class="subscription-subcategory-label">
                TV & Shows <i class="fas fa-tv" style="color: #ffcc00; margin-left: 8px; font-size: 22px; vertical-align: middle; text-shadow: 0 0 10px rgba(255, 204, 0, 0.8);"></i>
            </h3>
            <div class="products-container" id="homeTvSubscriptionsContainer">
            </div>

            <h3 class="subscription-subcategory-label">
                البرامج <i class="fas fa-layer-group" style="color: #ffcc00; margin-left: 8px; font-size: 22px; vertical-align: middle; text-shadow: 0 0 12px rgba(255, 204, 0, 0.8);"></i>
            </h3>
            <div class="products-container" id="homeSoftwareSubscriptionsContainer">
            </div>
        </div>

        <div id="game-topup-section" class="main-products-section glass-card darker">
            <h2> شحن الألعاب - Top Up</h2>
            <div class="products-container" id="gameTopupContainer">

                <div id="valorant-card" class="product-item category-card" onclick="window.location.hash='#valorantPoints'">
                    <div class="product-image-wrapper">
                        <img src="./images/reynaa.png" alt="شحن فالورانت">
                    </div>
                    <h3>شحن فالورانت<br><small>(Valorant Points)</small></h3>
                </div>

                <div id="fortnite-card" class="product-item category-card" onclick="window.location.hash='#fortnite'">
                    <div class="product-image-wrapper">
                        <img src="./images/fortnite33.png" alt="شحن فورتنايت">
                    </div>
                    <h3>شحن فورتنايت<br><small>(V-Bucks & Packs)</small></h3>
                </div>

                <div id="roblox-card" class="product-item category-card" onclick="window.location.hash='#roblox'">
                    <div class="product-image-wrapper">
                        <img src="./images/Roblox-10.png" alt="شحن روبلوكس">
                    </div>
                    <h3>شحن<br>روبلوكس<br><small>(Robux)</small></h3>
                </div>

                <div id="marvel-card" class="product-item category-card" onclick="window.location.hash='#marvelRivals'">
                    <div class="product-image-wrapper">
                        <img src="./images/marvelrivals.png" alt="شحن Marvel Rivals">
                    </div>
                    <h3>شحن<br>مارفل رايفلز<br><small>(Marvel Rivals)</small></h3>
                </div>

                <div id="genshin-card" class="product-item category-card" onclick="window.location.hash='#genshinImpact'">
                    <div class="product-image-wrapper">
                        <img src="./images/genshin.png" alt="شحن Genshin Impact">
                    </div>
                    <h3>شحن<br>جينيشين امباكت<br><small>(Genesis Crystals)</small></h3>
                </div>

                <div id="rocket-card" class="product-item category-card" onclick="window.location.hash='#rocketleague'">
                    <div class="product-image-wrapper">
                        <img src="./images/rocketleagueoffercard.png" alt="شحن Rocket League" loading="lazy">
                    </div>
                    <h3>شحن<br>روكيت ليج<br><small>(Rocket League Credits)</small></h3>
                </div>

            </div>
        </div>

        <div id="offline-steam-section" class="main-products-section glass-card darker">
            <div class="category-header" style="display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 15px;">



                <h2 style="margin: 0; text-align: center; flex-shrink: 0; border: none; padding: 0;">
                    حسابات العاب ستيم اوفلاين ( للتختيم )
                    <i class="fas fa-gamepad" style="color: #ffffff; padding: 4px; border-radius: 4px; margin-left: 8px;"></i>
                </h2>
                <div style="flex: 1; display: flex; justify-content: flex-start; min-width: 150px;">
                    <button onclick="showModal('offlineSteamGuideModal')" style="
                background: rgba(102, 192, 244, 0.1);
                border: 1px solid #66c0f4;
                color: #66c0f4;
                padding: 6px 15px;
                border-radius: 50px;
                font-size: 12px;
                cursor: pointer;
                font-weight: bold;
                display: inline-flex;
                align-items: center;
                gap: 5px;
                white-space: nowrap;
                transition: all 0.3s ease;">
                        <i class="fas fa-info-circle"></i> كيف يعمل النظام؟
                    </button>
                </div>
                <div class="category-search-container" style="flex: 1; display: flex; justify-content: flex-end; min-width: 150px;">
                    <input type="text" id="offlineSearchInput" placeholder="ابحث عن لعبة..." onkeyup="filterOfflineGames()">
                    <svg xmlns="https://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                        <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z" />
                    </svg>
                </div>
            </div>

            <div class="products-container" id="offlineSteamContainer">
            </div>

            <div class="load-more-container" style="position: relative;">
                <div id="offline-preview-box" class="preview-games-floating"></div>

                <button id="loadMoreOfflineGamesBtn" class="load-more-btn" onmouseenter="showOfflinePreview()" onmouseleave="hideOfflinePreview()">
                    <span>عرض المزيد</span>
                    <svg xmlns="https://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
                </button>
            </div>
        </div>


        <div id="personal-gifting-section" class="main-products-section glass-card darker">
            <h2>جيفت ألعاب لحسابك الشخصي <i class="fas fa-gift" style="color: #ffcc00; margin-left: 8px;"></i><i class="fas fa-gamepad" style="color: #00c0ff;"></i></h2>
            <div class="products-container" id="personalGiftingContainer">
                <div class="calculator-card">
                    <div class="calculator-card-content">
                        <img src="./images/steam.png" alt="Gift Icon" class="calculator-card-icon">
                        <h3>شراء لعبة على حسابك</h3>
                        <p class="hide-on-mobile">أدخل سعر اللعبة بالدولار وسنقوم بشرائها كهدية لك مباشرة على حسابك في ستيم.</p>
                        <button class="buy-btn" onclick="openGiftingCalculatorModal()">اشتري الآن</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="game-rentals-section" class="main-products-section glass-card darker">
            <h2>العاب CO-OP للتختيم <i class="fas fa-gamepad" style="color: #ffaa00;"></i></h2>
            <div class="products-container" id="gameRentalsContainer">
            </div>
        </div>

        <div id="xbox-gifting-section" class="main-products-section glass-card darker">
            <div class="ps-grid-container">

                <div class="ps-grid-column" style="justify-content: center; align-items: center;">
                    <h3 class="playstation-subcategory-label" style="text-align: center;">خدمة شراء الألعاب علي حسابك الخاص</h3>
                    <div class="calculator-card" style="width: 100%; max-width: 550px; margin: 0 auto;">
                        <div class="calculator-card-content">
                            <img src="./images/microsoft-store.png" alt="Xbox/Microsoft Store" class="calculator-card-icon" style="border-radius: 8px;">
                            <h3>اشتري اي لعبة</h3>
                            <p>أدخل اسم اللعبة وسعرها الحالي، وسنقوم بشرائها مباشرة على حسابك.</p>
                            <button class="buy-btn" onclick="openXboxGiftingModal()">احسب التكلفة</button>
                        </div>
                    </div>
                </div>

                <div class="ps-grid-column">

                    <h3 class="playstation-subcategory-label" style="text-align: center;">
                        Xbox/PC Products <i class="fab fa-xbox" style="color: #10e510; margin-left: 8px; font-size: 22px; vertical-align: middle; text-shadow: 0 0 10px rgba(16, 229, 16, 0.6);"></i>
                    </h3>
                    <div class="products-container" id="xboxGiftCardsContainer">
                    </div>
                    <div class="products-container" id="xboxPopularGamesContainer">
                    </div>

                </div>
            </div>
        </div>

        <div id="steam-gift-cards-section" class="main-products-section glass-card darker">
            <h2 style="margin-right: 0; display: inline-block;">
                Steam Gift Cards <i class="fab fa-steam" style="color: #00adee; margin-left: 10px; font-size: 28px; vertical-align: middle; text-shadow: 0 0 10px rgba(0, 173, 238, 0.6);"></i>
            </h2>
            <div class="products-container" id="steamGiftCardsHomeContainer">
            </div>
        </div>

        <div id="steam-points-section" class="main-products-section glass-card darker">
            <h2 style="margin-right: 0; display: inline-block;">
                Steam Points <i class="fab fa-steam" style="color: #66c0f4; margin-left: 10px; font-size: 28px; vertical-align: middle; text-shadow: 0 0 12px rgba(102, 192, 244, 0.8);"></i>
            </h2>
            <div class="products-container" id="steamPointsContainer">
            </div>
        </div>


        <div id="discord-decorations-section" class="main-products-section glass-card darker">
            <h2 style="text-align: center; margin-right: 0;">
                Discord Services <i class="fab fa-discord" style="color: #5865F2; margin-left: 10px; font-size: 28px; vertical-align: middle; text-shadow: 0 0 12px rgba(88, 101, 242, 0.8);"></i>
            </h2>
            <div class="products-container" id="servicesContainer">

                <div class="service-offer-card" onclick="window.location.hash='#discordDecorationsPage'">
                    <img src="./images/discord-decorations.png" alt="Discord Decorations" class="service-card-image">
                    <h3>Discord Decorations</h3>
                    <p class="service-card-description">مؤثرات للبروفايل والأفاتار. اختر ما يناسبك من بين جميع الأسعار المتاحة.</p>
                    <button>اطلع الآن</button>
                </div>

                <div class="service-offer-card" onclick="showDevPage()">
                    <img src="./images/developing-card.png" alt="تطوير وبرمجة" class="service-card-image">
                    <h3>خدمات البرمجة</h3>
                    <p class="service-card-description">تطوير المواقع، تصميم سيرفرات الديسكورد، والمزيد.</p>
                    <button>اطلع الآن</button>
                </div>

            </div>
        </div>

        <div id="software-keys-section" class="main-products-section glass-card darker">
            <h2 style="margin-right: 0; display: inline-block;">
                Keys & Codes <i class="fas fa-key" style="color: #ffd700; margin-left: 10px; font-size: 26px; vertical-align: middle; text-shadow: 0 0 15px rgba(255, 215, 0, 0.8); transform: rotate(-45deg);"></i>
            </h2>
            <div id="softwareKeysContainer">
                <div class="software-card-unique">
                    <img src="./images/win11.png" alt="Windows 11 Pro Key">
                    <h3>Windows 11 Pro</h3>
                    <p>مفتاح تفعيل أصلي لـ Windows 11 Pro</p>
                    <p class="software-price">300 EGP</p>
                    <button class="buy-btn" onclick="addToCartHandler(event, 'windows11_pro', 1)">أضف إلى السلة</button>
                </div>

                <div class="software-card-unique">
                    <img src="./images/Xbox.png" alt="اشتراك Game Pass">
                    <h3>Game Pass Ultimate</h3>
                    <p>مئات الألعاب عالية الجودة</p>
                    <p class="software-price">220 EGP</p>
                    <button class="buy-btn" onclick="addToCartHandler(event, 'gamepass', 1)">أضف إلى السلة</button>
                </div>

                <div class="software-card-unique">
                    <img src="./images/office.png" alt="Microsoft Office 2021 Key">
                    <h3>Microsoft Office 2021</h3>
                    <p>مفتاح تفعيل أصلي لـ Microsoft Office 2021</p>
                    <p class="software-price">450 EGP</p>
                    <button class="buy-btn" onclick="addToCartHandler(event, 'office2021', 1)">أضف إلى السلة</button>
                </div>
            </div>
        </div>

        <div id="playstation-section" class="main-products-section glass-card darker">
            <h2>قسم PlayStation <i class="fab fa-playstation" style="color: #0070d1; margin-left: 10px; font-size: 28px; vertical-align: middle; text-shadow: 0 0 15px rgba(0, 112, 209, 0.8);"></i></h2>

            <h3 class="playstation-subcategory-label">بطاقات شحن PlayStation Store</h3>
            <div class="products-container" id="psn-gift-cards-container">
            </div>

            <div class="ps-grid-container">

                <div class="ps-grid-column">
                    <h3 class="playstation-subcategory-label" style="text-align: center;">اشتراكات PlayStation Plus</h3>
                    <div class="products-container" id="ps-plus-container">
                    </div>
                </div>

                <div class="ps-grid-column">
                    <h3 class="playstation-subcategory-label" style="text-align: center;">ألعاب PlayStation (للتختيم)</h3>
                    <div class="products-container" style="justify-content: center; align-items: center; height: 100%;">
                        <div class="product-item category-card ps-plus-card" onclick="window.location.hash='#playstation-games-page'" style="min-height: 330px; width: 100%; max-width: 400px;">
                            <div class="product-image-wrapper">
                                <img src="./images/hq720.jpg" alt="PlayStation Games">
                            </div>
                            <h3>استكشف مكتبة الألعاب</h3>
                            <p style="color: #ccc; font-size: 14px; margin-top: 5px;">Primary - Secondry</p>
                            <p style="color: #ccc; font-size: 14px; margin-top: 5px;">Full Account - تسليم فوري</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="services-section" class="main-products-section glass-card darker">
            <h2 style="text-align: center; margin-right: 0;">
                الخدمات <i class="fas fa-tools" style="color: #cda1ff; margin-left: 10px; font-size: 24px; vertical-align: middle; text-shadow: 0 0 12px rgba(205, 161, 255, 0.8);"></i>
            </h2>
            <div class="products-container" id="servicesContainer">

                <div id="design-offer-card" class="service-offer-card" onclick="window.location.hash='#designs'">
                    <img src="./images/design-card.png" alt="تصميم جرافيك" class="service-card-image">
                    <h3>خدمات التصميم</h3>
                    <p class="service-card-description">احصل على تصاميم احترافية للسوشيال ميديا والموشن جرافيك.</p>
                    <button>اطلع الآن</button>
                </div>

                <div id="developing-offer-card" class="service-offer-card" onclick="window.location.hash='#developing'">
                    <img src="./images/developing-card1.png" alt="تطوير وبرمجة" class="service-card-image">
                    <h3>خدمات البرمجة</h3>
                    <p class="service-card-description">تطوير المواقع، تصميم سيرفرات الديسكورد، والمزيد.</p>
                    <button>اطلع الآن</button>
                </div>

            </div>
        </div>

        <div id="gaming-services-section" class="main-products-section glass-card darker">
            <h2 style="text-align: center; margin-right: 0;">
                Gaming Services <i class="fas fa-gamepad" style="color: #ff4655; margin-left: 10px; font-size: 28px; vertical-align: middle; text-shadow: 0 0 15px rgba(255, 70, 85, 0.8);"></i>
            </h2>
            <div class="products-container" id="gamingServicesContainer">

                <div id="cod-offer-card" class="service-offer-card glitch-effect" onclick="window.location.hash='#cod-services'">
                    <img src="./images/cod_custom_order.png" alt="Call of Duty Services" class="service-card-image">
                    <h3 data-text="خدمات Call of Duty">خدمات Call of Duty</h3>
                    <p class="service-card-description">كل ما تحتاجه لجميع أجزاء Call of Duty من شحن، فتح كاموهات، وخدمات حصرية أخرى.</p>
                    <button>اكتشف الآن</button>
                </div>

                <div id="boosting-offer-card" class="service-offer-card" onclick="window.location.hash='#valorant-boosting'">
                    <img src="./images/valorantreynass.png" alt="Valorant Boosting" class="service-card-image">
                    <h3>فالورانت بوستينج</h3>
                    <p class="service-card-description">احسب تكلفة رفع رتبتك في فالورانت واطلب الخدمة مباشرة من خلال الآلة الحاسبة التفاعلية.</p>
                    <button>اطلب الآن</button>
                </div>

                <div id="fortnite-boosting-offer-card" class="service-offer-card" onclick="window.location.hash='#fortnite-boosting'">
                    <img src="./images/fortnite33.png" alt="Fortnite Level Boosting" class="service-card-image">
                    <h3>فورتنايت ليفل بوستينج</h3>
                    <p class="service-card-description">ارفع مستواك في الباتل باس بسرعة وأمان. استخدم الحاسبة لمعرفة التكلفة واطلب الخدمة فورًا.</p>
                    <button>اطلب الآن</button>
                </div>

            </div>
        </div>


        <div id="feedback-section" class="glass-card">

            <h2>تقييمات المتجر 🤍 </h2>

            <p>شاهد آراء عملائنا وشاركنا تجربتك مع Berlin Store!</p>

            <div id="store-average-rating-display">
                <div class="loading-spinner" style="margin: 20px auto;"></div>
            </div>

            <section class="testimonials-marquee-section">

                <div class="section-header-v2" style="display: none;">
                    <h2>آراء <span class="text-gradient">العملاء</span></h2>
                    <p>ناس زيك وثقوا فينا.. وشوف قالوا إيه</p>
                </div>

                <div class="testimonials-track">


                    <div class="testimonial-card-wide glass">
                        <div class="stars" style="color: #ffd700; margin-bottom: 10px;">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="review-content">Trusted 100 ❤️</p>
                        <div class="client-mini-info">
                            <div class="mini-avatar">A</div>
                            <div><h5 style="margin:0; font-size:0.9rem;">Ai</h5></div>
                        </div>
                    </div>

                    <div class="testimonial-card-wide glass">
                        <div class="stars" style="color: #ffd700; margin-bottom: 10px;">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="review-content">Trusted trusted مفيش كلام</p>
                        <div class="client-mini-info">
                            <div class="mini-avatar" style="background: #e91e63;">S</div>
                            <div><h5 style="margin:0; font-size:0.9rem;">Sand</h5></div>
                        </div>
                    </div>

                    <div class="testimonial-card-wide glass">
                        <div class="stars" style="color: #ffd700; margin-bottom: 10px;">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="review-content">احسن و اجدع سيلر فى التاريييخ ❤️</p>
                        <div class="client-mini-info">
                            <div class="mini-avatar" style="background: #9c27b0;">W</div>
                            <div><h5 style="margin:0; font-size:0.9rem;">W I Z Z A</h5></div>
                        </div>
                    </div>

                    <div class="testimonial-card-wide glass">
                        <div class="stars" style="color: #ffd700; margin-bottom: 10px;">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="review-content">من احلي واجمل حد ف المجال كله و سريع</p>
                        <div class="client-mini-info">
                            <div class="mini-avatar" style="background: #3f51b5;">Y</div>
                            <div><h5 style="margin:0; font-size:0.9rem;">Y</h5></div>
                        </div>
                    </div>

                    <div class="testimonial-card-wide glass">
                        <div class="stars" style="color: #ffd700; margin-bottom: 10px;">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="review-content">احلي واحسن ستور ومش اول مرة اتعامل معاه ❤️</p>
                        <div class="client-mini-info">
                            <div class="mini-avatar" style="background: #2196f3;">B</div>
                            <div><h5 style="margin:0; font-size:0.9rem;">Bwne</h5></div>
                        </div>
                    </div>

                    <div class="testimonial-card-wide glass">
                        <div class="stars" style="color: #ffd700; margin-bottom: 10px;">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="review-content">تراستد وسريع</p>
                        <div class="client-mini-info">
                            <div class="mini-avatar" style="background: #00bcd4;">V</div>
                            <div><h5 style="margin:0; font-size:0.9rem;">Volcano ★</h5></div>
                        </div>
                    </div>

                    <div class="testimonial-card-wide glass">
                        <div class="stars" style="color: #ffd700; margin-bottom: 10px;">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="review-content">تراستد ومحترم</p>
                        <div class="client-mini-info">
                            <div class="mini-avatar" style="background: #009688;">H</div>
                            <div><h5 style="margin:0; font-size:0.9rem;">Hema</h5></div>
                        </div>
                    </div>

                    <div class="testimonial-card-wide glass">
                        <div class="stars" style="color: #ffd700; margin-bottom: 10px;">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="review-content">والله خدمة زي العسل وسريعة اقيمها 10/10</p>
                        <div class="client-mini-info">
                            <div class="mini-avatar" style="background: #4caf50;">T</div>
                            <div><h5 style="margin:0; font-size:0.9rem;">The Reaper</h5></div>
                        </div>
                    </div>

                    <div class="testimonial-card-wide glass">
                        <div class="stars" style="color: #ffd700; margin-bottom: 10px;">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="review-content">ناس توب التوب 🦂</p>
                        <div class="client-mini-info">
                            <div class="mini-avatar" style="background: #ff5722;">A</div>
                            <div><h5 style="margin:0; font-size:0.9rem;">AL3KRB</h5></div>
                        </div>
                    </div>

                    <div class="testimonial-card-wide glass">
                        <div class="stars" style="color: #ffd700; margin-bottom: 10px;">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="review-content">رجاله محترمه وتراستيد وسرعه كبيره مشاء الله ❤️</p>
                        <div class="client-mini-info">
                            <div class="mini-avatar" style="background: #795548;">V</div>
                            <div><h5 style="margin:0; font-size:0.9rem;">VENOM</h5></div>
                        </div>
                    </div>

                    <div class="testimonial-card-wide glass">
                        <div class="stars" style="color: #ffd700; margin-bottom: 10px;">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="review-content">اداء سريع وناس زي عسل احسن من كدا مفيش</p>
                        <div class="client-mini-info">
                            <div class="mini-avatar" style="background: #607d8b;">A</div>
                            <div><h5 style="margin:0; font-size:0.9rem;">AG</h5></div>
                        </div>
                    </div>

                    <div class="testimonial-card-wide glass">
                        <div class="stars" style="color: #ffd700; margin-bottom: 10px;">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="review-content">افضل ستور اتعاملت معاه لحد دلوقت ناس محترمين و رد سريع و ثقه اكيد</p>
                        <div class="client-mini-info">
                            <div class="mini-avatar" style="background: #333;">Z</div>
                            <div><h5 style="margin:0; font-size:0.9rem;">Zoro</h5></div>
                        </div>
                    </div>

                    <div class="testimonial-card-wide glass">
                        <div class="stars" style="color: #ffd700; margin-bottom: 10px;">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="review-content">استور مضمون 100% وتيم زي العسل</p>
                        <div class="client-mini-info">
                            <div class="mini-avatar" style="background: var(--accent-color);">O</div>
                            <div><h5 style="margin:0; font-size:0.9rem;">Omarzz</h5></div>
                        </div>
                    </div>

                    <div class="testimonial-card-wide glass">
                        <div class="stars" style="color: #ffd700; margin-bottom: 10px;">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="review-content">من اجمل المتاجر سريعين في تسليم الطلبات اشتراك قيم باس ❤️</p>
                        <div class="client-mini-info">
                            <div class="mini-avatar" style="background: #ff9800;">B</div>
                            <div><h5 style="margin:0; font-size:0.9rem;">bo Rashed</h5></div>
                        </div>
                    </div>

                    <div class="testimonial-card-wide glass">
                        <div class="stars" style="color: #ffd700; margin-bottom: 10px;">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="review-content">تراستيد و سريع</p>
                        <div class="client-mini-info">
                            <div class="mini-avatar" style="background: #f44336;">O</div>
                            <div><h5 style="margin:0; font-size:0.9rem;">ORC</h5></div>
                        </div>
                    </div>

                    <div class="testimonial-card-wide glass">
                        <div class="stars" style="color: #ffd700; margin-bottom: 10px;">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="review-content">Trusted 100 ❤️</p>
                        <div class="client-mini-info">
                            <div class="mini-avatar">A</div>
                            <div><h5 style="margin:0; font-size:0.9rem;">Ai</h5></div>
                        </div>
                    </div>

                    <div class="testimonial-card-wide glass">
                        <div class="stars" style="color: #ffd700; margin-bottom: 10px;">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="review-content">Trusted trusted مفيش كلام</p>
                        <div class="client-mini-info">
                            <div class="mini-avatar" style="background: #e91e63;">S</div>
                            <div><h5 style="margin:0; font-size:0.9rem;">Sand</h5></div>
                        </div>
                    </div>

                    <div class="testimonial-card-wide glass">
                        <div class="stars" style="color: #ffd700; margin-bottom: 10px;">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="review-content">احسن و اجدع سيلر فى التاريييخ ❤️</p>
                        <div class="client-mini-info">
                            <div class="mini-avatar" style="background: #9c27b0;">W</div>
                            <div><h5 style="margin:0; font-size:0.9rem;">W I Z Z A</h5></div>
                        </div>
                    </div>

                    <div class="testimonial-card-wide glass">
                        <div class="stars" style="color: #ffd700; margin-bottom: 10px;">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="review-content">من احلي واجمل حد ف المجال كله و سريع</p>
                        <div class="client-mini-info">
                            <div class="mini-avatar" style="background: #3f51b5;">Y</div>
                            <div><h5 style="margin:0; font-size:0.9rem;">Y</h5></div>
                        </div>
                    </div>

                    <div class="testimonial-card-wide glass">
                        <div class="stars" style="color: #ffd700; margin-bottom: 10px;">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="review-content">احلي واحسن ستور ومش اول مرة اتعامل معاه ❤️</p>
                        <div class="client-mini-info">
                            <div class="mini-avatar" style="background: #2196f3;">B</div>
                            <div><h5 style="margin:0; font-size:0.9rem;">Bwne</h5></div>
                        </div>
                    </div>

                    <div class="testimonial-card-wide glass">
                        <div class="stars" style="color: #ffd700; margin-bottom: 10px;">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="review-content">تراستد وسريع</p>
                        <div class="client-mini-info">
                            <div class="mini-avatar" style="background: #00bcd4;">V</div>
                            <div><h5 style="margin:0; font-size:0.9rem;">Volcano ★</h5></div>
                        </div>
                    </div>

                    <div class="testimonial-card-wide glass">
                        <div class="stars" style="color: #ffd700; margin-bottom: 10px;">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="review-content">تراستد ومحترم</p>
                        <div class="client-mini-info">
                            <div class="mini-avatar" style="background: #009688;">H</div>
                            <div><h5 style="margin:0; font-size:0.9rem;">Hema</h5></div>
                        </div>
                    </div>

                    <div class="testimonial-card-wide glass">
                        <div class="stars" style="color: #ffd700; margin-bottom: 10px;">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="review-content">والله خدمة زي العسل وسريعة اقيمها 10/10</p>
                        <div class="client-mini-info">
                            <div class="mini-avatar" style="background: #4caf50;">T</div>
                            <div><h5 style="margin:0; font-size:0.9rem;">The Reaper</h5></div>
                        </div>
                    </div>

                    <div class="testimonial-card-wide glass">
                        <div class="stars" style="color: #ffd700; margin-bottom: 10px;">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="review-content">ناس توب التوب 🦂</p>
                        <div class="client-mini-info">
                            <div class="mini-avatar" style="background: #ff5722;">A</div>
                            <div><h5 style="margin:0; font-size:0.9rem;">AL3KRB</h5></div>
                        </div>
                    </div>

                    <div class="testimonial-card-wide glass">
                        <div class="stars" style="color: #ffd700; margin-bottom: 10px;">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="review-content">رجاله محترمه وتراستيد وسرعه كبيره مشاء الله ❤️</p>
                        <div class="client-mini-info">
                            <div class="mini-avatar" style="background: #795548;">V</div>
                            <div><h5 style="margin:0; font-size:0.9rem;">VENOM</h5></div>
                        </div>
                    </div>

                    <div class="testimonial-card-wide glass">
                        <div class="stars" style="color: #ffd700; margin-bottom: 10px;">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="review-content">اداء سريع وناس زي عسل احسن من كدا مفيش</p>
                        <div class="client-mini-info">
                            <div class="mini-avatar" style="background: #607d8b;">A</div>
                            <div><h5 style="margin:0; font-size:0.9rem;">AG</h5></div>
                        </div>
                    </div>

                    <div class="testimonial-card-wide glass">
                        <div class="stars" style="color: #ffd700; margin-bottom: 10px;">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="review-content">افضل ستور اتعاملت معاه لحد دلوقت ناس محترمين و رد سريع و ثقه اكيد</p>
                        <div class="client-mini-info">
                            <div class="mini-avatar" style="background: #333;">Z</div>
                            <div><h5 style="margin:0; font-size:0.9rem;">Zoro</h5></div>
                        </div>
                    </div>

                    <div class="testimonial-card-wide glass">
                        <div class="stars" style="color: #ffd700; margin-bottom: 10px;">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="review-content">استور مضمون 100% وتيم زي العسل</p>
                        <div class="client-mini-info">
                            <div class="mini-avatar" style="background: var(--accent-color);">O</div>
                            <div><h5 style="margin:0; font-size:0.9rem;">Omarzz</h5></div>
                        </div>
                    </div>

                    <div class="testimonial-card-wide glass">
                        <div class="stars" style="color: #ffd700; margin-bottom: 10px;">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="review-content">من اجمل المتاجر سريعين في تسليم الطلبات اشتراك قيم باس ❤️</p>
                        <div class="client-mini-info">
                            <div class="mini-avatar" style="background: #ff9800;">B</div>
                            <div><h5 style="margin:0; font-size:0.9rem;">bo Rashed</h5></div>
                        </div>
                    </div>

                    <div class="testimonial-card-wide glass">
                        <div class="stars" style="color: #ffd700; margin-bottom: 10px;">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="review-content">تراستيد و سريع</p>
                        <div class="client-mini-info">
                            <div class="mini-avatar" style="background: #f44336;">O</div>
                            <div><h5 style="margin:0; font-size:0.9rem;">ORC</h5></div>
                        </div>
                    </div>

                </div>

            </section>

            <div class="reviews-carousel-container">
                <div id="store-reviews-list" class="reviews-carousel-track">
                </div>
            </div>

            <input type="text" id="rating-name" placeholder="اسمك" required>

            <div class="rating-input">
                <div class="stars" id="storeRatingStars" data-rating="0">
                    <span class="star" data-value="5">☆</span>
                    <span class="star" data-value="4">☆</span>
                    <span class="star" data-value="3">☆</span>
                    <span class="star" data-value="2">☆</span>
                    <span class="star" data-value="1">☆</span>
                </div>
                <input type="hidden" id="storeRatingInput" value="0">
            </div>

            <p id="itakura-trick-text" style="text-align: center; margin-top: 5px; margin-bottom: 0;">Search for sohayl</p>

            <textarea id="rating-text" rows="3" placeholder="اكتب تعليقك (اختياري)"></textarea>
            <button onclick="submitStoreRating()">أضف تقييمك</button>
            <div id="feedback-message"></div>
        </div>
    </div>

    <div id="all-cod-games" class="section glass-card">
        <button class="back-button" onclick="window.location.hash='#home'">&larr; العودة للرئيسية</button>
        <h2 style="text-align: center; border: none;">جميع ألعاب Call of Duty - بتاخد حساب تختم عليه اللعبة (مدى الحياة) | استعمل كود الخصم CoD</h2>
        <div class="products-container" id="all-cod-games-container">
        </div>
    </div>

    <div id="products" class="section">
        <h2 style="margin-right: 0;">منتجاتنا المتوفرة</h2>
        <div class="search-bar-container">
            <input type="text" id="productSearch" placeholder="ابحث عن منتج...">
            <button onclick="searchProducts()">بحث</button>
        </div>
        <div class="products-container" id="productsContainer">
        </div>
    </div>

    <div id="searchResults" class="section">
        <h2 id="searchResultsTitle">نتائج البحث</h2>
        <div class="products-container" id="searchResultsContainer">
        </div>
        <p id="noResultsMessage" style="text-align: center; display: none; color: #ccc;">
            عذرًا، لم يتم العثور على أي منتجات تطابق بحثك.
        </p>
    </div>

    <div id="valorantPoints" class="section">
        <h2 style="margin-right: 0;">شحن Valorant Points عن طريق الـRiot ID</h2>
        <div class="products-container" id="valorantPointsPageContainer">
        </div>
    </div>

    <div id="roblox" class="section">
        <h2 style="margin-right: 0;">Robux</h2>
        <div class="products-container" id="robloxContainer">
        </div>
    </div>

    <div id="genshinImpact" class="section glass-card darker">
        <h2>شحن كريستالات Genshin Impact</h2>
        <div class="products-container" id="genshinImpactContainer">
        </div>
    </div>

    <div id="fortnite" class="section" style="background-image: url('./images/fortnitewallpaper.png'); background-size: cover; background-position: center; border-radius: 15px;">
        <h2 style="margin-right: 0;">V-Bucks & Packs</h2>
        <div class="products-container" id="fortniteContainer">
        </div>
    </div>

    <div id="rocketleague" class="section">
        <h2 style="margin-right: 0;">Rocket League Credits</h2>
        <div class="products-container" id="rocketleagueContainer">
        </div>
    </div>

    <div id="marvelRivals" class="section">
        <h2 style="margin-right: 0;">شحن Marvel Rivals لجميع المنصات بالـ UID</h2>
        <div class="products-container" id="marvelRivalsContainer"></div>
    </div>

    <div id="steamPoints" class="section">
        <h2 style="margin-right: 0;">Steam Points</h2>
        <div class="products-container" id="steamPointsPageContainer">
        </div>
    </div>

    <div id="steamGiftCards" class="section">
        <h2 style="margin-right: 0; display: inline-block;">Steam Gift Cards</h2>



        <div class="products-container" id="steamGiftCardsPageContainer">
        </div>
    </div>

    <!-- <div id="shipping" class="section glass-card">
         <h1> تتبع شحن طلبك 🚚 </h1>
         <div id="orderInputContainer">
             <label for="orderCode">أدخل كود الطلب الخاص بك</label>
             <p id="shippingDescription">الصفحة دي لتتبع شحن وتوصيل المنتجات الخاصة بمتجر الCrafts الخاص بينا فقط وليس لها علاقة بالvideo gaming</p>
             <div>
                 <input type="text" id="orderCode" placeholder="مثال: 74562341">
                 <button onclick="checkOrder()">بحث</button>
             </div>
         </div>
         <div id="statusContainer" class="glass-card">
             <div id="resultText"></div>
             <img id="statusImage" src="" alt="">
         </div>
     </div>-->



    <div id="about" class="section glass-card content-page">
        <div class="about-us-logos-container">
            <img src="./images/logo-about-us.png" alt="Berlin Store Logo" class="about-us-logo">
            <a href="https://discord.gg/vf4Aubz6nk" target="_blank">
                <img src="./images/discord.png" alt="Discord Logo" class="about-us-discord-logo">
            </a>
        </div>

        <h2>من نحن؟</h2>
        <p>أهلاً بك في متجر Berlin Store، وجهتك الأولى لكل ما يتعلق بعالم الألعاب والترفيه الرقمي.</p>
        <p>نحن فخورون بأن نكون جزءًا من مجموعة <strong>Gamers Online Entertainment (GOE)</strong>، وهذا المتجر هو بوابتنا الإلكترونية الرسمية لتقديم أفضل المنتجات والخدمات لمجتمع اللاعبين في مصر والوطن العربي والعالم.</p>
        <p>هدفنا هو توفير تجربة شراء سهلة، آمنة، وسريعة، مع دعم فني متكامل لمساعدتك في كل خطوة. نسعى دائمًا لتقديم أحدث المنتجات بأفضل الأسعار، لأننا لاعبون مثلكم.</p>
    </div>

    <div id="faq" class="section glass-card content-page">
        <h2>الأسئلة الشائعة (FAQ)</h2>

        <h4><strong>كيف يتم تسليم المنتجات الرقمية؟</strong></h4>
        <p>يتم تسليم جميع المنتجات الرقمية (مثل الأكواد، حسابات الألعاب، أو شحن النقاط) عبر البريد الإلكتروني الذي تقوم بإدخاله عند إتمام عملية الشراء. تأكد من كتابة بريدك الإلكتروني بشكل صحيح.</p>

        <h4><strong>ما هي مدة تسليم الطلب؟</strong></h4>
        <p>نسعى لتسليم جميع الطلبات في أسرع وقت ممكن. عادةً ما يتم التسليم في غضون 1 إلى 30 دقيقة. نضمن إتمام جميع الطلبات في أسرع وقت.</p>

        <h4><strong>هل الحسابات المباعة آمنة؟</strong></h4>
        <p>نعم، جميع الحسابات التي نبيعها آمنة 100%. نحن نضمن لك صلاحية الحساب للمدة المذكورة في وصف المنتج. في حالة وجود أي مشكلة، يمكنك التواصل مع الدعم الفني مباشرة.</p>

        <h4><strong>لقد قمت بالدفع، ماذا أفعل الآن؟</strong></h4>
        <p>بمجرد إتمام عملية الدفع وتأكيدها، سيقوم فريقنا بمراجعة طلبك وإرسال المنتج إلى بريدك الإلكتروني. لا حاجة للقيام بأي إجراء إضافي من طرفك.</p>

        <h4><strong>ماذا أفعل إذا واجهتني مشكلة في طلبي؟</strong></h4>
        <p>إذا واجهتك أي مشكلة أو كان لديك أي استفسار، لا تتردد في التواصل معنا مباشرة عبر سيرفر الديسكورد الخاص بنا أو عبر البريد الإلكتروني للدعم الفني. فريقنا جاهز لمساعدتك.</p>
    </div>

    <div id="terms" class="section glass-card content-page">
        <h2>شروط الخدمة</h2>
        <p>باستخدامك لمتجر Berlin Store، فإنك توافق على الشروط والأحكام التالية:</p>
        <ul>
            <li>جميع المنتجات المباعة هي منتجات رقمية، ويتم تسليمها عبر البريد الإلكتروني أو مباشرة إلى حسابك.</li>
            <li>يجب على المشتري تقديم معلومات صحيحة ودقيقة (مثل البريد الإلكتروني أو Riot ID) لضمان التسليم الصحيح.</li>
            <li>المتجر غير مسؤول عن أي أخطاء ناتجة عن إدخال معلومات غير صحيحة من قبل العميل.</li>
            <li>نضمن أمان جميع الحسابات والمنتجات المباعة من خلالنا. في حالة وجود أي مشكلة، يرجى التواصل مع الدعم الفني فورًا.</li>
            <li>جميع الأسعار المعروضة نهائية وقد تتغير بناءً على تحديثات السوق.</li>
        </ul>
    </div>

    <div id="privacy" class="section glass-card content-page">
        <h2>سياسة الخصوصية</h2>
        <p>في Berlin Store، خصوصيتك هي أولويتنا القصوى. نحن نلتزم بحماية بياناتك الشخصية وعدم مشاركتها مع أي طرف ثالث.</p>
        <ul>
            <li>جمع المعلومات: نقوم بجمع المعلومات الضرورية فقط لإتمام عملية الشراء، مثل البريد الإلكتروني ورقم الهاتف (في حالة الدفع بفودافون كاش).</li>
            <li>استخدام المعلومات: تُستخدم معلوماتك فقط لغرض توصيل المنتج إليك والتواصل معك بخصوص طلبك.</li>
            <li>أمان البيانات: نحن نستخدم بوابات دفع آمنة (Formspree) لمعالجة الطلبات، ولا نقوم بتخزين أي معلومات دفع حساسة على خوادمنا.</li>
            <li>ملفات تعريف الارتباط (Cookies): قد نستخدم ملفات تعريف الارتباط لتحسين تجربة التصفح وحفظ محتويات سلة التسوق الخاصة بك.</li>
        </ul>
    </div>

    <div id="playstation-games-page" class="section glass-card">
        <button class="back-button" onclick="window.location.hash='#home'">&larr; العودة للرئيسية</button>
        <h2 style="text-align: center; border: none;">ألعاب PlayStation (للتختيم)</h2>
        <div class="products-container" id="playstation-games-container">
        </div>
    </div>

    <div id="psn-gift-cards-page" class="section glass-card">
        <button class="back-button" onclick="window.location.hash='#home'">&larr; العودة للرئيسية</button>
        <h2 style="text-align: center; border: none;">بطاقات شحن PlayStation Store (الحساب الأمريكي)</h2>
        <div class="products-container" id="psn-gift-cards-page-container">
        </div>
    </div>

    <div id="productPage" class="section glass-card">
        <div id="productPageContent">
            <div class="product-main-view">
                <div id="productPageFullDescription" class="product-details-section">
                </div>
                <div class="product-image-section">
                    <div id="mainImageContainer" style="position: relative;">
                        <div id="productPageWishlistBtn" class="big-wishlist-btn">
                            <i class="far fa-heart"></i>
                        </div>
                        <div class="main-image-placeholder"></div>
                        <img id="productPageImage" src="" alt="Product Image" class="main-image" style="display: none;">
                    </div>
                    <div id="product-share-btn" onclick="shareProduct()">
                        <svg xmlns="https://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-share-fill" viewBox="0 0 16 16">
                            <path d="M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z" />
                        </svg>
                    </div>
                    <div class="product-image-gallery" id="productImageGallery">
                    </div>
                </div>

                <div class="product-details-section">
                    <h1 id="productPageTitle"></h1>
                    <div class="price-badge-container">
                        <span id="productPagePrice"></span>
                        <span id="productPageBadge"></span>
                    </div>
                    <p id="productPageShortDescription"></p>
                    <div id="productPageAverageRating" class="product-page-rating"></div>
                    <div id="productPagePlatform" class="product-platform-info"></div>

                    <div class="product-action-container">
                        <div class="quantity-selector">
                            <button id="decreaseProductPageQuantity" type="button">−</button>
                            <input type="number" id="productPageQuantity" value="1" min="1">
                            <button id="increaseProductPageQuantity" type="button">+</button>
                        </div>

                        <button id="addToCartBtn" class="add-to-cart-product-page">
                            أضف إلى السلة
                        </button>
                    </div>
                </div>
            </div>

            <div class="tabs-container">
                <div class="tab-buttons">
                    <button class="tab-button active" data-tab="specs">  مواصفات التشغيل للـPC</button>
                    <button class="tab-button" data-tab="customer-reviews">تقييمات العملاء</button>
                    <button class="tab-button" data-tab="extra-info">معلومات إضافية</button>
                    <button class="tab-button" data-tab="faq">أسئلة وأجوبة</button>
                </div>
                <div id="specs" class="tab-content active">
                </div>
                <div id="customer-reviews" class="tab-content">
                    <h3>اترك تعليقك</h3>
                    <form class="comment-form" onsubmit="submitComment(event)">
                        <input type="text" id="commentName" placeholder="اسمك" required>
                        <div class="rating-input">
                            <label>تقييمك:</label>
                            <div class="stars" id="ratingStars" data-rating="0">
                                <span class="star" data-value="5">☆</span>
                                <span class="star" data-value="4">☆</span>
                                <span class="star" data-value="3">☆</span>
                                <span class="star" data-value="2">☆</span>
                                <span class="star" data-value="1">☆</span>
                            </div>
                            <input type="hidden" id="commentRating" value="0">
                        </div>
                        <textarea id="commentText" rows="3" placeholder="اكتب تعليقك هنا... (اختياري)"></textarea>
                        <button type="submit">إرسال التعليق</button>
                    </form>
                    <hr style="border-color: rgba(255,255,255,0.2); margin: 30px 0;">
                    <h3>التعليقات</h3>
                    <div id="commentList"></div>
                    <button id="loadMoreComments" style="display:none;">تحميل المزيد</button>
                </div>
                <div id="extra-info" class="tab-content">
                    <p>جميع المنتجات رقمية ويتم تسليمها مباشرة عبر البريد الإلكتروني الذي ترفقه مع الشراء.</p>
                    <p>الدعم الفني متاح 24/7.</p>
                </div>
                <div id="faq" class="tab-content">
                    <p>لأي استفسار أو مشكلة تواجهك، يرجى عدم التردد في التواصل معنا عبر البريد الإلكتروني للدعم الفني:</p>
                    <p><strong>Berlinstoregoe@gmail.com</strong></p>
                    <p><strong>او بالديسكورد</strong></p>
                </div>
            </div>

        </div>
    </div>


    <div id="paymentModal" class="modal">
        <span class="close-btn" onclick="closeModal('paymentModal')">&times;</span>
        <div class="modal-body">
            <div id="modalCommonContent" class="modal-content-section is-visible">


                <div class="modal-product-header">
                    <img id="modalImage" src="" alt="Product Image" class="product-image">

                    <div class="text-content">
                        <h2 id="modalTitle"></h2>
                        <div id="modalProductInfo" class="modal-product-info"></div>
                    </div>
                </div>

                <p id="modalPrice"></p>

                <div id="steamProductQuantitySelector" style="display: none;">
                    <div class="quantity-selector-card">
                        <h4>الكمية</h4>
                        <div class="quantity-controls">
                            <button class="quantity-btn" id="decreaseQuantity">-</button>
                            <input type="number" class="quantity-input" id="quantityInput" value="1" min="1">
                            <button class="quantity-btn" id="increaseQuantity">+</button>
                        </div>
                        <p class="quantity-total">إجمالي المبلغ: <span id="totalPriceDisplay">0</span> EGP</p>
                    </div>
                </div>

                <div id="discord-username-group" class="input-wrapper" style="display: none; margin: 20px auto;">
                    <i class="fa-brands fa-discord" style="color: white; font-size: 18px;"></i>

                    <input type="text" id="discord_username_input" name="Discord Username" placeholder="أدخل اسمك في الديسكورد" required>
                </div>

                <input type="hidden" name="Discord Username" id="vodafone_discord_username">
                <input type="hidden" name="Discord Username" id="paypal_discord_username">
                <input type="hidden" name="Discord Username" id="creditcard_discord_username">

                <div id="form-parallel-group">
                    <div id="genshin-id-group" style="display: none;">
                        <label for="genshin_id_input">Genshin UID</label>
                        <input type="text" id="genshin_id_input" name="Genshin UID" placeholder="أدخل Genshin UID" required>
                    </div>

                    <div id="marvel-rivals-id-group" style="display: none;">
                        <label for="marvel_rivals_id_input">Marvel Rivals UID</label>
                        <input type="text" id="marvel_rivals_id_input" name="Marvel Rivals UID" placeholder="أدخل الـ Marvel Rivals UID" required>
                    </div>

                </div>

                <div id="gmail-input-group" class="input-wrapper" style="display: none; margin: 20px auto;">
                    <svg xmlns="https://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-envelope-fill" viewBox="0 0 16 16">
                        <path d="M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555ZM0 4.697v7.104l5.803-3.558L0 4.697ZM6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757Zm3.436-.586L16 11.803V4.697l-5.803 3.546Z" />
                    </svg>
                    <input type="email" id="gmail_input" name="Gmail (Email)" placeholder="أدخل إيميل جوجل (الجيميل)" required>
                </div>

                <div id="account-details-container">
                    <div class="input-wrapper">
                        <svg xmlns="https://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-envelope-fill" viewBox="0 0 16 16">
                            <path d="M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555ZM0 4.697v7.104l5.803-3.558L0 4.697ZM6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757Zm3.436-.586L16 11.803V4.697l-5.803 3.546Z" />
                        </svg>
                        <input type="email" id="account_email" name="account_email" placeholder="ايميل الحساب">
                    </div>

                    <div class="input-wrapper">
                        <svg xmlns="https://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-key-fill" viewBox="0 0 16 16">
                            <path d="M3.5 11.5a3.5 3.5 0 1 1 3.163-5H14L15.5 8 14 9.5l-1-1-1 1-1-1-1 1-1-1-1 1H6.663a3.5 3.5 0 0 1-3.163 2zM2.5 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" />
                        </svg>
                        <input type="password" id="account_password" name="account_password" placeholder="باسورد الحساب">
                    </div>
                    <div class="security-note-wrapper">
                        <i class="fas fa-lock" style="color: #34c759; margin-left: 5px;"></i>
                        <span class="security-text">بياناتك مشفرة ومؤمنة بالكامل.</span>
                    </div>

                    <div class="input-wrapper">
                        <svg xmlns="https://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chat-dots-fill" viewBox="0 0 16 16">
                            <path d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" />
                        </svg>
                        <input type="text" id="account_contact" name="account_contact" placeholder="وسيلة تواصل (واتس او ديس..)">
                    </div>
                </div>

                <div id="subscription-group" style="margin: 20px 0; display: none;">
                    <label style="display: block; margin-bottom: 12px; font-weight: bold; text-align: center;">اختر المدة:</label>
                    <div id="subscription-options-container"></div>
                </div>



                <div class="form-parallel-group">
                    <div id="riot-id-group" style="display: none;">
                        <label for="riot_id_input">Riot ID</label>
                        <input type="text" id="riot_id_input" placeholder="Name#TAG" required>
                    </div>
                    <div id="steam-profile-link-group" style="display: none; width: 100%; margin-bottom: 15px;">
                        <label for="steam_profile_link_input" style="display: block; margin-bottom: 8px; font-weight: bold; color: #fff;">Steam Profile Link :</label>

                        <div style="display: flex; align-items: center; gap: 10px; position: relative; width: 100%;">

                            <div class="info-tooltip-container" style="flex-shrink: 0;">
                                <i class="fas fa-question-circle tooltip-trigger" style="color: var(--accent-yellow); font-size: 22px; cursor: pointer; transition: transform 0.2s;"></i>

                                <div class="tooltip-content" style="
                width: 240px;
                top: 50%;
                transform: translateY(-50%);
                right: 40px; /* يظهر يسار الأيقونة عشان ميخرجش بره الشاشة */
                z-index: 100;
                background: #1a1a2e;
                border: 1px solid var(--accent-yellow);
                padding: 10px;
                border-radius: 8px;
            ">
                                    <h4 style="color: var(--accent-yellow); border-bottom: 1px solid rgba(255,255,255,0.2); padding-bottom: 5px; margin-bottom: 8px; margin-top: 0;">كيف تجيب الرابط؟</h4>
                                    <ol style="padding-right: 20px; margin: 0; font-size: 12px; color: #e0e0e0; text-align: right; line-height: 1.6;">
                                        <li>افتح بروفايلك في برنامج <strong>Steam</strong>.</li>
                                        <li>اضغط <strong>كليك يمين</strong> في أي مساحة فارغة.</li>
                                        <li>اختر <strong>Copy Page URL</strong>.</li>
                                        <li>اعمل <strong>لصق</strong> في الخانة.</li>
                                    </ol>
                                </div>
                            </div>

                            <input type="url" id="steam_profile_link_input" class="auth-field" name="Steam Profile Link"
                                   placeholder="أدخل رابط بروفايلك على ستيم" required
                                   style="
                   margin: 0;
                   flex-grow: 1;
                   width: auto;
                   height: 45px; /* تثبيت الارتفاع لمنع الاهتزاز */
                   padding: 0 15px;
                   background: rgba(255, 255, 255, 0.05);
                   border: 1px solid #8e6abf;
                   border-radius: 8px;
                   color: #fff;
               ">
                        </div>
                    </div>

                    <div id="steam-friend-code-group" style="display: none;">
                        <label for="steam_friend_code_input">Steam Friend Code</label>
                        <input type="text" id="steam_friend_code_input" placeholder="أدخل كود الصداقة الخاص بك" required>
                    </div>
                    <div id="payment-method-group" style="text-align: center;">
                        <label for="modalPaymentMethod" style="display: block; margin-bottom: 10px; font-weight: bold;">طريقة الدفع :</label>

                        <select id="modalPaymentMethod" style="display: none;">
                            <option value="vodafone">فودافون كاش - انستاباي - محفظة</option>
                            <option value="creditcard">Mastercard/Visa</option>
                            <option value="paypal">Paypal</option>
                        </select>

                        <div class="custom-select-container">
                            <div class="custom-select-selected" id="custom-payment-selector">
                                <span data-default-text="اختر طريقة الدفع...">اضغط لإختيار طريقة الدفع...</span>
                                <svg class="custom-select-arrow" fill="white" height="24" viewBox="0 0 24 24" width="24" xmlns="https://www.w3.org/2000/svg"><path d='M7 10l5 5 5-5z' /><path d='M0 0h24v24H0z' fill='none' /></svg>
                            </div>

                            <div class="custom-select-options" id="custom-payment-options">
                                <div class="custom-option" data-value="vodafone">
                                    <img src="./images/vf-cash.png" class="payment-option-logo" alt="Vodafone">
                                    <span>فودافون كاش - انستاباي - محفظة</span>
                                </div>
                                <div class="custom-option" data-value="creditcard">
                                    <img src="./images/credit-card.png" class="payment-option-logo" alt="Credit Card">
                                    <span>Mastercard/Visa</span>
                                </div>
                                <div class="custom-option" data-value="paypal">
                                    <img src="./images/paypal.png" class="payment-option-logo" alt="PayPal">
                                    <span>Paypal</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div style="text-align: center;">
                    <button id="modal-action-button">اذهب للدفع</button>
                </div>
            </div>

            <div id="vodafoneDetails" class="modal-content-section">
                <div class="payment-header-container">

                    <div class="payment-header-box">
                        <i class="fas fa-receipt payment-header-icon"></i>
                        <h4>ملخص الطلب</h4> <p id="creditcardProductSummary" class="payment-summary-value"></p>
                    </div>

                    <div class="payment-header-box">
                        <i class="fas fa-check-to-slot payment-header-icon"></i>
                        <h4>الخطوة الحالية</h4>
                        <p class="payment-info-label">معلومات الدفع</p>
                    </div>

                    <div class="payment-header-box">
                        <i class="fas fa-wallet payment-header-icon"></i>
                        <h4>المبلغ المستحق</h4>
                        <p id="creditcardTotalAmount" class="payment-total-amount-value"></p>
                    </div>

                    <div class="payment-header-box">
                        <i class="fas fa-clock payment-header-icon"></i>
                        <h4>مهلة الدفع</h4>
                        <div id="creditcardTimer" class="payment-timer-value"></div>
                    </div>
                </div>
                <div class="payment-info-box">
                    <div class="qr-code-container">
                        <div class="qr-text-content">
                            <div class="transfer-instruction-line">
                                <span>قم بتحويل مبلغ <strong class="green-text" id="vodafoneAmountDisplay"></strong> على الرقم :</span>

                                <div class="number-copy-capsule" onclick="copyToClipboard('01060292953', this)">
                                    <span class="vodafone-number">01060292953</span>
                                    <i class="fas fa-copy copy-icon"></i>
                                </div>
                            </div>
                            <p>(فودافون كاش أو اي محفظة الكترونية)</p>
                            <p>لو بتحول من انستا باي اختار تحويل لمحفظة</p>
                            <p style="margin-top: 5px; font-size: 12px; color: #aaa;">أو Scan رمز الـ QR فودافون كاش للدفع مباشرةً:</p>
                        </div>
                        <img src="./images/vfqr.png" alt="Vodafone Cash QR Code" class="qr-code-image">
                    </div>
                </div>

                <form id="vodafoneForm" action="https://formspree.io/f/xgvldadg" method="POST" class="payment-details-form">
                    <input type="hidden" name="access_key" value="54b86a6e-bc6a-4f0a-98b6-dfe2c134c4bd">
                    <input type="hidden" name="product" id="vodafone_product_name">
                    <input type="hidden" name="price" id="vodafone_product_price">
                    <input type="hidden" name="Steam Friend Code" id="vodafone_steam_friend_code">
                    <input type="hidden" name="Steam Profile Link" id="vodafone_steam_profile_link">
                    <input type="hidden" name="Riot ID" id="vodafone_riot_id">
                    <input type="hidden" name="Account Email" id="vodafone_account_email">
                    <input type="hidden" name="Account Password" id="vodafone_account_password">
                    <input type="hidden" name="Contact Method" id="vodafone_contact_method">
                    <input type="hidden" name="payment_method" value="Vodafone Cash">
                    <input type="hidden" name="Genshin UID" id="vodafone_genshin_uid">
                    <input type="hidden" name="Marvel Rivals ID" id="vodafone_marvel_rivals_id"> <input type="checkbox" name="botcheck" class="hidden" style="display: none;">
                    <input type="hidden" name="Extra Data" id="creditcard_extra_data">

                    <div id="vodafone-form-fields" class="payment-details-grid">
                        <div class="input-fields">
                            <div class="input-wrapper">
                                <svg xmlns="https://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                    <path d="M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555ZM0 4.697v7.104l5.803-3.558L0 4.697ZM6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757Zm3.436-.586L16 11.803V4.697l-5.803 3.546Z" />
                                </svg>
                                <input type="email" name="email" placeholder=" أدخل الإيميل ادريس" required>
                            </div>

                            <div class="input-wrapper">
                                <svg xmlns="https://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-phone-fill" viewBox="0 0 16 16">
                                    <path d="M3 2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V2zm6 11a1 1 0 1 0-2 0 1 1 0 0 0 2 0z" />
                                </svg>
                                <input type="tel" name="phone_number" placeholder="الرقم اللي حولت منه" required>
                            </div>

                            <div class="input-wrapper">
                                <svg xmlns="https://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                    <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z" />
                                    <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z" />
                                </svg>
                                <textarea name="notes" maxlength="400" placeholder="أضف ملاحظة (اختياري)"></textarea>
                            </div>
                            <p style="font-size: 12px; color: #ccc; margin-top: 2px; font-weight: bold; text-align: center; margin-bottom: 0;">بعد اتمام الدفع هيوصلك المنتج فورا</p>
                        </div>
                        <div class="button-container">
                            <div class="discount-code-container">
                                <input type="text" id="vodafoneDiscountCodeInput" placeholder="هل لديك كود خصم؟">
                                <button type="button"
                                        id="vodafoneApplyBtn"
                                        onclick="applyDiscount('vodafone')">
                                    تطبيق
                                </button>
                            </div>
                            <div id="vodafoneDiscountMessage" class="discount-message"></div>
                            <button type="submit" class="confirm-payment-btn">
                                تـــــــم الــــدفــــــع ↓<br>(اضغط هنا لما تحول)
                            </button>
                        </div>
                    </div>

                    <div id="vodafone-confirmation-view" style="display: none; text-align: center; margin-top: 20px;">
                        <p style="font-size: 1.2rem; margin: 20px 0;">هل قمت بإتمام عملية الدفع بالفعل؟</p>
                        <div style="display: flex; justify-content: center; gap: 15px; margin-top: 25px;">
                            <button type="button" id="vodafone-confirm-no" class="button-secondary">لا، تراجع</button>
                            <button type="button" id="vodafone-confirm-yes" class="button-primary">نعم، أؤكد الدفع</button>
                        </div>
                    </div>

                    <div id="vodafoneFormResult" class="form-result"></div>
                </form>
            </div>

            <div id="creditcardDetails" class="modal-content-section">

                <div class="payment-header-container">
                    <div class="payment-header-box">
                        <h4>ملخص المنتج</h4>
                        <p id="creditcardProductSummary" class="payment-summary-value"></p>
                    </div>
                    <div class="payment-header-box">
                        <h4>الخطوة الحالية</h4>
                        <p class="payment-info-label">معلومات الدفع</p>
                    </div>
                    <div class="payment-header-box">
                        <h4>المبلغ المستحق</h4>
                        <p id="creditcardTotalAmount" class="payment-total-amount-value"></p>
                    </div>
                    <div class="payment-header-box">
                        <h4>مهلة الدفع</h4>
                        <div id="creditcardTimer" class="payment-timer-value"></div>
                    </div>
                </div>

                <div class="order-summary-container" id="creditcardOrderSummary">
                </div>

                <div class="input-wrapper" style="margin: 20px auto;">
                    <svg xmlns="https://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-envelope-fill" viewBox="0 0 16 16">
                        <path d="M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555ZM0 4.697v7.104l5.803-3.558L0 4.697ZM6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757Zm3.436-.586L16 11.803V4.697l-5.803 3.546Z"></path>
                    </svg>
                    <input type="email" id="creditcard_email_input" placeholder="أدخل إيميلك و المحلاظات" required="">
                </div>

                <form action="https://www.paypal.com/ncp/payment/AB69NXSVUNP78" method="post" target="_blank" style="display:inline-grid;justify-items:center;align-content:start;gap:0.5rem; margin-top: 20px;">
                    <input class="pp-AB69NXSVUNP78" type="submit" value="Pay now" />
                    <img src="https://www.paypalobjects.com/images/Debit_Credit.svg" alt="cards" />
                    <section style="font-size: 0.75rem;"> Powered by <img src="https://www.paypalobjects.com/paypal-ui/logos/svg/paypal-wordmark-color.svg" alt="paypal" style="height:0.875rem;vertical-align:middle;" /></section>
                </form>

                <form id="creditcardForm" action="https://formspree.io/f/xgvldadg" method="POST" style="display: none;">
                    <input type="hidden" name="email" id="creditcard_email">
                    <input type="hidden" name="access_key" value="54b86a6e-bc6a-4f0a-98b6-dfe2c134c4bd">
                    <input type="hidden" name="payment_method" value="Credit Card (PayPal)">
                    <input type="hidden" name="product" id="creditcard_product_name">
                    <input type="hidden" name="price" id="creditcard_product_price">
                    <input type="hidden" name="Steam Friend Code" id="creditcard_steam_friend_code">
                    <input type="hidden" name="Riot ID" id="creditcard_riot_id">
                    <input type="hidden" name="Account Email" id="creditcard_account_email">
                    <input type="hidden" name="Account Password" id="creditcard_account_password">
                    <input type="hidden" name="Contact Method" id="creditcard_contact_method">
                    <input type="hidden" name="Genshin UID" id="creditcard_genshin_uid">
                    <input type="hidden" name="Marvel Rivals ID" id="creditcard_marvel_rivals_id">
                    <input type="checkbox" name="botcheck" class="hidden" style="display: none;">
                </form>

                <button type="button" class="paypal-confirm-btn" onclick="submitCreditCardOrder()">
                    لقد قمت بالدفع (اضغط هنا للتأكيد)
                </button>

            </div>

            <div id="paypalDetails" class="modal-content-section">
                <div class="payment-header-container">
                    <div class="payment-header-box">
                        <h4>Product Summary</h4>
                        <p id="paypalProductSummary" class="payment-summary-value"></p>
                    </div>
                    <div class="payment-header-box">
                        <h4>Payment Page</h4>
                        <p>Paying process</p>
                    </div>
                    <div class="payment-header-box">
                        <h4>Total Amount</h4>
                        <p id="paypalTotalAmount" class="payment-total-amount-value"></p>
                    </div>
                    <div class="payment-header-box">
                        <h4>Payment Deadline</h4>
                        <div id="paypalTimer" class="payment-timer-value"></div>
                    </div>
                </div>
                <p>
                    <img class="payment-logo" src="./images/paypal.png" alt="PayPal Logo">
                    Please pay <strong class="green-text" id="paypalAmountDisplay"></strong> here: <a href="https://paypal.me/SohayLLLLL" target="_blank" class="paypal-link">
                        <span>https://paypal.me/SohayLLLLL</span>
                    </a>
                </p>

                <form id="paypalForm" action="https://formspree.io/f/xgvldadg" method="POST">
                    <input type="hidden" name="payment_method" value="PayPal">
                    <input type="checkbox" name="botcheck" class="hidden" style="display: none;">

                    <input type="hidden" name="product" id="paypal_product_name">
                    <input type="hidden" name="price" id="paypal_product_price">
                    <input type="hidden" name="Steam Friend Code" id="paypal_steam_friend_code">
                    <input type="hidden" name="Riot ID" id="paypal_riot_id">
                    <input type="hidden" name="Account Email" id="paypal_account_email">
                    <input type="hidden" name="Account Password" id="paypal_account_password">
                    <input type="hidden" name="Contact Method" id="paypal_contact_method">
                    <input type="hidden" name="Genshin UID" id="paypal_genshin_uid">
                    <input type="hidden" name="Marvel Rivals ID" id="paypal_marvel_rivals_id">
                    <input type="hidden" name="Extra Data" id="paypal_extra_data">

                    <div id="paypal-form-fields" style="text-align: center;">
                        <input type="email" name="email" placeholder="أدخل إيميلك" required>
                        <input type="text" name="notes" maxlength="400" placeholder="أضف ملاحظة (اختياري)">
                        <button type="submit" class="paypal-confirm-btn">I Have Paid</button>
                    </div>

                    <div id="paypal-confirmation-view" style="display: none; text-align: center; margin-top: 20px;">
                        <p style="font-size: 1.2rem; margin: 20px 0;">Have you completed the payment?</p>
                        <div style="display: flex; justify-content: center; gap: 15px; margin-top: 25px;">
                            <button type="button" id="paypal-confirm-no" class="button-secondary">No, go back</button>
                            <button type="button" id="paypal-confirm-yes" class="button-primary">Yes, I Confirm</button>
                        </div>
                    </div>
                </form>
            </div>
            <div id="loading" class="modal-content-section" style="text-align: center;">
                <div class="loading-spinner"></div>
                <p id="loading-text">جاري إرسال طلبك... من فضلك انتظر.</p>
            </div>
            <div id="confirmationMessage" class="modal-content-section"></div>
        </div>
    </div>

    <div id="cartModal" class="modal">
        <span class="close-btn" onclick="closeModal('cartModal')">&times;</span>
        <div class="modal-body">
            <h2 style="
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px; /* مسافة بين الأيقونة والكلمة */
    margin-bottom: 20px;
">
                <svg xmlns="https://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" class="bi bi-cart3" viewBox="0 0 16 16" style="color: var(--accent-yellow);">
                    <path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5M3.102 4l1.313 7h8.17l1.313-7zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4m7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4m-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2m7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2" />
                </svg>

                سلة التسوق
            </h2>
            <div id="cartItemsContainer">
                <p style="text-align: center; color: #ccc;">سلتك فارغة.</p>
            </div>
            <div id="cartTotalContainer" class="cart-modal-total">
                الإجمالي: <span id="cartTotalPrice">0</span> EGP
            </div>

            <div class="toggle-discount-container">
                <span id="toggle-discount-link" class="toggle-discount"></span>
            </div>


            <button onclick="goToCheckout()" class="checkout-btn-centered">مواصلة الشراء</button>

            <div class="modal-trust-badges">
                <div class="trust-badge">
                    <svg xmlns="https://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
                    <span>دفع آمن</span>

                </div>
                <div class="trust-badge">
                    <svg xmlns="https://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
                    <span>تسليم فوري</span>
                </div>
            </div>
        </div>
    </div>

    <div id="confirmationModal" class="modal">
        <span class="close-btn" onclick="closeModal('confirmationModal')">&times;</span>
        <div class="modal-body" style="text-align: center;">
            <h2 id="confirmationTitle">تأكيد العملية</h2>
            <p id="confirmationMessage" style="font-size: 1.2rem; margin: 20px 0;">هل قمت بإتمام عملية الدفع بالفعل؟</p>

            <div style="display: flex; justify-content: center; gap: 15px; margin-top: 25px;">
                <button id="confirm-no-btn" class="button-secondary">لا</button>
                <button id="confirm-yes-btn" class="button-primary">نعم، قمت بالدفع</button>
            </div>
        </div>
    </div>

    <div id="checkoutModal" class="modal">
        <span class="close-btn" onclick="closeModal('checkoutModal')">&times;</span>
        <div class="modal-body">
            <h2 style="text-align: center;">طرق الدفع</h2>
            <p style="text-align: center; color: #ccc;">اختر طريقة الدفع المناسبة لك:</p>
            <div id="checkoutPaymentOptionsContainer">
            </div>
        </div>
    </div>

    <div id="cod-services" class="section glass-card">
        <h2 style="text-align: center; border: none;">Call of Duty Services | All platforms 🔵</h2>

        <div class="tabs-container">
            <div class="tab-buttons">
                <button class="tab-button" data-tab="cod-bo6-page">Black Ops 6</button>
                <button class="tab-button" data-tab="cod-mw3-page">Modern Warfare III</button>
                <button class="tab-button" data-tab="cod-bo7-page">Black Ops 7</button>
            </div>
        </div>

        <div id="cod-bo6-page" class="tab-content">
            <div class="products-container" id="cod-bo6-container">
            </div>
        </div>

        <div id="cod-mw3-page" class="tab-content">
            <div class="products-container" id="cod-mw3-container">
            </div>
        </div>

        <div id="cod-bo7-page" class="tab-content">
            <h2 style="text-align: center; color: var(--accent-yellow); border: none; font-size: 2rem; margin-top: 40px;">قريبًا...</h2>
            <p style="text-align: center; color: #ccc; font-size: 1.1rem;">ترقبوا خدماتنا الجديدة للعبة Call of Duty: Black Ops 7!</p>
        </div>
    </div>

    <div id="giftingCalculatorModal" class="modal">
        <span class="close-btn" onclick="closeModal('giftingCalculatorModal')">&times;</span>
        <div class="modal-body">
            ‌
            <h2>شراء لعبة كـ Steam Gift🎁 علي حسابك الشخصي</h2>
            <p class="modal-description">أدخل المعلومات ليتم حساب التكلفة وإرسالها لك.</p>

            <div class="input-wrapper">
                <svg xmlns="https://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4Zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10Z" /></svg>

                <input type="text" id="giftingFriendCode" placeholder="Steam Friend Code" required>

                <div class="info-tooltip-container" style="flex-shrink: 0; align-self: center; margin-right: -10px;">
                    <i class="fas fa-question-circle tooltip-trigger"></i>

                    <div class="tooltip-content">
                        <h4>كيف تجد كود الصداقة؟</h4>
                        <ol style="margin-right: -15px;">
                            <li>افتح برنامج Steam.</li>
                            <li>انقر على اسمك علي اليسار بالأعلى.</li>
                            <li>اختر "Friends" ثم "Add a Friend".</li>
                            <li>الكود الخاص بك هو الرقم في الأعلى.</li>
                            <li>يجب أن يتكون من 9 إلى 10 أرقام.</li>
                        </ol>
                        <p style="font-size: 10px; color: #ffcc00; margin-top: 10px;">
                            <a href="https://store.steampowered.com/account/preferences" target="_blank" style="color: #ffcc00;">
                            </a>
                        </p>
                    </div>
                </div>
            </div>

            <div class="input-wrapper">
                <svg xmlns="https://www.w.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5z" /><path d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm15 0a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2z" /></svg>
                <input type="text" id="giftingGameName" placeholder="اسم اللعبة (باللغة الإنجليزية)" required>
            </div>

            <div class="input-wrapper">
                <svg xmlns="https://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M4 10.781c.524 1.637 1.82 2.77 3.432 2.77.529 0 1.013-.142 1.442-.394.101.242.233.493.385.737a.5.5 0 0 0 .82.164l.006-.007a.5.5 0 0 0 .163-.82c-.153-.245-.286-.496-.386-.74a1.45 1.45 0 0 0 .228-1.073c-.287-1.123-1.348-1.954-2.66-1.954-1.288 0-2.35.794-2.64 1.865a1.51 1.51 0 0 0 .142 1.257c.108.22.25.42.415.597.201.206.442.366.703.46.23.084.475.12.722.12.553 0 1.072-.19 1.488-.545a.5.5 0 0 0-.42-.869c-.31.255-.65.4-1.01.4-1.127 0-2.028-.73-2.24-1.782a.5.5 0 0 0-.962.182Z" /><path d="M12.5 1a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1Zm-1 2a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2Zm-1 2a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1h-3Zm1 4a.5.5 0 1 0-1 0 .5.5 0 0 0 1 0Z" /><path d="M8 1a.5.5 0 0 0-1 0v2a.5.5 0 0 0 1 0V1Z" /><path d="M4.646 2.646a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708l-2-2a.5.5 0 0 1 0-.708ZM2.5 5a.5.5 0 0 0-1 0v3a.5.5 0 0 0 1 0V5Z" /></svg>
                <input type="number" id="giftingGamePriceUSD" placeholder="سعر اللعبة بالدولار ($) على ستيم" required oninput="calculateGiftingPrice()">
            </div>

            <div id="giftingFinalPriceDisplay">
            </div>

            <div style="text-align: center; margin-top: 20px;">
                <button id="proceedToGiftingPaymentBtn" class="button-primary" onclick="proceedToGiftingPayment()">اذهب للدفع</button>
            </div>
        </div>
    </div>

    <div id="supportModal" class="modal">
        <span class="close-btn" onclick="closeModal('supportModal')">&times;</span>
        <div class="modal-body support-modal-body">

            <h2 class="support-title">
                <i class="fas fa-headset support-header-icon"></i>
                مركز الدعم الفني
            </h2>

            <p class="support-subtitle">واجهتك مشكلة؟ فريقنا جاهز لمساعدتك 24/7</p>

            <div class="support-cards-container">

                <div class="support-card email-card" onclick="copySupportEmail(this)">
                    <div class="icon-wrapper">
                        <i class="fas fa-envelope"></i>
                    </div>
                    <div class="text-wrapper">
                        <span class="label">تواصل عبر البريد</span>
                        <span class="value" id="supportEmailText">Berlinstoregoe@gmail.com</span>
                    </div>
                    <div class="action-icon">
                        <i class="fas fa-copy"></i>
                        <span class="tooltip">نسخ</span>
                    </div>
                </div>

                <a href="https://discord.gg/D3shcEb5xe" target="_blank" class="support-card discord-card">
                    <div class="icon-wrapper">
                        <i class="fa-brands fa-discord"></i>
                    </div>
                    <div class="text-wrapper">
                        <span class="label">تذاكر الدعم المباشر</span>
                        <span class="value">Join Discord Server</span>
                    </div>
                    <div class="action-icon">
                        <i class="fas fa-external-link-alt"></i>
                    </div>
                </a>

            </div>

            <div class="support-footer">
                <p>نرد عادةً في غضون دقائق!</p>
            </div>
        </div>
    </div>

    <div id="overlay" class="overlay" onclick="closeModal('all')"></div>

    <div id="my-orders-auth-page" class="section glass-card" style="
        display: none;
        max-width: 500px;
        margin: 80px auto;
        padding: 40px 25px;
        /* لضمان توسيط المحتوى داخلياً */
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
    ">

        <img src="./images/BerlinStore.png" alt="Berlin Store" style="width: 100px; margin-bottom: 25px; filter: drop-shadow(0 0 10px rgba(255,255,255,0.4));">

        <h2 style="margin: 0 0 10px 0; border: none; color: var(--accent-yellow);">GOE Berlin Store Account</h2>

        <p style="font-size: 1rem; color: #e0e0e0; max-width: 400px; margin: 0 auto 30px auto; line-height: 1.6;">
            يمنحك تسجيل الدخول وصولًا سريعًا لطلباتك وإدارة حسابك بسهولة وتجربة استخدام أفضل.
        </p>

        <div class="auth-buttons-group">

            <button onclick="openAuthModal('login')" class="auth-action-btn btn-login">
                <i class="fas fa-sign-in-alt" style="margin-left: 8px;"></i> تسجيل الدخول
            </button>

            <button onclick="openAuthModal('signup')" class="auth-action-btn btn-signup">
                <i class="fas fa-user-plus" style="margin-left: 8px;"></i> إنشاء حساب جديد
            </button>

        </div>

        <p style="margin-top: 30px; font-size: 0.9rem; color: #aaa;">
            هل تحتاج للمساعدة؟ <a href="#" onclick="showModal('supportModal')" style="color: var(--accent-yellow);">تواصل مع الدعم</a>
        </p>
    </div>

    <div id="my-orders-page" class="section glass-card" style="display: none; max-width: 800px; margin: 0 auto;">

        <div class="page-header-info">

            <img id="orders-page-icon" src="./images/orders-title-icon.png" alt="My Orders Title">

            <div id="orders-summary-box">
                <p class="summary-label">إجمالي الطلبات المكتملة :</p>

                <p class="summary-value" id="total-completed-orders">0</p>

                <p class="user-rank-display-small" id="total-orders-rank">🥉 BRONZE</p>
            </div>
        </div>

        <hr class="thin-divider">

        <div id="orders-loader" style="text-align: center; display: none;">
            <div class="loading-spinner"></div>
            <p>جاري تحميل طلباتك...</p>
        </div>

        <p id="no-orders-msg" style="display: none; text-align: center; color: #ccc; margin-top: 20px;">
            لا توجد طلبات مسجلة لهذا الحساب حتى الآن.
        </p>

        <div id="orders-list-container" style="display: flex; flex-direction: column; gap: 15px;">
        </div>

    </div>



    <div id="profile-settings-page" class="section glass-card" style="
    display: none;
    max-width: 900px !important;
    width: 90%;
    margin: 40px auto;
    transition: all 0.3s ease;
    position: relative;
">

        <div class="edit-profile-trigger-corner" onclick="toggleProfileEdit(true)" title="تعديل البروفايل">
            <i class="fas fa-pen"></i>
        </div>

        <div class="profile-header-section" style="
    display: flex;
    flex-direction: column; /* ✅ هذا السطر هو السر: يرتب العناصر عمودياً */
    align-items: center;    /* يوسط العناصر في المنتصف */
    justify-content: center;
    text-align: center;
    margin-bottom: 10px;
    padding-bottom: 10px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
">

            <div class="current-avatar-wrapper" style="
        position: relative;
        display: inline-block;
        margin-bottom: 15px; /* مسافة بين الصورة والاسم */
    ">
                <img id="currentProfilePic" src="./images/BerlinStore.png" alt="Avatar" class="profile-avatar-large" style="transition: all 0.3s ease;">

                <div id="avatar-edit-trigger" class="edit-avatar-icon" onclick="toggleAvatarSelection()" style="display: none;">
                    <i class="fas fa-camera"></i>
                </div>
            </div>



            <h2 id="header-display-name" style="
        color: white;
        margin: 0 0 5px 0;
        border: none;
        font-size: 2.2rem;
        font-weight: bold;
        text-shadow: 0 0 10px rgba(0,0,0,0.5);
    ">
            </h2>

            <p id="currentProfileEmail" style="color: #ccc; font-size: 14px; direction: ltr; margin: 0 0 15px 0;"></p>

            <div class="rank-and-badges-wrapper" style="
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        flex-wrap: wrap;
    ">
                <div id="user-rank-display" class="user-rank-badge" style="display: inline-block; margin: 0;">DIAMOND</div>
                <div id="badges-area" class="badges-container" style="margin-top: 0 !important;"></div>
            </div>
            <div class="points-pill" onclick="openRewardShop()" title="اضغط لفتح متجر المكافآت">
                <i class="fas fa-coins"></i> <span>نقاطك :</span>
                <span id="user-points-display" style="color: #fff;">0</span>
                <span style="color: #ffcc00;">BP</span>
            </div>
        </div>

        <div class="dashboard-container">

            <div class="rank-section">
                <div class="rank-header">
                    <div class="current-rank-badge">
                        <span id="current-rank-text" style="color: var(--accent-yellow);">LOADING...</span>
                    </div>
                    <div class="next-rank-info" id="next-rank-target">
                        جاري الحساب...
                    </div>
                </div>

                <div class="progress-track">
                    <div id="rank-progress-fill" class="progress-fill"></div>
                </div>
            </div>

            <div class="dashboard-divider"></div>

            <div class="stats-grid-modern">

                <div class="stat-box-modern">
                    <i class="fas fa-shopping-cart stat-bg-icon"></i>
                    <div class="stat-value gold" id="total-orders-text">0</div>
                    <div class="stat-label">إجمالي الطلبات</div>
                </div>

                <div class="stat-box-modern">
                    <i class="fas fa-calendar-alt stat-bg-icon"></i>
                    <div class="stat-value blue" id="join-date-text" dir="ltr">...</div>
                    <div class="stat-label">عضو منذ</div>
                </div>

            </div>

        </div>

        <div id="profile-view-mode" style="text-align: center; animation: fadeIn 0.5s ease; display: none;">
            <div style="
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 15px;
            display: inline-block;
            margin-top: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        ">
                <h3 id="overview-orders-count" style="margin: 5px 0 0 0; color: var(--accent-yellow); font-size: 1.8rem; border: none;">0</h3>
            </div>
        </div>

        <div id="profile-edit-mode" style="display: none; animation: fadeIn 0.5s ease;">

            <div id="avatar-edit-trigger" class="edit-avatar-icon" onclick="toggleAvatarSelection()" style="display: none;">
                <i class="fas fa-camera"></i>
            </div>

            <div class="frames-edit-section" style="margin-top: 20px; padding-top: 15px;">

                <h3 style="color: var(--light-text); font-size: 14px; text-align: right; margin-bottom: 10px;">
                    <i class="fas fa-crop-alt"></i> إطارات الأفاتار:
                </h3>

                <div id="frames-selection-container" class="frames-selection-grid">
                </div>

                <p style="font-size: 11px; color: #aaa; text-align: center; margin-top: 8px;">
                    يمكنك شراء المزيد من الإطارات من <a href="#" onclick="openRewardShop()" style="color: var(--accent-yellow);">متجر المكافآت</a>
                </p>
            </div>

            <div id="avatar-selection-area">
                <h3 style="color: var(--light-text); margin-top: 0; font-size: 14px; text-align: right; border: none; padding-right: 0;">صور رمزية عامة:</h3>
                <div class="avatars-grid avatar-category-divider">
                    <img src="https://cdn-icons-png.flaticon.com/512/4333/4333609.png" onclick="selectNewAvatar(this.src)">
                    <img src="https://cdn-icons-png.flaticon.com/512/147/147142.png" onclick="selectNewAvatar(this.src)">
                    <img src="https://cdn-icons-png.flaticon.com/512/4140/4140048.png" onclick="selectNewAvatar(this.src)">
                    <img src="https://cdn-icons-png.flaticon.com/512/6997/6997662.png" onclick="selectNewAvatar(this.src)">
                    <img src="https://cdn-icons-png.flaticon.com/512/4140/4140037.png" onclick="selectNewAvatar(this.src)">
                    <img src="https://cdn-icons-png.flaticon.com/512/4140/4140047.png" onclick="selectNewAvatar(this.src)">
                </div>

                <h3 style="color: var(--accent-yellow); margin-top: 15px; font-size: 14px; text-align: right; border: none; padding-right: 0;">عالم الألعاب:</h3>
                <div class="avatars-grid">
                    <img src="./images/my_avatar_1.png" onclick="selectNewAvatar(this.src)">
                    <img src="./images/my_avatar_2.png" onclick="selectNewAvatar(this.src)">
                    <img src="./images/my_avatar_3.png" onclick="selectNewAvatar(this.src)">
                    <img src="./images/my_avatar_4.png" onclick="selectNewAvatar(this.src)">
                    <img src="./images/my_avatar_5.png" onclick="selectNewAvatar(this.src)">
                    <img src="./images/my_avatar_6.png" onclick="selectNewAvatar(this.src)">
                    <img src="./images/my_avatar_7.png" onclick="selectNewAvatar(this.src)">
                    <img src="./images/my_avatar_8.png" onclick="selectNewAvatar(this.src)">
                    <img src="./images/my_avatar_37.png" onclick="selectNewAvatar(this.src)">
                    <img src="./images/my_avatar_9.png" onclick="selectNewAvatar(this.src)">
                    <img src="./images/my_avatar_11.png" onclick="selectNewAvatar(this.src)">
                    <img src="./images/my_avatar_12.png" onclick="selectNewAvatar(this.src)">
                    <img src="./images/my_avatar_13.png" onclick="selectNewAvatar(this.src)">
                    <img src="./images/my_avatar_14.png" onclick="selectNewAvatar(this.src)">
                    <img src="./images/my_avatar_15.png" onclick="selectNewAvatar(this.src)">
                    <img src="./images/my_avatar_16.png" onclick="selectNewAvatar(this.src)">
                    <img src="./images/my_avatar_17.png" onclick="selectNewAvatar(this.src)">
                    <img src="./images/my_avatar_18.png" onclick="selectNewAvatar(this.src)">
                    <img src="./images/my_avatar_19.png" onclick="selectNewAvatar(this.src)">
                    <img src="./images/my_avatar_20.png" onclick="selectNewAvatar(this.src)">
                    <img src="./images/my_avatar_21.png" onclick="selectNewAvatar(this.src)">
                    <img src="./images/my_avatar_22.png" onclick="selectNewAvatar(this.src)">
                    <img src="./images/my_avatar_23.png" onclick="selectNewAvatar(this.src)">
                    <img src="./images/my_avatar_24.png" onclick="selectNewAvatar(this.src)">
                    <img src="./images/my_avatar_25.png" onclick="selectNewAvatar(this.src)">
                    <img src="./images/my_avatar_26.png" onclick="selectNewAvatar(this.src)">
                    <img src="./images/my_avatar_27.png" onclick="selectNewAvatar(this.src)">
                    <img src="./images/my_avatar_28.png" onclick="selectNewAvatar(this.src)">
                    <img src="./images/my_avatar_29.png" onclick="selectNewAvatar(this.src)">
                    <img src="./images/my_avatar_30.png" onclick="selectNewAvatar(this.src)">
                    <img src="./images/my_avatar_31.png" onclick="selectNewAvatar(this.src)">
                    <img src="./images/my_avatar_32.png" onclick="selectNewAvatar(this.src)">
                    <img src="./images/my_avatar_33.png" onclick="selectNewAvatar(this.src)">
                    <img src="./images/my_avatar_34.png" onclick="selectNewAvatar(this.src)">
                    <img src="./images/my_avatar_35.png" onclick="selectNewAvatar(this.src)">
                    <img src="./images/my_avatar_36.png" onclick="selectNewAvatar(this.src)">
                    <img src="./images/my_avatar_10.png" onclick="selectNewAvatar(this.src)">
                </div>
            </div>

            <div style="padding: 0 15px; margin-top: 25px;">

                <hr class="modern-thin-divider">


                <div class="name-input-group-centered" style="margin-bottom: 30px;">
                    <h3 style="color: var(--light-text); font-size: 14px; text-align: right; margin-bottom: 10px;">
                        <i class="fas fa-user-edit"></i> اسم العرض:
                    </h3>
                    <div class="input-wrapper" id="name-input-wrapper-center" style="border-color: var(--accent-yellow);">
                        <i class="fas fa-user" style="color: var(--accent-yellow); font-size: 18px;"></i>
                        <input type="text" id="profileDisplayName" placeholder="ادخل اسم العرض الجديد" style="width: 100%; text-align: right; margin: 0; padding: 0;">
                    </div>
                </div>

                <hr class="modern-thin-divider">

                <div style="text-align: center; margin-bottom: 20px;">
                    <button type="button" onclick="toggleAvatarSelection()" class="change-avatar-btn-styled">
                        <i class="fas fa-images"></i> اختر صورة جديدة
                    </button>
                </div>
                <div id="avatar-selection-area">
                </div>

                <div class="profile-actions-container" style="justify-content: center; gap: 15px; margin-bottom: 25px;">
                    <button onclick="saveProfileChanges()" class="confirm-payment-btn" style="width: 140px; padding: 10px; background-color: var(--green-buy-btn);">
                        <i class="fas fa-save" style="margin-left:5px;"></i> حفظ
                    </button>
                    <button onclick="toggleProfileEdit(false)" class="buy-btn" style="width: 140px; padding: 10px; background-color: #555; border-color: #555;">
                        <i class="fas fa-times" style="margin-left:5px;"></i> إلغاء
                    </button>
                </div>

                <hr style="border: 0; border-top: 1px solid rgba(255,255,255,0.1); margin: 20px 0;">

                <div style="text-align: center;">
                    <button onclick="showModal('supportModal')" class="buy-btn" style="
                    width: 100%;
                    max-width: 400px;
                    padding: 12px;
                    background-color: rgba(255, 71, 87, 0.1);
                    border: 1px solid #ff4757;
                    color: #ff4757;
                    font-size: 15px;
                    font-weight: bold;
                    border-radius: 10px;
                    transition: all 0.3s ease;
                " onmouseover="this.style.backgroundColor='#ff4757'; this.style.color='white'"
                            onmouseout="this.style.backgroundColor='rgba(255, 71, 87, 0.1)'; this.style.color='#ff4757'">
                        <i class="fas fa-lock" style="margin-left: 8px;"></i> تغيير كلمة المرور
                    </button>
                </div>

            </div>
        </div>

    </div>

    <div id="build-bundle-section" class="section glass-card darker" style="display: none;">
        <div style="text-align: center; margin-bottom: 30px;">
            <h2 style="color: var(--accent-yellow); font-size: 2.5rem; border: none;">
                <i class="fas fa-box-open" style="margin-left: 10px;"></i> اصنع الباندل الخاص بك
            </h2>
            <p style="color: #ccc; font-size: 1.2rem;">اختر أي <strong>3 منتجات</strong> من القائمة بسعر موحد <strong>150 جنيه</strong> فقط!</p>
            <p>الألعاب الموجودة هنا هي العاب حسابات ستيم عليها اللعبة اوفلاين </p>
        </div>

        <div class="products-container" id="bundle-games-grid" style="justify-content: center;">
        </div>

        <div id="bundle-floating-bar">
            <div class="bundle-status">
                <span id="bundle-counter">0</span> / 3 منتجات مختارة
            </div>
            <div class="bundle-price">
                الإجمالي: <span style="color: #00ff00;">150 EGP</span>
            </div>
            <button id="add-bundle-btn" class="buy-btn" onclick="addCustomBundleToCart()" disabled>
                <i class="fas fa-cart-plus" style="margin-left: 5px;"></i> أضف الباندل للسلة
            </button>
        </div>
    </div>

    <div id="reward-shop-section" class="section glass-card darker" style="display: none; position: relative;">


        <div class="shop-header">
            <div class="shop-balance">
                <i class="fas fa-coins" style="color: var(--accent-yellow);"></i> رصيدك: <span id="shop-current-points" style="color: var(--accent-yellow);">0</span> BP
            </div>

            <a href="javascript:void(0)" onclick="openDailyReward()" class="daily-reward-trigger">
                <i class="fas fa-gift"></i>
                <span>مكافأة يومية</span>
                <div class="badge-notification">!</div>
            </a>
        </div>

        <h2 style="text-align: center; color: var(--accent-yellow); border:none; margin-top: 10px;">
            <i class="fas fa-store"></i> متجر المكافآت
        </h2>
        <p style="text-align: center; color: #ccc; margin-bottom: 30px;">
            استبدل نقاطك بجوائز حصرية، أكواد خصم، وإطارات مميزة!
        </p>

        <div id="shop-items-grid" class="shop-grid">
        </div>

        <div class="reward-card" onclick="openSpinWheelModal()" style="margin: 20px auto; max-width: 300px;">
            <div class="reward-image-box" style="background: radial-gradient(circle, rgba(255,215,0,0.2), transparent);">
                <img src="https://cdn-icons-png.flaticon.com/512/2454/2454219.png" alt="Spin Wheel" style="animation: spin 10s linear infinite;">
            </div>
            <div class="reward-info">
                <h3 style="color: #ffd700;">عجلة الحظ 🎡</h3>
                <p class="reward-desc">جرب حظك! ممكن تكسب 1000 نقطة أو كود خصم.</p>
                <p class="reward-price"><i class="fas fa-coins"></i> 300 BP / لفة</p>
                <button class="buy-reward-btn">لف الآن</button>
            </div>
        </div>
    </div>

    <div id="reward-success-modal" class="modal" style="z-index: 10000; display: none;">
        <span class="close-btn" onclick="document.getElementById('reward-success-modal').style.display='none'">&times;</span>
        <div class="modal-body" style="text-align: center; align-items: center; justify-content: center;">
            <img src="./images/party-popper.png" alt="Success" style="width: 80px; margin-bottom: 15px;">
            <h3 id="success-modal-title" style="color: var(--green-buy-btn); border:none; font-size: 24px; margin: 10px 0;"></h3>
            <div id="success-modal-body" style="width: 100%; margin-top: 10px;"></div>
            <button onclick="document.getElementById('reward-success-modal').style.display='none'" class="confirm-payment-btn" style="margin-top: 20px; width: 50%;">حسناً</button>
        </div>
    </div>

    <footer id="footer">

        <div class="trust-badges-container">
            <div class="trust-badge">
                <svg xmlns="https://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
                <span>دفع آمن 100%</span>
            </div>
            <div class="trust-badge">
                <svg xmlns="https://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
                <span>تسليم فوري</span>
            </div>
            <div class="trust-badge">
                <svg xmlns="https://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                <span>دعم فني 24/7</span>
            </div>
        </div>

        <div id="suggestionModal" class="modal">
            <span class="close-btn" onclick="closeModal('suggestionModal')">×</span>
            <div class="modal-body">
                <h2>شاركنا اقتراحك</h2>
                <p style="font-size: 14px; color: #ccc; margin-top: -10px; margin-bottom: 20px;">سواء كانت فكرة لمنتج جديد أو تحسين لخدمة حالية، رأيك يهمنا.</p>
                <form id="suggestionForm">
                    <input type="text" name="name" placeholder="اسمك (اختياري)">
                    <textarea name="suggestion" rows="5" placeholder="اكتب اقتراحك هنا..." required></textarea>
                    <button type="submit">إرسال الاقتراح</button>
                </form>
                <div id="suggestionMessage" style="margin-top: 15px; font-weight: bold;"></div>
            </div>
        </div>


        <div class="footer-links">
            <a href="https://discord.gg/D3shcEb5xe" target="_blank" class="footer-link">
                <span>سيرفر الديسكورد</span>
                <img src="./images/discord.png" alt="Discord">
            </a>
            <a href="https://linktr.ee/Berlinstore22" target="_blank" class="footer-link">
                <span>جميع روابطنا</span>
                <img src="./images/BerlinStore.png" alt="Berlin Store Logo">
            </a>
            <a href="#about" class="footer-link">من نحن؟</a>
            <a href="#terms" class="footer-link">شروط الخدمة</a>
            <a href="#privacy" class="footer-link">سياسة الخصوصية</a>
            <a href="#faq" class="footer-link">الأسئلة الشائعة</a>
        </div>

        <p id="copyright">© 2020-2026 GOE Berlin Store. جميع الحقوق محفوظة.</p>

        <div class="payment-icons-corner">
            <img src="./images/paypal.png" alt="PayPal" class="pay-img-corner" title="PayPal">
            <img src="./images/vf-cash.png" alt="Vodafone Cash" class="pay-img-corner" title="Vodafone Cash">
        </div>

        <button id="theme-toggle-btn">
            <svg class="sun-icon" xmlns="https://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
            <svg class="moon-icon" xmlns="https://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
        </button>
        <div id="mobile-nav">
            <a href="#home" class="mobile-nav-btn">
                <svg xmlns="https://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                <span>الرئيسية</span>
            </a>
            <a onclick="showModal('supportModal')" class="mobile-nav-btn">
                <svg xmlns="https://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                <span>الدعم</span>
            </a>
            <a onclick="showModal('cartModal'); renderCart();" class="mobile-nav-btn" id="mobile-cart-btn">
                <svg xmlns="https://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>
                <span>السلة</span>
                <span class="cart-count" id="mobile-cart-count">0</span>
            </a>
        </div>

        <div id="itakura-diary-overlay">
            <span class="close-diary-btn" onclick="closeOverlay('diary')">✕</span>

            <div class="diary-paper">

                <div class="diary-date">２月９日</div>
                <div class="visible-line">
                    最近、暖かくなってきた。ようやく散歩に出ようかという気になってきた。<br>
                    仕事は遅々として進まないが、マイペースでやるしかない。
                </div>
                <div class="hidden-line">
                    またあの女から電話だ…　気のせいか、あの高飛車な口調が焦りを帯びているように聞こえた。<br>
                    「まだできないの？」「早くして！」と、まるで誰かに追われているかのような…
                </div>

                <br>

                <div class="diary-date">２月１０日</div>
                <div class="visible-line">
                    視力が落ちてきた。そろそろ医者に行くべきかもしれない。<br>
                    今日は気晴らしに新しい将棋ソフトを買った。
                </div>
                <div class="hidden-line">
                    彼らの正体が少しずつわかってきた気がする。とんでもない奴らにとんでもない物を発注されてしまったようだ。<br>
                    私の目が黒いうちは、奴らに完成品を渡すわけにはいかない。絶対に…
                </div>

                <br>

                <div class="hidden-line">
                    <div class="diary-date" style="color: #fdfdf5;">２月１１日</div>
                    また机の上のペンが５cm移動している…<br>
                    やはり誰かが事務所に忍びこんでいるようだ。<br>
                    誰なんだ！？姿を現せ！！
                </div>

                <br>

                <div class="diary-date">２月１３日</div>
                <div class="visible-line">
                    静かな一日だ。特に何も起きなかった。
                </div>
                <div class="hidden-line">
                    やはり私は間違っていたようだ…<br>
                    彼らが求めているソフトは…　私が考えているものとは違うらしい…<br>
                    我々の目の届かぬところで、彼らは何をしようとしているんだ？<br>
                    人類のために、このソフトは完成させてはならないと断念した。<br>
                    彼らとの連絡方法は電子メールに変わった。
                </div>

                <br>

                <div class="diary-date">２月１４日</div>
                <div class="visible-line">
                    バレンタインデー。今年もチョコレートはなしか。
                </div>
                <div class="hidden-line">
                    私の別荘から電話をかけて来た。<br>
                    どうやら女と一泊するらしい。いい気なもんだ…<br>
                    疲れた… このままではいつか私は殺されてしまうかも…<br><br>
                    あまりにも高圧的な女の口調に堪えかねて「何様のつもりだ」となじったら、<br>
                    女は笑いながら英語でこう言った…

                    <span class="english-quote">
                        We can be both of God and the Devil.<br>
                        Since we're trying to raise the dead against the stream of time.
                    </span>
                </div>

            </div>
        </div>

        <div id="vermouth-console-overlay">
            <div class="console-text" id="console-content"></div>
        </div>

        <div id="aptx-overlay"></div>
        <div id="aptx-warning">
            ⚠️ CRITICAL FAILURE ⚠️<br>
            <span style="font-size: 1.5rem; color: white;">UNKNOWN TOXIN DETECTED</span><br>
            <span style="font-size: 1rem; color: #ccc;">(Click anywhere to resist)</span>

        </div>
        <div id="sohayl-diary-overlay" class="diary-overlay">

            <div class="close-diary-btn" onclick="closeSohaylDiary()">X</div>

            <div class="diary-paper">

                <h2 style="text-align: center; color: #303030; margin-bottom: 30px;">
                    Sohayl Notes
                </h2>

                <div style="padding: 20px; border: 1px solid #e0e0e0; border-radius: 8px; margin-bottom: 30px;">
                    <p style="text-align: right; color: #000000; font-weight: bold;">
                        [Top Secret File]
                    </p>
                    <div class="hidden-sohayl-line" style="text-align: right; margin-top: 10px;">
                        <p>(: if you found this tell me in discord </p>
                        <p>Cheatcodes (Hidden file)</p>
                        <p>MATRIX</p>
                        <p>itakura</p>
                        <p>kaitokid</p>
                        <p>rankiss</p>
                        <p>APTX4869</p>
                        <p>KONAMICODE</p>
                    </div>

                    <p style="text-align: left; color: #000000; font-size: 12px; margin-top: 15px;">
                        <span class="hidden-sohayl-line">There is always only one truth.</span>
                    </p>
                </div>

            </div>
        </div>

        <div id="authModal" class="modal">
            <span class="close-btn" onclick="closeModal('all')">&times;</span>

            <div class="modal-body auth-modal-body">
                <h2 id="authTitle">تسجيل الدخول</h2>

                <div class="auth-fields-container">
                    <div class="auth-input-group">
                        <input type="email" id="userEmail" placeholder="البريد الإلكتروني" class="auth-field">
                    </div>

                    <div class="auth-input-group">
                        <input type="password" id="userPassword" placeholder="كلمة المرور" class="auth-field">
                    </div>
                </div>

                <p id="authMessage" class="auth-message"></p>

                <button id="submitAuthBtn" class="confirm-payment-btn modal-submit-btn">
                    تسجيل الدخول
                </button>

                <div class="auth-separator">
                    <span>أو</span>
                </div>

                <button onclick="signInWithGoogle()" class="google-auth-btn">
                    <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google Logo">
                    <span>المتابعة باستخدام Google</span>
                </button>

                <div class="auth-footer-text">
                    <span id="toggleAuthText">ليس لديك حساب؟</span>
                    <span id="toggleAuthBtn" class="auth-toggle-btn">
                        إنشاء حساب جديد
                    </span>
                </div>
            </div>
        </div>

    </footer>

    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script>

                        function showDevPage() {
                            // إخفاء الأقسام الأخرى
                            document.querySelectorAll('.section').forEach(s => s.style.display = 'none');

                            // إظهار قسم الديف
                            const devSection = document.getElementById('dev-services-page');
                            if (devSection) {
                                devSection.style.display = 'block';
                                window.scrollTo(0, 0);
                            }

                            // 🔥 إضافة الكلاس اللي بيشغل اللون الأزرق
                            document.body.classList.add('dev-navbar-active');
                        }

                        // عند الخروج من صفحة الديف
                        function hideDevPage() {
                            // إخفاء الديف وإظهار الرئيسية
                            document.getElementById('dev-services-page').style.display = 'none';
                            document.getElementById('home').style.display = 'block';

                            // 🔥 حذف الكلاس عشان يرجع اللون الطبيعي
                            document.body.classList.remove('dev-navbar-active');

                            // إظهار باقي الأقسام
                            document.querySelectorAll('.main-products-section').forEach(s => s.style.display = 'block');
                        }
                        // دالة لفتح نافذة الطلب الخاصة بكل خدمة (تربط مع الكود القديم لديك)
                        function openCustomOrder(type) {
                            // نقوم بإخفاء صفحة التطوير مؤقتاً
                            document.getElementById('dev-services-page').style.display = 'none';

                            // إظهار قسم الخدمات القديم (لأنه يحتوي على الفورم)
                            document.getElementById('designs').style.display = 'block';

                            // هنا نحدد أي كارت يفتح بناءً على النوع
                            if (type === 'website') {
                                // محاكاة الضغط على زر "اطلب الآن" الخاص بالمواقع
                                const webCardBtn = document.querySelector('#website-design-card .offer-order-btn');
                                if (webCardBtn) webCardBtn.click();
                                // التمرير للكارت
                                document.getElementById('website-design-card').scrollIntoView();
                            }
                            else if (type === 'discord') {
                                // يمكننا فتح قسم الديكورات أو السيرفرات حسب ما تريد
                                // سنفترض هنا أنك تريد فتح كارت سيرفرات الديسكورد في قسم designs
                                // (عليك التأكد من وجود كارت مناسب أو توجيهه للقسم الصحيح)
                                window.location.hash = '#designs';
                            }
                        }

                        window.addEventListener('hashchange', function () {
                            // التحقق مما إذا كان الرابط الحالي هو صفحة تسجيل الدخول
                            if (window.location.hash === '#my-orders-auth-page') {

                                // تأخير بسيط جداً لضمان تحميل الصفحة ثم الصعود
                                setTimeout(() => {
                                    window.scrollTo({
                                        top: 0,
                                        left: 0,
                                        behavior: 'instant' // صعود فوري (بدون انيميشن بطيء عشان المستخدم مايحسش بالملل)
                                    });
                                }, 50);
                            }
                        });

                        // ✅ حل إضافي: عند الضغط على زر "حسابي" في الناف بار
                        const navUserBtn = document.getElementById('user-account-btn');
                        if (navUserBtn) {
                            navUserBtn.addEventListener('click', function () {
                                // لو المستخدم مش مسجل دخول، اطلع لفوق
                                if (!firebase.auth().currentUser) {
                                    setTimeout(() => {
                                        window.scrollTo(0, 0);
                                    }, 100);
                                }
                            });
                        }

                        let allUserOrders = []; // متغير لتخزين كل الطلبات

                        function openDailyReward() {
                            // 1. إخفاء كل الأقسام المفتوحة
                            document.querySelectorAll('.section').forEach(s => s.style.display = 'none');

                            // 2. إظهار قسم المكافأة اليومية
                            const dailySection = document.getElementById('daily-reward-section');
                            if (dailySection) {
                                dailySection.style.display = 'block';

                                // 3. تشغيل دالة التحديث (عشان يحسب هو في اليوم الكام)
                                if (typeof initDailyRewardSystem === 'function') {
                                    initDailyRewardSystem();
                                }

                                // 4. تأثيرات صوتية (اختياري)
                                new Audio('https://www.myinstants.com/media/sounds/ui-click-menu-modern.mp3').play().catch(() => { });
                            } else {
                                console.error("⚠️ قسم #daily-reward-section مش موجود في كود HTML!");
                                alert("يوجد خطأ: قسم المكافأة اليومية لم يتم إضافته للكود.");
                            }
                        }

                        // =========================================================
                        // 🛡️ MASTER FIX: REWARD SYSTEM (نظام المكافآت المتكامل)
                        // =========================================================

                        // 1. تعريف بيانات المتجر
                        const REWARD_SHOP_ITEMS = [
                            {
                                id: 'discount_5_percent',
                                title: 'كود خصم 5%',
                                description: 'خصم صالح على جميع المنتجات.',
                                price: 1000,
                                type: 'code',
                                value: 'BERLLINSTOREEEE541241251251251',
                                image: 'https://cdn-icons-gif.flaticon.com/13373/13373786.gif',
                                category: 'discount'
                            },
                            {
                                id: 'discount_10_percent',
                                title: 'كود خصم 10%',
                                description: 'خصم مميز لطلباتك القادمة!',
                                price: 2000,
                                type: 'code',
                                value: 'BERLLINSTOREEEE10541241251251251',
                                image: 'https://cdn-icons-gif.flaticon.com/13373/13373786.gif',
                                category: 'discount'
                            },
                            {
                                id: 'title_king',
                                title: 'لقب KING 👑',
                                description: 'لقب ذهبي يظهر بجوار اسمك.',
                                price: 5000,
                                type: 'title-badge',
                                value: 'king-title-badge',
                                image: 'https://cdn-icons-png.flaticon.com/512/3620/3620659.png',
                                category: 'status'
                            },
                            {
                                id: 'shop_frame_inferno',
                                title: 'إطار الجحيم 🔥',
                                description: 'إطار ناري متحرك.',
                                price: 200,
                                type: 'frame',
                                value: 'frame-inferno',
                                image: 'https://cdn-icons-png.flaticon.com/512/3620/3620659.png',
                                category: 'cosmetic'
                            },
                            {
                                id: 'shop_frame_cyber',
                                title: 'إطار سايبر 🤖',
                                description: 'إطار نيون مستقبلي.',
                                price: 200,
                                type: 'frame',
                                value: 'frame-cyber',
                                image: 'https://cdn-icons-png.flaticon.com/512/3620/3620659.png',
                                category: 'cosmetic'
                            },
                            {
                                id: 'shop_frame_toxic',
                                title: 'إطار السموم ☣️',
                                description: 'إطار مشع باللون الأخضر.',
                                price: 100,
                                type: 'frame',
                                value: 'frame-toxic',
                                image: 'https://cdn-icons-png.flaticon.com/512/5695/5695705.png',
                                category: 'cosmetic'
                            },
                            {
                                id: 'shop_frame_galaxy',
                                title: 'إطار المجرة 🌌',
                                description: 'ألوان الفضاء الساحرة.',
                                price: 100,
                                type: 'frame',
                                value: 'frame-galaxy',
                                image: 'https://cdn-icons-png.flaticon.com/512/2240/2240744.png',
                                category: 'cosmetic'
                            },
                            {
                                id: 'crunchyroll_account_1',
                                title: 'حساب كرانشي رول',
                                description: 'مشاهدة الأنمي بدون إعلانات.',
                                price: 1500,
                                type: 'code',
                                value: 'Email: potopapa113@gmail.com | Pass: Dont@edit/ty04',
                                image: 'https://cdn-icons-png.flaticon.com/512/1993/1993167.png',
                                category: 'accounts'
                            },
                            {
                                id: 'nitro_classic_1m',
                                title: 'Discord Deciration 4.99$',
                                description: 'اشتراك نيترو كلاسيك لمدة شهر.',
                                price: 9500,
                                type: 'code',
                                value: 'تواصل ديسكورد مع اليوزر التالي: sohayll',
                                image: 'https://cdn-icons-png.flaticon.com/512/5968/5968756.png',
                                category: 'accounts'
                            }
                        ];

                        // 2. المتغيرات الأساسية للنقاط
                        const STORAGE_KEY_V3 = 'berlin_store_points_v3';
                        let userPoints = 0;

                        // 3. دالة التحميل (Initialization)
                        function initPointsSystemFixed() {
                            try {
                                const saved = localStorage.getItem(STORAGE_KEY_V3);
                                if (saved && !isNaN(parseInt(saved))) {
                                    userPoints = parseInt(saved);
                                } else {
                                    userPoints = 500; // هدية البداية
                                    localStorage.setItem(STORAGE_KEY_V3, userPoints);
                                }
                                updatePointsDisplaySafe();
                                console.log("✅ Points System Loaded. Balance:", userPoints);
                            } catch (e) {
                                console.error("Error initializing points:", e);
                            }
                        }
                        function saveCodeToInventory(code) {
                            let inv = JSON.parse(localStorage.getItem(STORAGE_KEY_COUPONS) || "[]");
                            inv.push(code);
                            localStorage.setItem(STORAGE_KEY_COUPONS, JSON.stringify(inv));
                        }

                        function showSuccessModal(item) {
                            const modal = document.getElementById('reward-success-modal');
                            const title = document.getElementById('success-modal-title');
                            const body = document.getElementById('success-modal-body');

                            if (modal) {
                                modal.style.display = 'flex';
                                if (title) title.textContent = `🎉 مبروك! حصلت على ${item.title}`;

                                let content = '';
                                if (item.type === 'code') {
                                    content = `<p style="color:#fff">كودك هو: <span class="code-box" onclick="navigator.clipboard.writeText('${item.value}')">${item.value}</span></p><p style="font-size:12px;color:#aaa">تم حفظه في محفظتك</p>`;
                                } else {
                                    content = `<p style="color:#fff; font-size:18px;">تم تفعيل اللقب فوراً بجوار اسمك! 👑</p>`;
                                }

                                if (body) body.innerHTML = content;

                                new Audio('https://www.myinstants.com/media/sounds/tada-fanfare-a.mp3').play().catch(() => { });
                            }
                        }
                        // 4. دالة تحديث الشاشة (Update UI)
                        function updatePointsDisplaySafe() {
                            const ids = ['shop-current-points', 'shop-user-points', 'user-points-display', 'user-points-val'];
                            ids.forEach(id => {
                                const el = document.getElementById(id);
                                if (el) {
                                    el.textContent = userPoints;
                                    el.style.transition = "color 0.3s";
                                    el.style.color = "#fff"; // وميض أبيض
                                    setTimeout(() => el.style.color = "", 300);
                                }
                            });
                        }

                        // 5. دالة إضافة نقاط (Add Points)
                        function addPoints(amount) {
                            userPoints += amount;
                            localStorage.setItem(STORAGE_KEY_V3, userPoints);
                            updatePointsDisplaySafe();

                            // إشعار بسيط للمستخدم
                            if (typeof showInfoToast === 'function') {
                                showInfoToast(`🎉 مبروك! تمت إضافة ${amount} نقطة لرصيدك.`, 4000, 'success');
                            }
                        }

                        // =========================================================
                        // 🛒 دالة الشراء (المعدلة للحفظ في السيرفر والحساب)
                        // =========================================================
                        window.buyReward = function (itemId) {
                            // البحث عن المنتج
                            const item = REWARD_SHOP_ITEMS.find(i => i.id === itemId);

                            if (!item) {
                                console.error("Item not found:", itemId);
                                return alert("❌ حدث خطأ: المنتج غير موجود.");
                            }

                            if (userPoints < item.price) {

                                // تشغيل صوت الخطأ (Oof Sound)
                                const errorAudio = new Audio('https://www.myinstants.com/media/sounds/minecraft-damage-oof-sound-effect.mp3');
                                errorAudio.volume = 0.5;
                                errorAudio.play().catch(() => { });

                                // 🔥 إظهار رسالة الموقع الحمراء بدلاً من الـ Alert
                                showInfoToast(`❌ رصيدك (${userPoints}) غير كافٍ! تحتاج ${item.price} نقطة.`, 4000, 'error');

                                // عمل حركة اهتزاز للزر اللي انداس عليه (كتأثير بصري)
                                const btn = document.activeElement;
                                if (btn) {
                                    btn.style.animation = "shake 0.3s ease";
                                    // إزالة الأنيميشن بعد ما يخلص عشان يشتغل تاني لو داس
                                    setTimeout(() => btn.style.animation = "", 300);
                                }

                                return; // 🛑 وقف الدالة هنا وماتكملش خصم ولا شراء
                            }

                            // 2. تنفيذ الشراء (خصم النقاط)
                            userPoints -= item.price;
                            localStorage.setItem(STORAGE_KEY_V3, userPoints);
                            updatePointsDisplaySafe(); // تحديث الرقم في الشاشة فوراً

                            // 3. حفظ الكود أو اللقب
                            if (item.type === 'code') {
                                // حفظ الكود حتى لو مكرر
                                let inv = JSON.parse(localStorage.getItem('my_coupon_inventory') || "[]");
                                inv.push(item.value);
                                localStorage.setItem('my_coupon_inventory', JSON.stringify(inv));
                            }
                            else if (item.type === 'title-badge') {
                                applyUserTitle(item.value);
                            }
                            else if (item.type === 'frame') {
                                if (codeContainer) codeContainer.style.display = 'none';

                                // 1. جلب قائمة الإطارات المملوكة
                                let unlocked = JSON.parse(localStorage.getItem('unlocked_frames')) || ['default'];

                                // 2. لو الإطار مش موجود، ضيفه للقائمة واحفظه
                                if (!unlocked.includes(item.value)) {
                                    unlocked.push(item.value);
                                    localStorage.setItem('unlocked_frames', JSON.stringify(unlocked));
                                }

                                // 3. تفعيل الإطار فوراً للمستخدم
                                applyUserFrame(item.value);
                            }

                            // حفظ في السيرفر
                            if (typeof saveCustomDataToFirestore === 'function') {
                                saveCustomDataToFirestore('pointsBalance', userPoints);
                            }

                            // 4. 🔥 استدعاء النافذة الإجبارية الجديدة 🔥
                            showRewardModalForce(item);
                        };

                        // =========================================================
                        // 🎁 دالة إظهار النافذة (Dynamic Modal Builder)
                        // =========================================================
                        function showRewardModalForce(item) {
                            console.log("🎁 Showing Reward Modal for:", item.title);

                            // 1. تنظيف أي نافذة قديمة عشان ميتكرروش فوق بعض
                            const old = document.getElementById('force-reward-modal');
                            if (old) old.remove();

                            // 2. إنشاء النافذة بالكود (عشان نتجاوز مشاكل الـ CSS القديمة)
                            const modal = document.createElement('div');
                            modal.id = 'force-reward-modal';

                            // ستايل مباشر لضمان الظهور فوق كل شيء
                            modal.style.cssText = `
                                                                                                                                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                                                                                                                                background: rgba(0,0,0,0.9); z-index: 2147483647;
                                                                                                                                display: flex; flex-direction: column; align-items: center; justify-content: center;
                                                                                                                                font-family: 'Tajawal', sans-serif; backdrop-filter: blur(5px);
                                                                                                                                animation: fadeIn 0.3s ease-out;
                                                                                                                            `;

                            let extraContent = '';
                            if (item.type === 'code') {
                                // تنظيف الكود من أي مسافات زائدة
                                const cleanValue = item.value.trim();

                                extraContent = `
                                                                                                                                    <p style="color:#e0e0e0; margin-bottom:10px; font-size:16px;">اضغط للنسخ:</p>

                                                                                                                                    <div class="code-box" onclick="copyRewardCode('${cleanValue}', this)" title="اضغط للنسخ" style="user-select: all;">
                                                                                                                                        <span>${cleanValue}</span>
                                                                                                                                        <i class="fas fa-copy"></i>
                                                                                                                                    </div>

                                                                                                                                    <p style="color:#aaa; font-size:12px; margin-top:5px;">
                                                                                                                                        (تم حفظ نسخة في محفظتك)
                                                                                                                                    </p>
                                                                                                                                `;
                            }

                            // 4. وضع تصميم النافذة الداخلي
                            modal.innerHTML = `
                                                                                                                                <div style="background: linear-gradient(145deg, #1a1a2e, #16213e); padding:40px; border-radius:20px; text-align:center; border:2px solid #28a745; box-shadow: 0 0 50px rgba(40, 167, 69, 0.3); max-width:90%; width: 400px; position: relative;">
                                                                                                                                    <img src="https://cdn-icons-png.flaticon.com/512/7491/7491966.png" style="width: 80px; margin-bottom: 15px;">
                                                                                                                                    <h2 style="color:#28a745; margin:0 0 10px 0;">🎉 مبروووك!</h2>
                                                                                                                                    <h3 style="color:white; font-weight:normal; margin:0;">حصلت على: <span style="color:#ffd700; font-weight:bold;">${item.title}</span></h3>
                                                                                                                                    ${extraContent}
                                                                                                                                    <button onclick="document.getElementById('force-reward-modal').remove()"
                                                                                                                                            style="background: linear-gradient(45deg, #28a745, #218838); color:white; border:none; padding:12px 40px; font-size:16px; border-radius:50px; cursor:pointer; margin-top:20px; font-weight:bold; box-shadow: 0 5px 15px rgba(40,167,69,0.4);">
                                                                                                                                        حسناً، شكراً
                                                                                                                                    </button>
                                                                                                                                </div>
                                                                                                                            `;

                            document.body.appendChild(modal);

                            // تشغيل صوت
                            const audio = new Audio('https://www.myinstants.com/media/sounds/tada-fanfare-a.mp3');
                            audio.volume = 0.5;
                            audio.play().catch(() => { });
                        }

                        // =========================================================
                        // 🛒 دالة الشراء المعدلة (تستدعي النافذة الجديدة)
                        // =========================================================
                        window.buyReward = function (itemId) {
                            // البحث عن المنتج
                            const item = REWARD_SHOP_ITEMS.find(i => i.id === itemId);

                            if (!item) {
                                console.error("Item not found:", itemId);
                                return alert("❌ حدث خطأ: المنتج غير موجود.");
                            }

                            // 1. فحص الرصيد
                            if (userPoints < item.price) {
                                return alert(`❌ رصيدك (${userPoints}) غير كافٍ! تحتاج ${item.price} نقطة.`);
                            }

                            // 2. تنفيذ الشراء (خصم النقاط)
                            userPoints -= item.price;
                            localStorage.setItem(STORAGE_KEY_V3, userPoints);
                            updatePointsDisplaySafe(); // تحديث الرقم في الشاشة فوراً

                            // 3. حفظ الكود أو اللقب
                            if (item.type === 'code') {
                                // حفظ الكود حتى لو مكرر
                                let inv = JSON.parse(localStorage.getItem('my_coupon_inventory') || "[]");
                                inv.push(item.value);
                                localStorage.setItem('my_coupon_inventory', JSON.stringify(inv));
                            }
                            else if (item.type === 'title-badge') {
                                applyUserTitle(item.value);
                            }
                            else if (item.type === 'frame') {
                                unlockFrame(item.value);
                            }

                            // حفظ في السيرفر
                            if (typeof saveCustomDataToFirestore === 'function') {
                                saveCustomDataToFirestore('pointsBalance', userPoints);
                            }

                            // 4. 🔥 استدعاء النافذة الإجبارية الجديدة 🔥
                            showRewardModalForce(item);
                        };

                        // 6. دوال مساعدة (Helpers)
                        function saveCodeLocal(code) {
                            let inv = JSON.parse(localStorage.getItem('my_coupon_inventory') || "[]");
                            // التأكد من عدم تكرار الكود
                            if (!inv.includes(code)) {
                                inv.push(code);
                                localStorage.setItem('my_coupon_inventory', JSON.stringify(inv));
                            }
                        }

                        function updateUserBadges(user) {
                            const container = document.getElementById('badges-area');
                            if (!container) return;
                            container.innerHTML = ''; // مسح القديم

                            // 1. وسام "موثوق" (لكل المسجلين)
                            container.innerHTML += `
                                                                                                                                        <div class="user-badge verified">
                                                                                                                                            <i class="fas fa-check-circle"></i> Verified
                                                                                                                                        </div>
                                                                                                                                    `;

                            // 2. وسام "Early Bird" (للأعضاء القدامى)
                            const joinYear = new Date(user.metadata.creationTime).getFullYear();
                            if (joinYear <= 2025) {
                                container.innerHTML += `
                                                                                                                                            <div class="user-badge early">
                                                                                                                                                <i class="fas fa-dove"></i> Early Bird
                                                                                                                                            </div>
                                                                                                                                        `;
                            }

                            // 3. 🔥🔥 وسام "KING" (للأساطير فقط) 🔥🔥
                            // نتحقق هل المستخدم يملك اللقب في الذاكرة حالياً
                            const activeTitle = localStorage.getItem('user_active_title');

                            if (activeTitle === 'king-title-badge') {
                                container.innerHTML += `
                                                                                                                                            <div class="user-badge king" title="صاحب لقب الملك">
                                                                                                                                                <i class="fas fa-crown"></i> KING
                                                                                                                                            </div>
                                                                                                                                        `;
                            }
                        }

                        function applyUserTitle(titleClass) {
                            console.log("Applying Title:", titleClass); // للتأكد في الكونسول

                            // 1. حفظ اللقب في الذاكرة للأبد
                            localStorage.setItem('user_active_title', titleClass);

                            // 2. قائمة بكل العناصر التي تعرض اسم المستخدم في صفحتك
                            // تأكد أن هذه الـ IDs موجودة في الـ HTML عندك
                            const elements = [
                                document.getElementById('header-display-name'),  // الاسم في الهيدر
                                document.getElementById('dropdown-user-name'),   // الاسم في القائمة المنسدلة
                                document.getElementById('profile-username'),     // الاسم في صفحة البروفايل
                                document.getElementById('welcome-user-msg')      // رسالة الترحيب (إن وجدت)
                            ];

                            // 3. تطبيق اللقب على كل العناصر الموجودة
                            elements.forEach(el => {
                                if (el) {
                                    // مسح أي ألقاب قديمة أولاً
                                    el.classList.remove('king-title-badge', 'frame-neon-purple');

                                    // إضافة اللقب الجديد
                                    el.classList.add(titleClass);
                                }
                            });
                        }

                        // 🔥 مهم جداً: تشغيل اللقب المحفوظ عند فتح الموقع
                        document.addEventListener('DOMContentLoaded', () => {
                            const savedTitle = localStorage.getItem('user_active_title');
                            if (savedTitle) {
                                applyUserTitle(savedTitle);
                            }
                        });

                        // ✅ دالة استهلاك الكود (توضع في زر الخصم لحذف الكود بعد الاستخدام)
                        function consumeUserCoupon(codeToCheck) {
                            let inventory = JSON.parse(localStorage.getItem('my_coupon_inventory') || "[]");
                            const codeIndex = inventory.indexOf(codeToCheck);

                            if (codeIndex !== -1) {
                                inventory.splice(codeIndex, 1); // حذف الكود
                                localStorage.setItem('my_coupon_inventory', JSON.stringify(inventory));
                                console.log(`✅ Code ${codeToCheck} consumed.`);
                                return true;
                            } else {
                                return false;
                            }
                        }

                        // 7. تشغيل المتجر (Open Shop UI)
                        function openRewardShop() {
                            document.querySelectorAll('.section').forEach(s => s.style.display = 'none');
                            const shopSection = document.getElementById('reward-shop-section');
                            if (shopSection) {
                                shopSection.style.display = 'block';

                                // رسم المنتجات في المتجر
                                const container = document.getElementById('shop-items-grid');
                                if (container) {
                                    container.innerHTML = '';
                                    REWARD_SHOP_ITEMS.forEach(item => {
                                        const card = document.createElement('div');
                                        card.className = 'reward-card';
                                        card.innerHTML = `
                                                                                                                                            <div class="reward-image-box">
                                                                                                                                                <img src="./images/gift-box.png" alt="${item.title}" onerror="this.src='https://cdn-icons-png.flaticon.com/512/9004/9004955.png'">
                                                                                                                                            </div>
                                                                                                                                            <div class="reward-info">
                                                                                                                                                <h3>${item.title}</h3>
                                                                                                                                                <p class="reward-price"><i class="fas fa-coins"></i> ${item.price} BP</p>
                                                                                                                                                <button onclick="buyReward('${item.id}')" class="buy-reward-btn">شراء الآن</button>
                                                                                                                                            </div>
                                                                                                                                        `;
                                        container.appendChild(card);
                                    });
                                }
                                window.scrollTo(0, 0);
                            }
                        }

                        // تشغيل النظام فوراً عند التحميل
                        initPointsSystemFixed();

                        // تفعيل اللقب
                        function applyUserTitle(titleClass) {
                            localStorage.setItem('user_active_title', titleClass);

                            // تحديث العناصر في الصفحة فوراً
                            const elementsToUpdate = [
                                document.getElementById('header-display-name'),
                                document.getElementById('dropdown-user-name')
                            ];

                            elementsToUpdate.forEach(el => {
                                if (el) {
                                    // حذف الألقاب القديمة (أضف كلاسات ألقابك هنا)
                                    el.classList.remove('king-title-badge', 'legend-title-badge');
                                    el.classList.add(titleClass);
                                }
                            });
                        }

                        // --- تشغيل النظام عند التحميل ---
                        document.addEventListener('DOMContentLoaded', () => {
                            initPoints();
                        });


                        function applyUserTitle(titleClass) {
                            const allTitleClasses = ['king-title-badge', 'other-title-class']; // يجب تعريف جميع ألقابك هنا
                            const elementsToUpdate = [
                                document.getElementById('header-display-name'),
                                document.getElementById('dropdown-user-name')
                            ];

                            // 1. حفظ اللقب في Firebase ليتم تحميله عند تسجيل الدخول القادم
                            if (firebase.auth().currentUser && titleClass) {
                                saveCustomDataToFirestore('user_active_title', titleClass);
                            }

                            // 2. تطبيق اللقب على عناصر الواجهة
                            elementsToUpdate.forEach(el => {
                                if (el) {
                                    // إزالة جميع الألقاب السابقة
                                    allTitleClasses.forEach(cls => el.classList.remove(cls));

                                    // تطبيق اللقب الجديد
                                    if (titleClass) {
                                        el.classList.add(titleClass);
                                    }
                                }
                            });
                        }


                        function saveUserPointsToFirestore(newPoints) {
                            const user = firebase.auth().currentUser;

                            // 1. التحقق من المصادقة (Authentication) وتهيئة Firestore
                            if (!user) {
                                console.warn("User not authenticated. Cannot save points.");
                                if (typeof showInfoToast === 'function') {
                                    showInfoToast("❌ فشل حفظ النقاط: يُرجى تسجيل الدخول.", 4000, 'error');
                                }
                                return;
                            }

                            if (typeof firebase.firestore !== 'function') {
                                console.error("❌ Firebase Firestore not initialized. Check your Firebase SDK imports.");
                                return;
                            }

                            const db = firebase.firestore();
                            const userDocRef = db.collection('user_data').doc(user.uid);

                            // 2. قراءة المستند الحالي أولاً
                            userDocRef.get()
                                .then(doc => {
                                    const currentPoints = doc.exists ? doc.data().pointsBalance : null;

                                    // ✅ التحقق: إذا كانت القيمة لم تتغير، توقف عن الحفظ وأرسل رسالة للكونسول فقط
                                    if (currentPoints === newPoints) {
                                        console.log(`⏱️ النقاط هي نفسها (${newPoints}). لم يتم إرسال تحديث.`);
                                        return null; // نُعيد قيمة null لإنهاء سلسلة .then() التالية
                                    }

                                    // 3. الحفظ (SET) وتحديث الرصيد
                                    return userDocRef.set({
                                        pointsBalance: newPoints
                                    }, { merge: true });
                                })
                                .then(result => {
                                    // 4. نتحقق أن التحديث قد حدث (أي أننا لم نحصل على null من الخطوة السابقة)
                                    if (result !== null) {
                                        console.log(`✅ نقاط المستخدم (${newPoints} BP) تم حفظها بثبات.`);
                                        if (typeof showInfoToast === 'function') {
                                            showInfoToast("تم خصم النقاط وحفظ رصيدك الجديد!", 3000, 'success');
                                        }
                                    }
                                })
                                .catch(error => {
                                    // 5. معالجة أي أخطاء في القراءة أو الكتابة
                                    console.error("❌ خطأ في حفظ النقاط:", error);
                                    if (typeof showInfoToast === 'function') {
                                        showInfoToast("❌ فشل حفظ النقاط على السيرفر.", 5000, 'error');
                                    }
                                });
                        }

                        function grantReward(item) {
                            // التأكد من وجود العناصر قبل البدء لتجنب الأخطاء
                            const modal = document.getElementById('rewardModal');
                            if (!modal) {
                                console.error("❌ خطأ: نافذة المكافأة (rewardModal) غير موجودة في HTML.");
                                return;
                            }

                            const img = document.getElementById('rewardImage');
                            const title = document.getElementById('rewardTitle');
                            const desc = document.getElementById('rewardDescription');
                            const codeContainer = document.getElementById('rewardCodeContainer');
                            const codeText = document.getElementById('rewardCodeText');

                            // تعبئة البيانات الأساسية
                            img.src = item.image;
                            title.textContent = item.title;
                            desc.textContent = item.description;

                            // --- التعامل مع أنواع الجوائز ---

                            // 1. نوع كود خصم
                            if (item.type === 'code') {
                                codeContainer.style.display = 'block';
                                codeText.textContent = item.value;
                                if (typeof saveDiscountCode === 'function') saveDiscountCode(item.value);
                                desc.textContent = item.description;

                                // 2. نوع إطار
                            } else if (item.type === 'frame') {
                                codeContainer.style.display = 'none';
                                if (typeof unlockFrame === 'function') unlockFrame(item.value);
                                desc.textContent += " (تمت إضافة الإطار لصفحة تعديل البروفايل ✅)";

                                // 3. نوع أفاتار
                            } else if (item.type === 'avatar') {
                                codeContainer.style.display = 'none';

                                // فتح الصورة وحفظها
                                if (typeof unlockAvatar === 'function') unlockAvatar(item.value);

                                desc.textContent = "تم فتح الصورة بنجاح! تم تعيينها كصورة بروفايلك الآن 💀";

                                // تغيير الصورة فوراً
                                if (typeof selectNewAvatar === 'function') {
                                    selectNewAvatar(item.value);
                                }

                                // 💥 4. ✅ الحالة الجديدة: منح لقب (Title Badge)
                            } else if (item.type === 'title-badge') {
                                codeContainer.style.display = 'none';

                                // 🚀 الخطوة الجديدة: تطبيق وحفظ اللقب على المستخدم (item.value هو كلاس CSS)
                                if (typeof applyUserTitle === 'function') {
                                    applyUserTitle(item.value);
                                }

                                desc.textContent += ` (تم تفعيل اللقب بجوار اسمك! 👑)`;

                                // 5. نوع نقاط
                            } else if (item.type === 'points') {
                                codeContainer.style.display = 'none';

                                // تأكد أن المتغير userPoints معرف عالمياً
                                if (typeof userPoints !== 'undefined') {
                                    userPoints += item.value;
                                    const pointsEl = document.getElementById('user-points-val');
                                    if (pointsEl) pointsEl.textContent = userPoints;
                                }
                                desc.textContent += ` (تمت إضافة ${item.value} نقطة لرصيدك)`;
                            }

                            // تشغيل المؤثرات الصوتية
                            const successAudio = new Audio('https://www.myinstants.com/media/sounds/tada-fanfare-a.mp3');
                            successAudio.volume = 0.5;
                            successAudio.play().catch(e => { /* تجاهل خطأ الصوت */ });

                            // إظهار النافذة
                            if (typeof showModal === 'function') {
                                showModal('rewardModal');
                            } else {
                                // fallback لو دالة showModal مش موجودة
                                modal.style.display = 'flex';
                                modal.classList.add('is-visible');
                            }

                            // التروفي (اختياري)
                            if (typeof showPlaystationTrophy === 'function') {
                                showPlaystationTrophy("Gamer Rewards", "حصلت على عنصر جديد!");
                            }
                        }


                        let sohaylAudio = null;
                        let itakuraAudio = null; // متغير لتخزين صوت المذكرة

                        // ✅ دالة إظهار إشعار التروفي (PlayStation Style)
                        function showPlaystationTrophy(title, subtitle = "You earned a trophy") {
                            // 1. تشغيل صوت التروفي (نغمة PS4 المميزة)
                            const audio = new Audio('https://www.myinstants.com/media/sounds/ps4-trophy-ding.mp3');
                            audio.volume = 0.6;
                            audio.play().catch(e => console.log("Audio play error:", e));

                            // 2. إنشاء عنصر التروفي
                            const trophy = document.createElement('div');
                            trophy.className = 'ps-trophy-alert';

                            // HTML الداخلي للتروفي
                            trophy.innerHTML = `
                                                                                                                                                                                                <div class="trophy-icon-container">
                                                                                                                                                                                                    <img src="https://cdn-icons-png.flaticon.com/512/5906/5906002.png" alt="Trophy" style="width: 35px; height: 35px;">
                                                                                                                                                                                                </div>
                                                                                                                                                                                                <div class="trophy-details">
                                                                                                                                                                                                    <span class="trophy-subtitle">${subtitle}</span>
                                                                                                                                                                                                    <div class="trophy-title">${title}</div>
                                                                                                                                                                                                </div>
                                                                                                                                                                                            `;

                            // 3. إضافة التروفي للصفحة
                            document.body.appendChild(trophy);

                            // 4. إزالة التروفي بعد 4 ثواني (مدة الأنيميشن)
                            setTimeout(() => {
                                trophy.classList.add('hide'); // تفعيل أنيميشن الاختفاء
                                setTimeout(() => {
                                    trophy.remove(); // حذفه من الصفحة تماماً
                                }, 600); // انتظار انتهاء حركة الاختفاء
                            }, 4000);
                        }

                        function getCachedRankData() {
                            const settingsBadge = document.getElementById('user-rank-display');
                            const rankName = settingsBadge ? settingsBadge.textContent.trim() : '🥉 BRONZE';
                            const rankBg = settingsBadge ? settingsBadge.style.background : '#cd7f32';
                            const rankColor = settingsBadge ? settingsBadge.style.color : '#fff';

                            // نعتمد على دالة حساب الرتبة لإعادة توليد البيانات الكاملة (مثل الكلاس)
                            let orderCount = 0;
                            if (rankName.includes('DIAMOND')) orderCount = 5;
                            if (rankName.includes('GOLD')) orderCount = 1;

                            // نستخدم نفس المنطق الموجود في calculateUserRank لضمان التناسق
                            const data = calculateUserRank(orderCount);

                            // نضمن إرجاع القيم الفعلية التي تم قراءتها من الستايل (لتجنب مشاكل الـ CSS)
                            data.name = rankName;
                            data.bg = rankBg;
                            data.color = rankColor;

                            return data;
                        }
                        // ✅ 2. ضيف الكود ده في آخر ملف الجافاسكريبت



                        // دالة تسجيل الخروج
                        function logoutUser() {
                            firebase.auth().signOut().then(() => {
                                // اخفاء القائمة
                                const menu = document.getElementById('user-dropdown-menu');
                                if (menu) {
                                    menu.style.opacity = '0';
                                    menu.style.visibility = 'hidden';
                                }

                                showInfoToast("تم تسجيل الخروج بنجاح 👋", 3000);

                                // ارجع للصفحة الرئيسية
                                window.location.hash = '#home';

                                // تحديث الزرار فوراً لـ "دخول"
                                document.getElementById('user-account-text').textContent = "تسجيل الدخول";

                            }).catch((error) => {
                                console.error('Sign Out Error', error);
                            });
                        }

                        // عشان القائمة تقفل لو دوست في أي حتة تانية
                        window.addEventListener('click', function (e) {
                            const menu = document.getElementById('user-dropdown-menu');
                            const btn = document.getElementById('user-account-btn');

                            if (menu && btn && !btn.contains(e.target) && !menu.contains(e.target)) {
                                menu.style.opacity = '0';
                                menu.style.visibility = 'hidden';
                                menu.style.transform = 'translateY(10px)';
                            }
                        });

                        // ==========================================
                        // 📦 1. دالة زر "طلباتي" الذكي (النسخة الآمنة)
                        // ==========================================
                        window.openMyOrders = function () {
                            // التأكد من أن الفايربيس شغال
                            if (typeof firebase === 'undefined' || !firebase.auth) {
                                window.location.hash = '#my-orders-auth-page';
                                return;
                            }

                            const user = firebase.auth().currentUser;

                            if (user) {
                                // ✅ لو مسجل دخول: روح علطول على صفحة الطلبات وهات البيانات
                                window.location.hash = '#my-orders-page';
                                fetchUserOrders();
                            } else {
                                // ❌ لو مش مسجل: روح على صفحة تسجيل الدخول
                                window.location.hash = '#my-orders-auth-page';
                            }
                        };

                        // ==========================================
                        // 🚀 2. تهيئة النظام عند تحميل الصفحة
                        // ==========================================
                        document.addEventListener('DOMContentLoaded', function () {
                            console.log("🚀 جاري تشغيل نظام التسجيل...");

                            // --- إعدادات فايربيس ---
                            const firebaseConfig = {
                                apiKey: "AIzaSyAsrl6fyQ65lGU22WlTsm8HDtjhKYKw4bs",
                                authDomain: "berlin-storegoe-login.firebaseapp.com",
                                projectId: "berlin-storegoe-login",
                                storageBucket: "berlin-storegoe-login.firebasestorage.app",
                                messagingSenderId: "429636991312",
                                appId: "1:429636991312:web:38bb70e5186173ae809455",
                                measurementId: "G-WGF1G0B6FD"
                            };

                            // تهيئة التطبيق فقط إذا لم يكن مهيأ مسبقاً
                            if (!firebase.apps.length) {
                                firebase.initializeApp(firebaseConfig);
                            }
                            const auth = firebase.auth();

                            // --- تعريف عناصر الواجهة ---
                            const btnSignup = document.getElementById('btn-signup');
                            const btnLogin = document.getElementById('btn-login');
                            const emailInput = document.getElementById('userEmail');
                            const passInput = document.getElementById('userPassword');
                            const msgBox = document.getElementById('authMessage');
                            const authModal = document.getElementById('authModal'); // للتأكد من إغلاق النافذة لاحقاً

                            // --- منطق زر "إنشاء حساب" ---
                            if (btnSignup) {
                                btnSignup.addEventListener('click', function () {
                                    const email = emailInput.value;
                                    const pass = passInput.value;

                                    msgBox.style.color = "yellow";
                                    msgBox.textContent = "جاري الإنشاء...";

                                    if (pass.length < 6) {
                                        msgBox.style.color = "red";
                                        msgBox.textContent = "كلمة المرور ضعيفة (6 أرقام على الأقل)";
                                        return;
                                    }

                                    auth.createUserWithEmailAndPassword(email, pass)
                                        .then((userCredential) => {
                                            msgBox.style.color = "#00ff00";
                                            msgBox.textContent = "✅ تم إنشاء الحساب بنجاح!";
                                            console.log("User Created:", userCredential.user);
                                            // إغلاق النافذة بعد ثانية ونصف
                                            setTimeout(() => {
                                                if (authModal) {
                                                    authModal.classList.remove('is-visible');
                                                    authModal.style.display = 'none';
                                                    document.getElementById('overlay').style.display = 'none';
                                                }
                                            }, 1500);
                                        })
                                        .catch((error) => {
                                            console.error(error);
                                            let errorText = "حدث خطأ: " + error.message;
                                            if (error.code === 'auth/email-already-in-use') errorText = "هذا الإيميل مسجل بالفعل!";
                                            if (error.code === 'auth/invalid-email') errorText = "شكل الإيميل غير صحيح!";
                                            msgBox.style.color = "red";
                                            msgBox.textContent = errorText;
                                        });
                                });
                            }

                            // --- منطق زر "تسجيل الدخول" ---
                            if (btnLogin) {
                                btnLogin.addEventListener('click', function () {
                                    const email = emailInput.value;
                                    const pass = passInput.value;

                                    msgBox.style.color = "yellow";
                                    msgBox.textContent = "جاري الدخول...";

                                    auth.signInWithEmailAndPassword(email, pass)
                                        .then((userCredential) => {
                                            msgBox.style.color = "#00ff00";
                                            msgBox.innerHTML = "<i class='fas fa-unlock-alt'></i> تم تسجيل الدخول بنجاح!";

                                            // إغلاق النافذة بعد ثانية ونصف
                                            setTimeout(() => {
                                                if (authModal) {
                                                    authModal.classList.remove('is-visible');
                                                    authModal.style.display = 'none';
                                                    document.getElementById('overlay').style.display = 'none';
                                                }
                                                // إذا كان المستخدم في صفحة "طلباتي"، قم بتحديث الصفحة أو التوجيه
                                                if (window.location.hash === '#my-orders-auth-page') {
                                                    window.location.hash = '#shipping';
                                                }
                                            }, 1500);
                                        })
                                        .catch((error) => {
                                            console.error(error);
                                            msgBox.style.color = "red";
                                            msgBox.textContent = "❌ الإيميل أو الباسورد خطأ!";
                                        });
                                });
                            }

                            // --- مراقبة حالة المستخدم وتحديث زر الهيدر ---
                            auth.onAuthStateChanged((user) => {
                                const userBtnText = document.getElementById('user-account-text');

                                if (user) {
                                    console.log("User is signed in:", user.email);

                                    // إخفاء أزرار الدخول في الصفحة الرئيسية (إن وجدت)
                                    const btnLoginMain = document.getElementById('btn-login');
                                    if (btnLoginMain) btnLoginMain.style.display = 'none';

                                    // تحديث زر الهيدر العلوي
                                    if (userBtnText) {
                                        // نأخذ الجزء الأول من الإيميل كاسم مستخدم
                                        const username = user.email.split('@')[0];
                                        userBtnText.textContent = "👤 " + username;

                                        loadProfileData(user);
                                    }
                                } else {
                                    console.log("User is signed out");
                                    // إعادة الزر لحالته الأصلية
                                    if (userBtnText) {
                                        userBtnText.textContent = "تسجيل الدخول";
                                    }

                                    // إظهار أزرار الصفحة الرئيسية مرة أخرى
                                    const btnLoginMain = document.getElementById('btn-login');
                                    if (btnLoginMain) btnLoginMain.style.display = 'inline-block';
                                }
                            });
                        });


                        function openSohaylDiary() {
                            document.getElementById('itakura-diary-overlay').style.display = 'none';
                            const sohaylDiary = document.getElementById('sohayl-diary-overlay');
                            if (sohaylDiary) {
                                sohaylDiary.style.display = 'block';
                                document.body.style.overflow = 'hidden';
                            }
                            const mobileNav = document.getElementById('mobile-nav');
                            if (mobileNav) mobileNav.style.display = 'none';
                        }
                        function closeSohaylDiary() {
                            const sohaylDiary = document.getElementById('sohayl-diary-overlay');
                            if (sohaylDiary) {
                                sohaylDiary.style.display = 'none';
                            }

                            // الكود الموجود لديك لإظهار شريط التنقل للموبايل
                            if (window.innerWidth <= 768) {
                                const mobileNav = document.getElementById('mobile-nav');
                                if (mobileNav) mobileNav.style.display = 'flex';
                            }

                            // ✅✅✅ السطر الحاسم الذي يعيد التمرير (Scroll) ✅✅✅
                            document.body.style.overflow = 'auto';
                        }

                        // =================================================================
                        // 🕵️‍♂️ DETECTIVE CONAN & GAMING EASTER EGGS (MERGED & FIXED)
                        // =================================================================

                        // 1. الدالة الموحدة للبحث والشفرات (القلب النابض)
                        function handleSearchEnter(event) {
                            if (event.key === 'Enter') {
                                event.preventDefault();
                                const query = event.target.value.toLowerCase().trim();

                                if (query === 'rankiss') {
                                    triggerMaiKurakiEffect();    // 1. تشغيل الأغنية
                                    createFallingLeavesEffect(); // 2. 🍁 تشغيل تساقط الأوراق القرمزية
                                    event.target.value = '';     // 3. مسح الخانة

                                    // إخفاء قائمة النتائج المقترحة لو ظهرت
                                    const resultsDiv = document.getElementById('navbar-search-results');
                                    if (resultsDiv) resultsDiv.classList.remove('visible');

                                    return; // وقف البحث العادي
                                }

                                // --- السيناريو 1: مذكرات إيتاكورا (Itakura Diary) ---
                                if (query === 'itakura' || query === 'conanisready') {
                                    closeInstantSearch();
                                    openItakuraDiary();
                                    return;
                                }

                                // --- السيناريو 2: بلموت (الاختراق - Hacking) ---
                                if (query === 'vermouth') {
                                    closeInstantSearch();
                                    startVermouthHackingEffect();
                                    return;
                                }
                                if (query === 'sohayl') {
                                    closeInstantSearch();

                                    // 1. تشغيل التروفي فوراً (هيظهر فوق كل حاجة بسبب الـ z-index الجديد)
                                    showPlaystationTrophy("Sohayl's notes found", "Hidden Trophy Unlocked!");

                                    // 2. فتح المذكرة بعد جزء من الثانية (عشان يحس ان التروفي هو اللي فتحها)
                                    setTimeout(() => {
                                        openSohaylDiary();
                                    }, 500); // نص ثانية تأخير

                                    return;
                                }
                                if (query === '1412' || query === 'kaitokid') {
                                    closeInstantSearch();
                                    triggerKaitouKidFullEffect(); // ✅ تشغيل الدالة الجديدة
                                    return;
                                }
                                if (query === 'conan') {
                                    openSohaylDiary(); // ✅✅ تم ربط الدالة هنا
                                    return;
                                }
                                // --- السيناريو 3: عقار APTX 4869 (تأثير التقلص) ---
                                if (query === 'aptx4869') {
                                    closeInstantSearch();

                                    // إظهار كبسولة العقار في نص الشاشة
                                    const pill = document.getElementById('aptx-pill');
                                    pill.style.display = 'block';

                                    // تأخير بسيط عشان الأنيميشن يشتغل
                                    setTimeout(() => {
                                        pill.classList.add('show');
                                    }, 50);

                                    // تشغيل صوت "ظهور" بسيط (اختياري)
                                    // new Audio('./sounds/pop.mp3').play();

                                    return;
                                }

                                // --- السيناريو 4: شفرات الألعاب الأخرى (Cheats) ---
                                const cheats = ['matrix', 'hesoyam', 'aimbot'];
                                if (cheats.includes(query)) {
                                    performGlobalSearch(query); // دالة الشفرات الخاصة بك
                                    closeInstantSearch();
                                    return;
                                }

                                // --- السيناريو 5: البحث الطبيعي في الموقع (Default Search) ---
                                // إذا لم تكن الكلمة شفرة، قم بالبحث عن المنتجات
                                performInstantSearch(true);
                            }
                        }

                        function consumeAptx() {
                            const pill = document.getElementById('aptx-pill');

                            if (pill) {
                                pill.classList.remove('show');
                                setTimeout(() => { pill.style.display = 'none'; }, 500);
                            }

                            if (typeof triggerAptxEffect === 'function') {
                                triggerAptxEffect();
                            } else {
                                document.body.classList.add('aptx-child-mode');
                            }

                            console.log("⏳ الترياق سيظهر بعد 60 ثانية..."); // رسالة للتأكيد

                            // ⏱️ التعديل هنا: غير الرقم لـ 60000 (يعني دقيقة كاملة)
                            setTimeout(() => {
                                showAntidote();
                            }, 60000);
                        }

                        // 3. دالة ظهور الترياق
                        function showAntidote() {
                            const antidote = document.getElementById('antidote-pill');
                            if (antidote) {
                                antidote.style.display = 'block';
                                setTimeout(() => {
                                    antidote.classList.add('show');
                                    // تغيير لون التوهج للأخضر عشان يبان إنه علاج
                                    antidote.style.filter = "drop-shadow(0 0 20px rgba(0, 255, 0, 0.6))";
                                }, 50);

                                // تشغيل صوت تنبيه بظهور الحل (اختياري)
                                showGameAlert("🧪 The Antidote has appeared!", "success");
                            }
                        }

                        // 4. دالة تناول الترياق واستعادة الموقع
                        function consumeAntidote() {
                            const antidote = document.getElementById('antidote-pill');

                            // إخفاء الترياق
                            antidote.classList.remove('show');
                            setTimeout(() => { antidote.style.display = 'none'; }, 500);

                            // 🌟 استعادة الموقع للطبيعي
                            const overlay = document.getElementById('aptx-overlay');

                            // إزالة كلاسات التصغير والاهتزاز
                            document.body.classList.remove('aptx-child-mode');
                            document.body.classList.remove('aptx-poisoned');
                            document.body.style.transform = "scale(1)"; // إرجاع الحجم 100%
                            document.body.style.overflow = "auto";      // إعادة السكرول

                            // إخفاء الخلفية السوداء
                            if (overlay) {
                                overlay.style.opacity = '0';
                                setTimeout(() => { overlay.style.display = 'none'; }, 1000);
                            }

                            // رسالة نجاح
                            showGameAlert("🥃 Kudo Shinichi", "success");
                        }

                        // 2. دالة مذكرات إيتاكورا (Diary Logic)
                        function openItakuraDiary() {
                            const overlay = document.getElementById('itakura-diary-overlay');
                            const sohaylDiary = document.getElementById('sohayl-diary-overlay');

                            if (sohaylDiary) sohaylDiary.style.display = 'none'; // إغلاق أي نوافذ أخرى

                            if (overlay) {
                                overlay.classList.add('active');
                                overlay.style.display = 'block';
                                document.body.style.overflow = 'hidden'; // منع السكرول في الموقع

                                // --- 🎵 تشغيل موسيقى إيتاكورا ---
                                // لو كان شغال قبل كده، نوقفه الأول عشان ميتكررش
                                if (itakuraAudio) {
                                    itakuraAudio.pause();
                                    itakuraAudio.currentTime = 0;
                                }

                                // تشغيل الملف الجديد
                                itakuraAudio = new Audio('./sounds/itakura.mp3');
                                itakuraAudio.volume = 0.5; // مستوى الصوت (نص)
                                itakuraAudio.loop = true;  // تكرار الموسيقى طول ما المذكرة مفتوحة

                                itakuraAudio.play().catch(error => {
                                    console.log("Audio play failed (interaction needed):", error);
                                });
                            }
                        }

                        // 3. دالة اختراق فيرموث (Vermouth Hacking Logic)
                        function startVermouthHackingEffect() {
                            const consoleOverlay = document.getElementById('vermouth-console-overlay');
                            const consoleContent = document.getElementById('console-content');

                            if (!consoleOverlay) return;

                            consoleOverlay.style.display = 'flex';
                            consoleContent.innerHTML = '';
                            document.body.style.overflow = 'hidden';

                            const logText =
                                "SYSTEM ALERT: UNAUTHORIZED ACCESS DETECTED...\n" +
                                "TARGET: BERLIN STORE DATABASE\n" +
                                "USER: VERMOUTH\n" +
                                "DECRYPTING HIDDEN FILES...\n\n";

                            const scaryQuote =
                                "\"We can be both of God and the Devil...\n" +
                                "Since we're trying to raise the dead against the stream of time.\"";

                            let i = 0;

                            function typeWriter() {
                                const fullText = logText + scaryQuote;

                                if (i < logText.length) {
                                    consoleContent.innerHTML += logText.charAt(i);
                                    i++;
                                    setTimeout(typeWriter, 20);
                                }
                                else if (i < fullText.length) {
                                    if (i === logText.length) {
                                        const span = document.createElement('span');
                                        span.className = 'console-highlight';
                                        span.id = 'scary-span';
                                        consoleContent.appendChild(span);
                                    }
                                    document.getElementById('scary-span').innerHTML += fullText.charAt(i);
                                    i++;
                                    setTimeout(typeWriter, 80);
                                }
                                else {
                                    consoleContent.innerHTML += '<span class="blinking-cursor"></span>';

                                    // إغلاق تلقائي بعد 10 ثواني (اختياري) أو بالضغط
                                    consoleOverlay.onclick = function () {
                                        closeOverlay('hacking');
                                    };
                                }
                            }

                            typeWriter();
                        }

                        // 💊 دالة تأثير APTX 4869 (النسخة السينمائية الكاملة)
                        function triggerAptxEffect() {
                            // 1. تشغيل الصوت
                            const audioPath = 'sounds/aptx_sound.mp3';
                            const audio = new Audio(audioPath);
                            audio.volume = 1.0;
                            audio.play().catch((e) => console.log("Audio error:", e));

                            const overlay = document.getElementById('aptx-overlay');
                            const warning = document.getElementById('aptx-warning');

                            // 2. مرحلة الألم (أول 8 ثواني)
                            if (overlay) {
                                overlay.style.display = 'block';
                                // تعتيم تدريجي سريع في البداية (بداية الدوار)
                                setTimeout(() => { overlay.style.opacity = '0.8'; }, 100);
                            }
                            if (warning) warning.style.display = 'block';

                            // تفعيل اهتزاز الشاشة
                            document.body.classList.add('aptx-poisoned');

                            // 3. مرحلة الإغماء (Blackout) - في الثانية 8
                            setTimeout(() => {
                                if (overlay) {
                                    // تسريع السواد ليصبح دامساً فجأة قبل التحول
                                    overlay.style.transition = 'opacity 2s ease';
                                    overlay.style.opacity = '1';
                                }
                                if (warning) warning.style.display = 'none'; // اختفاء التحذير
                            }, 8000);

                            // 4. لحظة التحول (في الظلام الدامس) - الثانية 10
                            setTimeout(() => {
                                // إيقاف الاهتزاز وتفعيل وضع الطفل (والمستخدم لا يرى شيئاً)
                                document.body.classList.remove('aptx-poisoned');
                                document.body.classList.add('aptx-child-mode');

                                // 5. مرحلة الاستيقاظ (Slow Fade In) - الثانية 12
                                // نبدأ نفتح الشاشة ببطء شديد جداً
                                setTimeout(() => {
                                    if (overlay) {
                                        // نغير الترانزيشن ليكون بطيء جداً (4 ثواني)
                                        overlay.style.transition = 'opacity 4s ease-in-out';
                                        overlay.style.opacity = '0'; // إخفاء السواد تدريجياً
                                    }
                                }, 2000); // تأخير ثانيتين بعد التحول (لحظة صمت)

                                // بعد ما الرؤية تتضح، نظهر رسالة كونان ونخفي الطبقة تماماً
                                setTimeout(() => {
                                    if (typeof showGameAlert === "function") {
                                        showGameAlert("Edogawa Conan", "success");
                                    }
                                    if (overlay) overlay.style.display = 'none';
                                }, 6500); // بعد انتهاء الـ Fade In

                            }, 10000);
                        }

                        // 5. دوال مساعدة (Helpers)
                        function closeInstantSearch() {
                            const resultsContainer = document.getElementById('navbar-search-results');
                            if (resultsContainer) {
                                resultsContainer.classList.remove('visible');
                                resultsContainer.classList.remove('expanded'); // إزالة كلاس التوسيع إن وجد
                            }
                        }

                        function closeOverlay(type) {
                            if (type === 'diary') {
                                const diary = document.getElementById('itakura-diary-overlay');
                                if (diary) {
                                    diary.classList.remove('active');
                                    diary.style.display = 'none';

                                    // --- 🔇 إيقاف الموسيقى عند الإغلاق ---
                                    if (itakuraAudio) {
                                        itakuraAudio.pause();
                                        itakuraAudio.currentTime = 0; // إرجاع الصوت للبداية
                                    }
                                }
                            } else if (type === 'hacking') {
                                const hacking = document.getElementById('vermouth-console-overlay');
                                if (hacking) hacking.style.display = 'none';
                            }

                            // إعادة التمرير للموقع
                            document.body.style.overflow = 'auto';
                        }

                        // 🔔 دالة الإشعارات (بصوت جديد)
                        function showGameAlert(message, type = 'default') {
                            const alertBox = document.createElement('div');
                            alertBox.className = `game-alert-box ${type}`;

                            let icon = 'fa-bell';
                            if (type === 'success') icon = 'fa-check-circle';
                            if (type === 'error') icon = 'fa-exclamation-circle';
                            if (type === 'cheat') icon = 'fa-gamepad';

                            alertBox.innerHTML = `<i class="fas ${icon}"></i> <span>${message}</span>`;
                            document.body.appendChild(alertBox);

                            setTimeout(() => { alertBox.classList.add('show'); }, 10);

                            // 🔊 الصوت الجديد (نغمة نجاح هادئة)
                            // بديل: https://www.myinstants.com/media/sounds/xbox-achievement-sound.mp3 (نغمة اكسبوكس)
                            const audio = new Audio('https://www.myinstants.com/media/sounds/success-1-6297.mp3');
                            audio.volume = 0.4;
                            audio.play().catch(e => { });

                            setTimeout(() => {
                                alertBox.classList.remove('show');
                                setTimeout(() => { alertBox.remove(); }, 500);
                            }, 4000);
                        }

                        // 7. كود كونامي (Konami Code)
                        const konamiCode = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'b', 'a'];
                        let konamiIndex = 0;

                        document.addEventListener('keydown', (e) => {
                            if (e.key.toLowerCase() === konamiCode[konamiIndex].toLowerCase() || e.key === konamiCode[konamiIndex]) {
                                konamiIndex++;
                                if (konamiIndex === konamiCode.length) {
                                    showGameAlert("🎉 You are a Legend! Code: GAMER_LEGEND", "success");
                                    let audio = new Audio('https://www.myinstants.com/media/sounds/level-up-sound-effect.mp3');
                                    audio.play().catch(e => { });
                                    konamiIndex = 0;
                                }
                            } else {
                                konamiIndex = 0;
                            }
                        });

                        // 8. إيستر إيج اللوجو (Rage Quit Easter Egg)
                        document.addEventListener('DOMContentLoaded', function () {
                            let logoClicks = 0;
                            let logoTimer;
                            const logoLink = document.querySelector('#navbar .logo-area img'); // أو الرابط المحيط بالصورة

                            if (logoLink) {
                                logoLink.addEventListener('click', (e) => {
                                    // إذا أردت منع الانتقال للرئيسية عند النقر المتكرر
                                    // e.preventDefault();

                                    clearTimeout(logoTimer);
                                    logoClicks++;

                                    if (logoClicks === 5) {
                                        showGameAlert("😤 Chill bro! It's just a store.", "error");
                                        logoClicks = 0;
                                    } else {
                                        logoTimer = setTimeout(() => {
                                            logoClicks = 0;
                                        }, 500);
                                    }
                                });
                            }
                        });

                        // =================== START: Xbox Gifting Logic ===================

                        // دالة لفتح نافذة حاسبة إكس بوكس
                        function openXboxGiftingModal() {
                            // إعادة تعيين الحقول عند كل فتح
                            document.getElementById('xboxGameName').value = '';
                            document.getElementById('xboxGamePriceEGP').value = '';
                            document.getElementById('xboxAccountEmail').value = '';
                            document.getElementById('xboxAccountPassword').value = '';
                            document.getElementById('xboxFinalPriceDisplay').innerHTML = '';

                            // إظهار النافذة
                            showModal('xboxGiftingModal');
                        }

                        // ✅✅ [تصحيح نهائي] دالة لحساب سعر خدمة إكس بوكس
                        function calculateXboxGiftingPrice() {
                            const priceInput = document.getElementById('xboxGamePriceEGP');
                            const currencySelect = document.getElementById('xboxGameCurrency');
                            const displayElement = document.getElementById('xboxFinalPriceDisplay');

                            const inputPrice = parseFloat(priceInput.value);
                            const inputCurrency = currencySelect.value; // العملة التي أدخلها المستخدم (EGP أو USD)

                            if (isNaN(inputPrice) || inputPrice <= 0) {
                                displayElement.innerHTML = '';
                                return;
                            }

                            // --- الخطوة 1: توحيد السعر المدخل وتحويله إلى جنيه مصري (كسعر أساسي) ---
                            let basePriceEGP;
                            if (inputCurrency === 'USD') {
                                // إذا أدخل المستخدم الدولار، قم بتحويله إلى جنيه أولاً
                                basePriceEGP = inputPrice * exchangeRate;
                            } else {
                                // السعر المدخل بالفعل بالجنيه
                                basePriceEGP = inputPrice;
                            }

                            // --- الخطوة 2: تطبيق المعادلة الثابتة (بالجنيه المصري) ---
                            const finalPriceEGP = basePriceEGP + (40 + (basePriceEGP * 0.15));

                            let finalDisplayPrice = finalPriceEGP;
                            let displayCurrencySymbol = 'EGP';

                            // --- الخطوة 3: التحقق من العملة (الرئيسية) للموقع لعرض السعر النهائي ---
                            if (currentCurrency === 'USD') {
                                // 1. حساب السعر الأساسي بالدولار
                                const baseUsdPrice = finalPriceEGP / exchangeRate;
                                // 2. ✅ تطبيق معامل الـ 0.80 الذي طلبته
                                finalDisplayPrice = baseUsdPrice * 0.70;
                                displayCurrencySymbol = 'USD';
                            }

                            // --- الخطوة 4: عرض السعر النهائي ---
                            displayElement.innerHTML = `
                                                                                                                                                                                                                                                                                                                                        <span class="price-label">المبلغ المطلوب</span>
                                                                                                                                                                                                                                                                                                                                        <span class="price-value">${finalDisplayPrice.toFixed(2)} ${displayCurrencySymbol}</span>
                                                                                                                                                                                                                                                                                                                                    `;
                        }

                        // ✅✅ [تصحيح نهائي] دالة للانتقال للدفع لخدمة إكس بوكس
                        function proceedToXboxPayment() {
                            const gameName = document.getElementById('xboxGameName').value;
                            const priceInput = document.getElementById('xboxGamePriceEGP');
                            const currencySelect = document.getElementById('xboxGameCurrency');
                            const accountEmail = document.getElementById('xboxAccountEmail').value;
                            const accountPassword = document.getElementById('xboxAccountPassword').value;

                            const inputPrice = parseFloat(priceInput.value);
                            const inputCurrency = currencySelect.value; // العملة التي أدخلها المستخدم

                            // 1. التحقق من صحة البيانات
                            if (!gameName.trim()) {
                                showInfoToast('الرجاء إدخال اسم اللعبة.', 3000, 'error');
                                return;
                            }
                            if (isNaN(inputPrice) || inputPrice <= 0) {
                                showInfoToast(`الرجاء إدخال سعر صحيح للعبة بـ ${inputCurrency}.`, 3000, 'error');
                                return;
                            }
                            if (!accountEmail.trim() || !accountEmail.includes('@')) {
                                showInfoToast('الرجاء إدخال إيميل مايكروسوفت صحيح.', 3000, 'error');
                                return;
                            }
                            if (!accountPassword.trim()) {
                                showInfoToast('الرجاء إدخال باسورد مايكروسوفت.', 3000, 'error');
                                return;
                            }

                            // 2. تحويل السعر المدخل إلى جنيه مصري (كسعر أساسي)
                            let basePriceEGP;
                            if (inputCurrency === 'USD') {
                                basePriceEGP = inputPrice * exchangeRate;
                            } else {
                                basePriceEGP = inputPrice;
                            }

                            // 3. حساب السعر النهائي بالجنيه المصري (للمعالج)
                            const finalPriceEGP = basePriceEGP + (40 + (basePriceEGP * 0.15));

                            // 4. تجميع البيانات الإضافية لإرسالها
                            const extraDataString = `لعبة: ${gameName} | السعر المدخل: ${inputPrice.toFixed(2)} ${inputCurrency} | رسوم الخدمة مطبقة.`;

                            const extraData = {
                                'Account Email': accountEmail,
                                'Account Password': accountPassword,
                                'Extra Data': extraDataString
                            };

                            const finalTitle = `لعبة Xbox (PC): ${gameName}`;

                            // 5. إغلاق النافذة الحالية وفتح نافذة اختيار الدفع
                            closeModal('xboxGiftingModal');

                            // نستخدم نفس آلية البوستينج المؤقتة لتمرير البيانات
                            tempBoostingOrder = {
                                title: finalTitle,
                                price: finalPriceEGP, // تمرير السعر النهائي بالجنيه المصري
                                extraData: extraData
                            };

                            showModal('checkoutModal');
                            renderBoostingCheckoutOptions(); // عرض خيارات الدفع
                        }

                        // =================== END: Xbox Gifting Logic ===================

                        function loadPlaystationGamesPage() {
                            const container = document.getElementById('playstation-games-container');
                            if (!container) return;
                            container.innerHTML = '';
                            for (const productId in productsData) {
                                const product = productsData[productId];
                                if (product.category === 'ps-offline-games') {
                                    renderProductItem(product, container, 'ps-offline-games', true);
                                }
                            }
                        }

                        // دالة لعرض كل ألعاب كود في صفحة واحدة
                        function loadAllCodGames() {
                            const container = document.getElementById('all-cod-games-container');
                            if (!container) return;
                            container.innerHTML = ''; // تفريغ الحاوية أولاً

                            // البحث عن كل المنتجات التي تنتمي لفئة 'cod-games'
                            for (const productId in productsData) {
                                const product = productsData[productId];
                                // ✅ التأكد من أن الشرط يبحث عن الفئة الصحيحة
                                if (product.category === 'cod-games') {
                                    renderProductItem(product, container, 'cod-games', true);
                                }
                            }
                        }



                        function filterOfflineGames() {
                            const container = document.getElementById('offlineSteamContainer');
                            const searchInput = document.getElementById('offlineSearchInput');
                            const loadMoreBtn = document.getElementById('loadMoreOfflineGamesBtn');

                            if (!container || !searchInput) return;

                            // إخفاء زر "عرض المزيد" عند البحث
                            if (loadMoreBtn) {
                                loadMoreBtn.style.display = 'none';
                            }

                            const searchTerm = searchInput.value.toLowerCase().trim();

                            // ✅ التصحيح: تم استخدام قائمة ID المنتجات الصحيحة للبحث بداخلها
                            const allOfflineSteamIds = [
                                'mafia', 'residentevil_offline', 'sekiro_offline', 'thelastofus_offline', 'ac_shadows_offline', 'splitfiction', 'silent_hill_f_offline',
                                'silent_hill_2_remake_offline', 'stalker_2_offline',
                                'cyberpunk_2077_offline', 'ghostoftsushima_offline', 'witcher3_offline', 'eldenring_offline',
                                'silksong_offline', 'ragnarok_offline', 're4_remake_offline', 'tlou1_offline'
                            ];

                            // إذا كان البحث فارغًا، أعد عرض المنتجات الأساسية
                            if (searchTerm === '') {
                                loadOfflineSteamGamesToHome();
                                return;
                            }

                            // فلترة المنتجات بناءً على اسم اللعبة
                            const filteredIds = allOfflineSteamIds.filter(id => {
                                const product = productsData[id];
                                // التأكد من أن المنتج موجود قبل البحث في عنوانه
                                return product && product.title.toLowerCase().includes(searchTerm);
                            });

                            // عرض النتائج
                            container.innerHTML = '';
                            if (filteredIds.length > 0) {
                                filteredIds.forEach(id => {
                                    renderProductItem(productsData[id], container, 'games', true);
                                });
                            } else {
                                container.innerHTML = '<p style="color: #ccc; text-align: center; width: 100%;">لا توجد ألعاب تطابق بحثك.</p>';
                            }
                        }


                        // ✅✅ الكود المُصحح لدالة حساب السعر ✅✅
                        function calculateDiscordDecoPrice() {
                            const usdAmountInput = document.getElementById('discord-usd-amount');
                            const quantityInput = document.getElementById('discord-deco-quantity');
                            const priceDisplay = document.querySelector('#discord-price-display .price-value');
                            const errorMsg = document.getElementById('discord-calc-error');

                            errorMsg.textContent = '';
                            const pricePerItemUSD = parseFloat(usdAmountInput.value);
                            const quantity = parseInt(quantityInput.value);

                            if (isNaN(pricePerItemUSD) || pricePerItemUSD <= 0 || isNaN(quantity) || quantity <= 0) {
                                priceDisplay.textContent = '...';
                                return;
                            }

                            // --- منطق التسعير الجديد ---
                            const totalUSD_before_discount = pricePerItemUSD * quantity;
                            const discountPercentage = (quantity - 1) * 5;
                            const discountAmount = totalUSD_before_discount * (discountPercentage / 100);
                            const totalUSD_after_discount = totalUSD_before_discount - discountAmount;

                            let finalDisplayPrice;
                            let currencySymbol;

                            // ✅ تطبيق سعر الصرف الخاص بناءً على العملة المختارة
                            if (currentCurrency === 'EGP') {
                                finalDisplayPrice = totalUSD_after_discount * 14; // (سعر الصرف الخاص 1$=14ج)
                                currencySymbol = 'EGP';
                            } else { // currentCurrency is 'USD'
                                finalDisplayPrice = totalUSD_after_discount * 0.5; // (سعر الصرف الخاص 1$=0.5$)
                                currencySymbol = 'USD';
                            }

                            priceDisplay.textContent = `${finalDisplayPrice.toFixed(2)} ${currencySymbol}`;
                        }

                        function handleDiscordDecoOrder() {
                            // 1. تعريف العناصر
                            const usdAmountInput = document.getElementById('discord-usd-amount');
                            const quantityInput = document.getElementById('discord-deco-quantity');
                            const decoNamesInput = document.getElementById('discord-deco-names');
                            const usernameInput = document.getElementById('discord-deco-username');
                            const errorMsg = document.getElementById('discord-calc-error');

                            // 2. التحقق من المدخلات
                            if (!usdAmountInput || !quantityInput || !decoNamesInput || !usernameInput) return;

                            const pricePerItemUSD = parseFloat(usdAmountInput.value);
                            const quantity = parseInt(quantityInput.value);
                            const decoNames = decoNamesInput.value.trim();
                            const username = usernameInput.value.trim();

                            if (isNaN(pricePerItemUSD) || pricePerItemUSD < 4.99) {
                                errorMsg.textContent = 'الرجاء اختيار سعر القطعة.';
                                return;
                            }
                            if (!decoNames || !username) {
                                errorMsg.textContent = 'الرجاء ملء جميع الحقول.';
                                return;
                            }
                            errorMsg.textContent = '';

                            // 3. الحسابات
                            const totalUSD_before_discount = pricePerItemUSD * quantity;
                            const discountPercentage = (quantity - 1) * 5;
                            const discountAmount = totalUSD_before_discount * (discountPercentage / 100);
                            const totalUSD_after_discount = totalUSD_before_discount - discountAmount;

                            let finalPriceForCart;
                            if (typeof currentCurrency !== 'undefined' && currentCurrency === 'EGP') {
                                finalPriceForCart = totalUSD_after_discount * 14;
                            } else {
                                finalPriceForCart = totalUSD_after_discount * 0.5;
                            }

                            // 4. تكوين المنتج
                            const uniqueID = 'discord_deco_' + Date.now();
                            const cartItem = {
                                id: uniqueID,
                                title: 'Discord Decoration',
                                price: finalPriceForCart,
                                image: './images/discord-decorations.png',
                                quantity: 1,
                                selectedOption: {
                                    title: `${quantity}x ($${pricePerItemUSD}) | ${username}`,
                                    price: finalPriceForCart
                                },
                                'Decoration Names': decoNames,
                                'Discord Username': username,
                                'Unit Price (USD)': `$${pricePerItemUSD}`,
                                'Total Items': quantity
                            };

                            // 5. ✅✅ الخطوة الحاسمة: القراءة والتحديث ✅✅

                            // أ. قراءة السلة من الذاكرة
                            let currentCart = JSON.parse(localStorage.getItem('cart')) || {};

                            // ب. إضافة العنصر
                            currentCart[uniqueID] = cartItem;

                            // ج. الحفظ في الذاكرة
                            localStorage.setItem('cart', JSON.stringify(currentCart));

                            // د. 🔥 تحديث متغير الصفحة الحالي فوراً (ده اللي بيحل المشكلة) 🔥
                            if (typeof window.cart !== 'undefined') {
                                window.cart = currentCart;
                            } else {
                                cart = currentCart;
                            }

                            // 6. تحديث العداد الأحمر فوراً
                            updateCartCount();

                            // 7. رسالة نجاح
                            showInfoToast(`✅ تمت الإضافة للسلة!`, 3000, 'success');
                        }

                        // ======================================================
                        // START: Skeleton Loader Function
                        // ======================================================
                        function renderSkeletonLoader(container, count = 4, itemClass = 'product-item') {
                            container.innerHTML = ''; // Clear previous content
                            for (let i = 0; i < count; i++) {
                                const skeleton = document.createElement('div');
                                // We use the itemClass to approximate the size of the skeleton
                                skeleton.className = `skeleton-card ${itemClass}`;
                                skeleton.innerHTML = `
                                                                                                                                                                                                                                                                                                                                                                    <div class="skeleton-image"></div>
                                                                                                                                                                                                                                                                                                                                                                    <div class="skeleton-text"></div>
                                                                                                                                                                                                                                                                                                                                                                    <div class="skeleton-text short"></div>
                                                                                                                                                                                                                                                                                                                                                                    <div class="skeleton-button"></div>
                                                                                                                                                                                                                                                                                                                                                                `;
                                container.appendChild(skeleton);
                            }
                        }

                        // ======================================================
                        // END: Skeleton Loader Function
                        // ======================================================

                        // ✅ دالة جديدة لتشغيل الأنيميشن الخاص بكروت الإيجار
                        function flyToCart_Rental(event) {
                            const cartBtn = document.querySelector('.fixed-cart-button');
                            if (!cartBtn || !event) return;

                            const productCard = event.target.closest('.rental-card');
                            const sourceImageElement = productCard ? productCard.querySelector('.rental-card-image') : null;

                            if (!sourceImageElement) return;

                            const sourceRect = sourceImageElement.getBoundingClientRect();
                            const flyingImg = document.createElement('div'); // نستخدم div لنضع الصورة كخلفية

                            flyingImg.style.cssText = `
                                                                                                                                                                                                                                                                                                                                                                position: fixed;
                                                                                                                                                                                                                                                                                                                                                                z-index: 9999;
                                                                                                                                                                                                                                                                                                                                                                left: ${sourceRect.left}px;
                                                                                                                                                                                                                                                                                                                                                                top: ${sourceRect.top}px;
                                                                                                                                                                                                                                                                                                                                                                width: ${sourceRect.width}px;
                                                                                                                                                                                                                                                                                                                                                                height: ${sourceRect.height}px;
                                                                                                                                                                                                                                                                                                                                                                background-image: ${getComputedStyle(sourceImageElement).backgroundImage};
                                                                                                                                                                                                                                                                                                                                                                background-size: cover;
                                                                                                                                                                                                                                                                                                                                                                background-position: center;
                                                                                                                                                                                                                                                                                                                                                                border-radius: 10px;
                                                                                                                                                                                                                                                                                                                                                                pointer-events: none;
                                                                                                                                                                                                                                                                                                                                                                animation: shatter-fly-effect 0.9s ease-in-out forwards;
                                                                                                                                                                                                                                                                                                                                                            `;

                            document.body.appendChild(flyingImg);

                            setTimeout(() => {
                                flyingImg.remove();
                            }, 900); // 900ms هي مدة الأنيميشن
                        }

                        function updateRentalPrice(productId) {
                            const product = productsData[productId];
                            // نبحث عن الكارت الخاص بالمنتج
                            const cardElement = document.querySelector(`.rental-card[data-product-id="${productId}"]`);
                            // نبحث داخل الكارت عن الزر المختار حاليًا
                            const selector = cardElement ? cardElement.querySelector('.duration-btn.active') : null;
                            const priceDisplay = document.getElementById(`price-${productId}`);

                            if (!product || !selector || !priceDisplay) return;

                            // نحصل على المدة من الزر المختار
                            const selectedPeriod = selector.dataset.periodKey;
                            const selectedOption = product.options[selectedPeriod];

                            let price = selectedOption.price;
                            let currencySymbol = 'EGP';

                            if (currentCurrency === 'USD') {
                                price = (selectedOption.usd_price || price / exchangeRate).toFixed(2);
                                currencySymbol = 'USD';
                            }

                            priceDisplay.textContent = `${price} ${currencySymbol}`;
                        }

                        function addToCartFromRentalCard(event, productId) {
                            const product = productsData[productId];
                            const cardElement = document.querySelector(`.rental-card[data-product-id="${productId}"]`);
                            const activeButton = cardElement ? cardElement.querySelector('.duration-btn.active') : null;

                            if (!product || !activeButton) {
                                showInfoToast("الرجاء اختيار مدة الاستئجار أولاً.", 3000, 'error');
                                return;
                            }

                            // تشغيل الأنيميشن الجديد أولاً
                            flyToCart_Rental(event);

                            const selectedPeriod = activeButton.dataset.periodKey;
                            const selectedOption = product.options[selectedPeriod];
                            const extraData = {
                                selectedOption: { title: selectedOption.title, price: selectedOption.price },
                                title: `${product.title} (${selectedOption.title})`
                            };

                            // ثم إضافة المنتج للسلة (بدون تمرير الحدث مرة أخرى)
                            performAddToCart(productId, 1, null, extraData);
                        }

                        // ✅ الكود الجديد للدالة بالكامل
                        function renderRentalProductItem(product, container) {
                            let item = document.createElement('div');
                            item.className = 'rental-card';
                            item.dataset.productId = product.id; // نضيف ID المنتج هنا لسهولة الوصول إليه

                            // إنشاء أزرار المدة
                            let optionsHTML = '';
                            let isFirstOption = true;
                            for (const key in product.options) {
                                // نجعل أول زر هو المختار افتراضيًا
                                optionsHTML += `<button class="duration-btn ${isFirstOption ? 'active' : ''}" data-period-key="${key}" onclick="selectDuration(this, '${product.id}')">
                                                                                                                                                                                                                                                                                                                                                                                    ${product.options[key].title}
                                                                                                                                                                                                                                                                                                                                                                                </button>`;
                                isFirstOption = false;
                            }

                            // تحديد السعر الأولي والعملة
                            const firstOptionKey = Object.keys(product.options)[0];
                            let initialPrice = product.options[firstOptionKey].price;
                            let currencySymbol = 'EGP';
                            if (currentCurrency === 'USD') {
                                initialPrice = (product.options[firstOptionKey].usd_price || initialPrice / exchangeRate).toFixed(2);
                                currencySymbol = 'USD';
                            }

                            // بناء الهيكل النهائي للكارت
                            item.innerHTML = `
                                                                                                                                                                                                                                                                                                                                                                <div class="rental-card-image" style="background-image: url('${product.image}');">
                                                                                                                                                                                                                                                                                                                                                                    <span class="rental-badge">ختمها الآن</span>
                                                                                                                                                                                                                                                                                                                                                                </div>
                                                                                                                                                                                                                                                                                                                                                                <div class="rental-card-details">
                                                                                                                                                                                                                                                                                                                                                                    <h3>${product.title}</h3>
                                                                                                                                                                                                                                                                                                                                                                    <p>${product.shortDescription}</p>
                                                                                                                                                                                                                                                                                                                                                                    <div class="rental-controls">
                                                                                                                                                                                                                                                                                                                                                                        <label>أختر المدة التي تحتاجها:</label>
                                                                                                                                                                                                                                                                                                                                                                        <div class="duration-selector-buttons">
                                                                                                                                                                                                                                                                                                                                                                            ${optionsHTML}
                                                                                                                                                                                                                                                                                                                                                                        </div>
                                                                                                                                                                                                                                                                                                                                                                        <div class="rental-price-display" id="price-${product.id}">${initialPrice} ${currencySymbol}</div>
                                                                                                                                                                                                                                                                                                                                                                        <button class="buy-btn" onclick="addToCartFromRentalCard(event, '${product.id}')">أضف إلى السلة</button>
                                                                                                                                                                                                                                                                                                                                                                    </div>
                                                                                                                                                                                                                                                                                                                                                                </div>
                                                                                                                                                                                                                                                                                                                                                            `;
                            container.appendChild(item);
                        }

                        function loadGameRentalsToHome() {
                            const container = document.getElementById('gameRentalsContainer');
                            if (!container) return;
                            container.innerHTML = '';

                            // قائمة بأسماء ID الخاصة بمنتجات الإيجار التي نريد عرضها
                            const rentalProductIds = [
                                'it_takes_two_rent',
                                'splitfiction_rent',
                                'a_way_out_rent',
                                'little_nightmares_3_rent'
                            ];

                            // المرور على القائمة وعرض كل منتج باستخدام التصميم الجديد
                            rentalProductIds.forEach(id => {
                                if (productsData[id]) {
                                    // استدعاء دالة العرض الجديدة التي أنشأناها
                                    renderRentalProductItem(productsData[id], container);
                                }
                            });
                        }

                        // ✅ دالة جديدة للتحكم في أزرار المدة
                        function selectDuration(buttonElement, productId) {
                            const card = buttonElement.closest('.rental-card');
                            if (!card) return;

                            // إزالة كلاس 'active' من كل الأزرار داخل نفس الكارت
                            const allButtons = card.querySelectorAll('.duration-btn');
                            allButtons.forEach(btn => btn.classList.remove('active'));

                            // إضافة كلاس 'active' للزر الذي تم الضغط عليه
                            buttonElement.classList.add('active');

                            // تحديث السعر بناءً على الزر المختار
                            updateRentalPrice(productId);
                        }

                        // =================== START: Fortnite Boosting Logic ===================

                        function calculateFortniteBoostingPrice() {
                            const currentLevelInput = document.getElementById('fn-current-level');
                            const desiredLevelInput = document.getElementById('fn-desired-level');
                            const priceDisplay = document.querySelector('#fn-price-display .price-value');
                            const errorMsg = document.getElementById('fn-error-message');

                            errorMsg.textContent = ''; // مسح الأخطاء السابقة

                            const currentLevel = parseInt(currentLevelInput.value);
                            const desiredLevel = parseInt(desiredLevelInput.value);

                            // التحقق من أن المدخلات أرقام صحيحة
                            if (isNaN(currentLevel) || isNaN(desiredLevel) || currentLevel < 1 || desiredLevel < 1) {
                                priceDisplay.textContent = '...';
                                return;
                            }

                            if (desiredLevel <= currentLevel) {
                                priceDisplay.textContent = '...';
                                errorMsg.textContent = 'المستوى المطلوب يجب أن يكون أعلى من الحالي.';
                                return;
                            }

                            const levelDifference = desiredLevel - currentLevel;
                            const pricePer5LevelsUSD = 1.5;

                            // حساب السعر بالدولار
                            const totalPriceUSD = (levelDifference / 5) * pricePer5LevelsUSD;

                            // تحويل العملة وعرض السعر
                            let finalPrice = totalPriceUSD;
                            let currencySymbol = 'USD';

                            if (currentCurrency === 'EGP') {
                                finalPrice = totalPriceUSD * exchangeRate;
                                currencySymbol = 'EGP';
                            }

                            priceDisplay.textContent = `${finalPrice.toFixed(2)} ${currencySymbol}`;
                        }

                        // =================== START: Fortnite Boosting Logic (UPDATED) ===================

                        // متغير مؤقت لتخزين بيانات الطلب
                        let tempBoostingOrder = null;

                        function calculateFortniteBoostingPrice() {
                            const currentLevelInput = document.getElementById('fn-current-level');
                            const desiredLevelInput = document.getElementById('fn-desired-level');
                            const priceDisplay = document.querySelector('#fn-price-display .price-value');
                            const errorMsg = document.getElementById('fn-error-message');

                            errorMsg.textContent = '';

                            const currentLevel = parseInt(currentLevelInput.value);
                            const desiredLevel = parseInt(desiredLevelInput.value);

                            if (isNaN(currentLevel) || isNaN(desiredLevel) || currentLevel < 1 || desiredLevel < 1) {
                                priceDisplay.textContent = '...';
                                return;
                            }

                            if (desiredLevel <= currentLevel) {
                                priceDisplay.textContent = '...';
                                errorMsg.textContent = 'المستوى المطلوب يجب أن يكون أعلى من الحالي.';
                                return;
                            }

                            const levelDifference = desiredLevel - currentLevel;
                            const pricePer5LevelsUSD = 1.5;
                            const totalPriceUSD = (levelDifference / 5) * pricePer5LevelsUSD;

                            let finalPrice = totalPriceUSD;
                            let currencySymbol = 'USD';

                            if (currentCurrency === 'EGP') {
                                finalPrice = totalPriceUSD * exchangeRate;
                                currencySymbol = 'EGP';
                            }

                            priceDisplay.textContent = `${finalPrice.toFixed(2)} ${currencySymbol}`;
                        }

                        function handleFortniteBoostingOrder() {
                            const currentLevel = parseInt(document.getElementById('fn-current-level').value);
                            const desiredLevel = parseInt(document.getElementById('fn-desired-level').value);
                            const email = document.getElementById('fn-email').value;
                            const password = document.getElementById('fn-password').value;
                            const contact = document.getElementById('fn-contact').value;
                            const errorMsg = document.getElementById('fn-error-message');

                            if (isNaN(currentLevel) || isNaN(desiredLevel) || desiredLevel <= currentLevel) {
                                errorMsg.textContent = 'الرجاء إدخال مستويات صحيحة.';
                                return;
                            }
                            if (!email.trim() || !password.trim() || !contact.trim()) {
                                errorMsg.textContent = 'الرجاء إدخال جميع بيانات الحساب المطلوبة.';
                                return;
                            }

                            const levelDifference = desiredLevel - currentLevel;
                            const pricePer5LevelsUSD = 1.5;
                            const totalPriceUSD = (levelDifference / 5) * pricePer5LevelsUSD;
                            const finalPriceEGP = totalPriceUSD * exchangeRate;

                            // ✅ الخطوة 1: تخزين بيانات الطلب في المتغير المؤقت
                            tempBoostingOrder = {
                                title: `Fortnite Boosting: Level ${currentLevel} to ${desiredLevel}`,
                                price: finalPriceEGP,
                                extraData: {
                                    'Account Email': email,
                                    'Account Password': password,
                                    'Contact Method': contact,
                                    'Current Level': currentLevel,
                                    'Desired Level': desiredLevel
                                }
                            };

                            // ✅ الخطوة 2: فتح نافذة اختيار طريقة الدفع
                            showModal('checkoutModal');
                            renderBoostingCheckoutOptions(); // استدعاء دالة جديدة لعرض الخيارات
                        }

                        // ✅ دالة جديدة: لعرض خيارات الدفع الخاصة بالبوستينج
                        function renderBoostingCheckoutOptions() {
                            const container = document.getElementById('checkoutPaymentOptionsContainer');
                            container.innerHTML = '';

                            if (!tempBoostingOrder) return;

                            const methods = [
                                { id: 'vodafone', name: 'فودافون كاش', icon: './images/vf-cash.png', desc: 'الدفع عبر المحفظة الالكترونية' },
                                { id: 'creditcard', name: 'فيزا / ماستر كارد', icon: './images/credit-card.png', desc: 'الدفع ببطاقة الائتمان' },
                                { id: 'paypal', name: 'بايبال', icon: './images/paypal.png', desc: 'الدفع عبر حساب بايبال' }
                            ];

                            methods.forEach(method => {
                                const card = document.createElement('div');
                                card.className = 'payment-method-card';
                                // استدعاء دالة جديدة عند الضغط
                                card.onclick = () => processBoostingPayment(method.id);
                                card.innerHTML = `
                                                                                                                                                                                                                                                                                                                                                                    <h3>
                                                                                                                                                                                                                                                                                                                                                                        <img src="${method.icon}" alt="${method.name} Logo">
                                                                                                                                                                                                                                                                                                                                                                        ${method.name}
                                                                                                                                                                                                                                                                                                                                                                    </h3>
                                                                                                                                                                                                                                                                                                                                                                    <p>${method.desc}</p>
                                                                                                                                                                                                                                                                                                                                                                `;
                                container.appendChild(card);
                            });
                        }

                        // ✅ دالة جديدة: لمعالجة الدفع بعد اختيار الطريقة
                        function processBoostingPayment(method) {
                            if (!tempBoostingOrder) return;

                            const { title, price, extraData } = tempBoostingOrder;

                            // استدعاء دالة الدفع النهائية
                            showPaymentDetails(method, price, title, extraData);

                            // تفريغ المتغير المؤقت
                            tempBoostingOrder = null;
                        }

                        // =================== END: Fortnite Boosting Logic (UPDATED) ===================

                        // =================== END: Fortnite Boosting Logic ===================

                        function loadCoDServices() {
                            const codServicesSection = document.getElementById('cod-services');
                            const bo6Container = document.getElementById('cod-bo6-container');
                            const mw3Container = document.getElementById('cod-mw3-container');

                            if (bo6Container) bo6Container.innerHTML = '';
                            if (mw3Container) mw3Container.innerHTML = '';

                            // ✅✅ بداية التعديل: ترتيب المنتجات المخصصة أولاً ✅✅
                            const productIds = Object.keys(productsData);
                            // فرز المنتجات لوضع المنتجات المخصصة في بداية القائمة
                            productIds.sort((a, b) => {
                                const isACustom = productsData[a].isCustomOrder;
                                const isBCustom = productsData[b].isCustomOrder;
                                if (isACustom && !isBCustom) return -1;
                                if (!isACustom && isBCustom) return 1;
                                return 0;
                            });

                            // استخدام القائمة المرتبة بدلاً من المرور العشوائي
                            for (const productId of productIds) {
                                // ✅✅ نهاية التعديل ✅✅

                                const product = productsData[productId];

                                // ✅✅ بداية التعديل: التعامل مع الكارت المخصص بشكل مختلف ✅✅
                                if (product.isCustomOrder) {
                                    const customCardHTML = `
                                                                                                                                                                                                                                                                                                                                                                        <div class="service-offer-card" onclick="showModal('supportModal')">
                                                                                                                                                                                                                                                                                                                                                                            <img src="${product.image}" alt="${product.title}" class="service-card-image">
                                                                                                                                                                                                                                                                                                                                                                            <h3>${product.title}</h3>
                                                                                                                                                                                                                                                                                                                                                                            <p class="service-card-description">${product.shortDescription}</p>
                                                                                                                                                                                                                                                                                                                                                                            <button>اطلب الآن</button>
                                                                                                                                                                                                                                                                                                                                                                        </div>
                                                                                                                                                                                                                                                                                                                                                                    `;
                                    if (product.category === 'cod-bo6' && bo6Container) {
                                        bo6Container.innerHTML += customCardHTML;
                                    } else if (product.category === 'cod-mw3' && mw3Container) {
                                        mw3Container.innerHTML += customCardHTML;
                                    }
                                    continue; // الانتقال للمنتج التالي وتجاهل الكود أدناه
                                }
                                // ✅✅ نهاية التعديل ✅✅

                                if (product.category === 'cod-bo6' && bo6Container) {
                                    renderProductItem(product, bo6Container, 'cod-services', true);
                                } else if (product.category === 'cod-mw3' && mw3Container) {
                                    renderProductItem(product, mw3Container, 'cod-services', true);
                                }
                            }

                            const tabsContainer = document.querySelector('#cod-services .tabs-container');
                            if (tabsContainer) {
                                const tabButtons = tabsContainer.querySelectorAll('.tab-button');
                                const tabContents = document.querySelectorAll('#cod-services .tab-content');

                                const backgrounds = {
                                    'cod-bo6-page': './images/bo6_background.png',
                                    'cod-mw3-page': './images/mw3_background.png',
                                    'cod-bo7-page': './images/cod_coming_soon_bg.png'
                                };

                                function showTab(tabId) {
                                    if (backgrounds[tabId] && codServicesSection) {
                                        codServicesSection.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.65), rgba(0, 0, 0, 0.65)), url('${backgrounds[tabId]}')`;
                                    }

                                    tabContents.forEach(content => content.classList.remove('active'));
                                    tabButtons.forEach(button => button.classList.remove('active'));

                                    const targetContent = document.getElementById(tabId);
                                    const targetButton = tabsContainer.querySelector(`[data-tab="${tabId}"]`);

                                    if (targetContent) targetContent.classList.add('active');
                                    if (targetButton) targetButton.classList.add('active');
                                }

                                tabButtons.forEach(button => {
                                    button.addEventListener('click', () => {
                                        const targetTabId = button.dataset.tab;
                                        showTab(targetTabId);
                                    });
                                });

                                showTab('cod-bo6-page');
                            }
                        }

                        // START: دالة مشاركة المنتج
                        function shareProduct() {
                            if (!currentProduct) return; // للتأكد من أن هناك منتج معروض

                            const shareData = {
                                title: currentProduct.title,
                                text: `شاهد هذا المنتج الرائع "${currentProduct.title}" على Berlin Store!`,
                                url: window.location.href // رابط الصفحة الحالي
                            };

                            // التحقق إذا كان المتصفح يدعم خاصية المشاركة المدمجة
                            if (navigator.share) {
                                navigator.share(shareData)
                                    .then(() => console.log('تمت المشاركة بنجاح'))
                                    .catch((error) => console.log('خطأ في المشاركة:', error));
                            } else {
                                // إذا كان المتصفح لا يدعم، قم بنسخ الرابط
                                navigator.clipboard.writeText(shareData.url).then(() => {
                                    showInfoToast('تم نسخ رابط المنتج بنجاح!', 3000);
                                }).catch(err => {
                                    console.error('فشل نسخ الرابط: ', err);
                                    showInfoToast('فشل نسخ الرابط', 3000, 'error');
                                });
                            }
                        }
                        // ✅ دالة إظهار الحاسبة (معدلة)
                        function showBoostingCalculator() {
                            const boostingSection = document.getElementById('valorant-boosting');
                            const cover = document.getElementById('boosting-cover');
                            const calculator = document.getElementById('boosting-calculator-container');

                            if (boostingSection && cover && calculator) {
                                // تطبيق تأثير التعتيم والضبابية على الخلفية
                                boostingSection.classList.add('calculator-view-active');

                                cover.classList.add('fade-out');
                                setTimeout(() => {
                                    cover.style.display = 'none';
                                    calculator.style.display = 'flex';
                                    calculator.classList.add('visible');
                                }, 500);
                            }
                        }

                        // ✅ دالة إغلاق القسم (معدلة)
                        function closeBoostingSection() {
                            const boostingSection = document.getElementById('valorant-boosting');
                            const cover = document.getElementById('boosting-cover');
                            const calculator = document.getElementById('boosting-calculator-container');

                            // إزالة تأثير الخلفية
                            if (boostingSection) {
                                boostingSection.classList.remove('calculator-view-active');
                            }

                            // إعادة الواجهة للحالة الأصلية
                            if (cover) {
                                cover.style.display = 'flex';
                                // استخدام timeout لإعادة الشفافية بعد ظهور العنصر
                                setTimeout(() => {
                                    cover.classList.remove('fade-out');
                                }, 10);
                            }
                            if (calculator) {
                                calculator.classList.remove('visible');
                                // تأخير بسيط لضمان اختفاء الحاسبة بسلاسة
                                setTimeout(() => {
                                    calculator.style.display = 'none';
                                }, 500);
                            }

                            // إخفاء القسم بالكامل والعودة للرئيسية (نفس السلوك القديم)
                            setTimeout(() => {
                                if (boostingSection) {
                                    boostingSection.style.display = 'none';
                                    if (window.location.hash === '#valorant-boosting') {
                                        window.location.hash = '#home';
                                    }
                                }
                            }, 300); // انتظار بسيط قبل الإخفاء التام
                        }

                        // ✅ دالة محدثة لإغلاق القسم وإلغاء تأثير الخلفية
                        function closeBoostingSection() {
                            const boostingSection = document.getElementById('valorant-boosting');
                            const cover = document.getElementById('boosting-cover');
                            const calculator = document.getElementById('boosting-calculator-container');

                            // إعادة الواجهة الداخلية للحالة الافتراضية
                            if (cover) {
                                cover.style.display = 'flex';
                                cover.classList.remove('fade-out');
                            }
                            if (calculator) {
                                calculator.classList.remove('visible');
                            }

                            // إلغاء تأثير التعتيم والضبابية من الخلفية
                            if (boostingSection) {
                                boostingSection.classList.remove('calculator-visible');
                                boostingSection.style.display = 'none';
                                if (window.location.hash === '#valorant-boosting') {
                                    window.location.hash = '#home';
                                }
                            }
                        }


                        function handleBoostingOrder() {
                            const errorMessage = document.getElementById('boosting-error-message');
                            errorMessage.textContent = '';

                            // --- جزء التحقق من البيانات وحساب السعر ---
                            const emailInput = document.getElementById('boosting-email');
                            const passwordInput = document.getElementById('boosting-password');
                            const contactInput = document.getElementById('boosting-contact');
                            const currentRankInput = document.querySelector('input[name="currentRank"]:checked');
                            const desiredRankInput = document.querySelector('input[name="desiredRank"]:checked');

                            if (!emailInput.value.trim() || !passwordInput.value.trim() || !contactInput.value.trim()) {
                                errorMessage.textContent = 'الرجاء إدخال جميع بيانات الحساب المطلوبة.';
                                return;
                            }
                            if (!currentRankInput) {
                                errorMessage.textContent = 'الرجاء تحديد رتبتك الحالية.';
                                return;
                            }
                            if (!desiredRankInput) {
                                errorMessage.textContent = 'الرجاء تحديد الرتبة المطلوبة.';
                                return;
                            }
                            const currentRank = valorantRanks[parseInt(currentRankInput.value)];
                            const desiredRank = valorantRanks[parseInt(desiredRankInput.value)];
                            if (desiredRank.value <= currentRank.value) {
                                errorMessage.textContent = 'الرتبة المطلوبة يجب أن تكون أعلى من الرتبة الحالية.';
                                return;
                            }
                            let totalUSD = 0;
                            for (let i = currentRank.value; i < desiredRank.value; i++) {
                                const division = valorantRanks[i];
                                if (valorantTierPricesUSD[division.tier]) {
                                    totalUSD += valorantTierPricesUSD[division.tier];
                                }
                            }
                            const totalPriceEGP = totalUSD * exchangeRate;
                            if (totalPriceEGP <= 0) {
                                errorMessage.textContent = 'خطأ في حساب السعر. الرجاء التأكد من اختيارك.';
                                return;
                            }
                            // --- نهاية جزء التحقق والحساب ---

                            // ✅ الخطوة 1: تخزين بيانات الطلب في المتغير المؤقت
                            tempBoostingOrder = {
                                title: `Valorant Boosting: ${currentRank.name} to ${desiredRank.name}`,
                                price: totalPriceEGP,
                                extraData: {
                                    'Account Email': emailInput.value,
                                    'Account Password': passwordInput.value,
                                    'Contact Method': contactInput.value,
                                    'الرانك الحالي': currentRank.name,
                                    'الرانك المطلوب': desiredRank.name
                                }
                            };

                            // ✅ الخطوة 2: فتح نافذة اختيار طريقة الدفع
                            showModal('checkoutModal');
                            renderBoostingCheckoutOptions();
                        }

                        /* ====================================================== */
                        /* START: VALORANT BOOSTING CALCULATOR SCRIPT             */
                        /* ====================================================== */

                        // 1. تعريف الرتب والأسعار
                        const valorantRanks = [
                            { id: 'iron_1', name: 'Iron 1', tier: 'iron', value: 0, image: './images/3624-valorant-iron-1.png' },
                            { id: 'iron_2', name: 'Iron 2', tier: 'iron', value: 1, image: './images/7351-valorant-iron-2.png' },
                            { id: 'iron_3', name: 'Iron 3', tier: 'iron', value: 2, image: './images/1854-valorant-iron-3.png' },
                            { id: 'bronze_1', name: 'Bronze 1', tier: 'bronze', value: 3, image: './images/4159-valorant-bronze-1.png' },
                            { id: 'bronze_2', name: 'Bronze 2', tier: 'bronze', value: 4, image: './images/4376-valorant-bronze-2.png' },
                            { id: 'bronze_3', name: 'Bronze 3', tier: 'bronze', value: 5, image: './images/4590-valorant-bronze-3.png' },
                            { id: 'silver_1', name: 'Silver 1', tier: 'silver', value: 6, image: './images/6335-valorant-silver-1.png' },
                            { id: 'silver_2', name: 'Silver 2', tier: 'silver', value: 7, image: './images/8138-valorant-silver-2.png' },
                            { id: 'silver_3', name: 'Silver 3', tier: 'silver', value: 8, image: './images/3293-valorant-silver-3.png' },
                            { id: 'gold_1', name: 'Gold 1', tier: 'gold', value: 9, image: './images/5533-valorant-gold-1.png' },
                            { id: 'gold_2', name: 'Gold 2', tier: 'gold', value: 10, image: './images/2060-valorant-gold-2.png' },
                            { id: 'gold_3', name: 'Gold 3', tier: 'gold', value: 11, image: './images/3293-valorant-gold-3.png' },
                            { id: 'platinum_1', name: 'Platinum 1', tier: 'platinum', value: 12, image: './images/4590-valorant-platinum-1.png' },
                            { id: 'platinum_2', name: 'Platinum 2', tier: 'platinum', value: 13, image: './images/3255-valorant-platinum-2.png' },
                            { id: 'platinum_3', name: 'Platinum 3', tier: 'platinum', value: 14, image: './images/5816-valorant-platinum-3.png' },
                            { id: 'diamond_1', name: 'Diamond 1', tier: 'diamond', value: 15, image: './images/4590-valorant-diamond-1.png' },
                            { id: 'diamond_2', name: 'Diamond 2', tier: 'diamond', value: 16, image: './images/3939-valorant-diamond-2.png' },
                            { id: 'diamond_3', name: 'Diamond 3', tier: 'diamond', value: 17, image: './images/6354-valorant-diamond-3.png' },
                            { id: 'ascendant_1', name: 'Ascendant 1', tier: 'ascendant', value: 18, image: './images/4590-valorant-ascendant-1.png' },
                            { id: 'ascendant_2', name: 'Ascendant 2', tier: 'ascendant', value: 19, image: './images/8376-valorant-ascendant-2.png' },
                            { id: 'ascendant_3', name: 'Ascendant 3', tier: 'ascendant', value: 20, image: './images/2309-valorant-ascendant-3.png' },
                            // الرتب التالية لم يتم تحديد سعرها، لذا ستكون غير متاحة للاختيار
                            { id: 'immortal_1', name: 'Immortal 1', tier: 'immortal', value: 21, image: './images/1775-valorant-immortal-1.png', disabled: true },
                        ];

                        const valorantTierPricesUSD = {
                            iron: 1,
                            bronze: 2,
                            silver: 3, // تم استنتاج السعر بناءً على التسلسل
                            gold: 4,   // تم تعديل السعر ليتبع التسلسل المنطقي
                            platinum: 5, // تم تعديل السعر
                            diamond: 7, // تم تعديل السعر
                            ascendant: 8
                        };

                        // 2. دالة لإنشاء مربعات اختيار الرتب
                        function generateRankSelectors() {
                            const currentRankContainer = document.getElementById('current-rank-selector');
                            const desiredRankContainer = document.getElementById('desired-rank-selector');

                            if (!currentRankContainer || !desiredRankContainer) return;

                            currentRankContainer.innerHTML = '';
                            desiredRankContainer.innerHTML = '';

                            valorantRanks.forEach(rank => {
                                const optionHTML = `
                                                                                                                                                                                                                                                                                                                                                                                                        <label class="rank-option ${rank.disabled ? 'disabled' : ''}" title="${rank.name}">
                                                                                                                                                                                                                                                                                                                                                                                                            <input type="radio" name="currentRank" value="${rank.value}" onchange="calculateBoostingPrice()" ${rank.disabled ? 'disabled' : ''}>
                                                                                                                                                                                                                                                                                                                                                                                                            <div class="rank-icon-wrapper">
                                                                                                                                                                                                                                                                                                                                                                                                                <img src="${rank.image}" alt="${rank.name}" loading="lazy">
                                                                                                                                                                                                                                                                                                                                                                                                                <span class="rank-name">${rank.name}</span>
                                                                                                                                                                                                                                                                                                                                                                                                            </div>
                                                                                                                                                                                                                                                                                                                                                                                                        </label>
                                                                                                                                                                                                                                                                                                                                                                                                    `;
                                currentRankContainer.innerHTML += optionHTML;
                            });

                            valorantRanks.forEach(rank => {
                                const optionHTML = `
                                                                                                                                                                                                                                                                                                                                                                                                        <label class="rank-option ${rank.disabled ? 'disabled' : ''}" title="${rank.name}">
                                                                                                                                                                                                                                                                                                                                                                                                            <input type="radio" name="desiredRank" value="${rank.value}" onchange="calculateBoostingPrice()" ${rank.disabled ? 'disabled' : ''}>
                                                                                                                                                                                                                                                                                                                                                                                                            <div class="rank-icon-wrapper">
                                                                                                                                                                                                                                                                                                                                                                                                                <img src="${rank.image}" alt="${rank.name}" loading="lazy">
                                                                                                                                                                                                                                                                                                                                                                                                                <span class="rank-name">${rank.name}</span>
                                                                                                                                                                                                                                                                                                                                                                                                            </div>
                                                                                                                                                                                                                                                                                                                                                                                                        </label>
                                                                                                                                                                                                                                                                                                                                                                                                    `;
                                desiredRankContainer.innerHTML += optionHTML;
                            });
                        }

                        // 3. دالة حساب السعر
                        function calculateBoostingPrice() {
                            const currentRankInput = document.querySelector('input[name="currentRank"]:checked');
                            const desiredRankInput = document.querySelector('input[name="desiredRank"]:checked');
                            const priceDisplay = document.getElementById('boosting-price-display').querySelector('.price-value');
                            const errorMessage = document.getElementById('boosting-error-message');

                            errorMessage.textContent = ''; // Clear previous errors

                            if (!currentRankInput || !desiredRankInput) {
                                priceDisplay.textContent = `0.00 ${currentCurrency}`;
                                return;
                            }

                            const currentRankValue = parseInt(currentRankInput.value);
                            const desiredRankValue = parseInt(desiredRankInput.value);

                            if (desiredRankValue <= currentRankValue) {
                                errorMessage.textContent = 'الرتبة المطلوبة يجب أن تكون أعلى من الرتبة الحالية.';
                                priceDisplay.textContent = `0.00 ${currentCurrency}`;
                                return;
                            }

                            let totalUSD = 0;
                            for (let i = currentRankValue; i < desiredRankValue; i++) {
                                const currentDivision = valorantRanks[i];
                                const tierPrice = valorantTierPricesUSD[currentDivision.tier];
                                if (tierPrice) {
                                    totalUSD += tierPrice;
                                }
                            }

                            // تحويل العملة وعرضها
                            let finalPrice = totalUSD * exchangeRate; // السعر الأساسي بالجنيه
                            let currencySymbol = 'EGP';

                            if (currentCurrency === 'USD') {
                                finalPrice = totalUSD;
                                currencySymbol = 'USD';
                            }

                            priceDisplay.textContent = `${finalPrice.toFixed(2)} ${currencySymbol}`;
                        }




                        // 5. دالة مخصصة لفتح نافذة الدفع لخدمة البوستنج
                        function openPaymentModalForBoosting(title, price, extraData) {
                            // هذه دالة افتراضية، يمكنك تعديلها لتتناسب مع دالة openPaymentModal الموجودة لديك
                            // الغرض منها هو تمرير كل البيانات اللازمة
                            currentProduct = {
                                title: title,
                                price: price,
                                // يمكنك إضافة أي بيانات أخرى تحتاجها دالة الدفع
                            };

                            // استدعاء دالة الدفع الرئيسية
                            showPaymentDetails('vodafone', price, title, extraData); // الافتراضي هو فودافون كاش
                        }


                        /* ====================================================== */
                        /* END: VALORANT BOOSTING CALCULATOR SCRIPT               */
                        /* ====================================================== */



                        function loadValorantCoaching() {
                            const container = document.getElementById('valorant-coaching');
                            container.innerHTML = '';
                            const productIds = ['valorant_coaching_session']; // Use the product ID from your productsData object
                            productIds.forEach(id => renderProductItem(productsData[id], container, 'valorant-coaching'));
                        }

                        function loadFortniteCoaching() {
                            const container = document.getElementById('fortnite-coaching');
                            container.innerHTML = '';
                            const productIds = ['fortnite_coaching_session']; // Use the product ID you added
                            productIds.forEach(id => renderProductItem(productsData[id], container, 'fortnite-coaching'));
                        }

                        function loadFortniteBoosting() {
                            const container = document.getElementById('fortnite-boosting');
                            container.innerHTML = '';
                            const productIds = ['fortnite_boosting_service']; // Use the product ID you added
                            productIds.forEach(id => renderProductItem(productsData[id], container, 'fortnite-boosting'));
                        }

                        function proceedToGiftingPayment() {
                            const friendCode = document.getElementById('giftingFriendCode').value;
                            const gameName = document.getElementById('giftingGameName').value;
                            const priceUSDInput = document.getElementById('giftingGamePriceUSD');
                            const priceUSD = parseFloat(priceUSDInput.value);

                            // التحقق من البيانات
                            if (!friendCode.trim()) {
                                showInfoToast('الرجاء إدخال Steam Friend Code.', 3000, 'error');
                                return;
                            }
                            if (!gameName.trim()) {
                                showInfoToast('الرجاء إدخال اسم اللعبة.', 3000, 'error');
                                return;
                            }
                            if (isNaN(priceUSD) || priceUSD <= 0) {
                                showInfoToast('الرجاء إدخال سعر صحيح للعبة بالدولار.', 3000, 'error');
                                return;
                            }

                            // ✅✅ استخدام نفس المعادلة الموحدة لضمان تطابق السعر
                            const finalPriceEGP = (priceUSD * 55) + 20;

                            // تجهيز البيانات الإضافية
                            const extraData = {
                                'Steam Friend Code': friendCode,
                                'Game Name': gameName,
                                'Original Price (USD)': `$${priceUSD.toFixed(2)}`,
                                'Calculation': `($${priceUSD} * ${STEAM_USD_RATE}) + ${STEAM_FEES} EGP`
                            };

                            const finalTitle = `لعبة جيفت: ${gameName}`;

                            // إغلاق النافذة الحالية وفتح الدفع
                            closeModal('giftingCalculatorModal');

                            // إرسال السعر النهائي المحسوب بدقة
                            showPaymentDetails('vodafone', finalPriceEGP, finalTitle, extraData);
                        }

                        // دالة لفتح نافذة الآلة الحاسبة
                        function openGiftingCalculatorModal() {
                            // إعادة تعيين الحقول عند كل فتح
                            document.getElementById('giftingFriendCode').value = '';
                            document.getElementById('giftingGameName').value = '';
                            document.getElementById('giftingGamePriceUSD').value = '';
                            document.getElementById('giftingFinalPriceDisplay').innerHTML = '';
                            showModal('giftingCalculatorModal');
                        }

                        const STEAM_USD_RATE = 60; // 👈 سعر دولار ستيم (غيره براحتك لـ 55 أو 66)
                        const STEAM_FEES = 20;     // 👈 مصاريف الخدمة الثابتة

                        // 1. دالة الحساب الفوري (أثناء الكتابة)
                        function calculateGiftingPrice() {
                            const priceUSDInput = document.getElementById('giftingGamePriceUSD');
                            const displayElement = document.getElementById('giftingFinalPriceDisplay');
                            const priceUSD = parseFloat(priceUSDInput.value);

                            if (isNaN(priceUSD) || priceUSD <= 0) {
                                displayElement.innerHTML = '';
                                return;
                            }

                            // المعادلة الموحدة
                            const finalPriceEGP = (priceUSD * 55) + 20;

                            displayElement.innerHTML = `
                                                                                                                        <span class="price-label">المبلغ المطلوب</span>
                                                                                                                        <span class="price-value">${finalPriceEGP.toFixed(2)} ج.م</span>
                                                                                                                    `;
                        }


                        function doPost(e) {
                            try {
                                var SHEET_ID = "1cLYmsxH1peOUhRNH9PwoMij8mmrOmeu0LRq8nWPn4vs"; // تأكد من الـ ID
                                var SHEET_NAME = "Sheet1"; // تأكد من اسم الصفحة
                                var ADMIN_EMAIL = "sohaylso34@gmail.com"; // إيميلك

                                var sheet = SpreadsheetApp.openById(SHEET_ID).getSheetByName(SHEET_NAME);
                                var data = JSON.parse(e.postData.contents);

                                var timestamp = new Date();
                                var orderId = "BER-" + timestamp.getTime().toString().slice(-6) + Math.floor(Math.random() * 100);

                                // --- استخراج البيانات الأساسية ---
                                var productName = data.product || data.order_type || "N/A";
                                var totalPrice = data.price || "N/A";
                                var paymentMethod = data.payment_method || "Custom Order";
                                var customerEmail = data.email || "N/A";
                                var customerPhone = data.phone_number || data.contact || "N/A";
                                var notes = data.notes_paypal || data.notes || data.order_details || "";

                                // --- ✅ استخراج البيانات الجديدة بشكل منفصل ---
                                var steamFriendCode = data["Steam Friend Code"] || "";
                                var gameName = data["Game Name"] || "";

                                // --- تجميع باقي البيانات الإضافية ---
                                var extraData = [];
                                if (data["Riot ID"]) extraData.push("Riot ID: " + data["Riot ID"]);
                                if (data["Genshin UID"]) extraData.push("Genshin UID: " + data["Genshin UID"]);
                                if (data["Marvel Rivals ID"]) extraData.push("Marvel Rivals ID: " + data["Marvel Rivals ID"]);
                                if (data["Steam Profile Link"]) extraData.push("Steam Profile Link: " + data["Steam Profile Link"]);
                                if (data["Account Email"]) extraData.push("Account Email: " + data["Account Email"]);
                                if (data["Contact Method"]) extraData.push("Contact: " + data["Contact Method"]);
                                if (data["Original Price (USD)"]) extraData.push("Original Price: " + data["Original Price (USD)"]);

                                var extraDataString = extraData.join(' | ');

                                // --- كتابة البيانات في الصفوف بالترتيب الصحيح ---
                                sheet.appendRow([
                                    orderId, timestamp, productName, totalPrice, paymentMethod,
                                    customerEmail, customerPhone,
                                    steamFriendCode, // ✅ العمود الجديد
                                    gameName,      // ✅ العمود الجديد
                                    extraDataString, notes
                                ]);

                                // --- إرسال الإيميلات (لا تغيير هنا) ---
                                // ... (كود إرسال الإيميل يبقى كما هو)

                                return ContentService.createTextOutput(JSON.stringify({ "result": "success", "orderId": orderId }))
                                    .setMimeType(ContentService.MimeType.JSON);

                            } catch (error) {
                                Logger.log(error.toString());
                                return ContentService.createTextOutput(JSON.stringify({ "result": "error", "error": error.toString() }))
                                    .setMimeType(ContentService.MimeType.JSON);
                            }
                        }

                        // دالة إرسال الإيميلات
                        function sendEmailNotifications(adminEmail, customerEmail, orderId, productName, totalPrice, paymentMethod, extraData, notes) {
                            if (!adminEmail.includes("@")) return;

                            // --- 1. رسالة البريد الإلكتروني للمدير (Admin) ---
                            const subjectAdmin = `🎉 طلب جديد | Berlin Store | ${orderId}`;
                            const htmlBodyAdmin = `
                                                                                                                                                                                                                                                                                                                                                                                                                    <div style="font-family: sans-serif; border: 1px solid #ddd; padding: 15px; max-width: 600px;">
                                                                                                                                                                                                                                                                                                                                                                                                                        <h2 style="color: #2c1a40;">تفاصيل طلب جديد</h2>
                                                                                                                                                                                                                                                                                                                                                                                                                        <p><strong>كود الطلب:</strong> ${orderId}</p>
                                                                                                                                                                                                                                                                                                                                                                                                                        <p><strong>المنتج/الخدمة:</strong> ${productName}</p>
                                                                                                                                                                                                                                                                                                                                                                                                                        <p><strong>السعر الإجمالي:</strong> ${totalPrice}</p>
                                                                                                                                                                                                                                                                                                                                                                                                                        <p><strong>طريقة الدفع:</strong> ${paymentMethod}</p>
                                                                                                                                                                                                                                                                                                                                                                                                                        <hr>
                                                                                                                                                                                                                                                                                                                                                                                                                        <p><strong>إيميل العميل:</strong> ${customerEmail}</p>
                                                                                                                                                                                                                                                                                                                                                                                                                        <p><strong>بيانات إضافية:</strong> ${extraData || 'لا يوجد'}</p>
                                                                                                                                                                                                                                                                                                                                                                                                                        <p><strong>ملاحظات العميل:</strong> ${notes || 'لا يوجد'}</p>
                                                                                                                                                                                                                                                                                                                                                                                                                    </div>
                                                                                                                                                                                                                                                                                                                                                                                                                `;
                            MailApp.sendEmail({
                                to: adminEmail,
                                subject: subjectAdmin,
                                htmlBody: htmlBodyAdmin,
                                name: 'Berlin Store Orders' // ✅ تم تغيير اسم مرسل رسالة المدير
                            });

                            // --- 2. رسالة البريد الإلكتروني للعميل (Customer) ---
                            if (customerEmail && customerEmail !== 'N/A' && customerEmail.includes("@")) {
                                const subjectCustomer = `✅ تم تأكيد طلبك من Berlin Store | رقم الطلب: ${orderId}`;
                                const htmlBodyCustomer = `
                                                                                                                                                                                                                                                                                                                                                                                                                    <div dir="rtl" style="font-family: 'Tajawal', Arial, sans-serif; background-color: #f9f9f9; margin: 0; padding: 20px;">
                                                                                                                                                                                                                                                                                                                                                                                                                        <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                                                                                                                                                                                                                                                                                                                                                                                                            <tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                <td align="center">
                                                                                                                                                                                                                                                                                                                                                                                                                                    <table width="600" border="0" cellspacing="0" cellpadding="0" style="background-color: #ffffff; border: 1px solid #dedede; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
                                                                                                                                                                                                                                                                                                                                                                                                                                        <tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <td align="center" style="background-color: #2c1a40; padding: 20px; border-radius: 8px 8px 0 0;">
                                                                                                                                                                                                                                                                                                                                                                                                                                                <h1 style="color: #ffcc00; margin: 0; font-size: 28px; border: none;">Berlin Store</h1>
                                                                                                                                                                                                                                                                                                                                                                                                                                            </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                        </tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                        <tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <td style="padding: 30px 25px;">
                                                                                                                                                                                                                                                                                                                                                                                                                                                <h2 style="color: #333333; font-size: 22px; border: none; margin-bottom: 15px;">شكرًا لثقتك بنا!</h2>
                                                                                                                                                                                                                                                                                                                                                                                                                                                <p style="color: #555555; line-height: 1.6;">مرحبًا، لقد استلمنا طلبك بنجاح وجاري مراجعته الآن. سيتم تنفيذه في أقرب وقت ممكن وإعلامك فور الانتهاء.</p>

                                                                                                                                                                                                                                                                                                                                                                                                                                                <table width="100%" cellspacing="0" cellpadding="0" style="margin-top: 25px; border: 1px solid #eeeeee;">
                                                                                                                                                                                                                                                                                                                                                                                                                                                    <tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                        <td colspan="2" style="background-color: #f5f5f5; padding: 12px; font-weight: bold; color: #333;">ملخص الطلب</td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                    </tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                    <tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                        <td style="padding: 10px; border-bottom: 1px solid #eeeeee; width: 40%;"><strong>كود الطلب:</strong></td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                        <td style="padding: 10px; border-bottom: 1px solid #eeeeee;">${orderId}</td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                    </tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                    <tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                        <td style="padding: 10px; border-bottom: 1px solid #eeeeee;"><strong>المنتج/الخدمة:</strong></td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                        <td style="padding: 10px; border-bottom: 1px solid #eeeeee;">${productName}</td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                    </tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                    <tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                        <td style="padding: 10px; border-bottom: 1px solid #eeeeee;"><strong>المبلغ الإجمالي:</strong></td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                        <td style="padding: 10px; border-bottom: 1px solid #eeeeee;">${totalPrice}</td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                    </tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                    <tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                        <td style="padding: 10px;"><strong>طريقة الدفع:</strong></td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                        <td style="padding: 10px;">${paymentMethod}</td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                    </tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                </table>
                                                                                                                                                                                                                                                                                                                                                                                                                                            </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                        </tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                        <tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <td style="padding: 0 25px 30px 25px; text-align: center;">
                                                                                                                                                                                                                                                                                                                                                                                                                                                <p style="color: #555555;">لأي استفسارات، أو لتتبع أسرع، لا تتردد في التواصل مع الدعم الفني عبر سيرفر الديسكورد:</p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                <a href="https://discord.gg/D3shcEb5xe" target="_blank" style="background-color: #5865F2; color: #ffffff; padding: 12px 25px; text-decoration: none; border-radius: 5px; font-weight: bold; display: inline-block;">انضم لسيرفر الدعم الفني</a>
                                                                                                                                                                                                                                                                                                                                                                                                                                            </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                        </tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                        <tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                            <td align="center" style="background-color: #f5f5f5; padding: 15px; font-size: 12px; color: #888888; border-radius: 0 0 8px 8px;">
                                                                                                                                                                                                                                                                                                                                                                                                                                                <p style="margin: 0;">&copy; ${new Date().getFullYear()} Berlin Store. جميع الحقوق محفوظة.</p>
                                                                                                                                                                                                                                                                                                                                                                                                                                            </td>
                                                                                                                                                                                                                                                                                                                                                                                                                                        </tr>
                                                                                                                                                                                                                                                                                                                                                                                                                                    </table>
                                                                                                                                                                                                                                                                                                                                                                                                                                </td>
                                                                                                                                                                                                                                                                                                                                                                                                                            </tr>
                                                                                                                                                                                                                                                                                                                                                                                                                        </table>
                                                                                                                                                                                                                                                                                                                                                                                                                    </div>
                                                                                                                                                                                                                                                                                                                                                                                                                    `;

                                MailApp.sendEmail({
                                    to: customerEmail,
                                    subject: subjectCustomer,
                                    htmlBody: htmlBodyCustomer,
                                    name: 'Berlin Store' // ✅ هذا هو السطر الجديد والمهم
                                });
                            }
                        }


                        // --- دالة جديدة لإظهار فورم الطلب بعد الضغط على زر "اطلب الآن" ---
                        function revealOrderForm(buttonEl) {
                            const card = buttonEl.closest('.custom-order-card');
                            if (!card) return;

                            const overlay = card.querySelector('.offer-overlay');
                            const form = card.querySelector('.custom-order-form');

                            if (overlay) {
                                overlay.classList.add('hidden');
                            }
                            if (form) {
                                form.classList.add('visible');
                            }
                        }

                        let imageSliderInterval = null; // متغير للتحكم في السلايدر

                        const translations = {
                            // العربية (اللغة الافتراضية)
                            ar: {
                                'home': 'الرئيسية',
                                'products': 'المنتجات',
                                'subscriptions': 'الاشتراكات',
                                'top_up': 'شحن رصيد',
                                'steam': 'ستيم',
                                'shipping': 'تتبع الشحن',
                                'support': 'دعم فني',
                                'welcome_message': 'أهلاً بك في Berlin Store!',
                                'discover_products': 'اكتشف منتجاتنا الجديدة وتتبع حالة طلباتك بسهولة.',
                                'join_discord': 'انضم لسيرفر الديسكورد',
                                'track_order': 'تتبع شحن وتوصيل طلبك',
                                'most_sold': 'الأكثر مبيعًا 🔥',
                                'subscriptions_section': 'الاشتراكات',
                                'top_up_section': 'شحن الألعاب - Top Up',
                                'offline_steam': 'حسابات ستيم (اوفلاين دائم - اونلاين ايجار)',
                                'enter_order_code': 'أدخل كود الطلب الخاص بك',
                                'shipping_description': 'الصفحة دي لتتبع شحن وتوصيل المنتجات فقط وليس لها علاقة بالvideo gaming',
                                'search': 'بحث',
                                'search_placeholder': 'ابحث عن منتج...',
                                'search_results': 'نتائج البحث',
                                'no_results': 'عذراً، لم يتم العثور على أي منتجات تطابق بحثك.',
                                'all_rights_reserved': 'جميع الحقوق محفوظة.',
                                'payment_safe': 'دفع آمن 100%',
                                'instant_delivery': 'تسليم فوري',
                                'support_24_7': 'دعم فني 24/7',
                                'price_from': 'يبدأ من',
                                'price_per_item': 'السعر',
                                'add_to_cart': 'أضف للسلة',
                                'buy_now': 'شراء الآن',
                                'cart': 'سلة التسوق',
                                'cart_empty': 'سلتك فارغة.',
                                'total': 'الإجمالي',
                                'checkout': 'إتمام الشراء',
                                'go_to_payment': 'اذهب للدفع',
                                'payment_methods': 'طرق الدفع',
                                'choose_payment_method': 'اختر طريقة الدفع المناسبة لك:',
                                'back': 'رجوع',
                                'select_currency_placeholder': 'اختر العملة',
                                'enter_email': 'أدخل إيميلك',
                                'enter_phone': 'الرقم اللي حولت منه',
                                'optional_note': 'أضف ملاحظة (اختياري)',
                                'discount_code': 'كود الخصم',
                                'apply_discount': 'تطبيق',
                                'payment_confirm': 'تم الدفع!',
                                'about_us': 'من نحن؟',
                                'terms': 'شروط الخدمة',
                                'privacy': 'سياسة الخصوصية',
                                'store_reviews': 'تقييمات المتجر',
                                'first_to_rate': 'كن أول من يقيّم المتجر!',
                                'leave_rating': 'اترك تقييمك',
                                'your_name': 'اسمك',
                                'your_review': 'اكتب تعليقك (اختياري)',
                                'submit_review': 'أضف تقييمك',
                                'product_page_desc': 'الوصف',
                                'product_page_specs': 'مواصفات التشغيل للـPC',
                                'product_page_reviews': 'تقييمات العملاء',
                                'product_page_extra': 'معلومات إضافية',
                                'product_page_faq': 'أسئلة وأجوبة',
                                'quantity': 'الكمية',
                                'add_to_cart_btn': 'أضف إلى السلة',
                                'loading_sending_request': 'جاري إرسال طلبك... من فضلك انتظر.',
                                'thanks_for_purchase': 'شكرا لشرائك من Berlin Store',
                                'order_received': 'تم استلام طلبك بنجاح وسيتم ارساله في اقرب وقت.',
                                'language': 'اللغة'
                            },
                            // English
                            en: {
                                'home': 'Home',
                                'products': 'Products',
                                'subscriptions': 'Subscriptions',
                                'top_up': 'Top Up',
                                'steam': 'Steam',
                                'shipping': 'Track Order',
                                'support': 'Support',
                                'welcome_message': 'Welcome to Berlin Store!',
                                'discover_products': 'Discover our new products and track your orders easily.',
                                'join_discord': 'Join our Discord server',
                                'track_order': 'Track your order\'s shipment and delivery',
                                'most_sold': 'Most Sold 🔥',
                                'subscriptions_section': 'Subscriptions',
                                'top_up_section': 'Games Top Up',
                                'offline_steam': 'Steam Accounts (Permanent Offline - Rental Online)',
                                'enter_order_code': 'Enter your order code',
                                'shipping_description': 'This page is for tracking physical shipments only and is not related to video gaming.',
                                'search': 'Search',
                                'search_placeholder': 'Search for a product...',
                                'search_results': 'Search Results',
                                'no_results': 'Sorry, no products were found matching your search.',
                                'all_rights_reserved': 'All Rights Reserved.',
                                'payment_safe': '100% Secure Payment',
                                'instant_delivery': 'Instant Delivery',
                                'support_24_7': '24/7 Support',
                                'price_from': 'Starts from',
                                'price_per_item': 'Price',
                                'add_to_cart': 'Add to Cart',
                                'buy_now': 'Buy Now',
                                'cart': 'Shopping Cart',
                                'cart_empty': 'Your cart is empty.',
                                'total': 'Total',
                                'checkout': 'Checkout',
                                'go_to_payment': 'Go to Payment',
                                'payment_methods': 'Payment Methods',
                                'choose_payment_method': 'Choose your preferred payment method:',
                                'back': 'Back',
                                'select_currency_placeholder': 'Select Currency',
                                'enter_email': 'Enter your email',
                                'enter_phone': 'Phone number used for transfer',
                                'optional_note': 'Add a note (optional)',
                                'discount_code': 'Discount Code',
                                'apply_discount': 'Apply',
                                'payment_confirm': 'Paid!',
                                'about_us': 'About Us',
                                'terms': 'Terms of Service',
                                'privacy': 'Privacy Policy',
                                'store_reviews': 'Store Reviews',
                                'first_to_rate': 'Be the first to rate the store!',
                                'leave_rating': 'Leave a review',
                                'your_name': 'Your Name',
                                'your_review': 'Write your review here (optional)',
                                'submit_review': 'Submit your review',
                                'product_page_desc': 'Description',
                                'product_page_specs': 'PC System Requirements',
                                'product_page_reviews': 'Customer Reviews',
                                'product_page_extra': 'Extra Information',
                                'product_page_faq': 'FAQ',
                                'quantity': 'Quantity',
                                'add_to_cart_btn': 'Add to Cart',
                                'loading_sending_request': 'Sending your request... Please wait.',
                                'thanks_for_purchase': 'Thank you for your purchase from Berlin Store',
                                'order_received': 'Your order has been received successfully and will be sent shortly.',
                                'language': 'Language'
                            }
                        };

                        let currentLanguage = 'ar';

                        let currentCurrency = 'EGP';
                        const exchangeRate = 42; // سعر 1 دولار = 50 جنيه مصري

                        let currentPaymentTotal = 0;

                        // --- دالة جديدة لمعالجة إرسال نماذج الطلبات المخصصة ---
                        function handleCustomOrderSubmit(event) {
                            event.preventDefault(); // منع التحديث التلقائي للصفحة
                            const form = event.target;
                            const submitButton = form.querySelector('button[type="submit"]');
                            submitButton.textContent = 'جاري الإرسال...';
                            submitButton.disabled = true;

                            const formData = new FormData(form);

                            // تحديد نوع الطلب بناءً على id الفورم
                            let orderType = '';
                            switch (form.id) {
                                case 'website-design-form':
                                    orderType = 'Website Design Package';
                                    break;
                                case 'discord-server-form':
                                    orderType = 'Discord Server Design Package';
                                    break;
                                case 'graphic-design-form':
                                    orderType = 'Graphic Design Package';
                                    break;
                                case 'video-editing-form':
                                    orderType = 'Video Editing Package';
                                    break;
                                case 'gaming-content-form':
                                    orderType = 'Gaming and Content Creation Design Package';
                                    break;
                                default:
                                    orderType = 'Custom Order';
                            }
                            formData.append('order_type', orderType); // إضافة نوع الطلب للبيانات

                            const data = Object.fromEntries(formData.entries());
                            // ✅ السطر الجديد بعد التعديل
                            // ✅ The final correct line
                            const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzTnc9hTa4-Ho4r1p7rMdfJhRhVaP7ZQ1hE5Pg_4PaQEUVSB2CFs5cmJQFDSzVEopZI/exec";

                            fetch(SCRIPT_URL, {
                                method: 'POST',
                                mode: 'no-cors',
                                cache: 'no-cache',
                                headers: { 'Content-Type': 'application/json' },
                                body: JSON.stringify(data)
                            })
                                .finally(() => {
                                    showToast("تم إرسال طلبك بنجاح! سنتواصل معك قريبًا.");
                                    form.reset();
                                    submitButton.textContent = 'إرسال الطلب';
                                    submitButton.disabled = false;
                                });
                        }

                        // ربط الدالة بجميع النماذج المخصصة
                        document.getElementById('website-design-form').addEventListener('submit', handleCustomOrderSubmit);
                        document.getElementById('discord-server-form').addEventListener('submit', handleCustomOrderSubmit);
                        document.getElementById('graphic-design-form').addEventListener('submit', handleCustomOrderSubmit);
                        document.getElementById('video-editing-form').addEventListener('submit', handleCustomOrderSubmit);
                        document.getElementById('gaming-content-form').addEventListener('submit', handleCustomOrderSubmit);




                        function loadAllSections() {
                            loadGamesToHome();
                            loadSubscriptionsToHome();
                            loadOfflineSteamGamesToHome();
                            loadSteamGiftCardsToHome();
                            loadSteamPointsToHome();
                            loadSoftwareKeys();
                            loadGenshinImpact();
                            loadFortnite();
                            loadRocketLeague();
                            loadMarvelRivals();
                            loadPlaystationSection();
                            loadXboxSection(); // ✅✅ أضف هذا السطر هنا
                            loadProducts();
                            loadGameRentalsToHome();
                            loadSubscriptions();
                            loadCoDServices();
                        }

                        function changeCurrency() {
                            const selector = document.getElementById('currency-selector');

                            // حماية في حالة لم يتم العثور على العنصر
                            if (!selector) return;

                            currentCurrency = selector.value;

                            // ============================================================
                            // 1. كود تفعيل ترجمة جوجل التلقائية
                            // ============================================================
                            const googleCombo = document.querySelector(".goog-te-combo");
                            if (googleCombo) {
                                if (currentCurrency === 'USD') {
                                    googleCombo.value = 'en'; // تغيير لغة جوجل للإنجليزية
                                } else {
                                    googleCombo.value = 'ar'; // العودة للعربية
                                }
                                // إرسال حدث التغيير للمتصفح ليبدأ جوجل بالترجمة
                                googleCombo.dispatchEvent(new Event("change"));
                            }

                            // ============================================================
                            // 2. كودك القديم (لتغيير النصوص الثابتة والعملات)
                            // ============================================================
                            if (currentCurrency === 'USD') {
                                if (typeof setLanguage === 'function') setLanguage('en');
                            } else {
                                if (typeof setLanguage === 'function') setLanguage('ar');
                            }

                            // 3. تحديث واجهة المستخدم والأسعار
                            loadAllSections();
                            loadPlaystationSection();
                            renderCart();

                            // تحديث حاسبة البوستينج
                            if (typeof calculateBoostingPrice === 'function') {
                                calculateBoostingPrice();
                            }

                            const message = `Region and currency changed to ${currentCurrency}`;
                            showInfoToast(message, 3000);
                        }

                        function addToCartWithAccountReminder(event, productId) {
                            performAddToCart(productId, 1, event);
                            const message = "لا تنسي اضافة الايميل والباسورد في الملاحظات عند اتمام الدفع من خلال السلة";
                            showInfoToast(message, 8000); // 8 ثوانٍ
                        }

                        // دالة جديدة خاصة بـ Valorant
                        function addToCartWithValorantReminder(event, productId) {
                            performAddToCart(productId, 1, event);
                            const message = "لا تنسي اضافة الـ Riot ID في الملاحظات عند اتمام الدفع من خلال السلة";
                            showInfoToast(message, 8000); // 8 ثوانٍ
                        }

                        function addToCartWithGenshinReminder(event, productId) {
                            // 1. تنفيذ الإضافة للسلة والأنيميشن كالمعتاد
                            performAddToCart(productId, 1, event);

                            // 2. إظهار الرسالة المخصصة لـ Genshin UID
                            const message = "لا تنسي اضافة الـ Genshin UID في الملاحظات عند اتمام الدفع من خلال السلة";
                            showInfoToast(message, 8000); // إظهار الرسالة لمدة 8 ثوانٍ
                        }

                        // الدالة الأولى: لعرض نافذة الملاحظات بالمدة المحددة
                        function showInfoToast(message, duration = 3000, type = 'default') {
                            let container = document.getElementById('toast-container');
                            if (!container) {
                                container = document.createElement('div');
                                container.id = 'toast-container';
                                document.body.appendChild(container);
                            }

                            const toast = document.createElement('div');
                            toast.className = `toast-notification ${type}`;

                            // تحديد الأيقونة واللون
                            let icon = '<i class="fas fa-info-circle"></i>';
                            let colorStyle = 'border-color: var(--accent-yellow); color: white;';

                            if (type === 'success') {
                                icon = '<i class="fas fa-check-circle"></i>';
                                colorStyle = 'border-color: #2ecc71; color: #2ecc71; background: rgba(0,0,0,0.95);';
                            } else if (type === 'error') {
                                icon = '<i class="fas fa-exclamation-triangle"></i>';
                                colorStyle = 'border-color: #ff4757; color: #ff4757; background: rgba(0,0,0,0.95);';
                            }

                            // تطبيق الستايل مباشرة لضمان الظهور
                            toast.style.cssText = `
                                                                                                                                display: flex; align-items: center; gap: 10px;
                                                                                                                                padding: 12px 25px; border-radius: 50px;
                                                                                                                                font-size: 14px; font-weight: bold;
                                                                                                                                box-shadow: 0 5px 15px rgba(0,0,0,0.5);
                                                                                                                                margin-top: 10px;
                                                                                                                                opacity: 0; transform: translateY(-20px);
                                                                                                                                transition: all 0.3s ease;
                                                                                                                                ${colorStyle}
                                                                                                                            `;

                            toast.innerHTML = `${icon} <span>${message}</span>`;
                            container.appendChild(toast);

                            // إظهار
                            requestAnimationFrame(() => {
                                toast.style.opacity = '1';
                                toast.style.transform = 'translateY(0)';
                            });

                            // إخفاء
                            setTimeout(() => {
                                toast.style.opacity = '0';
                                toast.style.transform = 'translateY(-20px)';
                                setTimeout(() => toast.remove(), 300);
                            }, duration);
                        }

                        // الدالة الثانية: لتنفيذ الإضافة للسلة مع إظهار الرسالة
                        function addToCartWithReminder(event, productId) {
                            // 1. تنفيذ الإضافة للسلة والأنيميشن كالمعتاد
                            performAddToCart(productId, 1, event);

                            // 2. إظهار الرسالة المخصصة لمدة 5 ثوانٍ
                            const message = "لا تنسي اضافة الـ Steam profile link في الملاحظات عند اتمام الدفع من خلال السلة";
                            showInfoToast(message, 10000); // 5000 ميلي ثانية = 5 ثوانٍ
                        }

                        // دالة لعرض قائمة تقييمات المتجر
                        function renderStoreReviews() {
                            const reviewsContainer = document.getElementById('store-reviews-list');
                            const ratings = JSON.parse(localStorage.getItem('storeRatings')) || [];

                            reviewsContainer.innerHTML = ''; // تفريغ الحاوية قبل إعادة العرض

                            ratings.forEach(review => {
                                const reviewItem = document.createElement('div');
                                reviewItem.className = 'comment-card'; // إعادة استخدام نفس تنسيق كارت التعليقات

                                let starsHTML = '';
                                for (let i = 1; i <= 5; i++) {
                                    starsHTML += `<span class="star ${i <= review.rating ? 'filled' : ''}">★</span>`;
                                }

                                reviewItem.innerHTML = `
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <div class="comment-card-header">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <span class="comment-author">${review.name}</span>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <div class="comment-rating">${starsHTML}</div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <p class="comment-text">${review.text}</p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                `;
                                reviewsContainer.appendChild(reviewItem);
                            });
                        }

                        let currentDiscount = 0;
                        let activeCouponCode = "";
                        let activeCouponType = "";

                        // ✅ تحميل قائمة الأكواد العامة المستخدمة مسبقاً من الذاكرة
                        const USED_GLOBAL_COUPONS = JSON.parse(localStorage.getItem('used_global_coupons')) || [];

                        function applyDiscount(context = 'cart') {
                            // 1. تحديد عناصر الواجهة بناءً على السياق (السلة أو الدفع المباشر)
                            let codeInput, messageDiv, totalElement, originalTotal;
                            let applyBtnId = (context === 'cart') ? 'applyDiscountBtn' : 'vodafoneApplyBtn';

                            if (context === 'cart') {
                                codeInput = document.getElementById('discountCodeInput');
                                messageDiv = document.getElementById('discountMessage');
                                totalElement = document.getElementById('cartTotalPrice');

                                // تنظيف النص للحصول على الرقم فقط
                                if (totalElement) {
                                    originalTotal = parseFloat(totalElement.innerText.replace(/[^0-9.]/g, ''));
                                }
                            } else if (context === 'vodafone') {
                                codeInput = document.getElementById('vodafoneDiscountCodeInput');
                                messageDiv = document.getElementById('vodafoneDiscountMessage');

                                const priceTextElement = document.getElementById('creditcardTotalAmount') || document.getElementById('vodafoneAmountDisplay');
                                if (priceTextElement) {
                                    originalTotal = parseFloat(priceTextElement.innerText.replace(/[^0-9.]/g, ''));
                                }
                            }

                            // التأكد من وجود العناصر لتجنب الأخطاء
                            if (!codeInput || !messageDiv || isNaN(originalTotal)) {
                                console.error("Error: Discount elements not found.");
                                return;
                            }

                            const code = codeInput.value.trim().toUpperCase();
                            messageDiv.textContent = '';
                            messageDiv.className = 'discount-message';

                            if (!code) {
                                messageDiv.textContent = 'الرجاء إدخال كود الخصم.';
                                messageDiv.classList.add('error');
                                return;
                            }

                            // 2. تعريف الأكواد والتحقق
                            const shopCodes = ['BERLLINSTOREEEE541241251251251', 'BERLLINSTOREEEE10541241251251251']; // أكواد قابلة للاستهلاك
                            const staticCodes = ['GOE', 'SOHAYL', 'SAMA', 'HEX']; // أكواد ثابتة (مرة واحدة)
                            const inventory = JSON.parse(localStorage.getItem('my_coupon_inventory')) || [];

                            let discountPercent = 0;
                            let isValid = false;

                            // --- الحالة A: كود من المتجر (يجب شراؤه أولاً) ---
                            if (shopCodes.includes(code)) {
                                if (inventory.includes(code)) {
                                    discountPercent = (code === 'BERLLINSTOREEEE541241251251251') ? 0.05 : 0.10; // 5% أو 10%
                                    activeCouponType = 'consumable';
                                    isValid = true;
                                } else {
                                    messageDiv.textContent = '🔒 لا تملك هذا الكود! يجب شراؤه من متجر النقاط أولاً.';
                                    messageDiv.classList.add('error');
                                    return;
                                }
                            }
                            // --- الحالة B: كود عام (مرة واحدة فقط) ---
                            else if (staticCodes.includes(code)) {
                                if (USED_GLOBAL_COUPONS.includes(code)) {
                                    messageDiv.textContent = '⛔ لقد استخدمت هذا الكود مسبقاً (صالح لمرة واحدة فقط).';
                                    messageDiv.classList.add('error');
                                    return;
                                } else {
                                    // ✅ تحديد النسب الجديدة بدقة
                                    if (code === 'GOE' || code === 'SAMA' || code === 'HEX') {
                                        discountPercent = 0.03; // 3%
                                    } else if (code === 'SOHAYL') {
                                        discountPercent = 0.02; // 2%
                                    }
                                    activeCouponType = 'static';
                                    isValid = true;
                                }
                            }
                            else {
                                messageDiv.textContent = '❌ كود خاطئ أو غير صالح.';
                                messageDiv.classList.add('error');
                                return;
                            }

                            // 3. --- ✅ تطبيق الخصم ---
                            if (isValid) {
                                const discountValue = originalTotal * discountPercent;
                                const newTotal = originalTotal - discountValue;

                                currentDiscount = discountValue;
                                activeCouponCode = code;

                                messageDiv.innerHTML = `✅ تم تطبيق كود <strong>${code}</strong><br>خصم ${(discountPercent * 100)}% (وفرت ${discountValue.toFixed(2)} EGP)`;
                                messageDiv.classList.add('success');

                                // تحديث السعر في الواجهة
                                if (context === 'cart') {
                                    totalElement.innerHTML = `<span style="text-decoration: line-through; color: #aaa; font-size: 14px;">${originalTotal.toFixed(2)}</span> ${newTotal.toFixed(2)}`;
                                } else if (context === 'vodafone') {
                                    const amountDisplay = document.getElementById('vodafoneAmountDisplay');
                                    if (amountDisplay) amountDisplay.textContent = newTotal.toFixed(2) + ' EGP';

                                    const totalHeader = document.getElementById('creditcardTotalAmount');
                                    if (totalHeader) totalHeader.innerHTML = `<span style="text-decoration: line-through; color: #aaa; font-size: 12px;">${originalTotal.toFixed(2)}</span> ${newTotal.toFixed(2)} EGP`;
                                }

                                // 🛑 قفل الحقل لمنع التغيير بعد التطبيق
                                codeInput.disabled = true;
                                const applyBtn = document.getElementById(applyBtnId);
                                if (applyBtn) {
                                    applyBtn.disabled = true;
                                    applyBtn.innerText = "تم التطبيق";
                                    applyBtn.style.backgroundColor = "#ccc";
                                    applyBtn.style.cursor = "default";
                                }

                                // تشغيل صوت نجاح
                                const audio = new Audio('https://www.myinstants.com/media/sounds/success-1-6297.mp3');
                                audio.volume = 0.2;
                                audio.play().catch(e => { });
                            }
                        }

                        function lockDiscountUI(inputId, buttonId, code) {
                            const input = document.getElementById(inputId);
                            const button = document.getElementById(buttonId);

                            if (input) {
                                input.disabled = true;
                                input.placeholder = `✅ الكود ${code} مُطبَّق وفعّال`;
                                input.value = code;
                            }
                            if (button) {
                                button.disabled = true;
                                button.textContent = 'مُطَبَّق';
                                button.style.cursor = 'not-allowed';
                                button.style.backgroundColor = '#555';
                                button.style.borderColor = '#555';
                            }
                        }

                        // دالة لحفظ وإرسال تقييم المتجر
                        function submitStoreRating() {
                            const nameInput = document.getElementById('rating-name');
                            const textInput = document.getElementById('rating-text');
                            const ratingInput = document.getElementById('storeRatingInput');
                            const messageElement = document.getElementById('feedback-message');

                            const name = nameInput.value;
                            const text = textInput.value;
                            const rating = parseInt(ratingInput.value);

                            if (!name) {
                                alert('الرجاء إدخال اسمك.');
                                return;
                            }
                            if (rating === 0) {
                                alert('الرجاء اختيار تقييم (من 1 إلى 5 نجوم).');
                                return;
                            }

                            const newRating = {
                                name: name,
                                text: text || " ",
                                rating: rating,
                                date: new Date().toISOString()
                            };

                            // حفظ التقييمات في Local Storage
                            let ratings = JSON.parse(localStorage.getItem('storeRatings')) || [];
                            ratings.unshift(newRating); // إضافة التقييم الجديد في البداية
                            localStorage.setItem('storeRatings', JSON.stringify(ratings));

                            messageElement.textContent = "شكرًا لتقييمك! رأيك يهمنا.";
                            messageElement.style.color = '#00ff00';

                            // إعادة تحميل عرض التقييمات لتحديث المتوسط
                            loadStoreRatings();

                            // تفريغ الحقول
                            nameInput.value = '';
                            textInput.value = '';
                            ratingInput.value = '0';
                            document.getElementById('storeRatingStars').dataset.rating = '0';

                            setTimeout(() => { messageElement.textContent = ''; }, 4000);
                        }

                        // دالة لجعل النجوم في فورم الإضافة تفاعلية
                        function setupStoreRatingInput() {
                            const starsContainer = document.getElementById('storeRatingStars');
                            if (!starsContainer) return;

                            const ratingInput = document.getElementById('storeRatingInput');
                            const stars = starsContainer.querySelectorAll('.star');

                            stars.forEach(star => {
                                star.addEventListener('click', () => {
                                    const value = star.dataset.value;
                                    ratingInput.value = value;
                                    starsContainer.dataset.rating = value;
                                });
                            });
                        }

                        // ✅ الكود الجديد والمعدل لدالة عرض التقييمات
                        function loadStoreRatings() {
                            const displayContainer = document.getElementById('store-average-rating-display');
                            const reviewsListContainer = document.getElementById('store-reviews-list');

                            // 1. جلب التقييمات الفعلية (التي حفظها المستخدمون)
                            const ratings = JSON.parse(localStorage.getItem('storeRatings')) || [];

                            // 2. حساب المتوسط الحقيقي
                            let totalRating = 0;
                            if (ratings.length > 0) {
                                totalRating = ratings.reduce((sum, review) => sum + review.rating, 0);
                            }

                            // إذا لم يكن هناك تقييمات من المستخدمين، نستخدم قيم افتراضية منطقية.
                            const reviewCount = ratings.length > 0 ? ratings.length : 322; // نعتمد على العدد الفعلي
                            const averageRating = ratings.length > 0 ? (totalRating / ratings.length).toFixed(1) : '5.0'; // نعتمد على المتوسط الفعلي

                            // 3. بناء شريط النجوم
                            let starsHTML = '';
                            const fullStars = Math.floor(averageRating);
                            const hasHalfStar = (averageRating - fullStars) >= 0.5;

                            for (let i = 1; i <= 5; i++) {
                                if (i <= fullStars) {
                                    starsHTML += `<span class="star filled">★</span>`; // نجوم ممتلئة
                                } else if (i === fullStars + 1 && hasHalfStar) {
                                    // يمكن استخدام أيقونة نصف نجمة هنا أو نجمة ممتلئة للمظهر
                                    starsHTML += `<span class="star filled" style="opacity: 0.5;">★</span>`; // نصف نجمة (نستخدم نصف شفافية للنجمة الممتلئة)
                                } else {
                                    starsHTML += `<span class="star empty">★</span>`; // نجوم فارغة
                                }
                            }

                            // 4. تحديث الواجهة
                            displayContainer.innerHTML = `
                                                                                                                                                                                                        <div class="stars">${starsHTML}</div>
                                                                                                                                                                                                        <p class="summary-text" style="color: #fff;">
                                                                                                                                                                                                            متوسط تقييم ${averageRating} نجوم
                                                                                                                                                                                                            <br>
                                                                                                                                                                                                            من إجمالي ${reviewCount} تقييم
                                                                                                                                                                                                        </p>
                                                                                                                                                                                                    `;

                            // 5. عرض قائمة التقييمات التفصيلية أيضاً
                            renderStoreReviews();
                        }

                        function loadDiscordDecorations() {
                            // هذه الدالة لم تعد تقوم بشيء لأن المحتوى أصبح ثابتًا في ملف HTML
                        }

                        function loadPlaystationSection() {
                            const plusContainer = document.getElementById('ps-plus-container');
                            const cardsContainer = document.getElementById('psn-gift-cards-container');

                            if (!plusContainer || !cardsContainer) return;

                            plusContainer.innerHTML = '';
                            cardsContainer.innerHTML = '';

                            for (const productId in productsData) {
                                const product = productsData[productId];

                                if (product.category === 'ps-plus') {
                                    renderProductItem(product, plusContainer, 'subscriptions', true);
                                }
                                else if (product.category === 'psn-cards') {
                                    renderProductItem(product, cardsContainer, 'psn-cards', true);
                                }
                            }
                        }

                        function performGlobalSearch(query) {
                            const lowerQuery = query.toLowerCase().trim();

                            if (lowerQuery === 'matrix') {
                                document.body.classList.toggle('hacker-mode');
                                showGameAlert("🕵️‍♂️ Matrix Mode Activated!", "cheat");
                                return;
                            }
                            if (lowerQuery === 'hesoyam') {
                                showGameAlert("💰 $250,000 Added (Just Kidding!)", "cheat");
                                return;
                            }
                            if (lowerQuery === 'aimbot') {
                                document.body.style.cursor = 'crosshair';
                                showGameAlert("🎯 Aim Assist Enabled!", "cheat");
                                return;
                            }
                            if (lowerQuery === 'itakura' || lowerQuery === 'aptx4869' || lowerQuery === 'vermouth') {
                                triggerItakuraEffect();
                                return;
                            }
                            // 1. ينقلك تلقائيًا إلى صفحة عرض نتائج البحث
                            window.location.hash = '#searchResults';

                            const searchTerm = query.toLowerCase().trim();
                            if (searchTerm === 'matrix') {
                                document.body.classList.toggle('hacker-mode');
                                return; // الـ return مهمة عشان يوقف دالة البحث وميفتحش صفحة النتائج
                            }
                            const resultsContainer = document.getElementById('searchResultsContainer');
                            const resultsTitle = document.getElementById('searchResultsTitle');
                            const noResultsMsg = document.getElementById('noResultsMessage');

                            calculateDiscordDecoPrice();

                            // 2. يجهز الصفحة عن طريق تحديث العنوان وتفريغ النتائج القديمة
                            resultsTitle.textContent = `نتائج البحث عن: "${query}"`;
                            resultsContainer.innerHTML = '';
                            noResultsMsg.style.display = 'none';

                            let resultsFound = 0;

                            // 3. يبدأ البحث في كل المنتجات الموجودة في قاعدة البيانات
                            for (const productId in productsData) {
                                const product = productsData[productId];

                                // البحث في العنوان
                                const productTitle = product.title.toLowerCase();

                                // البحث في الوصف القصير
                                const productShortDesc = (product.shortDescription || '').toLowerCase();

                                // البحث في الوصف الكامل (مع إزالة أكواد HTML لضمان دقة البحث)
                                const tempDiv = document.createElement('div');
                                tempDiv.innerHTML = product.fullDescription || '';
                                const fullDescText = (tempDiv.textContent || '').toLowerCase();

                                // 4. التحقق إذا كانت كلمة البحث موجودة في أي من الثلاثة (العنوان أو الوصفين)
                                if (productTitle.includes(searchTerm) ||
                                    productShortDesc.includes(searchTerm) ||
                                    fullDescText.includes(searchTerm)) {

                                    // إذا تم العثور على نتيجة، يتم عرض المنتج
                                    renderProductItem(product, resultsContainer, 'search', true);
                                    resultsFound++;
                                }
                            }

                            // 5. في حالة عدم العثور على أي منتج مطابق، تظهر رسالة للمستخدم
                            if (resultsFound === 0) {
                                noResultsMsg.style.display = 'block';
                            }
                        }

                        const productsData = {


                            // ============================
                            // ⚔️ Sekiro: Shadows Die Twice
                            // ============================
                            'sekiro_offline': {
                                id: 'sekiro_offline',
                                title: 'Sekiro: Shadows Die Twice - GOTY',
                                price: 40, // 👈 سعر اللعبة (عدله براحتك)
                                image: './images/sekiro.png', // تأكد إن الصورة بنفس الاسم
                                category: 'offline-steam', // ⚠️ ده أهم سطر عشان تظهر في قسم الأوفلاين
                                platform: 'Steam',
                                shortDescription: 'اسطورة السولز - نسخة العام',
                                fullDescription: 'تختيم فقطلعبة أكشن ومغامرات صعبة من منظور الشخص الثالث، من تطوير FromSoftware، تقع أحداثها في اليابان في أواخر القرن السادس عشر، حيث تلعب دور "ذئب" (Wolf)، محارب شينوبي مخلص يحاول إنقاذ سيده الشاب من أعدائه، مع التركيز على القتال السريع والبراعة في التخفي واستخدام أدوات النينجا الفريدة، والعودة من الموت للانتقام..',
                                stock: 20,
                            },
                            "thelastofus_offline": {
                                id: "thelastofus_offline",
                                title: "The Last of Us Part 2",
                                price: 100,
                                image: "./images/tlou2.png",
                                images: [
                                    "./images/tlou2_1.jpg", // الصورة الأولى في السلايدر
                                    "./images/tlou2_2.jpg", // الصورة الثانية
                                    "./images/tlou2_3.jpg", // الصورة الثالثة
                                    "./images/tlou2_4.jpg"  // وهكذا...
                                ],
                                shortDescription: "معضلة الانتقام",
                                fullDescription: "انطلق في رحلة عاطفية وبقائية لا تُنسى مع Ellie في عالم ما بعد الكارثة. هذا الحساب الأوفلاين يتيح لك تجربة القصة الكاملة للعبة.",
                                platform: 'steam',
                                badges: ['OFFLINE'],
                                specs: `<h3>متطلبات تشغيل The Last of Us Part II الموصى بها</h3>
                                                                                                                                                                                                                                                                                                                                                                                                                                                <ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>نظام التشغيل:</strong> Windows 10 64-bit</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>المعالج:</strong> Intel Core i7-8700K أو AMD Ryzen 5 3600X</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>الذاكرة العشوائية (RAM):</strong> 16 GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>بطاقة الرسومات (GPU):</strong> NVIDIA GeForce RTX 4060 أوRTX 3060 أو AMD Radeon RX 5700 XT (8 GB)</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>مساحة تخزين:</strong> 100 GB SSD (موصى به)</li>

                                                                                                                                                                                                                                                                                                                                                                                                                                                </ul>`
                            },
                            // =================== ALL COD OFFLINE GAMES (FINAL LOCAL IMAGES) START ===================
                            "mw1_offline": {
                                id: "mw1_offline",
                                title: "Call of Duty: Modern Warfare (2019)",
                                price: 100,
                                usd_price: 2.38,
                                image: "./images/cod_mw_2019.png",
                                shortDescription: "القصص لا تكتب الأبطال. الأبطال يكتبون القصص.",
                                fullDescription: "انغمس في قصة ملحمية تجسد حرب العصر الحديث. العب كعميل من المستوى الأول في ملحمة تؤثر على توازن القوى العالمي.",
                                platform: 'steam',
                                badges: ['OFFLINE'],
                                category: "cod-games"
                            },
                            "mw2_offline": {
                                id: "mw2_offline",
                                title: "Call of Duty: Modern Warfare II (2022)",
                                price: 130,
                                usd_price: 3.10,
                                image: "./images/cod_mw2_2022.png",
                                shortDescription: "فرقة المهمات 141 تعود من جديد.",
                                fullDescription: "انضم إلى فرقة المهمات 141 الأسطورية في حملة عالمية الطراز. استمتع بمهام متنوعة وأسلوب لعب متطور في طور القصة المثير.",
                                platform: 'steam',
                                badges: ['OFFLINE'],
                                category: "cod-games"
                            },
                            "mw3_offline": {
                                id: "mw3_offline",
                                title: "Call of Duty: Modern Warfare III (2023)",
                                price: 150,
                                usd_price: 3.57,
                                image: "./images/cod_mw3_2023.png",
                                shortDescription: "التهديد المطلق ينتظر.",
                                fullDescription: "يواجه الكابتن برايس وفرقة المهمات 141 التهديد المطلق. قاتل كما لم يحدث من قبل وأوقف فلاديمير ماكاروف.",
                                platform: 'steam',
                                badges: ['OFFLINE'],
                                category: "cod-games"
                            },
                            "cod_bo_cold_war_offline": {
                                id: "cod_bo_cold_war_offline",
                                title: "Call of Duty: Black Ops Cold War",
                                price: 130,
                                usd_price: 3.10,
                                image: "./images/cod_black_ops_cold_war.png",
                                shortDescription: "لا تعرف التاريخ. اعرف الحقيقة.",
                                fullDescription: "انغمس في عمق المعركة الجيوسياسية المتقلبة للحرب الباردة في أوائل الثمانينيات. لا شيء يبدو كما هو في طور القصة الفردي المثير.",
                                platform: 'steam',
                                badges: ['OFFLINE'],
                                category: "cod-games"
                            },
                            "cod_vanguard_offline": {
                                id: "cod_vanguard_offline",
                                title: "Call of Duty: Vanguard",
                                price: 120,
                                usd_price: 2.86,
                                image: "./images/cod_vanguard.png",
                                shortDescription: "قم بتغيير مجرى التاريخ.",
                                fullDescription: "قاتل في معارك محورية في الحرب العالمية الثانية من خلال عيون أبطال فرقة العمليات الخاصة الأولى.",
                                platform: 'steam',
                                badges: ['OFFLINE'],
                                category: "cod-games"
                            },
                            "cod_bo3_offline": {
                                id: "cod_bo3_offline",
                                title: "Call of Duty: Black Ops III",
                                price: 90,
                                usd_price: 2.14,
                                image: "./images/cod_black_ops_3.png",
                                shortDescription: "مستقبل مظلم حيث الخطوط غير واضحة.",
                                fullDescription: "ادخل إلى مستقبل مظلم حيث يظهر نوع جديد من جنود Black Ops وتصبح الخطوط غير واضحة بين الإنسانية والتكنولوجيا.",
                                platform: 'steam',
                                badges: ['OFFLINE'],
                                category: "cod-games"
                            },
                            "cod_bo2_offline": {
                                id: "cod_bo2_offline",
                                title: "Call of Duty: Black Ops II",
                                price: 80,
                                usd_price: 1.90,
                                image: "./images/cod_black_ops_2.png",
                                shortDescription: "الحرب الباردة في القرن الحادي والعشرين.",
                                fullDescription: "تدفع لعبة Black Ops II اللاعبين إلى مستقبل قريب، حيث تتلاقى التكنولوجيا والأسلحة لإنشاء جيل جديد من الحروب.",
                                platform: 'steam',
                                badges: ['OFFLINE'],
                                category: "cod-games"
                            },
                            "cod_black_ops_offline": {
                                id: "cod_black_ops_offline",
                                title: "Call of Duty: Black Ops",
                                price: 80,
                                usd_price: 1.90,
                                image: "./images/cod_black_ops_1.png",
                                shortDescription: "ادخل في قلب الحرب الباردة.",
                                fullDescription: "أكبر سلسلة أكشن منظور الشخص الأول في كل العصور تعود مع الجزء الملحمي Call of Duty: Black Ops.",
                                platform: 'steam',
                                badges: ['OFFLINE'],
                                category: "cod-games"
                            },
                            "cod_advanced_warfare_offline": {
                                id: "cod_advanced_warfare_offline",
                                title: "Call of Duty: Advanced Warfare",
                                price: 90,
                                usd_price: 2.14,
                                image: "./images/cod_advanced_warfare.png",
                                shortDescription: "القوة تغير كل شيء.",
                                fullDescription: "تقدم Call of Duty: Advanced Warfare رؤية قوية لمستقبل المعارك، حيث تلعب التكنولوجيا والخطط التكتيكية دورًا جديدًا.",
                                platform: 'steam',
                                badges: ['OFFLINE'],
                                category: "cod-games"
                            },
                            "cod_infinite_warfare_offline": {
                                id: "cod_infinite_warfare_offline",
                                title: "Call of Duty: Infinite Warfare",
                                price: 90,
                                usd_price: 2.14,
                                image: "./images/cod_infinite_warfare.png",
                                shortDescription: "حرب تمتد عبر نظامنا الشمسي.",
                                fullDescription: "تقدم Infinite Warfare ثلاثة أوضاع لعب فريدة: طور القصة الذي يعود إلى الجذور العسكرية القاسية للسلسلة، وطور اللعب الجماعي، وطور الزومبي.",
                                platform: 'steam',
                                badges: ['OFFLINE'],
                                category: "cod-games"
                            },
                            "cod_wwii_offline": {
                                id: "cod_wwii_offline",
                                title: "Call of Duty: WWII",
                                price: 90,
                                usd_price: 2.14,
                                image: "./images/cod_wwii.png",
                                shortDescription: "عودة إلى جذور السلسلة.",
                                fullDescription: "تقدم Call of Duty: WWII تجربة الحرب العالمية الثانية الحاسمة للجيل الجديد. اهبط في نورماندي وقاتل عبر أوروبا.",
                                platform: 'steam',
                                badges: ['OFFLINE'],
                                category: "cod-games"
                            },
                            "cod_ghosts_offline": {
                                id: "cod_ghosts_offline",
                                title: "Call of Duty: Ghosts",
                                price: 80,
                                usd_price: 1.90,
                                image: "./images/cod_ghosts.png",
                                shortDescription: "تفوق عددي. تفوق تسليحي.",
                                fullDescription: "بعد عشر سنوات من حدث مدمر، انضم إلى 'الأشباح'، بقايا قوات العمليات الخاصة، في قتال ضد قوة عالمية جديدة.",
                                platform: 'steam',
                                badges: ['OFFLINE'],
                                category: "cod-games"
                            },
                            "cod_mw3_original_offline": {
                                id: "cod_mw3_original_offline",
                                title: "CoD: Modern Warfare 3 (2011)",
                                price: 80,
                                usd_price: 1.90,
                                image: "./images/cod_mw3_2011.png",
                                shortDescription: "نهاية ثلاثية Modern Warfare الأصلية.",
                                fullDescription: "لعبة الأكشن الأكثر مبيعًا في كل العصور تعود مع التكملة الملحمية لـ Modern Warfare 2. استكمل القصة وواجه ماكاروف.",
                                platform: 'steam',
                                badges: ['OFFLINE'],
                                category: "cod-games"
                            },
                            "cod_mw2_original_offline": {
                                id: "cod_mw2_original_offline",
                                title: "CoD: Modern Warfare 2 (2009)",
                                price: 80,
                                usd_price: 1.90,
                                image: "./images/cod_mw2_2009.png",
                                shortDescription: "التكملة الأكثر انتظارًا في التاريخ.",
                                fullDescription: "تكملة لأفضل لعبة أكشن منظور شخص أول على الإطلاق، تواصل Modern Warfare 2 القصة الملحمية وتأخذ اللاعبين في مواجهة تهديد جديد.",
                                platform: 'steam',
                                badges: ['OFFLINE'],
                                category: "cod-games"
                            },
                            "cod_mw_2007_offline": {
                                id: "cod_mw_2007_offline",
                                title: "CoD 4: Modern Warfare (2007)",
                                price: 80,
                                usd_price: 1.90,
                                image: "./images/cod_mw_2007.png",
                                shortDescription: "اللعبة التي غيرت كل شيء.",
                                fullDescription: "واحدة من أكثر الألعاب شهرة في التاريخ، Call of Duty 4: Modern Warfare. استرجع واحدة من أكثر الحملات شهرة في التاريخ.",
                                platform: 'steam',
                                badges: ['OFFLINE'],
                                category: "cod-games"
                            },
                            "cod_world_at_war_offline": {
                                id: "cod_world_at_war_offline",
                                title: "Call of Duty: World at War",
                                price: 80,
                                usd_price: 1.90,
                                image: "./images/cod_world_at_war.png",
                                shortDescription: "قاتل في ساحات معارك المحيط الهادئ وأوروبا.",
                                fullDescription: "تأخذ Call of Duty: World at War اللاعبين إلى معارك الحرب العالمية الثانية النهائية ضد أعداء لم يستسلموا أبدًا.",
                                platform: 'steam',
                                badges: ['OFFLINE'],
                                category: "cod-games"
                            },
                            "cod2_offline": {
                                id: "cod2_offline",
                                title: "Call of Duty 2",
                                price: 70,
                                usd_price: 1.67,
                                image: "./images/cod_2.png",
                                shortDescription: "تجربة مكثفة للحرب العالمية الثانية.",
                                fullDescription: "تقدم Call of Duty 2 معارك أكبر وأكثر كثافة وواقعية من أي وقت مضى، بفضل رسوميات محرك COD™2 المذهلة.",
                                platform: 'steam',
                                badges: ['OFFLINE'],
                                category: "cod-games"
                            },
                            "cod1_offline": {
                                id: "cod1_offline",
                                title: "Call of Duty (Original)",
                                price: 70,
                                usd_price: 1.67,
                                image: "./images/cod_1.png",
                                shortDescription: "اللعبة التي بدأت كل شيء.",
                                fullDescription: "عش التجربة السينمائية المكثفة للحرب العالمية الثانية من خلال عيون جنود عاديين يقاتلون معًا في فرقة واحدة.",
                                platform: 'steam',
                                badges: ['OFFLINE'],
                                category: "cod-games"
                            },
                            // =================== ALL COD OFFLINE GAMES END ===================,
                            // =================== ALL COD OFFLINE GAMES END ===================
                            "splitfiction_rent": {
                                id: "splitfiction_rent",
                                title: "Split Fiction",
                                image: "./images/split.png",
                                shortDescription: "أفضل لعبة تعاونية. حساب ستيم يتيح لك تختيم اللعبة بالكامل",
                                fullDescription: "احصل على حساب ستيم بإيجار للعبة Split Fiction. الخيار الأفضل لتجربة اللعبة بالكامل دون الحاجة للشراء الدائم.",
                                platform: 'steam',
                                isRentable: true,
                                options: {
                                    "two_weeks": { title: "أسبوعين", price: 99 },
                                    "one_month": { title: "شهر", price: 140 },
                                    "two_months": { title: "شهرين", price: 190 }
                                }
                            },
                            "gta": {
                                id: "gta",
                                title: "حساب GTA 5 Steam",
                                price: 750,
                                image: "./images/GTA5Banner.png",
                                shortDescription: "ابدأ رحلتك في لوس سانتوس",
                                fullDescription: "انغمس في عالم لوس سانتوس المترامي الأطراف! أفضل تجربة عالمها مفتوح تشمل طور القصة والاونلاين، هذا الحساب يمنحك الصلاحيات كاملة .",
                                platform: 'steam',
                                specs: `<h3>متطلبات تشغيل Grand Theft Auto V</h3>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>نظام التشغيل:</strong> Windows 8.1 64 Bit, Windows 8 64 Bit, Windows 7 64 Bit Service Pack 1</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>المعالج:</strong> Intel Core 2 Quad CPU Q6600 @ 2.40GHz (4 CPUs) / AMD Phenom 9850 Quad-Core Processor (4 CPUs) @ 2.5GHz</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>الذاكرة العشوائية (RAM):</strong> 4 GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>بطاقة الرسومات (GPU):</strong> NVIDIA 9800 GT 1GB / AMD HD 4870 1GB (DX 10, 10.1, 11)</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>مساحة تخزين:</strong> 72 GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                </ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <hr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>نظام التشغيل:</strong> Windows 10 64 Bit</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>المعالج:</strong> Intel Core i5 3470 @ 3.2GHz (4 CPUs) / AMD X8 FX-8350 @ 4GHz (8 CPUs)</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>الذاكرة العشوائية (RAM):</strong> 8 GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>بطاقة الرسومات (GPU):</strong> NVIDIA GTX 660 2GB / AMD HD 7870 2GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>مساحة تخزين:</strong> 72 GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                </ul>`
                            },
                            "battlefield_6": {
                                id: "battlefield_6",
                                title: "حساب Battlefield 6",
                                price: 1900,
                                usd_price: 45.24,
                                image: "./images/bf6.png", // ❗ تحتاج لإضافة صورة بهذا الاسم
                                shortDescription: "ستيم - فل اكسس", // ✅ تم تعديل الوصف
                                fullDescription: "احصل على حسابك الخاص للعبة Battlefield 6 (نسخة الـ PC). الحساب لك بالكامل بجميع بياناته.", // ✅ تم تعديل الوصف
                                platform: 'steam',
                                /* ❌ تم حذف 'badges' و 'requiresAccountDetails' لأنها حسابات عادية */
                                specs: `<p>متطلبات التشغيل الرسمية سيتم تحديدها عند إطلاق اللعبة.</p>`
                            },
                            "fc_26": {
                                id: "fc_26",
                                title: "حساب EA Sports FC 26",
                                price: 1900,
                                usd_price: 45.24,
                                image: "./images/fc26.png", // ❗ تحتاج لإضافة صورة بهذا الاسم
                                shortDescription: "ستيم - فل اكسس", // ✅ تم تعديل الوصف
                                fullDescription: "احصل على حسابك الخاص للعبة FC 26 (نسخة الـ PC). الحساب لك بالكامل بجميع بياناته لتستمتع بـ Ultimate Team و Career Mode.", // ✅ تم تعديل الوصف
                                platform: 'steam',
                                /* ❌ تم حذف 'badges' و 'requiresAccountDetails' */
                                specs: `<p>متطلبات التشغيل الرسمية سيتم تحديدها عند إطلاق اللعبة.</p>`
                            },
                            " ": {
                                id: "minecraft",
                                title: "حساب Minecraft",
                                price: 650,
                                image: "./images/minecraft.png",
                                shortDescription: "ابدأ رحلتك الماينكرافتة",
                                fullDescription: "ابدأ رحلتك الماين كرافتية! ابن بيتك، استكشف كهوفاً غامضة، وحارب الوحوش في الليل. عش تجربة البقاء على قيد الحياة بمفردك أو التعاون مع أصدقائك، هذا الحساب الرسمي من يمنحك صلاحيات كاملة لتشكيل عالمك كما تتخيل. المغامرة تنتظرك في كل زاوية!",
                                platform: 'microsoft',
                                stock: 3,
                                specs: `<h3>متطلبات تشغيل Minecraft: Java Edition</h3>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>نظام التشغيل:</strong> Windows 7 والإصدارات الأحدث</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>المعالج:</strong> Intel Core i3-3210 3.2 GHz / AMD A8-7600 APU 3.1 GHz أو ما يعادله</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>الذاكرة العشوائية (RAM):</strong> 4 GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>بطاقة الرسومات (GPU):</strong> Intel HD Graphics 4000 (Ivy Bridge) or AMD Radeon R5 series (Kaveri line) with OpenGL 4.4</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>مساحة تخزين:</strong> 1 GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                </ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <hr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>نظام التشغيل:</strong> Windows 10 64-bit</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>المعالج:</strong> Intel Core i5-4690 3.5GHz / AMD A10-7800 APU 3.5 GHz أو ما يعادله</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>الذاكرة العشوائية (RAM):</strong> 8 GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>بطاقة الرسومات (GPU):</strong> GeForce 700 Series or AMD Radeon Rx 200 Series (excluding integrated chipsets) with OpenGL 4.5</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>مساحة تخزين:</strong> 4 GB (SSD موصى به)</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                </ul>`
                            },
                            "residentevil_offline": {
                                id: "residentevil_offline",
                                title: "Resident Evil 8: Village",
                                price: 150,
                                image: "./images/residentevil8.png",
                                shortDescription: "قصر لا مفر منه",
                                fullDescription: "جرب قصة رعب البقاء على قيد الحياة النهائية في Resident Evil Village، الجزء الثامن من سلسلة Resident Evil. مع رسومات مفصلة للغاية، وأكشن عنيف من منظور الشخص الأول، وقصة بارعة، لم يكن الرعب أكثر واقعية من قبل.",
                                platform: 'steam',
                                badges: ['OFFLINE'],
                                specs: `<h3>متطلبات تشغيل Resident Evil Village</h3>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>نظام التشغيل:</strong> Windows 10 (64-bit)</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>المعالج:</strong> Intel Core i5-7500 / AMD Ryzen 3 1200</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>الذاكرة العشوائية (RAM):</strong> 8 GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>بطاقة الرسومات (GPU):</strong> NVIDIA GeForce GTX 1050 Ti with 4GB VRAM / AMD Radeon RX 560 with 4GB VRAM</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>مساحة تخزين:</strong> 25 GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                </ul>`
                            },
                            "splitfiction": {
                                id: "splitfiction",
                                title: "حساب Split Fiction",
                                price: 99,
                                image: "./images/split.png",
                                shortDescription: "أفضل تجربة CO-OP",
                                fullDescription: "مستعد لتجربة قصة فريدة من نوعها؟ Split Fiction تقدم لك مغامرة سينمائية لا مثيل لها. استأجر اللعبة الآن لمدة أسبوعين، وهي فترة مثالية لإنهاء القصة المذهلة والاستمتاع بكل لحظاتها المشوقة دون الحاجة لشراء اللعبة كاملة. فرصة لا تعوض لتجربة واحدة من أروع الألعاب!",
                                platform: 'steam',
                                specs: `<p>لا توجد مواصفات رسمية لهذه اللعبة بعد.</p>`
                            },
                            // =================== COD OFFLINE GAMES START ===================
                            "mw1_offline": {
                                id: "mw1_offline",
                                title: "Call of Duty: Modern Warfare (2019)",
                                price: 100,
                                usd_price: 2.38,
                                image: "./images/cod_mw1.png", // ❗ تأكد من إضافة صورة بهذا الاسم
                                shortDescription: "القصص لا تكتب الأبطال. الأبطال يكتبون القصص.",
                                fullDescription: "انغمس في قصة ملحمية تجسد حرب العصر الحديث. العب كعميل من المستوى الأول في ملحمة تؤثر على توازن القوى العالمي. هذا الحساب يتيح لك تجربة طور القصة الكامل.",
                                platform: 'steam',
                                badges: ['OFFLINE'],
                                category: "cod-games" // <-- فئة جديدة ومهمة
                            },
                            "mw2_offline": {
                                id: "mw2_offline",
                                title: "Call of Duty: Modern Warfare II (2022)",
                                price: 130,
                                usd_price: 3.10,
                                image: "./images/cod_mw2.png", // ❗ تأكد من إضافة صورة بهذا الاسم
                                shortDescription: "فرقة المهمات 141 تعود من جديد.",
                                fullDescription: "انضم إلى فرقة المهمات 141 الأسطورية في حملة عالمية الطراز. استمتع بمهام متنوعة وأسلوب لعب متطور في طور القصة المثير لهذا الجزء.",
                                platform: 'steam',
                                badges: ['OFFLINE'],
                                category: "cod-games" // <-- فئة جديدة ومهمة
                            },
                            "mw3_offline": {
                                id: "mw3_offline",
                                title: "Call of Duty: Modern Warfare III (2023)",
                                price: 150,
                                usd_price: 3.57,
                                image: "./images/cod_mw3.png", // ❗ تأكد من إضافة صورة بهذا الاسم
                                shortDescription: "التهديد المطلق ينتظر.",
                                fullDescription: "يواجه الكابتن برايس وفرقة المهمات 141 التهديد المطلق. قاتل كما لم يحدث من قبل وأوقف فلاديمير ماكاروف قبل أن يبسط سيطرته على العالم.",
                                platform: 'steam',
                                badges: ['OFFLINE'],
                                category: "cod-games" // <-- فئة جديدة ومهمة
                            },
                            // =================== COD OFFLINE GAMES END ===================

                            "mafia": {
                                id: "mafia",
                                title: "Mafia: The Old Country",
                                price: 75,
                                image: "./images/mafia.png",
                                shortDescription: "ابنِ إمبراطوريتك الإجرامية",
                                fullDescription: "عد بالزمن إلى العصر الذهبي للمافيا. في Mafia: The Old Country، كل قرار قد يكلفك حياتك. ابنِ إمبراطوريتك الإجرامية، وتسلق المراتب في عالم لا يرحم من الولاء والخيانة. هل لديك ما يلزم لتصبح الزعيم؟ عش القصة الملحمية المليئة بالدراما والأكشن الذي يحبس الأنفاس.",
                                platform: 'steam',
                                specs: `<p>لا توجد مواصفات رسمية لهذه اللعبة بعد.</p>`
                            },
                            "rust": {
                                id: "rust",
                                title: "Rust",
                                price: 220,
                                image: "./images/Rust.png",
                                shortDescription: "البقاء على قيد الحياة",
                                fullDescription: "الهدف الوحيد في Rust هو البقاء على قيد الحياة. تغلب على الصراعات مثل الجوع والعطش والبرد. قم ببناء نار. قم ببناء مأوى. اقتل الحيوانات من أجل اللحم. احم نفسك من اللاعبين الآخرين، واقتلهم من أجل اللحم. قم بإنشاء تحالفات مع لاعبين آخرين وشكل مدينة. افعل كل ما يتطلبه الأمر للبقاء على قيد الحياة.",
                                platform: 'steam',
                                specs: `<h3>متطلبات تشغيل Rust</h3>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>نظام التشغيل:</strong> Windows 8.1 64bit</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>المعالج:</strong> Intel Core i7-3770 / AMD FX-9590 أو أفضل</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>الذاكرة العشوائية (RAM):</strong> 10 GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>بطاقة الرسومات (GPU):</strong> GTX 670 2GB / AMD R9 280 أو أفضل</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>مساحة تخزين:</strong> 25 GB (SSD موصى به)</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                </ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <hr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>نظام التشغيل:</strong> Windows 11 64bit</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>المعالج:</strong> Intel Core i7-4790K / AMD Ryzen 5 1600 أو أفضل</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>الذاكرة العشوائية (RAM):</strong> 16 GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>بطاقة الرسومات (GPU):</strong> GTX 980 / AMD R9 Fury أو أفضل</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>مساحة تخزين:</strong> 25 GB (SSD موصى به)</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                </ul>`
                            },
                            "wallpaperEngine": {
                                id: "wallpaperEngine",
                                title: "Wallpaper Engine",
                                price: 90,
                                image: "./images/we.png",
                                shortDescription: "أفضل برنامج خلفيات للديسكتوب",
                                fullDescription: "حوّل سطح مكتبك إلى تحفة فنية متحركة. استخدم خلفيات فيديو، أو تطبيقات تفاعلية، أو حتى مواقع ويب كخلفية لك. يدعم Wallpaper Engine جميع أنواع الشاشات ويوفر أداءً ممتازًا.",
                                platform: 'steam',
                                specs: `<h3>متطلبات تشغيل Wallpaper Engine</h3>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>نظام التشغيل:</strong> Windows 7 (with Aero), 8.1, 10, 11</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>المعالج:</strong> 1.66 GHz Intel i5 or equivalent</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>الذاكرة العشوائية (RAM):</strong> 1024 MB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>بطاقة الرسومات (GPU):</strong> HD Graphics 4000 or above</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>مساحة تخزين:</strong> 512 MB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                </ul>`
                            },
                            "hollowknight": {
                                id: "hollowknight",
                                title: "Hollow Knight: Silksong",
                                price: 90,
                                image: "./images/hollowknight.png",
                                shortDescription: "مغامرة جديدة في مملكة Hallownest",
                                fullDescription: "انطلق في مغامرة جديدة مع Hornet في لعبة Hollow Knight: Silksong. استكشف مملكة جديدة، وقابل شخصيات فريدة، وحارب أعداء أقوياء في طريقك.",
                                platform: 'steam',
                                specs: `<p>لا توجد مواصفات رسمية لهذه اللعبة بعد.</p>`
                            },
                            "seaofthieves": {
                                id: "seaofthieves",
                                title: "حساب Sea of Thieves",
                                price: 380,
                                image: "./images/sot.png",
                                shortDescription: "رحلة القراصنة عبر البحار",
                                fullDescription: "انطلق في مغامرات بحرية، ابحث عن الكنوز المفقودة، وحارب قراصنة آخرين في عالم Sea of Thieves الواسع. استمتع بتجربة القراصنة النهائية.",
                                platform: 'steam',
                                specs: `<h3>متطلبات تشغيل Sea of Thieves</h3>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>نظام التشغيل:</strong> Windows 10</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>المعالج:</strong> Intel Core i5-4690 أو AMD FX-8150</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>الذاكرة العشوائية (RAM):</strong> 8 GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>بطاقة الرسومات (GPU):</strong> Nvidia GeForce GTX 770 أو AMD Radeon R9 380x</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>مساحة تخزين:</strong> 50 GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                </ul>`
                            },
                            "tlou_bundle": {
                                "id": "tlou_bundle",
                                "title": "باندل The Last of Us الكاملة (Part I & II)",
                                "price": 200,
                                "usd_price": 4.75,
                                "image": "./images/tlou_bundle.png",
                                "shortDescription": "القصة الكاملة لجول وإيلي في باندل واحدة.",
                                "fullDescription": "عِش التجربة الكاملة التي هزت عالم الألعاب. انطلق في رحلة البقاء المؤثرة مع جول وإيلي في The Last of Us Part I، ثم أكمل القصة في عالم أكثر قسوة ووحشية مع The Last of Us Part II. هذه الحزمة تجمع بين اللعبتين لتقديم قصة متكاملة عن الحب، الفقدان، ومعني الانتقام.",
                                "platform": "steam",
                                "badges": ["OFFLINE", "BUNDLE"],
                                "category": "offline-steam",
                                "specs": "<p>متطلبات التشغيل لكل لعبة متاحة على صفحتها الخاصة على متجر Steam.</p>"
                            },
                            "cod_category_card": {
                                id: "cod_category_card",
                                title: "حسابات أجزاء لعبة Call of Duty",
                                image: "./images/cod_coming_soon_bg.png", // ❗ تأكد من إضافة صورة بهذا الاسم
                                shortDescription: "أفضل تجربة شوتر قصصية",
                                fullDescription: "اكتشف جميع خدماتنا الحصرية للعبة Call of Duty، بما في ذلك فتح الكاموهات النادرة مثل Interstellar و Dark Matter، وتنفيذ تحدي النيوك، وخدمات أخرى مميزة لجميع أجزاء اللعبة.",
                                platform: 'activision',
                                "badges": ["OFFLINE", "BUNDLE"],
                                "category": "offline-steam",
                                actionLink: '#all-cod-games'
                            },
                            "rdr2": {
                                id: "rdr2",
                                title: "حساب Red Dead Redemption 2",
                                price: 850,
                                image: "./images/rdr2.png",
                                shortDescription: "يا تفاصيلك يروكستار !",
                                fullDescription: "انغمس في قصة آرثر مورغان وعصابة فان دير ليند في ملحمة الغرب المتوحش. استكشف عالمًا مفتوحًا ضخمًا وشارك في مغامرات لا تُنسى.",
                                platform: 'steam',
                                specs: `<h3>متطلبات تشغيل Red Dead Redemption 2</h3>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>نظام التشغيل:</strong> Windows 7 Service Pack 1 (6.1.7601)</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>المعالج:</strong> Intel Core i5-2500K / AMD FX-6300</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>الذاكرة العشوائية (RAM):</strong> 8 GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>بطاقة الرسومات (GPU):</strong> Nvidia GeForce GTX 770 2GB / AMD Radeon R9 280 3GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>مساحة تخزين:</strong> 150 GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                </ul>`
                            },
                            "eldenring": {
                                id: "eldenring",
                                title: "حساب Elden Ring",
                                price: 650,
                                image: "./images/elden.png",
                                shortDescription: "اكتشف عالم الأراضي الوسطى",
                                fullDescription: "استعد للغوص في عالم خيالي واسع، مليء بالغموض والمخاطر والكائنات الأسطورية. عِش تجربة فريدة حيث تمتزج الملحمة بالمأساة، وانطلق في رحلة لا تنتهي عبر أراضٍ قاسية وأسرار مظلمة. مهمتك أن تستعيد قوة إلدن رنج التي تمزقت شظاياها، لتعيد التوازن لعالم يتأرجح بين النور والظلام، وتكتب أنت نهايته بقراراتك واختياراتك.",
                                platform: 'steam',
                                specs: `<h3>متطلبات تشغيل Elden Ring</h3>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>نظام التشغيل:</strong> Windows 10</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>المعالج:</strong> Intel Core i5-8400 أو AMD Ryzen 3 3300X</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>الذاكرة العشوائية (RAM):</strong> 12 GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>بطاقة الرسومات (GPU):</strong> Nvidia GeForce GTX 1060 3GB أو AMD Radeon RX 580 4GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>مساحة تخزين:</strong> 60 GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                </ul>`

                            },
                            "residentevil_offline": {
                                id: "residentevil_offline",
                                title: "Resident Evil 8: Village",
                                price: 50,
                                image: "./images/residentevil8.png",
                                shortDescription: "لا مهرب من القصر",
                                fullDescription: "جرب قصة رعب البقاء على قيد الحياة النهائية في Resident Evil Village، الجزء الثامن من سلسلة Resident Evil. مع رسومات مفصلة للغاية، وأكشن عنيف من منظور الشخص الأول، وقصة بارعة، لم يكن الرعب أكثر واقعية من قبل.",
                                platform: 'steam',
                                badges: ['OFFLINE'],
                                specs: `<h3>متطلبات تشغيل Resident Evil Village</h3>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>نظام التشغيل:</strong> Windows 10 (64-bit)</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>المعالج:</strong> Intel Core i5-7500 / AMD Ryzen 3 1200</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>الذاكرة العشوائية (RAM):</strong> 8 GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>بطاقة الرسومات (GPU):</strong> NVIDIA GeForce GTX 1050 Ti with 4GB VRAM / AMD Radeon RX 560 with 4GB VRAM</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>مساحة تخزين:</strong> 25 GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                </ul>`
                            },
                            "black_myth_wukong_offline": {
                                id: "black_myth_wukong_offline",
                                title: "Black Myth: Wukong",
                                price: 150, // يمكنك تعديل السعر
                                image: "./images/blackmyth.png", // تأكد من وجود الصورة في مجلد images
                                shortDescription: "مغامرة أسطورية في عالم صيني قديم.",
                                fullDescription: "انطلق في مغامرة ملحمية مستوحاة من الأساطير الصينية. العب دور المحارب الأسطوري وواجه أعداءً أقوياء في قصة آسرة.",
                                platform: 'steam',
                                badges: ['OFFLINE'],
                                specs: `<p>متطلبات تشغيل اللعبة متاحة على صفحة اللعبة على Steam.</p>`
                            },
                            "ac_shadows_offline": {
                                id: "ac_shadows_offline",
                                title: "Assassin's Creed Shadows",
                                price: 130, // يمكنك تعديل السعر
                                image: "./images/acs.png", // تأكد من وجود الصورة في مجلد images
                                shortDescription: "أساسنز كريد في اليابان الإقطاعية.",
                                fullDescription: "اكتشف قصة جديدة ومثيرة في سلسلة Assassin's Creed. استكشف عالم اليابان الإقطاعية والعب بشخصيتين مختلفتين، النينجا والساموراي، في رحلة مليئة بالخيانة والانتقام.",
                                platform: 'steam',
                                badges: ['OFFLINE'],
                                specs: `<p>متطلبات تشغيل اللعبة متاحة على صفحة اللعبة على Steam.</p>`
                            },
                            "mafia": {
                                id: "mafia",
                                title: " حساب Mafia: The Old Country",
                                price: 50,
                                image: "./images/mafia.png",
                                shortDescription: "ابنِ إمبراطوريتك الإجرامية",
                                fullDescription: "عد بالزمن إلى العصر الذهبي للمافيا. في Mafia: The Old Country، كل قرار قد يكلفك حياتك. ابنِ إمبراطوريتك الإجرامية، وتسلق المراتب في عالم لا يرحم من الولاء والخيانة. هل لديك ما يلزم لتصبح الزعيم؟ عش القصة الملحمية المليئة بالدراما والأكشن الذي يحبس الأنفاس.",
                                platform: 'steam',
                                specs: `<p>لا توجد مواصفات رسمية لهذه اللعبة بعد.</p>`
                            },
                            "residentevil2_remake_offline": {
                                id: "residentevil2_remake_offline",
                                title: "Resident Evil 2 Remake",
                                price: 100,
                                usd_price: 2.38,
                                image: "./images/re2remake.png", // ❗ تأكد من إضافة صورة بهذا الاسم
                                shortDescription: "عودة كلاسيكية مرعبة",
                                fullDescription: "اختبر الرعب الكلاسيكي مجددًا مع النسخة المحسنة بالكامل من Resident Evil 2. انضم إلى ليون كينيدي وكلير ريدفيلد في محاولتهما اليائسة للهروب من مدينة راكون سيتي المنكوبة.",
                                platform: 'steam',
                                badges: ['OFFLINE'],
                                category: "offline-steam",
                                specs: `<h3>متطلبات تشغيل Resident Evil 2 Remake</h3>
                                                                                                                                                                                                                                                                                                                                                                        <ul>
                                                                                                                                                                                                                                                                                                                                                                            <li><strong>نظام التشغيل:</strong> Windows 10 (64-bit)</li>
                                                                                                                                                                                                                                                                                                                                                                            <li><strong>المعالج:</strong> Intel Core i5-4460 / AMD FX-6300</li>
                                                                                                                                                                                                                                                                                                                                                                            <li><strong>الذاكرة العشوائية (RAM):</strong> 8 GB</li>
                                                                                                                                                                                                                                                                                                                                                                            <li><strong>بطاقة الرسومات (GPU):</strong> NVIDIA GeForce GTX 960 / AMD Radeon RX 460</li>
                                                                                                                                                                                                                                                                                                                                                                            <li><strong>مساحة تخزين:</strong> 26 GB</li>
                                                                                                                                                                                                                                                                                                                                                                        </ul>`
                            },
                            "residentevil3_remake_offline": {
                                id: "residentevil3_remake_offline",
                                title: "Resident Evil 3 Remake",
                                price: 100,
                                usd_price: 2.38,
                                image: "./images/re3remake.png", // ❗ تأكد من إضافة صورة بهذا الاسم
                                shortDescription: "الهروب من Nemesis",
                                fullDescription: "عش تجربة هروب جيل فالنتاين المروعة من مدينة راكون سيتي بينما يطاردها السلاح البيولوجي الذي لا يمكن إيقافه، Nemesis. نسخة محسنة بالكامل مع رسوميات حديثة وأسلوب لعب متطور.",
                                platform: 'steam',
                                badges: ['OFFLINE'],
                                category: "offline-steam",
                                specs: `<h3>متطلبات تشغيل Resident Evil 3 Remake</h3>
                                                                                                                                                                                                                                                                                                                                                                        <ul>
                                                                                                                                                                                                                                                                                                                                                                            <li><strong>نظام التشغيل:</strong> Windows 10 (64-bit)</li>
                                                                                                                                                                                                                                                                                                                                                                            <li><strong>المعالج:</strong> Intel Core i5-4460 / AMD FX-6300</li>
                                                                                                                                                                                                                                                                                                                                                                            <li><strong>الذاكرة العشوائية (RAM):</strong> 8 GB</li>
                                                                                                                                                                                                                                                                                                                                                                            <li><strong>بطاقة الرسومات (GPU):</strong> NVIDIA GeForce GTX 960 / AMD Radeon RX 460</li>
                                                                                                                                                                                                                                                                                                                                                                            <li><strong>مساحة تخزين:</strong> 45 GB</li>
                                                                                                                                                                                                                                                                                                                                                                        </ul>`
                            },
                            "cuphead_offline": {
                                id: "cuphead_offline",
                                title: "Cuphead",
                                price: 70,
                                usd_price: 1.67,
                                image: "./images/cuphead.png", // ❗ تأكد من إضافة صورة بهذا الاسم
                                shortDescription: "مغامرة كرتونية كلاسيكية",
                                fullDescription: "لعبة أكشن وإطلاق نار كلاسيكية مستوحاة من رسوم الكرتون في ثلاثينيات القرن العشرين. العب بشخصية Cuphead أو Mugman (في طور اللعب الفردي أو التعاوني المحلي) وأنت تجتاز عوالم غريبة وتهزم زعماء أصعب من الخيال.",
                                platform: 'steam',
                                badges: ['OFFLINE'],
                                category: "offline-steam",
                                specs: `<h3>متطلبات تشغيل Cuphead</h3>
                                                                                                                                                                                                                                                                                                                                                                        <ul>
                                                                                                                                                                                                                                                                                                                                                                            <li><strong>نظام التشغيل:</strong> Windows 7/8.1/10</li>
                                                                                                                                                                                                                                                                                                                                                                            <li><strong>المعالج:</strong> Intel Core2 Duo E8400, 3.0GHz or AMD Athlon 64 X2 6000+, 3.0GHz or higher</li>
                                                                                                                                                                                                                                                                                                                                                                            <li><strong>الذاكرة العشوائية (RAM):</strong> 3 GB</li>
                                                                                                                                                                                                                                                                                                                                                                            <li><strong>بطاقة الرسومات (GPU):</strong> Geforce 9600 GT or AMD HD 3870 512MB</li>
                                                                                                                                                                                                                                                                                                                                                                            <li><strong>مساحة تخزين:</strong> 4 GB</li>
                                                                                                                                                                                                                                                                                                                                                                        </ul>`
                            },

                            "rust": {
                                id: "rust",
                                title: "Rust",
                                price: 550,
                                image: "./images/Rust.png",
                                shortDescription: "الهدف هو البقاء على قيد الحياة",
                                fullDescription: "الهدف الوحيد في Rust هو البقاء على قيد الحياة. تغلب على الصراعات مثل الجوع والعطش والبرد. قم ببناء نار. قم ببناء مأوى. اقتل الحيوانات من أجل اللحم. احم نفسك من اللاعبين الآخرين، واقتلهم من أجل اللحم. قم بإنشاء تحالفات مع لاعبين آخرين وشكل مدينة. افعل كل ما يتطلبه الأمر للبقاء على قيد الحياة.",
                                platform: 'steam',
                                specs: `<h3>متطلبات تشغيل Rust</h3>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>نظام التشغيل:</strong> Windows 8.1 64bit</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>المعالج:</strong> Intel Core i7-3770 / AMD FX-9590 أو أفضل</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>الذاكرة العشوائية (RAM):</strong> 10 GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>بطاقة الرسومات (GPU):</strong> GTX 670 2GB / AMD R9 280 أو أفضل</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>مساحة تخزين:</strong> 25 GB (SSD موصى به)</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                </ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <hr>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>نظام التشغيل:</strong> Windows 11 64bit</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>المعالج:</strong> Intel Core i7-4790K / AMD Ryzen 5 1600 أو أفضل</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>الذاكرة العشوائية (RAM):</strong> 16 GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>بطاقة الرسومات (GPU):</strong> GTX 980 / AMD R9 Fury أو أفضل</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>مساحة تخزين:</strong> 25 GB (SSD موصى به)</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                </ul>`
                            },
                            "silent_hill_f_offline": {
                                id: "silent_hill_f_offline",
                                title: "Silent Hill F",
                                price: 150,
                                image: "./images/silenthillf.png", // تأكد من إضافة صورة بهذا الاسم
                                shortDescription: "رعب نفسي في اليابان.",
                                fullDescription: "تجربة رعب نفسي جديدة كليًا تدور أحداثها في اليابان خلال فترة الستينيات، تتميز بعالم جميل ومرعب في نفس الوقت.",
                                platform: 'steam',
                                badges: ['OFFLINE'],
                                category: "offline-steam"
                            },
                            "cyberpunk_2077_offline": {
                                id: "cyberpunk_2077_offline",
                                title: "Cyberpunk 2077: Ultimate Edition",
                                price: 150,
                                image: "./images/cyberpunk.png",
                                shortDescription: "مغامرة في عالم مستقبلي مفتوح.",
                                fullDescription: "استكشف مدينة Night City الضخمة والخطيرة، وعش قصة V المليئة بالأكشن والخيارات الصعبة. النسخة الكاملة تشمل إضافة Phantom Liberty.",
                                platform: 'steam',
                                badges: ['OFFLINE'],
                                category: "offline-steam"
                            },
                            "ghostoftsushima_offline": {
                                id: "ghostoftsushima_offline",
                                title: "Ghost of Tsushima Director's Cut",
                                price: 150,
                                image: "./images/ghostoftsushima.png",
                                shortDescription: "كن شبح تسوشيما.",
                                fullDescription: "خض تجربة الساموراي الكاملة في عالم اليابان الإقطاعية الساحر. قصة ملحمية ورسوميات تخطف الأنفاس.",
                                platform: 'steam',
                                badges: ['OFFLINE'],
                                category: "offline-steam",
                                stock: 50,
                            },
                            "witcher3_offline": {
                                id: "witcher3_offline",
                                title: "The Witcher 3: Wild Hunt - Complete",
                                price: 100,
                                image: "./images/witcher3.png",
                                shortDescription: "من أفضل ألعاب التاريخ.",
                                fullDescription: "عش مغامرة Geralt of Rivia الأسطورية في عالم ضخم وغني بالقصص والشخصيات التي لا تُنسى.",
                                platform: 'steam',
                                badges: ['OFFLINE'],
                                category: "offline-steam"
                            },
                            "eldenring_offline": {
                                id: "eldenring_offline",
                                title: "Elden Ring",
                                price: 130,
                                image: "./images/elden.png",
                                shortDescription: "اكتشف أسرار الأراضي الوسطى.",
                                fullDescription: "لعبة العام من استوديو FromSoftware. استكشف عالمًا مفتوحًا شاسعًا، واجه زعماء أسطوريين، واكتب قصتك بنفسك.",
                                platform: 'steam',
                                badges: ['OFFLINE'],
                                category: "offline-steam"
                            },
                            "silksong_offline": {
                                id: "silksong_offline",
                                title: " حساب Hollow Knight: Silksong",
                                price: 90,
                                image: "./images/hollowknight.png",
                                shortDescription: "مغامرة منتظرة بشدة.",
                                fullDescription: "انطلق في مغامرة جديدة مع Hornet في لعبة Hollow Knight: Silksong. استكشف مملكة جديدة، وقابل شخصيات فريدة، وحارب أعداء أقوياء في طريقك.",
                                platform: 'steam',
                                badges: ['OFFLINE'],
                                category: "offline-steam"
                            },
                            "ragnarok_offline": {
                                id: "ragnarok_offline",
                                title: "God of War Ragnarök",
                                price: 150,
                                image: "./images/ragnarok.png",
                                shortDescription: "نهاية أسطورة كريتوس.",
                                fullDescription: "أكمل رحلة كريتوس وأتريوس الملحمية في مواجهة الآلهة الإسكندنافية. قصة سينمائية ومعارك لا مثيل لها.",
                                platform: 'steam',
                                badges: ['OFFLINE'],
                                category: "offline-steam"
                            },
                            "re4_remake_offline": {
                                id: "re4_remake_offline",
                                title: "Resident Evil 4 (Remake)",
                                price: 120,
                                image: "./images/re4remake.png",
                                shortDescription: "رحلة ليون و اشلي.",
                                fullDescription: "ريميك لواحدة من أفضل ألعاب الرعب والبقاء على الإطلاق. رسوميات مذهلة وأسلوب لعب محدث وتجربة مرعبة لا تُنسى.",
                                platform: 'steam',
                                badges: ['OFFLINE'],
                                category: "offline-steam"
                            },
                            "tlou1_offline": {
                                id: "tlou1_offline",
                                title: "The Last of Us Part I",
                                price: 120,
                                image: "./images/tlou1.png",
                                shortDescription: "القصة التي غيرت كل شيء.",
                                fullDescription: "عش قصة جويل وإيلي المؤثرة في عالم مدمر. نسخة محسنة بالكامل للكمبيوتر الشخصي لواحدة من أعظم الألعاب قصصيًا.",
                                platform: 'steam',
                                badges: ['OFFLINE'],
                                category: "offline-steam"
                            },
                            "cyberpunk_re4_bundle": {
                                "id": "cyberpunk_re4_bundle",
                                "title": "باندل Cyberpunk 2077 & RE4: Separate Ways",
                                "price": 220,
                                "usd_price": 5.25,
                                "image": "./images/cyberpunk_re4_bundle.png",
                                "shortDescription": "تجربتان مستقلتان.",
                                "fullDescription": "اجمع بين مستقبل **Cyberpunk 2077** المظلم والمفتوح، وقصة التجسس والأكشن المرعبة في إضافة **Resident Evil 4: Separate Ways**. هذه الحزمة تقدم تجربتين من أعلى طراز، لكل منهما أسلوبها الفريد.<br><br><strong>ملاحظة هامة:</strong> إضافة Separate Ways تشمل Resident Evil 4 Remake.",
                                "platform": "steam",
                                "badges": ["OFFLINE", "BUNDLE"],
                                "category": "offline-steam",
                                "specs": "<p>متطلبات التشغيل لكل لعبة متاحة على صفحتها الخاصة على متجر Steam.</p>"
                            },
                            "gow_got_bundle": {
                                "id": "gow_got_bundle",
                                "title": "باندل البلايستيشن فان بوي Gow Ragnarök & G.O.T",
                                "price": 270,
                                "usd_price": 6.50,
                                "image": "./images/gow_got_bundle.png",
                                "shortDescription": "أقوى حصريات بلايستيشن على الـ PC.",
                                "fullDescription": "خض تجربتين من أروع ما قدمته PlayStation في باندل واحدة! انطلق في رحلة كريتوس وأتريوس الملحمية عبر العوالم الإسكندنافية في **God of War Ragnarök**، ثم تحوّل إلى شبح الساموراي لتدافع عن وطنك في عالم **Ghost of Tsushima** الساحر. قصص سينمائية، أسلوب قتال متقن، وعوالم تخطف الأنفاس.",
                                "platform": "steam",
                                "badges": ["OFFLINE", "BUNDLE"],
                                "category": "offline-steam",
                                "specs": "<p>متطلبات التشغيل لكل لعبة متاحة على صفحتها الخاصة على متجر Steam.</p>"
                            },

                            "wallpaperEngine": {
                                id: "wallpaperEngine",
                                title: "Wallpaper Engine",
                                price: 90,
                                image: "./images/we.png",
                                shortDescription: "أفضل برنامج خلفيات للديسكتوب",
                                fullDescription: "حوّل سطح مكتبك إلى تحفة فنية متحركة. استخدم خلفيات فيديو، أو تطبيقات تفاعلية، أو حتى مواقع ويب كخلفية لك. يدعم Wallpaper Engine جميع أنواع الشاشات ويوفر أداءً ممتازًا.",
                                platform: 'steam',
                                specs: `<h3>متطلبات تشغيل Wallpaper Engine</h3>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>نظام التشغيل:</strong> Windows 7 (with Aero), 8.1, 10, 11</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>المعالج:</strong> 1.66 GHz Intel i5 or equivalent</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>الذاكرة العشوائية (RAM):</strong> 1024 MB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>بطاقة الرسومات (GPU):</strong> HD Graphics 4000 or above</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>مساحة تخزين:</strong> 512 MB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                </ul>`
                            },
                            "hollowknight": {
                                id: "hollowknight",
                                title: "حساب Hollow Knight: Silksong",
                                price: 45,
                                image: "./images/hollowknight.png",
                                shortDescription: "مغامرة جديدة في مملكة Hallownest",
                                fullDescription: "انطلق في مغامرة جديدة مع Hornet في لعبة Hollow Knight: Silksong. استكشف مملكة جديدة، وقابل شخصيات فريدة، وحارب أعداء أقوياء في طريقك.",
                                platform: 'steam',
                                specs: `<p>لا توجد مواصفات رسمية لهذه اللعبة بعد.</p>`
                            },
                            "seaofthieves": {
                                id: "seaofthieves",
                                title: "حساب لعبة Sea of Thieves",
                                price: 350,
                                image: "./images/sot.png",
                                shortDescription: "رحلة القراصنة عبر البحار",
                                fullDescription: "انطلق في مغامرات بحرية، ابحث عن الكنوز المفقودة، وحارب قراصنة آخرين في عالم Sea of Thieves الواسع. استمتع بتجربة القراصنة النهائية.",
                                platform: 'steam',
                                specs: `<h3>متطلبات تشغيل Sea of Thieves</h3>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>نظام التشغيل:</strong> Windows 10</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>المعالج:</strong> Intel Core i5-4690 أو AMD FX-8150</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>الذاكرة العشوائية (RAM):</strong> 8 GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>بطاقة الرسومات (GPU):</strong> Nvidia GeForce GTX 770 أو AMD Radeon R9 380x</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>مساحة تخزين:</strong> 50 GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                </ul>`
                            },
                            "rdr2": {
                                id: "rdr2",
                                title: "حساب Red Dead Redemption 2",
                                price: 850,
                                image: "./images/rdr2.png",
                                shortDescription: "يا تفاصيلك يا روك ستار !",
                                fullDescription: "انغمس في قصة آرثر مورغان وعصابة فان دير ليند في ملحمة الغرب المتوحش. استكشف عالمًا مفتوحًا ضخمًا وشارك في مغامرات لا تُنسى.",
                                platform: 'steam',
                                specs: `<h3>متطلبات تشغيل Red Dead Redemption 2</h3>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>نظام التشغيل:</strong> Windows 7 Service Pack 1 (6.1.7601)</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>المعالج:</strong> Intel Core i5-2500K / AMD FX-6300</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>الذاكرة العشوائية (RAM):</strong> 8 GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>بطاقة الرسومات (GPU):</strong> Nvidia GeForce GTX 770 2GB / AMD Radeon R9 280 3GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>مساحة تخزين:</strong> 150 GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                </ul>`
                            },
                            "eldenring": {
                                id: "eldenring",
                                title: "حساب Elden Ring",
                                price: 650,
                                image: "./images/elden.png",
                                shortDescription: "اكتشف عالم الدن الشاسع",
                                fullDescription: "استعد للغوص في عالم خيالي واسع، مليء بالغموض والمخاطر والكائنات الأسطورية. ع، وانطلق في رحلة لا تنتهي عبر أراضٍ قاسية وأسرار مظلمة. مهمتك أن تستعيد قوة إلدن رنج، لتعيد التوازن عالم بين النور والظلام، وتكتب أنت نهايته بقراراتك واختياراتك.",
                                platform: 'steam',
                                specs: `<h3>متطلبات تشغيل Elden Ring</h3>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>نظام التشغيل:</strong> Windows 10</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>المعالج:</strong> Intel Core i5-8400 أو AMD Ryzen 3 3300X</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>الذاكرة العشوائية (RAM):</strong> 12 GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>بطاقة الرسومات (GPU):</strong> Nvidia GeForce GTX 1060 3GB أو AMD Radeon RX 580 4GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>مساحة تخزين:</strong> 60 GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                </ul>`

                            },
                            "re4_separate_ways_offline": {
                                id: "re4_separate_ways_offline",
                                title: "Resident Evil 4: Separate Ways DLC",
                                price: 150,
                                image: "./images/re4_separate_ways.png", // ❗ تأكد من إضافة صورة بهذا الاسم
                                shortDescription: "العب بشخصية Ada Wong",
                                fullDescription: "خض التجربة المفقودة من قصة Resident Evil 4 من منظور Ada Wong الغامض. هذا المحتوى الإضافي (DLC) يتطلب وجود اللعبة الأساسية (Resident Evil 4 Remake) ويعرض مهمتها السرية خلال أحداث اللعبة.",
                                platform: 'steam',
                                badges: ['OFFLINE', 'DLC'],
                                category: "offline-steam",
                                stock: 3,
                                specs: `<h3>متطلبات تشغيل Resident Evil 4 Remake</h3>
                                                                                                                                                                                                                                                                                                                                                                        <ul>
                                                                                                                                                                                                                                                                                                                                                                            <li><strong>نظام التشغيل:</strong> Windows 10 (64-bit)</li>
                                                                                                                                                                                                                                                                                                                                                                            <li><strong>المعالج:</strong> AMD Ryzen 3 1200 / Intel Core i5-7500</li>
                                                                                                                                                                                                                                                                                                                                                                            <li><strong>الذاكرة العشوائية (RAM):</strong> 8 GB</li>
                                                                                                                                                                                                                                                                                                                                                                            <li><strong>بطاقة الرسومات (GPU):</strong> AMD Radeon RX 560 with 4GB VRAM / NVIDIA GeForce GTX 1050 Ti with 4GB VRAM</li>
                                                                                                                                                                                                                                                                                                                                                                            <li><strong>مساحة تخزين:</strong> 60 GB</li>
                                                                                                                                                                                                                                                                                                                                                                        </ul>`
                            },
                            "genshin_charging_card": {
                                id: "genshin_charging_card",
                                title: "شحن Genshin Impact",
                                image: "./images/genshin.png",
                                shortDescription: "اشحن كريستالات جينسيس",
                                platform: "hoyoverse",
                                actionLink: "#genshinImpact"
                            },
                            "genshin_60": {
                                id: "genshin_60",
                                title: "60 كريستالة جينسيس",
                                price: 35,
                                image: "./images/genshinimpact.png",
                                shortDescription: "اشحن 60 كريستالة",
                                platform: "hoyoverse"
                            },
                            "genshin_300": {
                                id: "genshin_300",
                                title: "300 كريستالة جينسيس",
                                price: 180,
                                image: "./images/genshinimpact.png",
                                shortDescription: "اشحن 300 كريستالة",
                                platform: "hoyoverse"
                            },
                            "genshin_980": {
                                id: "genshin_980",
                                title: "980 كريستالة جينسيس",
                                price: 550,
                                image: "./images/genshinimpact.png",
                                shortDescription: "اشحن 980 كريستالة",
                                platform: "hoyoverse"
                            },
                            "rocketleague_500": {
                                id: "rocketleague_500",
                                title: "500 كريدت Rocket League",
                                price: 300,
                                image: "./images/rlc.png",
                                shortDescription: "شحن 500 كريدت",
                                fullDescription: "احصل على 500 كريدت للعبة Rocket League لتتمكن من شراء عناصر تجميلية أو تفعيل Battle Pass.",
                                platform: 'epic',
                                requiresAccountDetails: true
                            },
                            "rocketleague_1100": {
                                id: "rocketleague_1100",
                                title: "1100 كريدت Rocket League",
                                price: 660,
                                image: "./images/rlc.png",
                                shortDescription: "شحن 1100 كريدت",
                                fullDescription: "شحن 1100 كريدت للعبة Rocket League لتستمتع بأفضل عناصر اللعبة.",
                                platform: 'epic',
                                requiresAccountDetails: true
                            },
                            "rocketleague_3000": {
                                id: "rocketleague_3000",
                                title: "3000 كريدت Rocket League",
                                price: 1450,
                                image: "./images/rlc.png",
                                shortDescription: "شحن 3000 كريدت",
                                fullDescription: "أكبر باقة من كريدت Rocket League لتخصيص كل ما في حسابك.",
                                platform: 'epic',
                                requiresAccountDetails: true
                            },

                            "chatgpt_plus": {
                                id: "chatgpt_plus",
                                title: "ChatGPT Plus",
                                price: 450, // السعر المبدئي لمدة شهر
                                usd_price: 10.71,
                                image: "./images/chatgpt.png", // تأكد من إضافة صورة باسم chatgpt.png
                                shortDescription: "GPT 5",
                                fullDescription: "احصل على وصول حصري لأحدث نماذج الذكاء الاصطناعي من OpenAI. يوفر اشتراك ChatGPT Plus استجابات أسرع، وصولاً مبكرًا للميزات الجديدة، وقدرات متقدمة مثل تحليل البيانات وتصفح الويب.",
                                options: {
                                    "1_month": { title: "شهر", price: 190, usd_price: 4.71 }
                                },
                                category: "software_subscription" // <-- تصنيف جديد
                            },
                            "spotify_premium": {
                                id: "spotify_premium",
                                title: "Spotify Premium",
                                price: 59, // <-- السعر الجديد
                                usd_price: 1.40, // (59 / 42)
                                image: "./images/spotify_premium.png",
                                shortDescription: "استمع بلا حدود",
                                // <-- الوصف الجديد
                                fullDescription: "اسمع الاغاني من غير انقطاع. هنبعتلك (رابط انفايت) للبرميم على حسابك الشخصي. استمتع بملايين الأغاني والبودكاست بدون إعلانات، مع إمكانية التنزيل والاستماع في وضع الاوفلاين.",
                                category: "software_subscription",
                                options: {
                                    // <-- الخيارات الجديدة
                                    "1_month": { title: "شهر واحد", price: 59, usd_price: 1.40 },
                                    "2_months": { title: "شهرين", price: 115, usd_price: 2.74 },
                                    "3_months": { title: "3 شهور", price: 150, usd_price: 3.57 }
                                }
                            },

                            "shahid_vip_screen": {
                                id: "shahid_vip_screen",
                                title: "Shahid VIP (شاشة)",
                                price: 45, // السعر بالجنية (يمكنك تعديله)
                                usd_price: 1.10, // السعر بالدولار تقريباً
                                image: "./images/shahid.png", // تأكد من وجود الصورة بهذا الاسم
                                shortDescription: "شاشة خاصة 4K",
                                fullDescription: "استمتع بأضخم الأعمال الأصلية، مسلسلات حصرية وأفلام، بالإضافة إلى البث المباشر للقنوات بجودة 4K. ستحصل على ملف (Profile) خاص بك مقفل برمز PIN لضمان الخصوصية.",
                                category: "tv_subscription", // نفس تصنيف الاشتراكات
                                options: {
                                    "1_month": { title: "شهر واحد", price: 49, usd_price: 1.10 },
                                    "2_months": { title: "2 شهور", price: 99, usd_price: 2.85 },
                                    "3_months": { title: "3 شهور", price: 129, usd_price: 3.85 }
                                }
                            },
                            "capcut_pro": {
                                id: "capcut_pro",
                                title: "CapCut Pro",
                                price: 250, // السعر المبدئي لمدة شهر
                                usd_price: 5.95,
                                image: "./images/capcut.png", // تأكد من إضافة صورة باسم capcut.png
                                shortDescription: "مستوى احترافي",
                                fullDescription: "أطلق العنان لإبداعك مع CapCut Pro. استمتع بميزات حصرية مثل إزالة خلفية الفيديو، التأثيرات المتقدمة، القوالب الاحترافية، والتصدير بجودة عالية بدون علامة مائية.",
                                options: {
                                    "1_month": {
                                        title: "شهر", price:
                                            225, usd_price: 5.95
                                    }
                                },
                                category: "software_subscription" // <-- تصنيف جديد
                            },

                            "valorant_coaching_session": {
                                id: "valorant_coaching_session",
                                title: "فالورانت كوتشينج | 1 جيم",
                                price: 300,
                                image: "./images/reyna.png",
                                shortDescription: "تحليل كامل لأدائك ونصائح مخصصة.",
                                fullDescription: "احجز جلسة تدريب خاصة مع أحد أفضل المدربين لدينا. ستحصل على تحليل كامل لأدائك ونصائح مخصصة لتحسين تصويبك، اتخاذ قراراتك، واستراتيجيات اللعبCoaching in Valorant: Rank up faster, improve aim, positioning, and game sense, learn agent-specific tips and strategies, get personalized feedback, and watch recorded videos with explanations. Sessions tailored to your current skill level and goals.",
                                platform: 'riot',
                                requiresAccountDetails: true
                            },
                            "valorant_boosting_service": {
                                id: "valorant_boosting_service",
                                title: "خدمة رفع رتبة فالورانت",
                                price: 500, // سعر افتراضي
                                image: "./images/valorant-boosting.png", // صورة لخدمة البوستنج
                                shortDescription: "ارفع رانكك بسرعة وأمان.",
                                fullDescription: "احصل على رتبة أعلى مع لاعبينا المحترفين. نضمن لك السرية والأمان والسرعة في التنفيذ.",
                                platform: 'riot',
                                requiresAccountDetails: true
                            },
                            "fortnite_coaching_session": {
                                id: "fortnite_coaching_session",
                                title: "جلسة تدريب فورتنايت فردية",
                                price: 250,
                                image: "./images/fortnite-coaching.png", // صورة لخدمة التدريب
                                shortDescription: "أفضل مدربين لرفع مستواك.",
                                fullDescription: "تعلم أسرار البناء والتصويب والاستراتيجيات المتقدمة من مدربين خبراء.",
                                platform: 'epic',
                                requiresAccountDetails: true
                            },
                            "fortnite_boosting_service": {
                                id: "fortnite_boosting_service",
                                title: "خدمة رفع رتبة فورتنايت",
                                price: 400, // سعر افتراضي
                                image: "./images/fortnite-boosting.png", // صورة لخدمة البوستنج
                                shortDescription: "انتصارات متتالية ومكافآت حصرية.",
                                fullDescription: "نساعدك على تحقيق الانتصارات التي تريدها دون عناء. نضمن لك السرية والسرعة في رفع رانكك.",
                                platform: 'epic',
                                requiresAccountDetails: true
                            },
                            "discord_decoration_custom": {
                                id: "discord_decoration_custom",
                                title: "Discord Profile Decoration",
                                image: "./images/discord-decorations.png",
                                shortDescription: "زين بروفايلك في ديسكورد",
                                fullDescription: "احصل على مؤثرات وتزيينات لبروفايلك في الديسكورد. سيتم شحن المنتج مباشرة على حسابك بالقيمة التي تختارها.",
                                platform: 'discord',
                                requiresDiscordUsername: true, // خاصية جديدة لتفعيل طلب اليوزر عند الشراء
                                category: "discord-decorations",
                                isCustomPrice: true // خاصية جديدة لتمييز هذا المنتج
                            },
                            // ✅ --- بداية منتجات Lattices الجديدة ---
                            "lattices_100": {
                                id: "lattices_100",
                                title: "100 Lattices",
                                price: 70,
                                image: "./images/100lattices_icon.png",
                                shortDescription: "شحن 100 Lattices",
                                fullDescription: "ابدأ رحلتك في عالم Marvel Rivals! اشحن حسابك بـ **100 Lattices**، العملة المميزة اللي هتساعدك في فتح شخصيات وإضافات جديدة. فرصة مثالية عشان تتعرف على اللعبة وتجهز نفسك للمعركة.",
                                platform: 'steam',
                                requiresMarvelId: true,
                                category: "marvel-rivals"
                            },
                            "lattices_500": {
                                id: "lattices_500",
                                title: "500 Lattices",
                                price: 295,
                                image: "./images/500lattices_icon.png",
                                shortDescription: "شحن 500 Lattices",
                                fullDescription: "انطلق بقوة في Marvel Rivals مع **500 Lattices**! الباقة دي هتمنحك حرية أكبر في اختيار أبطالك المفضلين أو شراء حزم العروض الحصرية. جهّز فريق أحلامك وسيطر على ساحة المعركة.",
                                platform: 'steam',
                                requiresMarvelId: true,
                                category: "marvel-rivals"
                            },
                            "lattices_1000": {
                                id: "lattices_1000",
                                title: "1000 Lattices",
                                price: 550,
                                image: "./images/1klattices_icon.png",
                                shortDescription: "شحن 1000 Lattices",
                                fullDescription: "باقة الأبطال الخارقين! احصل على **1000 Lattices** واستفد من قيمة أفضل. استخدمها لشراء الأزياء النادرة، أو افتح شخصيات قوية، أو عزّز مظهر فريقك بالكامل. خصّص تجربتك لتكون فريدة ومميزة.",
                                platform: 'steam',
                                requiresMarvelId: true,
                                category: "marvel-rivals"
                            },
                            "lattices_2180": {
                                id: "lattices_2180",
                                title: "2180 Lattices",
                                price: 1140,
                                image: "./images/2klattices_icon.png",
                                shortDescription: "الأنسب لشراء اي باندل",
                                fullDescription: "أفضل قيمة مقابل المال! باقة **2180 Lattices** هتخليك تستمتع بكل ما هو جديد في اللعبة. عزز قوتك، واجمع كل العناصر التي تريدها، وكن مستعدًا لمواجهة أي تحدي. هذه الباقة مصممة للاعبين الجادين اللي عايزين يوصلوا للقمة.",
                                platform: 'steam',
                                requiresMarvelId: true,
                                category: "marvel-rivals"
                            },
                            "lattices_5680": {
                                id: "lattices_5680",
                                title: "5680 Lattices",
                                price: 2550,
                                image: "./images/5klattices_icon.png",
                                shortDescription: "الأكثر روعة",
                                fullDescription: "قوة غير محدودة! مع **5680 Lattices**، تقدر تفتح كل اللي في اللعبة وتجهز نفسك لكل المواسم اللي جاية. باقة ممتازة لأي لاعب عايز يتفوق على منافسيه ويكون دايماً في المقدمة.",
                                platform: 'steam',
                                requiresMarvelId: true,
                                category: "marvel-rivals"
                            },
                            "lattices_11680": {
                                id: "lattices_11680",
                                title: "11680 Lattices",
                                price: 5200,
                                image: "./images/kmhgzelattice.png",
                                shortDescription: "الباقة الأضخم 🔥",
                                fullDescription: "هي دي الباقة الأضخم في Marvel Rivals! مع **11680 Lattices**، هتكون معاك كل الموارد اللازمة للعبة. افتح كل الشخصيات الجديدة، واشتري كل السكنات النادرة، وعيش تجربة الأبطال الخارقين الكاملة. دي الباقة المثالية لإنك تحول حسابك لأسطورة حقيقية.",
                                platform: 'steam',
                                requiresMarvelId: true,
                                category: "marvel-rivals"
                            },


                            "netflix": {
                                id: "netflix",
                                title: "نتفليكس",
                                price: 50,
                                image: "./images/netflix.png",
                                shortDescription: "شاهد آلاف الأفلام والمسلسلات",
                                category: "tv_subscription",
                                fullDescription: "نوفر لك حساب مفعل بالمدة التي تختارها. استمتع بوصول غير محدود إلى مكتبة ضخمة من الأفلام والمسلسلات والبرامج الوثائقية الأصلية من Netflix. شاهد على أي جهاز، في أي وقت، وبأعلى جودة ممكنة.",
                                options: {
                                    "1_month": { title: "شهر واحد", price: 50 },
                                    "2_months": { title: "شهرين", price: 90 },
                                    "3_months": { title: "3 شهور", price: 135 },
                                    "6_months": { title: "6 شهور", price: 270 }
                                }
                            },
                            "disney": {
                                id: "disney",
                                title: "ديزني بلس",
                                price: 39,
                                image: "./images/disney.png",
                                shortDescription: "عالم من الترفيه لكل العائلة",
                                category: "tv_subscription",
                                fullDescription: "نوفر لك حساب مفعل بالمدة التي تختارها. استمتع بعالم من الترفيه من Disney, Pixar, Marvel, Star Wars, و National Geographic. احصل على أحدث الإصدارات، والكلاسيكيات الخالدة، والأعمال الأصلية الحصرية، كل ذلك في مكان واحد.",
                                options: {
                                    "1_month": { title: "شهر واحد", price: 39 },
                                    "2_months": { title: "شهرين", price: 75 },
                                    "3_months": { title: "3 شهور", price: 105 }
                                }
                            },
                            "crunchyroll": {
                                id: "crunchyroll",
                                title: "كرانشي رول",
                                price: 50,
                                image: "./images/crunshyyyy.png",
                                shortDescription: "أكبر موقع انمي في العالم",
                                category: "tv_subscription",
                                fullDescription: "نوفر لك حساب مفعل بالمدة التي تختارها. استمتع بأكبر مكتبة للأنمي في العالم. شاهد أحدث الحلقات بعد ساعة من بثها في اليابان. استمتع بآلاف الحلقات من مسلسلاتك المفضلة بدون إعلانات وبجودة عالية.",
                                options: {
                                    "1_month": { title: "شهر واحد", price: 50 },
                                    "2_months": { title: "شهرين", price: 90 },
                                    "3_months": { title: "3 شهور", price: 110 }
                                }
                            },
                            "valorant475": {
                                id: "valorant475",
                                title: "475 Valorant Points",
                                price: 270,
                                image: "./images/reyna - Copy.png",
                                shortDescription: "شحن 475 نقطة فالورانت",
                                fullDescription: "اشحن حسابك في لعبة فالورانت بـ 475 نقطة. استخدمها لشراء سكنات الأسلحة، Battle Pass، أو أي عناصر تجميلية أخرى داخل اللعبة.",
                                platform: 'riot',
                                specs: `<h3>متطلبات تشغيل VALORANT</h3>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>نظام التشغيل:</strong> Windows 7/8/10 64-Bit</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>المعالج:</strong> Intel Core 2 Duo E8400 / AMD Athlon 200GE</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>الذاكرة العشوائية (RAM):</strong> 4 GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>بطاقة الرسومات (GPU):</strong> Intel HD 4000 / Radeon R5 200</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>مساحة تخزين:</strong> 1 GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                </ul>`
                            },
                            "valorant1000": {
                                id: "valorant1000",
                                title: "1000 Valorant Points",
                                price: 510,
                                image: "./images/reyna - Copy.png",
                                shortDescription: "شحن 1000 نقطة فالورانت",
                                fullDescription: "عزز تجربتك في فالورانت بـ 1000 نقطة. هذه الباقة تمنحك المرونة الكافية للحصول على العناصر التي ترغب بها داخل اللعبة.",
                                platform: 'riot',
                                specs: `<h3>متطلبات تشغيل VALORANT</h3>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>نظام التشغيل:</strong> Windows 7/8/10 64-Bit</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>المعالج:</strong> Intel Core 2 Duo E8400 / AMD Athlon 200GE</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>الذاكرة العشوائية (RAM):</strong> 4 GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>بطاقة الرسومات (GPU):</strong> Intel HD 4000 / Radeon R5 200</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>مساحة تخزين:</strong> 1 GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                </ul>`
                            },
                            "valorant2050": {
                                id: "valorant2050",
                                title: "2050 Valorant Points",
                                price: 990,
                                image: "./images/reyna - Copy.png",
                                shortDescription: "شحن 2050 نقطة فالورانت",
                                fullDescription: "احصل على 2050 نقطة فالورانت لتتمكن من شراء حزم السكنات المميزة أو تجهيز شخصياتك بأفضل الإضافات التجميلية.",
                                platform: 'riot',
                                specs: `<h3>متطلبات تشغيل VALORANT</h3>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>نظام التشغيل:</strong> Windows 7/8/10 64-Bit</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>المعالج:</strong> Intel Core 2 Duo E8400 / AMD Athlon 200GE</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>الذاكرة العشوائية (RAM):</strong> 4 GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>بطاقة الرسومات (GPU):</strong> Intel HD 4000 / Radeon R5 200</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>مساحة تخزين:</strong> 1 GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                </ul>`
                            },
                            "valorant3650": {
                                id: "valorant3650",
                                title: "3650 Valorant Points",
                                price: 1830,
                                image: "./images/reyna - Copy.png",
                                shortDescription: "شحن 3650 نقطة فالورانت",
                                fullDescription: "باقة كبيرة من نقاط فالورانت تتيح لك حرية واسعة في الاختيار من بين أفضل العناصر والمجموعات الحصرية داخل اللعبة.",
                                platform: 'riot',
                                specs: `<h3>متطلبات تشغيل VALORANT</h3>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>نظام التشغيل:</strong> Windows 7/8/10 64-Bit</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>المعالج:</strong> Intel Core 2 Duo E8400 / AMD Athlon 200GE</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>الذاكرة العشوائية (RAM):</strong> 4 GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>بطاقة الرسومات (GPU):</strong> Intel HD 4000 / Radeon R5 200</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>مساحة تخزين:</strong> 1 GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                </ul>`
                            },
                            "valorant5350": {
                                id: "valorant5350",
                                title: "5350 Valorant Points",
                                price: 2530,
                                image: "./images/reyna - Copy.png",
                                shortDescription: "شحن 5350 نقطة فالورانت",
                                fullDescription: "وفر أكثر مع باقة 5350 نقطة. هذه هي فرصتك للحصول على كل ما تحلم به في فالورانت من سكنات نادرة وعناصر مميزة.",
                                platform: 'riot',
                                specs: `<h3>متطلبات تشغيل VALORANT</h3>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>نظام التشغيل:</strong> Windows 7/8/10 64-Bit</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>المعالج:</strong> Intel Core 2 Duo E8400 / AMD Athlon 200GE</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>الذاكرة العشوائية (RAM):</strong> 4 GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>بطاقة الرسومات (GPU):</strong> Intel HD 4000 / Radeon R5 200</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>مساحة تخزين:</strong> 1 GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                </ul>`
                            },
                            "valorant11000": {
                                id: "valorant11000",
                                title: "11000 Valorant Points",
                                price: 4990,
                                image: "./images/reyna - Copy.png",
                                shortDescription: "شحن 11000 نقطة فالورانت",
                                fullDescription: "الباقة الأكبر والأكثر توفيراً! 11000 نقطة تضمن لك الحصول على أندر المجموعات والعناصر داخل اللعبة لتتميز عن الجميع.",
                                platform: 'riot',
                                specs: `<h3>متطلبات تشغيل VALORANT</h3>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <ul>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>نظام التشغيل:</strong> Windows 7/8/10 64-Bit</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>المعالج:</strong> Intel Core 2 Duo E8400 / AMD Athlon 200GE</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>الذاكرة العشوائية (RAM):</strong> 4 GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>بطاقة الرسومات (GPU):</strong> Intel HD 4000 / Radeon R5 200</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li><strong>مساحة تخزين:</strong> 1 GB</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                </ul>`
                            },
                            "steam10k": {
                                id: "steam10k",
                                title: "10 آلاف Steam Points",
                                price: 140,
                                image: "./images/steampoints2.png",
                                shortDescription: "ابدأ في تخصيص بروفايلك",
                                fullDescription: "احصل على 10,000 نقطة ستيم لتزيين بروفايلك بالخلفيات والإطارات والرموز التعبيرية التي تعجبك. <br><br><strong>المنصة:</strong> <img src='./images/steam.png' class='platform-icon-description' alt='Steam Icon'> <strong>Steam</strong>",
                                platform: 'steam',
                                requiresSteamProfileLink: true
                            },
                            "steam20k": {
                                id: "steam20k",
                                title: "20 ألف Steam Points",
                                price: 255,
                                image: "./images/steampoints2.png",
                                shortDescription: "لتخصيص بروفايلك بالكامل",
                                fullDescription: "استخدم 20,000 نقطة لشراء خلفيات، أيقونات، وتخصيصات فريدة لتميز نفسك بين اللاعبين. <br><br><strong>المنصة:</strong> <img src='./images/steam.png' class='platform-icon-description' alt='Steam Icon'> <strong>Steam</strong>",
                                platform: 'steam',
                                requiresSteamProfileLink: true
                            },
                            "steam50k": {
                                id: "steam50k",
                                title: "50 ألف Steam Points",
                                price: 490,
                                image: "./images/steampoints2.png",
                                shortDescription: "اجعل بروفايلك خارقا",
                                fullDescription: "باقة 50,000 نقطة تمنحك حرية أكبر في تزيين وتخصيص حسابك على ستيم بكل ما هو مميز. <br><br><strong>المنصة:</strong> <img src='./images/steam.png' class='platform-icon-description' alt='Steam Icon'> <strong>Steam</strong>",
                                platform: 'steam',
                                requiresSteamProfileLink: true
                            },
                            "steamGift5": {
                                id: "steamGift5",
                                title: "بطاقة هدايا ستيم 5$",
                                price: 285,
                                image: "./images/steamcards.png",
                                shortDescription: "اشحن حسابك بـ 5 دولارات",
                                fullDescription: "اشحن محفظة ستيم الخاصة بك بـ 5 دولارات! هذه البطاقة العالمية تتيح لك شراء الألعاب، الإضافات، والعناصر من متجر ستيم بسهولة وأمان. <br><br><strong>المنصة:</strong> <img src='./images/steam.png' class='platform-icon-description' alt='Steam Icon'> <strong>Steam</strong>",
                                platform: 'steam'
                            },
                            "steamGift10": {
                                id: "steamGift10",
                                title: "بطاقة هدايا ستيم 10$",
                                price: 570,
                                image: "./images/steamcards.png",
                                shortDescription: "اشحن حسابك بـ 10 دولارات",
                                fullDescription: "أضف 10 دولارات إلى رصيدك في ستيم! هدية مثالية لنفسك أو لصديق، تفتح لك عالمًا من الألعاب الرائعة على منصة ستيم. <br><br><strong>المنصة:</strong> <img src='./images/steam.png' class='platform-icon-description' alt='Steam Icon'> <strong>Steam</strong>",
                                platform: 'steam'
                            },
                            "steamGift20": {
                                id: "steamGift20",
                                title: "بطاقة هدايا ستيم 20$",
                                price: 1140,
                                image: "./images/steamcards.png",
                                shortDescription: "املأ مكتبة ألعابك الآن",
                                fullDescription: "عزز مكتبة ألعابك! مع بطاقة 20 دولار، يمكنك الحصول على أحدث الألعاب أو الإضافات التي طالما رغبت بها. <br><br><strong>المنصة:</strong> <img src='./images/steam.png' class='platform-icon-description' alt='Steam Icon'> <strong>Steam</strong>",
                                platform: 'steam'
                            },
                            "steamGift50": {
                                id: "steamGift50",
                                title: "بطاقة هدايا ستيم 50$",
                                price: 2790,
                                image: "./images/steamcards.png",
                                shortDescription: "باقة فاخرة لعشاق الألعاب",
                                fullDescription: "باقة سخية لعشاق الألعاب! 50 دولارًا في محفظة ستيم تمنحك القدرة على شراء عدة ألعاب ضخمة أو الاستثمار في العناصر داخل اللعبة. <br><br><strong>المنصة:</strong> <img src='./images/steam.png' class='platform-icon-description' alt='Steam Icon'> <strong>Steam</strong>",
                                platform: 'steam'
                            },
                            "steamGift100": {
                                id: "steamGift100",
                                title: "بطاقة هدايا ستيم 100$",
                                price: 5550,
                                image: "./images/steamcards.png",
                                shortDescription: "الثراء ",
                                fullDescription: "الهدية المثالية لأي لاعب! بطاقة 100 دولار تضمن لك الحصول على أي لعبة تريدها، والمشاركة في التخفيضات الكبرى دون تردد. <br><br><strong>المنصة:</strong> <img src='./images/steam.png' class='platform-icon-description' alt='Steam Icon'> <strong>Steam</strong>",
                                platform: 'steam'
                            },
                            "roblox40": {
                                id: "roblox40",
                                title: "40 Robux",
                                price: 40,
                                image: "./images/roblox.png",
                                shortDescription: "شحن 40 روبوكس",
                                fullDescription: "احصل على 40 روبوكس لتخصيص شخصيتك وشراء عناصر مميزة داخل عالم Roblox.",
                                platform: 'roblox'
                            },
                            "roblox80": {
                                id: "roblox80",
                                title: "80 Robux",
                                price: 80,
                                image: "./images/roblox.png",
                                shortDescription: "شحن 80 روبوكس",
                                fullDescription: "ضاعف المرح مع 80 روبوكس. باقة مثالية للبدء في تجميع العناصر الرائعة.",
                                platform: 'roblox'
                            },
                            "roblox400": {
                                id: "roblox400",
                                title: "400 Robux",
                                price: 310,
                                image: "./images/roblox.png",
                                shortDescription: "شحن 400 روبوكس",
                                fullDescription: "باقة رائعة تمنحك 400 روبوكس لاستكشاف المزيد من الإمكانيات وشراء أفضل الإضافات.",
                                platform: 'roblox'
                            },
                            "roblox800": {
                                id: "roblox800",
                                title: "800 Robux",
                                price: 599,
                                image: "./images/roblox.png",
                                shortDescription: "شحن 800 روبوكس",
                                fullDescription: "عزز تجربتك في Roblox مع 800 روبوكس. اشترِ Game Passes أو خصص شخصيتك بأفضل الملابس.",
                                platform: 'roblox'
                            },
                            "roblox1700": {
                                id: "roblox1700",
                                title: "1700 Robux",
                                price: 1300,
                                image: "./images/roblox.png",
                                shortDescription: "شحن 1700 روبوكس",
                                fullDescription: "باقة كبيرة من الروبوكس تفتح لك أبوابًا واسعة من التخصيصات والعناصر النادرة.",
                                platform: 'roblox'
                            },
                            "roblox4700": {
                                id: "roblox4700",
                                title: "4700 Robux",
                                price: 1300,
                                image: "./images/roblox.png",
                                shortDescription: "شحن 4700 روبوكس",
                                fullDescription: "قيمة هائلة! احصل على 4700 روبوكس لتكون جاهزًا لأي شيء في عالم Roblox.",
                                platform: 'roblox'
                            },
                            "roblox4500": {
                                id: "roblox4500",
                                title: "4500 Robux",
                                price: 3000,
                                image: "./images/roblox.png",
                                shortDescription: "شحن 4500 روبوكس",
                                fullDescription: "واحدة من أكبر الباقات! 4500 روبوكس تضمن لك الحصول على أندر العناصر وأفضل الميزات.",
                                platform: 'roblox'
                            },
                            "fortnite1000": {
                                id: "fortnite1000",
                                title: "1000 VBucks",
                                price: 360,
                                image: "./images/fortnite.png",
                                shortDescription: "شحن 1000 VB",
                                fullDescription: "احصل على 1000 V-Bucks لاستخدامها في Fortnite. يمكنك شراء عناصر تخصيص جديدة مثل الأزياء، والطائرات الشراعية، والفؤوس، والرقصات، ومغلفات الأسلحة بالإضافة إلى Battle Pass للموسم الجديد!",
                                platform: 'epic'
                            },
                            "fortnite2800": {
                                id: "fortnite2800",
                                title: "2800 VBucks",
                                price: 820,
                                image: "./images/fortnite.png",
                                shortDescription: "اشحن دلوقتي 2800 VB",
                                fullDescription: "عزز تجربتك مع 2800 V-Bucks. باقة رائعة للحصول على Battle Pass والعديد من العناصر المميزة من متجر فورتنايت.",
                                platform: 'epic'
                            },

                            "fortnite5000": {
                                id: "fortnite5000",
                                title: "5000 VBucks",
                                price: 1350,
                                image: "./images/fortnite.png",
                                shortDescription: "اشحن دلوقتي 5000 VB",
                                fullDescription: "باقة كبيرة تمنحك 5000 V-Bucks. كن مستعدًا لشراء أندر الأزياء والحزم التي يصدرها متجر فورتنايت.",
                                platform: 'epic'
                            },
                            "fortnite13500": {
                                id: "fortnite13500",
                                title: "13500 VBucks",
                                price: 2950,
                                image: "./images/fortnite.png",
                                shortDescription: "اشحن دلوقتي 13500 VB",
                                fullDescription: "أكبر قيمة! احصل على 13500 V-Bucks لتضمن أنك لن تفوت أي عنصر حصري أو زي نادر في عالم فورتنايت.",
                                platform: 'epic'
                            },
                            "fortniteCrew": {
                                id: "fortniteCrew",
                                title: "Crew Pack",
                                price: 270,
                                image: "./images/Fortnitecrew.png",
                                shortDescription: "2500VB+Battlepass",
                                fullDescription: "اشترك في طاقم فورتنايت لتحصل على Battle Pass للموسم الكامل، 1000 V-Bucks كل شهر، وحزمة طاقم حصرية تحتوي على زي وإكسسوارات فريدة لا يمكن الحصول عليها إلا من خلال الاشتراك.",
                                platform: 'epic'
                            },
                            "fortniteStarter": {
                                id: "fortniteStarter",
                                title: "Starter Pack",
                                price: 200,
                                image: "./images/starterpack.png",
                                shortDescription: "600VB + سكن وبيكاكس ",
                                fullDescription: "أفضل طريقة للبدء في فورتنايت! تحتوي باندل الستارتر عادةً على زي حصري و 600 V-Bucks، مما يمنحك قيمة ممتازة بسعر منخفض.",
                                platform: 'epic'
                            },

                            "graphic-design-package": {
                                id: "graphic-design-package",
                                title: "تصاميم سوشيال ميديا وجرافيك ديزاين",
                                image: "./images/design-offer.png",
                                shortDescription: "احصل على تصاميم احترافية لصفحاتك على السوشيال ميديا.",
                                fullDescription: "احصل على تصاميم احترافية لصفحاتك على السوشيال ميديا، شعارات، أو أي عمل فني تحتاجه. تصاميم إبداعية تترك أثرًا لا يُنسى.",
                                category: "designs"
                            },
                            "video-editing-package": {
                                id: "video-editing-package",
                                title: "تصميم مقاطع فيديو وموشن جرافيك",
                                image: "./images/design-offer-two.png",
                                shortDescription: "حوّل أفكارك إلى فيديو جذاب ومتحرك.",
                                fullDescription: "نقدم خدمة تصميم فيديوهات إعلانية، مقدمات قنوات، ومقاطع موشن جرافيك عالية الجودة.",
                                category: "designs"
                            },
                            "gaming-content-package": {
                                id: "gaming-content-package",
                                title: "تصميمات للجيمنج وصناعة المحتوى",
                                image: "./images/gaming-content-design.png",
                                shortDescription: "تصميمات مخصصة للاعبين وصانعي المحتوى.",
                                fullDescription: "تصميمات مخصصة للاعبين وصانعي المحتوى: مقدمات وخواتم قنوات، شعارات للفرق، أغطية للقنوات، وأي عمل فني آخر لتجعل محتواك مميزًا.",
                                category: "designs"
                            },

                            "exit_lag_1_month": {
                                id: "exit_lag_1_month",
                                title: "كود  ExitLag",
                                price: 90,
                                image: "./images/exitlag.png",
                                shortDescription: "شهر واحد",
                                fullDescription: "احصل على أفضل تجربة لعب مع ExitLag. قلل الـ Ping وحسّن استقرار الاتصال لمدة شهر كامل.",
                                options: {
                                    "1_month": { title: "Key - شهر", price: 90 }
                                },
                                type: "software"
                            },
                            "adobe_creative_cloud_1_month": {
                                id: "adobe_creative_cloud_1_month",
                                title: "كود Adobe Creative",
                                price: 350,
                                image: "./images/adobe.png",
                                shortDescription: "كود شهر كامل",
                                fullDescription: "احصل على اشتراك كامل في باندل Adobe Creative Cloud لمدة شهر، يشمل جميع برامج Adobe مثل Photoshop و Illustrator و Premiere Pro والمزيد.",
                                options: {
                                    "1_month": { title: "Key - شهر", price: 350 }
                                },
                                type: "software"
                            },
                            "google_play_gift_card": {
                                id: "google_play_gift_card",
                                title: "Google Play Gift Card",
                                price: 60,
                                usd_price: 1.43,
                                image: "./images/googleplay.png",
                                shortDescription: "بطاقات هدايا جوجل بلاي",
                                fullDescription: "اشحن رصيد حسابك في Google Play بكل سهولة وأمان. استخدم الرصيد لشراء التطبيقات، الألعاب، الكتب، والمحتوى داخل الألعاب.",
                                isGiftCard: true,
                                options: {
                                    "5_dollar": { title: "5$", price: 275, usd_price: 5 },
                                    "10_dollar": { title: "10$", price: 550, usd_price: 10 },
                                    "25_dollar": { title: "25$", price: 1375, usd_price: 25 },
                                    "50_dollar": { title: "50$", price: 2750, usd_price: 50 }
                                },
                                type: "software" // ✅ إضافة نوع المنتج لتصنيفه
                            },
                            "gamepass": {
                                id: "gamepass",
                                title: "كود PC Game Pass ",
                                price: 220,
                                usd_price: 5.23,
                                image: "./images/Xbox.png",
                                shortDescription: "مئات الألعاب عالية الجودة",
                                fullDescription: "احصل على وصول غير محدود إلى مكتبة ضخمة تضم مئات الألعاب عالية الجودة على الكونسول والكمبيوتر الشخصي. استمتع بكل حصريات Xbox من اليوم الأول للإصدار، بالإضافة إلى اشتراك EA Play بدون تكلفة إضافية.",
                                platform: 'microsoft',
                                options: {
                                    "1_month": { title: "شهر واحد", price: 220, usd_price: 5.23 }
                                },
                                type: "software" // ✅ إضافة نوع المنتج لتصنيفه
                            },
                            "windows11_pro_key": {
                                id: "windows11_pro_key",
                                title: "Windows 11 Pro Key", // عنوان أقصر ليناسب الكارت
                                price: 199, // السعر الأساسي
                                usd_price: 4.75,
                                image: "./images/win11.png",
                                shortDescription: "مفتاح تفعيل أصلي", // سيظهر هذا النص فوق الصورة
                                fullDescription: "احصل على مفتاح تفعيل أصلي وشرعي لنظام التشغيل Windows 11 Pro. استمتع بجميع ميزات الأمان والأداء التي يقدمها ويندوز 11 برو.",
                                platform: 'microsoft',
                                category: "software_subscription", // <-- تم تغيير التصنيف
                                // ✅ تم إضافة هذا الجزء ليتوافق مع شكل كارت الاشتراكات
                                options: {
                                    "lifetime": { title: "مدى الحياة", price: 199, usd_price: 4.75 }
                                },
                            },
                            // COD
                            "cod_custom_order_bo6": {
                                id: "cod_custom_order_bo6",
                                title: "طلب خدمة مخصصة",
                                image: "./images/cod_custom_order.png",
                                shortDescription: "هل لديك طلب غير موجود؟",
                                fullDescription: "إذا كانت لديك خدمة معينة تريدها وغير مدرجة في القائمة، تواصل معنا مباشرة عبر الدعم الفني وسنبذل قصارى جهدنا لتلبيتها.",
                                platform: 'activision',
                                category: "cod-bo6", // <-- مهم: لوضعه في قسم BO6
                                isCustomOrder: true // <-- خاصية جديدة لتمييز هذا الكارت
                            },
                            "cod_custom_order_mw3": {
                                id: "cod_custom_order_mw3",
                                title: "طلب خدمة مخصصة",
                                image: "./images/cod_custom_order.png",
                                shortDescription: "هل لديك طلب غير موجود؟",
                                fullDescription: "إذا كانت لديك خدمة معينة تريدها وغير مدرجة في القائمة، تواصل معنا مباشرة عبر الدعم الفني وسنبذل قصارى جهدنا لتلبيتها.",
                                platform: 'activision',
                                category: "cod-mw3", // <-- مهم: لوضعه في قسم MW3
                                isCustomOrder: true // <-- خاصية جديدة لتمييز هذا الكارت
                            },
                            "bo6_gold_camo": {
                                id: "bo6_gold_camo",
                                title: "Gold Camo + Max Weapon",
                                usd_price: 3.03,
                                image: "./images/cod_gold_camo.png",
                                shortDescription: "لكل أسلحة BO6",
                                fullDescription: "احصل على كامو الجولد لأي سلاح من اختيارك، بالإضافة إلى رفع مستوى السلاح إلى الحد الأقصى (Max Level).",
                                platform: 'activision',
                                requiresAccountDetails: true,
                                category: "cod-bo6"
                            },
                            "bo6_zombies_augment": {
                                id: "bo6_zombies_augment",
                                title: "Unlock 1 Zombies Augment",
                                usd_price: 2.70,
                                image: "./images/cod_zombies_augment.png",
                                shortDescription: "اختر أي تطوير للزومبي",
                                fullDescription: "فتح أي تطوير (Augment) من اختيارك في طور الزومبي لمساعدتك على البقاء على قيد الحياة لفترة أطول.",
                                platform: 'activision',
                                requiresAccountDetails: true,
                                category: "cod-bo6"
                            },
                            "bo6_unlock_any_item": {
                                id: "bo6_unlock_any_item",
                                title: "Unlock any item in Armory",
                                usd_price: 3.00,
                                image: "./images/cod_armory.png",
                                shortDescription: "فتح أي عنصر من الترسانة",
                                fullDescription: "فتح أي عنصر تريده مباشرة من الترسانة (Armory Unlocks) دون الحاجة لإكمال التحديات الخاصة به.",
                                platform: 'activision',
                                requiresAccountDetails: true,
                                category: "cod-bo6"
                            },
                            "bo6_nuke_card": {
                                id: "bo6_nuke_card",
                                title: "Nuke Calling Card",
                                usd_price: 8.00,
                                image: "./images/cod_nuke_card.png",
                                shortDescription: "احصل على بطاقة النيوك النادرة",
                                fullDescription: "سنقوم بتنفيذ تحدي النيوك الصعب (Nuke Challenge) على حسابك لفتح بطاقة التعريف (Calling Card) الحصرية والمميزة.",
                                platform: 'activision',
                                requiresAccountDetails: true,
                                category: "cod-bo6"
                            },
                            "bo6_dark_matter": {
                                id: "bo6_dark_matter",
                                title: "33 Dark matter",
                                usd_price: 39.00,
                                image: "./images/cod_dark_matter.png", // تأكد من أن لديك صورة للكامو
                                shortDescription: "BO6 | Choose the weapons",
                                fullDescription: "احصل على كامو الـ Dark Matter لكل 33 سلاح في لعبة Modern Warfare 3. هذه الخدمة تتطلب الدخول إلى حسابك وتمنحك أندر وأجمل الكاموهات في اللعبة.",
                                platform: 'activision',
                                requiresAccountDetails: true,
                                category: "cod-bo6" // هذا التصنيف مهم جداً لظهوره في القسم الصحيح
                            },
                            "bo6_hard_break_card": {
                                id: "bo6_hard_break_card",
                                title: "Hard Break Calling Card",
                                usd_price: 3.00,
                                image: "./images/cod_hard_break_card.png",
                                shortDescription: "بطاقة تعريف تحدي Hard Breakup",
                                fullDescription: "إكمال تحدي 'Hard Breakup' وفتح بطاقة التعريف الخاصة به.",
                                platform: 'activision',
                                requiresAccountDetails: true,
                                category: "cod-bo6"
                            },

                            "mw3_interstellar_camo": {
                                id: "mw3_interstellar_camo",
                                title: "Interstellar Camo",
                                usd_price: 25.00,
                                image: "./images/cod_interstellar_camo.png",
                                shortDescription: "لكل أسلحة MW3",
                                fullDescription: "احصل على كامو Interstellar النادر والمميز لجميع أسلحة Modern Warfare 3. الخدمة تتطلب الدخول لحسابك.",
                                platform: 'activision',
                                requiresAccountDetails: true,
                                category: "cod-mw3"
                            },
                            "mw3_nuke_skin": {
                                id: "mw3_nuke_skin",
                                title: "Nuke Skin Operator",
                                usd_price: 15.00,
                                image: "./images/cod_nuke_skin.png",
                                shortDescription: "افتح سكن النيوك النادر",
                                fullDescription: "سنقوم بتنفيذ تحدي النيوك الصعب (Nuke Challenge) في Modern Warfare 3 لفتح سكن العميل (Operator Skin) الحصري.",
                                platform: 'activision',
                                requiresAccountDetails: true,
                                category: "cod-mw3"
                            },
                            "mw3_gold_camo": {
                                id: "mw3_gold_camo",
                                title: "Gold Camo + Max Weapon",
                                usd_price: 3.03, // نفس السعر
                                image: "./images/cod_gold_camo.png", // نفس الصورة
                                shortDescription: "لكل أسلحة MW3",
                                fullDescription: "احصل على كامو الذهب لأي سلاح من اختيارك في Modern Warfare 3، بالإضافة إلى رفع مستوى السلاح إلى الحد الأقصى.",
                                platform: 'activision',
                                requiresAccountDetails: true,
                                category: "cod-mw3" // مهم جدًا لوضعه في قسم MW3
                            },
                            // =================== XBOX PRODUCTS START ===================
                            "xbox_gift_card_10": {
                                id: "xbox_gift_card_10",
                                title: "10$ Gift card",
                                price: 650,
                                usd_price: 11.33,
                                image: "./images/xbox_card.png", // ❗ مطلوب منك إضافة صورة بهذا الاسم
                                fullDescription: "اشحن رصيد حسابك على متجر Xbox (للحسابات الأمريكية) لشراء الألعاب، الإضافات، أو اشتراك الجيم باس.",
                                platform: 'microsoft',
                                category: "xbox-cards", // <-- فئة جديدة
                                isGiftCard: true
                            },
                            "xbox_gift_card_15": {
                                id: "xbox_gift_card_15",
                                title: "15$ Gift card",
                                price: 950, //
                                usd_price: 17, // (تقريباً 17 دولار بعد حساب الرسوم)
                                image: "./images/xbox_card.png",
                                shortDescription: "اشحن حسابك بـ 15$ (حساب أمريكي)",
                                fullDescription: "اشحن رصيد حسابك على متجر Xbox (للحسابات الأمريكية) لشراء الألعاب، الإضافات، أو اشتراك الجيم باس.",
                                platform: 'microsoft',
                                category: "xbox-cards", // ✅ هذا السطر يضمن ظهوره في قسم الكروت الرفيعة
                                isGiftCard: true
                            },
                            "xbox_gift_card_25": {
                                id: "xbox_gift_card_25",
                                title: "25$ Gift card",
                                price: 1499,
                                usd_price: 27.25,
                                image: "./images/xbox_card.png", // ❗ مطلوب منك إضافة صورة بهذا الاسم
                                fullDescription: "اشحن رصيد حسابك على متجر Xbox (للحسابات الأمريكية) لشراء الألعاب، الإضافات، أو اشتراك الجيم باس.",
                                platform: 'microsoft',
                                category: "xbox-cards",
                                isGiftCard: true
                            },
                            "xbox_gift_card_50": {
                                id: "xbox_gift_card_50",
                                title: "50$ Gift card",
                                price: 2998, // يمكنك تعديل السعر
                                usd_price: 54.50, // يمكنك تعديل السعر
                                image: "./images/xbox_card.png",
                                shortDescription: "اشحن حسابك بـ 50$ (حساب أمريكي)",
                                fullDescription: "اشحن رصيد حسابك على متجر Xbox (للحسابات الأمريكية) لشراء الألعاب، الإضافات، أو اشتراك الجيم باس.",
                                platform: 'microsoft',
                                category: "xbox-cards", // <-- أهم شيء هو الكاتيجوري
                                isGiftCard: true
                            },
                            "xbox_game_pass_ultimate": {
                                id: "xbox_game_pass_ultimate",
                                title: "Game Pass Ultimate (1 Month)",
                                price: 900,
                                usd_price: 21.43,
                                image: "./images/Xbox.png",
                                shortDescription: "مئات الألعاب. كل المزايا. (US)",
                                fullDescription: "احصل على كل مزايا Game Pass Core، بالإضافة إلى مئات الألعاب عالية الجودة على الكونسول والكمبيوتر، و EA Play. (يعمل على الحسابات الأمريكية).",
                                platform: 'microsoft',
                                category: "xbox-popular",
                                requiresAccountDetails: true, // ✅✅ تم إضافة هذا السطر
                                isGiftCard: true
                            },
                            "minecraft": {
                                id: "minecraft",
                                title: "حساب Minecraft",
                                price: 650,
                                image: "./images/minecraft.png",
                                shortDescription: "ابدأ رحلتك الماينكرافتة",
                                fullDescription: "انغمس في عالم لوس سانتوس المترامي الأطراف! أفضل تجربة عالمها مفتوح تشمل طور القصة والاونلاين، هذا الحساب يمنحك الصلاحيات كاملة .",
                                platform: 'microsoft',
                                // --- تم حذف سطر الكاتيجوري من هنا ---
                                stock: 3, // <-- سيبنا العداد هنا عشان "الأكثر مبيعاً"
                                specs: `<h3>Potato PC`
                            }, // <--- ✅✅ تأكد من وجود الفاصلة (comma) دي هنا
                            "minecraft_xbox": {
                                id: "minecraft_xbox",
                                title: "على اكونتك Minecraft (Xbox/PC)",
                                price: 1450,
                                usd_price: 8.10,
                                image: "./images/minecraft.png",
                                shortDescription: "ابدأ رحلتك الماينكرافتة",
                                fullDescription: "انغمس في عالم لوس سانتوس المترامي الأطراف! أفضل تجربة عالمها مفتوح تشمل طور القصة والاونلاين، هذا الحساب يمنحك الصلاحيات كاملة .",
                                platform: 'microsoft',
                                category: "xbox-popular",
                                requiresAccountDetails: true, // ✅✅ تم إضافة هذا السطر
                                specs: `<h3>متطلبات تشغيل Minecraft: Java Edition</h3>... (باقي الكود)`
                            },
                            // =================== XBOX PRODUCTS END ===================
                            // =================== COD PRODUCTS END ===================
                            "it_takes_two_rent": {
                                id: "it_takes_two_rent",
                                title: "It Takes Two",
                                price: 70,
                                image: "./images/it-takes-two.png",
                                shortDescription: "مغامرة تعاونية لا مثيل لها. حساب ستيم يتيح لك تختيم اللعبة بالكامل",
                                platform: 'steam',
                                isRentable: true,
                                options: {
                                    "one_week": { title: "أسبوع", price: 70 },
                                    "two_weeks": { title: "أسبوعين", price: 100 },
                                    "one_month": { title: "شهر", price: 150 },
                                    "two_months": { title: "شهرين", price: 220 },
                                }
                            },

                            "a_way_out_rent": {
                                id: "a_way_out_rent",
                                title: "A Way Out",
                                price: 70,
                                image: "./images/a-way-out.png",
                                shortDescription: "رحلة درامية للهرب من السجن بالتعاون مع صديقك. حساب ستيم يتيح لك تختيم اللعبة بالكامل",
                                platform: 'steam',
                                isRentable: true,
                                options: {
                                    "one_week": { title: "أسبوع", price: 65 },
                                    "two_weeks": { title: "أسبوعين", price: 90 },
                                    "one_month": { title: "شهر", price: 130 },
                                    "two_months": { title: "شهرين", price: 160 },
                                }
                            },
                            "little_nightmares_3_rent": {
                                id: "little_nightmares_3_rent",
                                title: "Little Nightmares III",
                                price: 80,
                                image: "./images/ln3.png",
                                shortDescription: "التعاون في عالم مرعب! حساب ستيم يتيح لك تختيم اللعبة بالكامل",
                                platform: 'steam',
                                isRentable: true,
                                options: {
                                    "one_week": { title: "أسبوع", price: 80 },
                                    "two_weeks": { title: "أسبوعين", price: 120 },
                                    "one_month": { title: "شهر", price: 180 },
                                    "two_months": { title: "شهرين", price: 260 },
                                }
                            },
                            "silent_hollow_bundle": {
                                "id": "silent_hollow_bundle",
                                // ✅✅ تم تصحيح العنوان هنا
                                "title": "باندل الغموض Silent Hill F & Hollow Knight: Silksong",
                                "price": 200,
                                "usd_price": 4.50,
                                "image": "./images/silent_hollow_bundle.png",
                                "shortDescription": "مغامرتان فريدتان في عالمين غامضين.",
                                "fullDescription": "اجمع بين تجربتين لا مثيل لهما! انغمس في الرعب النفسي والجمال المخيف للعبة Silent Hill F التي تأخذك إلى اليابان في حقبة الستينيات، ثم انطلق في مغامرة ملحمية في مملكة الحشرات المنسية مع Hollow Knight: Silksong. هذه الحزمة مثالية للاعبين الذين يعشقون القصص العميقة والأجواء الغامرة.",
                                "platform": "steam",
                                "badges": ["OFFLINE", "BUNDLE"],
                                "category": "offline-steam",
                                "specs": "<p>متطلبات التشغيل لكل لعبة متاحة على صفحتها الخاصة على متجر Steam.</p>"
                            },
                            // --- (هنا يمكنك إضافة باقي منتجاتك القديمة، مع التأكد من وجود فاصلة بينهم) ---
                            "gta": {
                                id: "gta",
                                title: "حساب GTA 5 Steam",
                                price: 750,
                                image: "./images/GTA5Banner.png",
                                shortDescription: "ابدأ رحلتك في لوس سانتوس",
                                fullDescription: "انغمس في عالم لوس سانتوس المترامي الأطراف!",
                                platform: 'steam'
                            },
                            // =================== PLAYSTATION PRODUCTS START ===================
                            "ps_plus_subscription": {
                                id: "ps_plus_subscription",
                                title: "اشتراك PlayStation Plus",
                                price: 250,
                                usd_price: 6.00,
                                image: "./images/ps_plus.png",
                                shortDescription: "Essential, Extra, Deluxe",
                                fullDescription: "احصل على وصول لمكتبة ضخمة من الألعاب، اللعب أونلاين، خصومات حصرية، والمزيد مع باقات PlayStation Plus. اختر الباقة والمدة التي تناسبك.",
                                platform: 'playstation',
                                options: {
                                    "essential_1": { title: "Essential - شهر", price: 250, usd_price: 6.00 },
                                    "essential_3": { title: "Essential - 3 شهور", price: 650, usd_price: 15.50 },
                                    "essential_12": { title: "Essential - سنة", price: 1800, usd_price: 42.85 },
                                    "extra_1": { title: "Extra - شهر", price: 380, usd_price: 9.05 },
                                    "extra_3": { title: "Extra - 3 شهور", price: 1050, usd_price: 25.00 },
                                    "extra_12": { title: "Extra - سنة", price: 3000, usd_price: 71.40 },
                                    "deluxe_1": { title: "Deluxe - شهر", price: 450, usd_price: 10.70 },
                                    "deluxe_3": { title: "Deluxe - 3 شهور", price: 1250, usd_price: 29.75 },
                                    "deluxe_12": { title: "Deluxe - سنة", price: 3500, usd_price: 83.33 }
                                },
                                category: "ps-plus",
                            },
                            "psn_gift_card_10": {
                                id: "psn_gift_card_10",
                                title: "10$",
                                price: 650,
                                usd_price: 11.33,
                                image: "./images/psn_card.png",
                                shortDescription: "اشحن محفظتك بـ 10$ (حساب أمريكي)",
                                fullDescription: "اشحن رصيد محفظتك على PlayStation Store لشراء الألعاب، الإضافات (DLCs)، وكل ما تريده. الكود يعمل على الحسابات الأمريكية.",
                                platform: 'playstation',
                                category: "psn-cards",
                                isGiftCard: true
                            },
                            "psn_gift_card_20": {
                                id: "psn_gift_card_20",
                                title: "20$",
                                price: 1190,
                                usd_price: 22.20,
                                image: "./images/psn_card.png",
                                shortDescription: "اشحن محفظتك بـ 20$ (حساب أمريكي)",
                                fullDescription: "اشحن رصيد محفظتك على PlayStation Store لشراء الألعاب، الإضافات (DLCs)، وكل ما تريده. الكود يعمل على الحسابات الأمريكية.",
                                platform: 'playstation',
                                category: "psn-cards",
                                isGiftCard: true
                            },
                            "psn_gift_card_25": {
                                id: "psn_gift_card_25",
                                title: "25$",
                                price: 1499,
                                usd_price: 27.25,
                                image: "./images/psn_card.png",
                                shortDescription: "اشحن محفظتك بـ 25$ (حساب أمريكي)",
                                fullDescription: "اشحن رصيد محفظتك على PlayStation Store لشراء الألعاب، الإضافات (DLCs)، وكل ما تريده. الكود يعمل على الحسابات الأمريكية.",
                                platform: 'playstation',
                                category: "psn-cards",
                                isGiftCard: true
                            },
                            "psn_gift_card_50": {
                                id: "psn_gift_card_50",
                                title: "50$",
                                price: 2750,
                                usd_price: 55,
                                image: "./images/psn_card.png",
                                shortDescription: "اشحن محفظتك بـ 50$ (حساب أمريكي)",
                                fullDescription: "اشحن رصيد محفظتك على PlayStation Store لشراء الألعاب، الإضافات (DLCs)، وكل ما تريده. الكود يعمل على الحسابات الأمريكية.",
                                platform: 'playstation',
                                category: "psn-cards",
                                isGiftCard: true
                            },
                            "psn_gift_card_100": {
                                id: "psn_gift_card_100",
                                title: "100$",
                                price: 5499,
                                usd_price: 119,
                                image: "./images/psn_card.png",
                                shortDescription: "اشحن محفظتك بـ 100$ (حساب أمريكي)",
                                fullDescription: "اشحن رصيد محفظتك على PlayStation Store لشراء الألعاب، الإضافات (DLCs)، وكل ما تريده. الكود يعمل على الحسابات الأمريكية.",
                                platform: 'playstation',
                                category: "psn-cards",
                                isGiftCard: true
                            },
                            "spiderman2_ps_offline": {
                                id: "spiderman2_ps_offline",
                                title: "Marvel's Spider-Man 2",
                                price: 150,
                                usd_price: 3.57,
                                image: "./images/spiderman2.png",
                                shortDescription: "كن أعظم.",
                                fullDescription: "عش تجربة الرجل العنكبوت المذهلة مع بيتر باركر ومايلز موراليس. واجه أعداء جدد أقوياء مثل فينوم في قصة ملحمية لا تُنسى.",
                                platform: 'playstation',
                                badges: ['OFFLINE'],
                                category: "ps-offline-games" // <-- تأكد من هذا الاسم
                            },
                            "helldivers2_ps_offline": {
                                id: "helldivers2_ps_offline",
                                title: "Helldivers 2",
                                price: 130,
                                usd_price: 3.10,
                                image: "./images/helldivers2.png",
                                shortDescription: "انشر الديمقراطية في المجرة.",
                                fullDescription: "انضم إلى فرقة Helldivers وحارب من أجل الحرية في مجرة معادية في لعبة إطلاق نار تعاونية من منظور الشخص الثالث.",
                                platform: 'playstation',
                                badges: ['OFFLINE', 'CO-OP'],
                                category: "ps-offline-games" // <-- تأكد من هذا الاسم
                            },
                            // =================== PLAYSTATION PRODUCTS END ===================

                        };




                        const orders = {
                            "74562341": { status: "تم الشحن", img: "images/my-shipped.png" },
                            "12345678": { status: "تم التوصيل", img: "images/my-delivered.png" },
                            "87654321": { status: "قيد التجهيز", img: "images/my-processing.png" },
                            "10101010": { status: "خرج للتوصيل", img: "images/my-outfordelivery.png" }
                        };
                        const discountCodes = {
                            "SAMA": { percentage: 2 },
                            "SOHAYL": { percentage: 1 },
                            "GOE": { percentage: 3 },
                            "HEX": { percentage: 3 }

                        };

                        let currentProduct = null;
                        let cart = JSON.parse(localStorage.getItem('cart')) || {};
                        let paymentTimerInterval = null;
                        let appliedDiscount = null;
                        let animationEventTarget = null; // سيحتفظ بمكان النقرة لتشغيل الأنيميشن

                        function initializeFakeRatings() {
                            const productIds = Object.keys(productsData);

                            productIds.forEach(id => {
                                const storageKey = `comments_${id}`;
                                if (!localStorage.getItem(storageKey)) {
                                    const fakeComments = [];
                                    const reviewCount = Math.floor(Math.random() * 10) + 1;

                                    for (let i = 0; i < reviewCount; i++) {
                                        fakeComments.push({
                                            name: `عميل #${i + 1}`,
                                            text: "منتج ممتاز وخدمة سريعة!",
                                            rating: 5,
                                            date: new Date().toISOString(),
                                            helpfulCount: 0
                                        });
                                    }
                                    localStorage.setItem(storageKey, JSON.stringify(fakeComments));
                                }
                            });
                        }


                        function handlePaymentSubmit(form) { // لاحظ التغيير هنا: استقبلنا الفورم مباشرة

                            // 🛑 تم حذف event.preventDefault() لأننا منعناه في مكان آخر



                            const loadingSection = document.getElementById('loading');

                            const loadingText = document.getElementById('loading-text');

                            const confirmationSection = document.getElementById('confirmationMessage');



                            const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzt27JC9nearJ6_WJneWlGEAwCcah34lNQeytvmbWneKSi2d0x0s7eQwbFPBlr8P_7e/exec";



                            form.closest('.modal-content-section').classList.remove('is-visible');

                            loadingText.textContent = "جاري إرسال طلبك... من فضلك انتظر.";

                            loadingSection.classList.add('is-visible');

                            loadingSection.style.display = 'block';



                            const formData = new FormData(form);

                            const data = Object.fromEntries(formData.entries());



                            fetch(SCRIPT_URL, {

                                method: 'POST',

                                mode: 'no-cors',

                                cache: 'no-cache',

                                headers: {

                                    'Content-Type': 'application/json'

                                },

                                body: JSON.stringify(data)

                            })

                                .finally(() => {

                                    loadingSection.classList.remove('is-visible');

                                    loadingSection.style.display = 'none';



                                    // 🛑🛑 التعديل هنا: استخدام هيكل HTML الجديد بالكامل 🛑🛑

                                    confirmationSection.innerHTML = `

                                                                                                                                                                                                            <div class="thank-you-message-wrapper">



                                                                                                                                                                                                                <i class="fa-solid fa-circle-check checkmark-icon"></i>



                                                                                                                                                                                                                <h2 class="thank-you-title">شكراً لشرائك من Berlin Store</h2>



                                                                                                                                                                                                                <hr class="thank-you-divider">



                                                                                                                                                                                                                <p class="thank-you-text">تم استلام طلبك بنجاح وسيتم إرساله في أقرب وقت.</p>

                                                                                                                                                                                                            </div>

                                                                                                                                                                                                        `;

                                    // 🛑 تم إزالة تعيين اللون المباشر لأنه تم تعريفه في تنسيقات CSS سابقة (أو يجب إضافته)

                                    // confirmationSection.style.color = "#00ff00";
                                    addPoints(200);

                                    if (typeof markCouponAsUsed === 'function') markCouponAsUsed();

                                    confirmationSection.classList.add('is-visible');



                                    // 💡 ملاحظة: يجب إضافة التنسيقات (CSS) المذكورة سابقًا في ملف  ليعمل هذا المظهر بشكل صحيح.



                                    cart = {};

                                    localStorage.setItem('cart', JSON.stringify(cart));

                                    updateCartCount();



                                    setTimeout(() => {

                                        closeModal('paymentModal');

                                    }, 4000);

                                });

                        }

                        function showToast(message) {
                            const container = document.getElementById('toast-container');
                            const toast = document.createElement('div');
                            toast.className = 'toast-notification';
                            toast.textContent = message;
                            container.appendChild(toast);

                            setTimeout(() => {
                                toast.classList.add('show');
                            }, 10);

                            setTimeout(() => {
                                toast.classList.remove('show');
                                toast.addEventListener('transitionend', () => {
                                    if (toast.parentElement) {
                                        toast.remove();
                                    }
                                });
                            }, 3000);
                        }


                        function loadOfflineSteamGamesToHome() {
                            const container = document.getElementById('offlineSteamContainer');
                            const loadMoreBtn = document.getElementById('loadMoreOfflineGamesBtn');
                            if (!container || !loadMoreBtn) return;

                            const allOfflineSteamIds = [
                                // ✅ تم التأكيد على وجود البطاقة هنا
                                'mafia', 'residentevil_offline', 'sekiro_offline', 'thelastofus_offline', 'ac_shadows_offline', 'silent_hill_f_offline', 'silent_hill_2_remake_offline', 'stalker_2_offline',
                                'cyberpunk_2077_offline', 'ghostoftsushima_offline', 'black_myth_wukong_offline', 'witcher3_offline', 'eldenring_offline',
                                'silksong_offline', 'ragnarok_offline', 're4_remake_offline', 're4_separate_ways_offline', 'tlou1_offline',
                                'residentevil2_remake_offline', 'residentevil3_remake_offline', 'cuphead_offline',
                                'silent_hollow_bundle', 'tlou_bundle', 'gow_got_bundle', 'cyberpunk_re4_bundle', 'cod_category_card',
                            ];

                            const regularIds = allOfflineSteamIds.filter(id => !id.includes('bundle'));
                            const bundleIds = allOfflineSteamIds.filter(id => id.includes('bundle'));

                            const renderQueue = [...regularIds];
                            if (regularIds.length > 0 && bundleIds.length > 0) {
                                renderQueue.push('SEPARATOR');
                            }
                            renderQueue.push(...bundleIds);

                            const initialCount = 4;
                            const initialItems = renderQueue.slice(0, initialCount);
                            const moreItems = renderQueue.slice(initialCount);

                            container.innerHTML = '';

                            const renderItem = (item) => {
                                if (item === 'SEPARATOR') {
                                    const separator = document.createElement('div');
                                    separator.className = 'product-separator';
                                    container.appendChild(separator);
                                } else if (productsData[item]) {
                                    renderProductItem(productsData[item], container, 'games', true);
                                }
                            };

                            initialItems.forEach(renderItem);

                            if (moreItems.length > 0) {
                                loadMoreBtn.style.display = 'inline-flex';
                                loadMoreBtn.dataset.state = 'more';

                                const updateButtonState = () => {
                                    if (loadMoreBtn.dataset.state === 'more') {
                                        loadMoreBtn.innerHTML = `<span>عرض المزيد</span> <svg xmlns="https://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>`;
                                    } else {
                                        loadMoreBtn.innerHTML = `<span>إخفاء</span> <svg xmlns="https://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="18 15 12 9 6 15"></polyline></svg>`;
                                    }
                                };
                                updateButtonState();

                                loadMoreBtn.onclick = () => {
                                    if (loadMoreBtn.dataset.state === 'more') {
                                        const hiddenItems = container.querySelectorAll('.newly-added');
                                        if (hiddenItems.length > 0) {
                                            hiddenItems.forEach(item => {
                                                item.style.display = 'flex';
                                                // إعادة تشغيل الأنيميشن عند إظهارهم مرة أخرى
                                                item.classList.add('card-enter');
                                            });
                                        } else {
                                            moreItems.forEach((item, index) => {
                                                if (item === 'SEPARATOR') {
                                                    const separator = document.createElement('div');
                                                    separator.className = 'product-separator newly-added';
                                                    container.appendChild(separator);
                                                } else if (productsData[item]) {
                                                    const newItem = renderProductItem(productsData[item], container, 'games', true, true);
                                                    newItem.classList.add('newly-added');
                                                    newItem.style.opacity = '0';

                                                    setTimeout(() => {
                                                        newItem.classList.add('card-enter');

                                                        // ✅✅ الكود الجديد يبدأ هنا ✅✅
                                                        // نستمع لحدث انتهاء الأنيميشن
                                                        newItem.addEventListener('animationend', () => {
                                                            // بمجرد انتهاء الأنيميشن، نزيل الكلاس ونضبط الشفافية
                                                            newItem.classList.remove('card-enter');
                                                            newItem.style.opacity = '';
                                                        }, { once: true }); // { once: true } تضمن أن المستمع يعمل مرة واحدة فقط ثم يحذف نفسه
                                                        // ✅✅ الكود الجديد ينتهي هنا ✅✅

                                                    }, index * 100);
                                                }
                                            });
                                        }
                                        loadMoreBtn.dataset.state = 'less';
                                    } else {
                                        const itemsToHide = container.querySelectorAll('.newly-added');
                                        itemsToHide.forEach(item => {
                                            item.style.display = 'none';
                                            // إزالة الكلاس عند الإخفاء لضمان إعادة تشغيل الأنيميشن لاحقًا
                                            item.classList.remove('card-enter');
                                        });
                                        loadMoreBtn.dataset.state = 'more';
                                        document.getElementById('offline-steam-section').scrollIntoView({ behavior: 'smooth', block: 'start' });
                                    }
                                    updateButtonState();
                                };
                            } else {
                                loadMoreBtn.style.display = 'none';
                            }
                        }


                        function loadSteamGamesGifting() {
                            const container = document.getElementById('steamGamesGiftingContainer');
                            container.innerHTML = '';
                            const gameGiftIds = ['gta_gift', 'rust_gift', 'seaofthieves_gift', 'rdr2_gift', 'eldenring_gift', 'wallpaperEngine_gift'];
                            gameGiftIds.forEach(id => {
                                if (productsData[id]) {
                                    renderProductItem(productsData[id], container, 'steam_gifting', true);
                                }
                            });
                        }


                        document.addEventListener('DOMContentLoaded', () => {

                            if (window.location.hash.startsWith('#global')) {
                                // 1. تغيير العملة برمجيًا إلى الدولار
                                currentCurrency = 'USD';

                                // 2. تحديث شكل القائمة المنسدلة لتظهر كلمة "GLOBAL"
                                document.getElementById('currency-selector').value = 'USD';

                                // 3. تنظيف الرابط لكي تعمل باقي أجزاء الموقع بشكل سليم
                                let cleanHash = window.location.hash.substring(7); // حذف كلمة #global
                                if (cleanHash.startsWith('/')) {
                                    cleanHash = '#' + cleanHash.substring(1);
                                } else {
                                    cleanHash = '#home'; // إذا كان الرابط #global فقط، اذهب للرئيسية
                                }
                                // تحديث الرابط في المتصفح بدون إعادة تحميل الصفحة
                                history.replaceState(null, null, ' ' + cleanHash);
                            }
                            const searchInput = document.getElementById('navbarProductSearch');
                            const searchResultsContainer = document.getElementById('navbar-search-results');

                            window.addEventListener('click', function (event) {
                                if (searchInput && searchResultsContainer && !searchInput.contains(event.target) && !searchResultsContainer.contains(event.target)) {
                                    closeInstantSearch();
                                }
                            });

                            const paymentSelector = document.getElementById('custom-payment-selector');
                            const paymentOptions = document.getElementById('custom-payment-options');
                            const paymentContainer = document.querySelector('.custom-select-container');
                            const realSelect = document.getElementById('modalPaymentMethod');

                            if (paymentSelector) {
                                // 1. فتح وإغلاق القائمة
                                paymentSelector.addEventListener('click', (e) => {
                                    e.stopPropagation(); // منع إغلاق القائمة فوراً
                                    paymentContainer.classList.toggle('open');
                                });

                                // 2. اختيار عنصر
                                paymentOptions.addEventListener('click', (e) => {
                                    const option = e.target.closest('.custom-option');
                                    if (!option) return;

                                    const selectedValue = option.dataset.value;
                                    const selectedText = option.querySelector('span').textContent;

                                    // 3. تحديث القائمة المخفية الأصلية
                                    realSelect.value = selectedValue;

                                    // 4. تحديث الزر الظاهر
                                    paymentSelector.querySelector('span').textContent = selectedText;

                                    // 5. إغلاق القائمة
                                    paymentContainer.classList.remove('open');
                                });
                                // S <-- ✅✅ تم مسح حرف S من هنا
                            }

                            // 6. إغلاق القائمة عند الضغط في أي مكان آخر
                            window.addEventListener('click', () => {
                                if (paymentContainer && paymentContainer.classList.contains('open')) {
                                    paymentContainer.classList.remove('open');
                                }
                            }); // <-- ✅✅ تم إضافة القوس الناقص هنا

                            const toggleLink = document.getElementById('toggle-discount-link');
                            const discountWrapper = document.getElementById('discount-wrapper');

                            toggleLink.addEventListener('click', () => {
                                discountWrapper.classList.toggle('visible');
                            });

                            document.body.addEventListener('click', function (event) {
                                // نبحث عن أقرب رابط ضغطه المستخدم
                                const link = event.target.closest('a');

                                // نتأكد أن الرابط موجود وموجه لداخل الصفحة (يبدأ بـ #)
                                if (link && link.getAttribute('href').startsWith('#')) {
                                    // نصعد لأعلى الصفحة
                                    window.scrollTo(0, 0);
                                }
                            });

                            document.getElementById('discord-deco-decrease').addEventListener('click', () => {
                                const quantityInput = document.getElementById('discord-deco-quantity');
                                let currentValue = parseInt(quantityInput.value);
                                if (currentValue > 1) {
                                    quantityInput.value = currentValue - 1;
                                    calculateDiscordDecoPrice();
                                }
                            });

                            document.getElementById('discord-deco-increase').addEventListener('click', () => {
                                const quantityInput = document.getElementById('discord-deco-quantity');
                                quantityInput.value = parseInt(quantityInput.value) + 1;
                                calculateDiscordDecoPrice();
                            });

                            // ✅✅ الكود الجديد لزر تبديل الثيم ✅✅
                            const themeToggleButton = document.getElementById('theme-toggle-btn');
                            const initialTheme = localStorage.getItem('theme') || 'dark-mode';

                            // تطبيق الثيم عند تحميل الصفحة
                            document.body.classList.toggle('light-mode', initialTheme === 'light-mode');

                            // إضافة حدث النقر للزر
                            themeToggleButton.addEventListener('click', () => {
                                document.body.classList.toggle('light-mode');

                                let newTheme = document.body.classList.contains('light-mode') ? 'light-mode' : 'dark-mode';
                                localStorage.setItem('theme', newTheme);
                            });

                            // ====================================================================
                            // START: تحديد العملة تلقائيًا عند تحميل الصفحة بناءً على الرابط
                            // ====================================================================
                            if (window.location.hash.startsWith('#global')) {
                                // 1. تغيير العملة برمجيًا إلى الدولار
                                currentCurrency = 'USD';

                                // 2. تحديث شكل القائمة المنسدلة لتظهر كلمة "GLOBAL"
                                document.getElementById('currency-selector').value = 'USD';

                                // 3. تنظيف الرابط لكي تعمل باقي أجزاء الموقع بشكل سليم
                                let cleanHash = window.location.hash.substring(7); // حذف كلمة #global
                                if (cleanHash.startsWith('/')) {
                                    cleanHash = '#' + cleanHash.substring(1);
                                } else {
                                    cleanHash = '#home'; // إذا كان الرابط #global فقط، اذهب للرئيسية
                                }
                                // تحديث الرابط في المتصفح بدون إعادة تحميل الصفحة
                                history.replaceState(null, '', ' ' + cleanHash);
                            }
                            // ====================================================================
                            // END: تحديد العملة تلقائيًا
                            // ====================================================================

                            // الكود القديم الموجود عندك يبدأ من هنا ويكمل زي ما هو
                            initializeFakeRatings();
                            // ...

                            initializeFakeRatings();

                            generateRankSelectors();
                            loadGamesToHome();
                            loadDiscordDecorations();
                            loadSubscriptionsToHome();
                            loadOfflineSteamGamesToHome();
                            loadSteamGiftCardsToHome();
                            loadPlaystationSection();
                            loadSteamPointsToHome();
                            updateCartCount();
                            loadXboxSection();
                            loadSoftwareKeys();
                            loadGameRentalsToHome();
                            setupStarRatingInput();
                            loadStoreRatings();
                            setupStoreRatingInput();
                            renderStoreReviews();

                            // ====================================================================== //
                            // START: تعديل نافذة التأكيد المدمجة للدفع (مع ذاكرة مؤقتة)             //
                            // ====================================================================== //

                            // --- التعامل مع فورم فودافون كاش ---
                            const vodafoneForm = document.getElementById('vodafoneForm');
                            const vfFormFields = document.getElementById('vodafone-form-fields');
                            const vfConfirmationView = document.getElementById('vodafone-confirmation-view');

                            vodafoneForm.addEventListener('submit', function (event) {
                                event.preventDefault(); // امنع الإرسال دائمًا

                                // ✅ التحقق من الذاكرة
                                if (hasConfirmedOnce) {
                                    handlePaymentSubmit(this); // إذا تم التأكيد من قبل، أرسل مباشرة
                                } else {
                                    vfFormFields.style.display = 'none'; // إذا كانت أول مرة، أظهر نافذة التأكيد
                                    vfConfirmationView.style.display = 'block';
                                }
                            });

                            document.getElementById('vodafone-confirm-yes').addEventListener('click', () => {
                                hasConfirmedOnce = true; // ✅ قم بتحديث الذاكرة
                                handlePaymentSubmit(vodafoneForm); // نفذ الدالة الأصلية
                            });

                            document.getElementById('vodafone-confirm-no').addEventListener('click', () => {
                                vfConfirmationView.style.display = 'none';
                                vfFormFields.style.display = 'flex';
                            });


                            // --- التعامل مع فورم باي بال ---
                            const paypalForm = document.getElementById('paypalForm');
                            const ppFormFields = document.getElementById('paypal-form-fields');
                            const ppConfirmationView = document.getElementById('paypal-confirmation-view');

                            paypalForm.addEventListener('submit', function (event) {
                                event.preventDefault(); // امنع الإرسال دائمًا

                                // ✅ التحقق من الذاكرة
                                if (hasConfirmedOnce) {
                                    handlePaymentSubmit(this); // إذا تم التأكيد من قبل، أرسل مباشرة
                                } else {
                                    ppFormFields.style.display = 'none'; // إذا كانت أول مرة، أظهر نافذة التأكيد
                                    ppConfirmationView.style.display = 'block';
                                }
                            });

                            document.getElementById('paypal-confirm-yes').addEventListener('click', () => {
                                hasConfirmedOnce = true; // ✅ قم بتحديث الذاكرة
                                handlePaymentSubmit(paypalForm);
                            });

                            document.getElementById('paypal-confirm-no').addEventListener('click', () => {
                                ppConfirmationView.style.display = 'none';
                                ppFormFields.style.display = 'block';
                            });

                            // ====================================================================== //
                            // END: تعديل نافذة التأكيد المدمجة للدفع                                  //
                            // ====================================================================== //


                            const navbar = document.getElementById('navbar');
                            window.addEventListener('scroll', () => {
                                if (window.scrollY > 10) {
                                    navbar.classList.add('navbar-scrolled');
                                } else {
                                    navbar.classList.remove('navbar-scrolled');
                                }
                            });

                            handleRouting();
                            window.addEventListener('hashchange', handleRouting);
                        });

                        function setupStarRatingInput() {
                            const starsContainer = document.getElementById('ratingStars');
                            if (!starsContainer) return;

                            const ratingInput = document.getElementById('commentRating');
                            const stars = starsContainer.querySelectorAll('.star');

                            stars.forEach(star => {
                                star.addEventListener('click', () => {
                                    const value = star.dataset.value;
                                    ratingInput.value = value;
                                    starsContainer.dataset.rating = value;
                                });
                            });
                        }
                        function addPaymentLogos() {
                            const selectElement = document.getElementById('modalPaymentMethod');
                            if (selectElement) {
                                const options = selectElement.options;
                                for (let i = 0; i < options.length; i++) {
                                    const option = options[i];
                                    if (option.value === 'vodafone') {
                                        option.textContent = 'فودافون كاش - محفظة';
                                        const img = document.createElement('img');
                                        img.src = './images/vf-cash.png';
                                        img.className = 'payment-option-logo';
                                        option.prepend(img);
                                    } else if (option.value === 'paypal') {
                                        option.textContent = 'بايبال';
                                        const img = document.createElement('img');
                                        img.src = './images/paypal.png';
                                        img.className = 'payment-option-logo';
                                        option.prepend(img);
                                    }
                                }
                            }
                        }

                        function handleRouting() {
                            const hash = window.location.hash || '#home';
                            const [section, param] = hash.substring(1).split('/');

                            // 1. إخفاء جميع الأقسام والصفحات الخاصة أولاً
                            // (Hide everything initially)
                            document.querySelectorAll('.section, .main-products-section').forEach(s => s.style.display = 'none');

                            // إخفاء الصفحات الخاصة المستقلة
                            ['my-orders-page', 'my-orders-auth-page', 'dev-services-page', 'profile-settings-page'].forEach(id => {
                                const el = document.getElementById(id);
                                if (el) el.style.display = 'none';
                            });

                            const user = firebase.auth().currentUser;

                            switch (section) {
                                // ============================================================
                                // 1. حالة الصفحة الرئيسية (وكل الأقسام اللي جواها)
                                // ============================================================
                                case 'home':
                                case 'subscriptions-section':
                                case 'software-keys-section':
                                case 'offline-steam-section':
                                case 'steam-points-section':
                                case 'game-topup-section':
                                case 'personal-gifting-section':
                                case 'playstation-section':
                                case 'xbox-gifting-section':
                                case 'game-rentals-section':
                                case 'discord-decorations-section':
                                case 'services-section':
                                case 'gaming-services-section':
                                case 'feedback-section':
                                case 'about':
                                case 'faq':
                                case 'terms':
                                case 'privacy':

                                    // ✅✅ الحل هنا: إعادة إظهار كل أقسام الصفحة الرئيسية ✅✅
                                    const homePageSections = [
                                        'home',
                                        'special-offers-section',
                                        'games-section',
                                        'subscriptions-section',
                                        'game-topup-section',
                                        'offline-steam-section',
                                        'personal-gifting-section',
                                        'game-rentals-section',
                                        'xbox-gifting-section',
                                        'steam-gift-cards-section',
                                        'steam-points-section',
                                        'discord-decorations-section',
                                        'software-keys-section',
                                        'playstation-section',
                                        'services-section',
                                        'gaming-services-section',
                                        'feedback-section',
                                        'about', 'faq', 'terms', 'privacy' // والفوتر والأقسام النصية
                                    ];

                                    homePageSections.forEach(id => {
                                        const el = document.getElementById(id);
                                        if (el) el.style.display = 'block';
                                    });

                                    // إعادة إظهار الناف بار وزر السلة
                                    const navBar = document.getElementById('navbar');
                                    if (navBar) navBar.style.display = 'flex';

                                    const cartBtn = document.querySelector('.fixed-cart-button');
                                    if (cartBtn) cartBtn.style.display = 'flex';

                                    // السكرول للقسم المطلوب (لو ضغطت على لينك في الناف بار)
                                    if (section !== 'home') {
                                        setTimeout(() => {
                                            const targetSection = document.getElementById(section);
                                            if (targetSection) {
                                                targetSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                                            }
                                        }, 100);
                                    } else {
                                        // لو راجع للرئيسية، اطلع فوق
                                        window.scrollTo(0, 0);
                                    }
                                    break;

                                // ============================================================
                                // 2. باقي الصفحات المنفصلة (تظهر لوحدها)
                                // ============================================================
                                case 'developing':
                                    // إخفاء الناف بار في صفحة المطورين
                                    if (document.getElementById('navbar')) document.getElementById('navbar').style.display = 'none';
                                    if (document.querySelector('.fixed-cart-button')) document.querySelector('.fixed-cart-button').style.display = 'none';

                                    // إظهار الصفحة
                                    if (typeof showDevPageV2 === 'function') {
                                        showDevPageV2();
                                    } else {
                                        const devPage = document.getElementById('dev-services-page');
                                        if (devPage) devPage.style.display = 'block';
                                    }
                                    window.scrollTo(0, 0);
                                    break;

                                case 'products':
                                    showSection('products');
                                    loadProducts();
                                    break;

                                case 'my-orders-page':
                                    if (user) {
                                        // إظهار الناف بار هنا
                                        if (document.getElementById('navbar')) document.getElementById('navbar').style.display = 'flex';

                                        const page = document.getElementById('my-orders-page');
                                        if (page) page.style.display = 'flex';
                                        if (typeof fetchUserOrders === 'function') fetchUserOrders();
                                    } else {
                                        window.location.hash = '#my-orders-auth-page';
                                    }
                                    break;

                                case 'my-orders-auth-page':
                                    if (user) {
                                        window.location.hash = '#my-orders-page';
                                    } else {
                                        if (document.getElementById('navbar')) document.getElementById('navbar').style.display = 'flex';
                                        const authPage = document.getElementById('my-orders-auth-page');
                                        if (authPage) authPage.style.display = 'flex';
                                    }
                                    break;

                                case 'profile-settings':
                                    if (document.getElementById('navbar')) document.getElementById('navbar').style.display = 'flex';
                                    showSection('profile-settings-page');
                                    break;

                                // --- الصفحات الفرعية (تظهر لوحدها) ---
                                case 'valorantPoints':
                                    showSection('valorantPoints');
                                    loadValorantPoints();
                                    break;
                                case 'roblox':
                                    showSection('roblox');
                                    loadRobux();
                                    break;
                                case 'fortnite':
                                    showSection('fortnite');
                                    loadFortnite();
                                    break;
                                case 'steamGiftCards':
                                    // 1. إعادة إظهار جميع أقسام الصفحة الرئيسية (لأن هذا القسم جزء منها وليس صفحة منفصلة)
                                    const steamHomeSections = [
                                        'home', 'games-section', 'special-offers-section', 'subscriptions-section', 'game-topup-section',
                                        'offline-steam-section', 'personal-gifting-section', 'game-rentals-section',
                                        'xbox-gifting-section', 'steam-gift-cards-section', // <-- القسم المستهدف
                                        'steam-points-section', 'discord-decorations-section',
                                        'software-keys-section', 'playstation-section', 'services-section',
                                        'gaming-services-section', 'feedback-section',
                                        'about', 'faq', 'terms', 'privacy'
                                    ];

                                    steamHomeSections.forEach(id => {
                                        const el = document.getElementById(id);
                                        if (el) el.style.display = 'block';
                                    });

                                    // 2. التأكد من ظهور الناف بار وزر السلة
                                    if (document.getElementById('navbar')) document.getElementById('navbar').style.display = 'flex';
                                    if (document.querySelector('.fixed-cart-button')) document.querySelector('.fixed-cart-button').style.display = 'flex';

                                    // 3. تحميل الكروت الخاصة بـ Steam Gift Cards
                                    if (typeof loadSteamGiftCardsToHome === 'function') {
                                        loadSteamGiftCardsToHome();
                                    }

                                    // 4. السكرول الناعم للقسم
                                    setTimeout(() => {
                                        const target = document.getElementById('steam-gift-cards-section');
                                        if (target) {
                                            target.scrollIntoView({ behavior: 'smooth', block: 'center' });
                                        }
                                    }, 100);
                                    break;
                                case 'cod-services':
                                    showSection('cod-services');
                                    loadCoDServices();
                                    break;
                                case 'playstation-games-page':
                                    showSection('playstation-games-page');
                                    loadPlaystationGamesPage();
                                    break;
                                case 'all-cod-games':
                                    showSection('all-cod-games');
                                    loadAllCodGames();
                                    break;
                                case 'steamGamesGifting':
                                    showSection('steamGamesGifting');
                                    loadSteamGamesGifting();
                                    break;
                                case 'genshinImpact':
                                    showSection('genshinImpact');
                                    loadGenshinImpact();
                                    break;
                                case 'rocketleague':
                                    showSection('rocketleague');
                                    loadRocketLeague();
                                    break;
                                case 'marvelRivals':
                                    showSection('marvelRivals');
                                    loadMarvelRivals();
                                    break;
                                case 'designs':
                                    showSection('designs');
                                    break;
                                case 'shipping':
                                    showSection('shipping');
                                    break;
                                case 'discordDecorationsPage':
                                    showSection('discordDecorationsPage');
                                    loadDiscordDecorations();
                                    break;
                                case 'valorant-boosting':
                                    showSection('valorant-boosting');
                                    if (typeof generateRankSelectors === 'function') generateRankSelectors();
                                    loadValorantBoosting();
                                    break;
                                case 'fortnite-boosting':
                                    showSection('fortnite-boosting');
                                    break;
                                case 'valorant-coaching':
                                    showSection('valorant-coaching');
                                    loadValorantCoaching();
                                    break;
                                case 'fortnite-coaching':
                                    showSection('fortnite-coaching');
                                    loadFortniteCoaching();
                                    break;

                                // صفحة المنتج الفردية
                                case 'product':
                                    if (param && productsData[param]) {
                                        showProductPage(param);
                                    } else {
                                        showSection('home');
                                    }
                                    break;

                                case 'searchResults':
                                    showSection('searchResults');
                                    break;

                                default:
                                    // لو الرابط غلط، ارجع للرئيسية
                                    window.location.hash = '#home';
                                    break;
                            }
                        }

                        /* === START: JavaScript for Navbar Search Bar === */
                        function performNavbarSearch() {
                            const query = document.getElementById('navbarProductSearch').value;
                            if (query.trim() === '') return;
                            performGlobalSearch(query);
                        }

                        function loadSoftwareKeys() {
                            const container = document.getElementById('softwareKeysContainer');
                            container.innerHTML = '';
                            const softwareKeysIds = ['windows11_pro_key', 'exit_lag_1_month', 'adobe_creative_cloud_1_month', 'google_play_gift_card', 'gamepass'];
                            softwareKeysIds.forEach(id => {
                                if (productsData[id]) {
                                    // ✅ هنا نستخدم الكلاس الجديد
                                    renderProductItem(productsData[id], container, 'software_keys', false, 'software-card-unique');
                                }
                            });
                        }

                        // تعريف أقسام الصفحة الرئيسية التي يجب أن تظهر مع بعضها (نظام الصفحة الطويلة)
                        const mainPageSections = [
                            'home',
                            'special-offers-section',
                            'games-section',
                            'subscriptions-section',
                            'game-topup-section',
                            'offline-steam-section',
                            'personal-gifting-section',
                            'game-rentals-section',
                            'xbox-gifting-section',
                            'steam-gift-cards-section',
                            'steam-points-section',
                            'discord-decorations-section',
                            'software-keys-section',
                            'playstation-section',
                            'services-section',
                            'gaming-services-section',
                            'feedback-section',
                            'products'
                        ];

                        function showSection(sectionId) {
                            // نحدد هل القسم المطلوب هو جزء من الصفحة الرئيسية الطويلة أم صفحة منفصلة؟
                            const isMainSection = mainPageSections.includes(sectionId);

                            // 1. نحضر جميع الأقسام الموجودة في الموقع (أي عنصر واخد كلاس section)
                            const allSections = document.querySelectorAll('.section');

                            if (isMainSection) {
                                // === الحالة الأولى: المستخدم عايز يروح لجزء في الصفحة الرئيسية ===

                                allSections.forEach(sec => {
                                    // لو القسم ده تبع الصفحة الرئيسية -> اظهره، غير كده -> اخفيه
                                    if (mainPageSections.includes(sec.id)) {
                                        sec.style.display = 'block';
                                    } else {
                                        sec.style.display = 'none';
                                    }
                                });

                                // عمل سكرول ناعم للقسم المحدد داخل الصفحة الرئيسية
                                const target = document.getElementById(sectionId);
                                if (target) {
                                    setTimeout(() => {
                                        target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                                    }, 50);
                                }

                            } else {
                                // === الحالة الثانية: المستخدم عايز يروح لصفحة منفصلة (مثل صفحة منتج) ===

                                // نخفي كل الأقسام بلا استثناء
                                allSections.forEach(sec => {
                                    sec.style.display = 'none';
                                });

                                // نظهر فقط القسم المستهدف
                                const target = document.getElementById(sectionId);
                                if (target) {
                                    target.style.display = 'block';
                                    // في الصفحات المنفصلة، دايماً نطلع لأول الصفحة
                                    window.scrollTo({ top: 0, behavior: 'auto' });
                                }
                            }
                        }

                        function showModal(modalId) {
                            const modal = document.getElementById(modalId);
                            const overlay = document.getElementById('overlay');

                            // إخفاء كل النوافذ المنبثقة الأخرى قبل فتح النافذة الجديدة
                            document.querySelectorAll('.modal').forEach(m => m.classList.remove('is-visible'));

                            if (modal && overlay) {
                                modal.classList.add('is-visible');
                                overlay.style.display = 'block';
                                document.body.style.overflow = 'hidden';
                            }
                        }

                        function closeModal(modalId) {
                            const modals = document.querySelectorAll('.modal');
                            const overlay = document.getElementById('overlay');

                            if (modalId === 'all') {
                                modals.forEach(m => m.classList.remove('is-visible'));
                            } else {
                                const modal = document.getElementById(modalId);
                                if (modal) {
                                    modal.classList.remove('is-visible');
                                }
                            }

                            const visibleModals = document.querySelectorAll('.modal.is-visible');
                            if (visibleModals.length === 0 && overlay) {
                                overlay.style.display = 'none';
                                document.body.style.overflow = 'auto';
                            }

                            clearInterval(paymentTimerInterval);
                            document.querySelectorAll('.confirm-payment-btn').forEach(btn => btn.disabled = false);

                            const paymentModal = document.getElementById('paymentModal');
                            if (paymentModal) {
                                const allSections = paymentModal.querySelectorAll('.modal-content-section');
                                allSections.forEach(section => section.classList.remove('is-visible'));
                                document.getElementById('modalCommonContent').classList.add('is-visible');
                            }
                        }

                        // هذه الدالة الجديدة تحتوي على منطق الإضافة الفعلي
                        // النسخة النهائية والمعدلة - تقوم بحفظ البيانات الإضافية داخل السلة
                        function performAddToCart(productId, quantity, event, extraData = {}) {
                            const audio = new Audio('https://www.myinstants.com/media/sounds/mario-coin.mp3'); // صوت عملة ماريو
                            audio.volume = 0.5;
                            audio.play();
                            if (event) {
                                // لا نمرر الزر نفسه، بل الحدث الخاص بالماوس
                                flyToCart(event);
                            }
                            showToast("تمت إضافة المنتج للسلة بنجاح!");

                            // التحقق مما إذا كان المنتج موجودًا بالفعل في السلة
                            if (cart[productId]) {
                                // إذا كان موجودًا، فقط قم بزيادة الكمية
                                cart[productId].quantity += quantity;
                            } else {
                                // إذا كان منتجًا جديدًا، قم بإنشائه ودمج البيانات الإضافية معه
                                cart[productId] = {
                                    ...productsData[productId], // نسخ بيانات المنتج الأساسية
                                    quantity: quantity,
                                    ...extraData // <-- هذا هو السطر الأهم: دمج كل البيانات الإضافية
                                };
                            }

                            // حفظ السلة المحدثة وتحديث الواجهة
                            localStorage.setItem('cart', JSON.stringify(cart));
                            setTimeout(() => {
                                updateCartCount();
                                const cartButton = document.querySelector('.fixed-cart-button');
                                cartButton.classList.add('added');
                                setTimeout(() => {
                                    cartButton.classList.remove('added');
                                }, 400);
                            }, 500); // تأخير بسيط لให้ الأنيميشن يكتمل
                        }

                        // هذه هي النسخة المحدثة من الدالة الأصلية
                        function addToCartHandler(event, productId, quantity) {
                            const product = productsData[productId];
                            const requiresInfo = product.platform === 'riot' ||
                                product.platform === 'roblox' ||
                                product.platform === 'epic' ||
                                product.requiresSteamFriendCode ||
                                product.requiresSteamProfileLink;

                            if (requiresInfo) {
                                animationEventTarget = event.target;
                                openPaymentModal(productId, 'addToCartMode');
                            } else {
                                performAddToCart(productId, quantity, event);
                            }
                        }

                        function loadMarvelRivals() {
                            const container = document.getElementById('marvelRivalsContainer');
                            if (!container) return;
                            container.innerHTML = '';

                            for (const productId in productsData) {
                                const product = productsData[productId];
                                if (product.category === 'marvel-rivals') {
                                    renderProductItem(product, container, 'marvel-rivals', true);
                                }
                            }
                        }

                        function flyToCart(event) {
                            const cartBtn = document.querySelector('.fixed-cart-button');
                            if (!cartBtn || !event) return;

                            const productCard = event.target.closest('.product-item, .subscription-item');
                            let sourceImageElement;

                            if (productCard) {
                                sourceImageElement = productCard.querySelector('.product-image-wrapper img, .sub-image-wrapper img');
                            } else {
                                sourceImageElement = document.getElementById('productPageImage');
                            }

                            if (!sourceImageElement) return;

                            const sourceRect = sourceImageElement.getBoundingClientRect();
                            const cartRect = cartBtn.getBoundingClientRect();

                            const flyingImg = document.createElement('img');
                            flyingImg.src = sourceImageElement.src;
                            flyingImg.className = 'product-image-fly';
                            document.body.appendChild(flyingImg);

                            flyingImg.style.left = `${sourceRect.left}px`;
                            flyingImg.style.top = `${sourceRect.top}px`;
                            flyingImg.style.width = `${sourceRect.width}px`;
                            flyingImg.style.height = `${sourceRect.height}px`;

                            requestAnimationFrame(() => {
                                flyingImg.style.left = `${cartRect.left + cartRect.width / 2}px`;
                                flyingImg.style.top = `${cartRect.top + cartRect.height / 2}px`;
                                flyingImg.style.width = '0px';
                                flyingImg.style.height = '0px';
                                flyingImg.style.opacity = '0.5';
                                flyingImg.style.transform = 'rotate(180deg)';
                            });

                            setTimeout(() => {
                                flyingImg.remove();
                            }, 800);
                        }

                        // ✅✅ الدالة بعد تعديلها لتفتح نافذة الشراء للاشتراكات مباشرة ✅✅
                        function renderProductItem(product, container, sectionType, showRating, returnElement = false) {
                            let productPrice, currencySymbol;
                            let priceDisplay = '';

                            if (product.category === 'cod-bo6' || product.category === 'cod-mw3') {
                                productPrice = product.usd_price ? product.usd_price.toFixed(2) : 'N/A';
                                currencySymbol = 'USD';
                                priceDisplay = `السعر: <span class="product-price">${productPrice}</span> <span class="currency-symbol">${currencySymbol}</span>`;
                            } else if (product.actionLink) {
                                priceDisplay = '';
                            } else {
                                currencySymbol = currentCurrency === 'USD' ? 'USD' : 'EGP';
                                if (product.options) {
                                    const firstOptionKey = Object.keys(product.options)[0];
                                    const firstOptionData = product.options[firstOptionKey];

                                    // --- (التعديل يبدأ هنا) ---
                                    if (currentCurrency === 'USD') {
                                        let baseUsdPrice = firstOptionData.usd_price || (firstOptionData.price / exchangeRate);

                                        // ✅ الإضافة: التحقق إذا كان المنتج إكسبوكس
                                        if (product.platform === 'microsoft') {
                                            baseUsdPrice = baseUsdPrice * 0.70; // ✅ تم التعديل إلى 80%
                                        }
                                        productPrice = baseUsdPrice.toFixed(2);
                                    } else {
                                        productPrice = firstOptionData.price; // السعر بالجنيه
                                    }
                                    // --- (التعديل ينتهي هنا) ---

                                    priceDisplay = `يبدأ من ${productPrice} ${currencySymbol}`;

                                } else if (product.price !== undefined) {

                                    // --- (التعديل يبدأ هنا) ---
                                    if (currentCurrency === 'USD') {
                                        let baseUsdPrice = product.usd_price || (product.price / exchangeRate);

                                        // ✅ الإضافة: التحقق إذا كان المنتج إكسبوكس
                                        if (product.platform === 'microsoft') {
                                            baseUsdPrice = baseUsdPrice * 1.20; // إضافة 20%
                                        }
                                        productPrice = baseUsdPrice.toFixed(2);
                                    } else {
                                        productPrice = product.price; // السعر بالجنيه
                                    }
                                    // --- (التعديل ينتهي هنا) ---

                                    priceDisplay = `السعر: <span class="product-price">${productPrice}</span> <span class="currency-symbol">${currencySymbol}</span>`;
                                }
                            }

                            let item = document.createElement('div');
                            let buttonsHTML = '';
                            let platformIconHTML = '';
                            let itemClass = 'product-item glass-card';

                            // ✅✅ بداية التعديل الرئيسي ✅✅
                            // تحديد الإجراء عند الضغط على الصورة
                            let clickHandler;
                            const isSubscription = product.category === 'tv_subscription' || product.category === 'software_subscription' || product.category === 'ps-plus';

                            if (isSubscription) {
                                // إذا كان المنتج اشتراكًا، افتح نافذة الشراء مباشرة
                                clickHandler = `openPaymentModal('${product.id}', 'buyNow')`;
                            } else if (product.actionLink) {
                                // إذا كان رابطًا، اذهب للرابط
                                clickHandler = `window.location.hash = '${product.actionLink}'`;
                            } else {
                                // لباقي المنتجات، اذهب لصفحة المنتج
                                clickHandler = `window.location.hash = '#product/${product.id}'`;
                            }
                            // ✅✅ نهاية التعديل الرئيسي ✅✅


                            if (product.options && !product.isRentable) {
                                itemClass = 'subscription-item';
                                if (product.category === 'ps-plus') {
                                    itemClass += ' ps-plus-card';
                                }
                                buttonsHTML = `
                                                                                                                                                                                                                                                                                                                                                        <div class="product-buttons-container">
                                                                                                                                                                                                                                                                                                                                                            <button onclick="openPaymentModal('${product.id}', 'buyNow')" class="buy-btn">اشتري الآن</button>
                                                                                                                                                                                                                                                                                                                                                            <button onclick="openPaymentModal('${product.id}', 'addToCartMode')" class="add-to-cart-btn">
                                                                                                                                                                                                                                                                                                                                                                <img src="./images/cartt.png" alt="Add to cart icon" loading="lazy">
                                                                                                                                                                                                                                                                                                                                                            </button>
                                                                                                                                                                                                                                                                                                                                                        </div>`;
                                item.className = itemClass;

                                const title = (currentLanguage === 'en' && product.title_en) ? product.title_en : product.title;

                                item.innerHTML = `
                                                                                                                                                                                                                                                                                                                                                        <div class="sub-image-wrapper" onclick="${clickHandler}">
                                                                                                                                                                                                                                                                                                                                                            <div class="sub-description-overlay">${product.shortDescription || ''}</div>
                                                                                                                                                                                                                                                                                                                                                            <img src="${product.image}" alt="${title}" loading="lazy" onerror="this.onerror=null;this.src='./images/placeholder.png';">
                                                                                                                                                                                                                                                                                                                                                        </div>
                                                                                                                                                                                                                                                                                                                                                        <div class="sub-content">
                                                                                                                                                                                                                                                                                                                                                            <h3 onclick="${clickHandler}">${title}</h3>
                                                                                                                                                                                                                                                                                                                                                            <div class="sub-footer">
                                                                                                                                                                                                                                                                                                                                                                <span class="sub-price">${priceDisplay}</span>
                                                                                                                                                                                                                                                                                                                                                                ${buttonsHTML}
                                                                                                                                                                                                                                                                                                                                                            </div>
                                                                                                                                                                                                                                                                                                                                                        </div>`;
                            } else {
                                // ... (باقي كود الدالة للمنتجات العادية يبقى كما هو بدون تغيير)
                                if (product.category === 'offline-steam') {
                                    itemClass += ' product-item--offline';
                                } else if (product.category === 'psn-cards') {
                                    itemClass += ' psn-gift-card-item';
                                }
                                if (product.id.includes('bundle') || (product.badges && product.badges.includes('BUNDLE'))) {
                                    itemClass += ' bundle-card';
                                }
                                if (['valorant', 'roblox', 'fortnite', 'genshin'].includes(sectionType)) {
                                    item.classList.add('valorant-item');
                                }
                                if (product.platform) {
                                    let iconSrc = '';
                                    switch (product.platform) {
                                        case 'steam': iconSrc = './images/steam.png'; break;
                                        case 'microsoft': iconSrc = './images/microsoft.png'; break;
                                        case 'riot': iconSrc = './images/riotgames.png'; break;
                                        case 'roblox': iconSrc = './images/robloxlogo.png'; break;
                                        case 'epic': iconSrc = './images/epicgames.png'; break;
                                        case 'hoyoverse': iconSrc = './images/hoyoverse.png'; break;
                                        case 'activision': iconSrc = './images/activision.png'; break;
                                        case 'discord': iconSrc = './images/discord.png'; break;
                                    }
                                    if (iconSrc) {
                                        platformIconHTML = `<div class="platform-icon"><img src="${iconSrc}" alt="${product.platform} Icon" loading="lazy"></div>`;
                                    }
                                }

                                if (product.actionLink) {
                                    buttonsHTML = `<div class="product-buttons-container" style="justify-content: center;"><button onclick="${clickHandler}" class="buy-btn" style="background-color: #00a8ff; border-color: #00a8ff;">اختار الجزء</button></div>`;
                                } else if (product.id.startsWith('steamGift')) {
                                    buttonsHTML = `<div class="product-buttons-container"><button onclick="addToCartHandler(event, '${product.id}', 1)" class="add-to-cart-text-btn">أضف إلى السلة</button></div>`;
                                } else if (product.requiresSteamProfileLink || product.requiresSteamFriendCode) {
                                    buttonsHTML = `<div class="product-buttons-container"><button onclick="openPaymentModal('${product.id}', 'buyNow')" class="buy-btn">شراء الآن</button><button onclick="addToCartWithReminder(event, '${product.id}')" class="add-to-cart-btn"><img src="./images/cartt.png" alt="Add to cart icon" loading="lazy"></button></div>`;
                                } else if (product.platform === 'hoyoverse') {
                                    buttonsHTML = `<div class="product-buttons-container"><button onclick="openPaymentModal('${product.id}', 'buyNow')" class="buy-btn">شراء الآن</button><button onclick="addToCartWithGenshinReminder(event, '${product.id}')" class="add-to-cart-btn"><img src="./images/cartt.png" alt="Add to cart icon" loading="lazy"></button></div>`;
                                } else if (product.platform === 'riot') {
                                    buttonsHTML = `<div class="product-buttons-container"><button onclick="openPaymentModal('${product.id}', 'buyNow')" class="buy-btn">شراء الآن</button><button onclick="addToCartWithValorantReminder(event, '${product.id}')" class="add-to-cart-btn"><img src="./images/cartt.png" alt="Add to cart icon" loading="lazy"></button></div>`;
                                } else if (product.platform === 'epic' || product.platform === 'roblox' || product.requiresAccountDetails || product.requiresMarvelId) {
                                    buttonsHTML = `<div class="product-buttons-container"><button onclick="openPaymentModal('${product.id}', 'buyNow')" class="buy-btn">شراء الآن</button><button onclick="addToCartWithAccountReminder(event, '${product.id}')" class="add-to-cart-btn"><img src="./images/cartt.png" alt="Add to cart icon" loading="lazy"></button></div>`;
                                } else {
                                    buttonsHTML = `<div class="product-buttons-container"><button onclick="openPaymentModal('${product.id}', 'buyNow')" class="buy-btn">شراء الآن</button><button onclick="addToCartHandler(event, '${product.id}', 1)" class="add-to-cart-btn"><img src="./images/cartt.png" alt="Add to cart icon" loading="lazy"></button></div>`;
                                }

                                const title = (currentLanguage === 'en' && product.title_en) ? product.title_en : product.title;
                                const shortDescription = (currentLanguage === 'en' && product.shortDescription_en) ? product.shortDescription_en : (product.shortDescription || '');
                                let displayedTitle = title;
                                const bundleRegex = /(باندل|Bundle)/gi;
                                if (bundleRegex.test(displayedTitle)) {
                                    displayedTitle = displayedTitle.replace(bundleRegex, `<span class="bundle-glow-effect">$&</span>`);
                                }

                                item.className = itemClass;
                                item.innerHTML = `
                                                                                                                                                                                                                                                                                                                                                        ${platformIconHTML}
                                                                                                                                                                                                                                                                                                                                                        <div class="fire-particles-container">
                                                                                                                                                                                                                                                                                                                                                            <i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i>
                                                                                                                                                                                                                                                                                                                                                        </div>
                                                                                                                                                                                                                                                                                                                                                        <div class="product-image-wrapper" onclick="${clickHandler}">
                                                                                                                                                                                                                                                                                                                                                            <img src="${product.image}" alt="${title}" loading="lazy" onerror="this.onerror=null;this.src='./images/placeholder.png';">
                                                                                                                                                                                                                                                                                                                                                        </div>
                                                                                                                                                                                                                                                                                                                                                        <div class="product-content-overlay">
                                                                                                                                                                                                                                                                                                                                                            <h3 onclick="${clickHandler}">${displayedTitle}</h3>
                                                                                                                                                                                                                                                                                                                                                            <p class="product-description-text">${shortDescription}</p>
                                                                                                                                                                                                                                                                                                                                                            <p>${priceDisplay}</p>
                                                                                                                                                                                                                                                                                                                                                            ${product.stock ? `<p class="product-urgency">🔥 2 قطع فقط متبقية!</p>` : ''}
                                                                                                                                                                                                                                                                                                                                                            <div class="product-buttons-wrapper" style="margin-top: auto;">
                                                                                                                                                                                                                                                                                                                                                                ${buttonsHTML}
                                                                                                                                                                                                                                                                                                                                                            </div>
                                                                                                                                                                                                                                                                                                                                                        </div>`;
                            }

                            container.appendChild(item);

                            if (returnElement) {
                                return item;
                            }
                        }

                        // قائمة المنتجات التي ستظهر في كلا القسمين
                        const allGamesIds = ['gta', 'minecraft', 'splitfiction', 'mafia', 'rust', 'wallpaperEngine', 'hollowknight', 'rdr2', 'battlefield_6', 'fc_26'];

                        // الكود الأصلي
                        // دالة لتغيير العملة
                        function changeCurrency() {
                            const selector = document.getElementById('currency-selector');
                            currentCurrency = selector.value;

                            // إعادة تحميل جميع الأقسام لعرض الأسعار بالعملة الجديدة
                            loadGamesToHome();
                            loadSubscriptionsToHome();
                            loadOfflineSteamGamesToHome();
                            loadSteamGiftCardsToHome();
                            loadSteamPointsToHome();
                            loadSoftwareKeys(); // ✅ هذا السطر كان مفقودًا
                            loadGenshinImpact();
                            loadFortnite();
                            loadRocketLeague();
                            loadMarvelRivals(); // ✅ هذا السطر كان مفقودًا

                            // تحديث أسعار السلة
                            renderCart();

                            const message = `Region and curreny changed to ${currentCurrency}`;
                            showInfoToast(message, 3000);
                        }

                        // ✅ الدالة الآمنة (Safe Mode): بتشغل الموقع فوراً حتى لو الفايربيس فصل


                        function loadGenshinImpact() {
                            const container = document.getElementById('genshinImpactContainer');
                            container.innerHTML = '';
                            const genshinIds = ['genshin_60', 'genshin_300', 'genshin_980'];
                            genshinIds.forEach(id => renderProductItem(productsData[id], container, 'genshin', true));
                        }


                        function loadRobuxToHome() {
                            const robloxContainer = document.getElementById('robloxHomeContainer');
                            robloxContainer.innerHTML = '';
                            const robloxIds = ['roblox40', 'roblox80', 'roblox400', 'roblox800', 'roblox1700', 'roblox4500'];
                            robloxIds.forEach(id => renderProductItem(productsData[id], robloxContainer, 'roblox', true));
                        }

                        function loadRocketLeague() {
                            const container = document.getElementById('rocketleagueContainer');
                            container.innerHTML = '';
                            const rocketleagueIds = ['rocketleague_500', 'rocketleague_1100', 'rocketleague_3000'];
                            rocketleagueIds.forEach(id => renderProductItem(productsData[id], container, 'rocketleague', true));
                        }

                        function loadSubscriptionsToHome() {
                            const tvContainer = document.getElementById('homeTvSubscriptionsContainer');
                            const softwareContainer = document.getElementById('homeSoftwareSubscriptionsContainer');

                            // تفريغ الحاويات قبل البدء
                            tvContainer.innerHTML = '';
                            softwareContainer.innerHTML = '';

                            // تعريف معرفات المنتجات لكل قسم
                            const tvSubscriptionIds = ['netflix', 'disney', 'crunchyroll', 'shahid_vip_screen']; // <-- تم إضافة يوتيوب هنا
                            const softwareSubscriptionIds = ['chatgpt_plus', 'capcut_pro', 'spotify_premium']; // <-- تم إضافة سبوتيفاي هنا

                            // عرض اشتراكات التلفزيون
                            tvSubscriptionIds.forEach(id => {
                                if (productsData[id]) {
                                    renderProductItem(productsData[id], tvContainer, 'subscriptions', true);
                                }
                            });

                            // عرض اشتراكات البرامج
                            softwareSubscriptionIds.forEach(id => {
                                if (productsData[id]) {
                                    renderProductItem(productsData[id], softwareContainer, 'subscriptions', true);
                                }
                            });
                        }


                        function loadSteamPointsToHome() {
                            const steamPointsContainer = document.getElementById('steamPointsContainer');
                            steamPointsContainer.innerHTML = '';
                            const steamPointIds = ['steam10k', 'steam20k', 'steam50k'];
                            steamPointIds.forEach(id => renderProductItem(productsData[id], steamPointsContainer, 'steam', true));
                        }

                        function loadSteamGiftCardsToHome() {
                            const container = document.getElementById('steamGiftCardsHomeContainer');
                            container.innerHTML = '';
                            const giftCardIds = ['steamGift5', 'steamGift10', 'steamGift20', 'steamGift50', 'steamGift100'];
                            giftCardIds.forEach(id => renderProductItem(productsData[id], container, 'steam', true));
                        }

                        function loadProducts() {
                            const productsContainer = document.getElementById('productsContainer');
                            productsContainer.innerHTML = '';
                            // استخدام نفس القائمة الموحدة
                            allGamesIds.forEach(id => renderProductItem(productsData[id], productsContainer, 'games', false));
                        }

                        function loadSubscriptions() {
                            const subscriptionsContainer = document.getElementById('subscriptionsContainer');
                            subscriptionsContainer.innerHTML = '';
                            const subscriptionIds = ['netflix', 'disney', 'crunchyroll', 'gamepass'];
                            subscriptionIds.forEach(id => renderProductItem(productsData[id], subscriptionsContainer, 'subscriptions', false));
                        }

                        function loadValorantPoints() {
                            const valorantContainer = document.getElementById('valorantPointsPageContainer');
                            valorantContainer.innerHTML = '';
                            const valorantIds = ['valorant475', 'valorant1000', 'valorant2050', 'valorant3650', 'valorant5350', 'valorant11000'];
                            valorantIds.forEach(id => renderProductItem(productsData[id], valorantContainer, 'valorant', true));
                        }

                        function loadRobux() {
                            const robloxContainer = document.getElementById('robloxContainer');
                            robloxContainer.innerHTML = '';
                            const robloxIds = ['roblox40', 'roblox80', 'roblox400', 'roblox800', 'roblox800_discount', 'roblox1700', 'roblox4700', 'roblox4500'];
                            robloxIds.forEach(id => renderProductItem(productsData[id], robloxContainer, 'roblox', true));
                        }

                        function loadFortnite() {
                            const fortniteContainer = document.getElementById('fortniteContainer');
                            fortniteContainer.innerHTML = '';
                            const fortniteIds = ['fortnite1000', 'fortnite2800', 'fortnite5000', 'fortnite13500', 'fortniteCrew', 'fortniteStarter'];
                            fortniteIds.forEach(id => renderProductItem(productsData[id], fortniteContainer, 'fortnite', true));
                        }

                        function loadSteamPoints() {
                            const steamPointsContainer = document.getElementById('steamPointsPageContainer');
                            steamPointsContainer.innerHTML = '';
                            const steamPointIds = ['steam10k', 'steam20k', 'steam50k'];
                            steamPointIds.forEach(id => renderProductItem(productsData[id], steamPointsContainer, 'steam', false));
                        }

                        function loadSteamGiftCards() {
                            const steamGiftCardsContainer = document.getElementById('steamGiftCardsPageContainer');
                            steamGiftCardsContainer.innerHTML = '';
                            const giftCardIds = ['steamGift5', 'steamGift10', 'steamGift20', 'steamGift50', 'steamGift100'];
                            giftCardIds.forEach(id => renderProductItem(productsData[id], steamGiftCardsContainer, 'steam', false));
                        }

                        function searchProducts() {
                            const query = document.getElementById('productSearch').value;
                            if (query.trim() === '') {
                                loadProducts(); // إذا كان البحث فارغًا، أعد عرض كل المنتجات
                                return;
                            }
                            performGlobalSearch(query);
                        }

                        function checkOrder() {
                            const orderCode = document.getElementById('orderCode').value;
                            const statusContainer = document.getElementById('statusContainer');
                            const resultText = document.getElementById('resultText');
                            const statusImage = document.getElementById('statusImage');


                            if (orders[orderCode]) {
                                const order = orders[orderCode];
                                resultText.textContent = `حالة الطلب: ${order.status}`;
                                statusImage.src = order.img;
                                statusImage.style.display = 'block';
                                resultText.style.color = '#00ff00';
                            } else {
                                resultText.textContent = "عذراً، لم يتم العثور على هذا الطلب.";
                                statusImage.style.display = 'none';
                                resultText.style.color = 'red';
                            }

                            resultText.style.opacity = 1;
                            statusImage.style.opacity = 1;
                        }

                        function showProductPage(productId) {
                            // ✅ التعديل: لا تصعد للأعلى إذا كنا في وضع الطفل
                            if (!document.body.classList.contains('aptx-child-mode')) {
                                window.scrollTo(0, 0);
                            }

                            // التحقق من الرابط وتحديثه إذا لزم الأمر
                            if (`#product/${productId}` !== window.location.hash) {
                                window.location.hash = `product/${productId}`;
                                return;
                            }

                            currentProduct = productsData[productId];
                            showSection('productPage'); // عرض قسم صفحة المنتج

                            // --- ✅ بداية التعديل ---
                            const productPageElement = document.getElementById('productPage');

                            // ✅✅ الكود المحدث بعد إزالة خاصية 'fixed' من الخلفيات ✅✅

                            if (productId === 'cyberpunk_2077_offline') {
                                // خلفية سايبر بانك
                                productPageElement.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/cyberpunk-background.jpg')`;
                                productPageElement.style.backgroundSize = 'cover';
                                productPageElement.style.backgroundPosition = 'center';
                                productPageElement.style.backgroundAttachment = 'fixed'; // ✅ تمت إضافة هذا السطر
                                productPageElement.style.border = '1px solid #888';

                            } else if (productId === 'thelastofus_offline') {
                                // خلفية ذا لاست أوف أس 2
                                productPageElement.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/tlou2-background.jpg')`;
                                productPageElement.style.backgroundSize = 'cover';
                                productPageElement.style.backgroundPosition = 'center';
                                productPageElement.style.backgroundAttachment = 'fixed'; // ✅ تمت إضافة هذا السطر
                                productPageElement.style.border = '1px solid #888';

                            } else if (productId === 're4_separate_ways_offline') {
                                // خلفية ريزدنت إيفل 4 سبيريت وايس
                                productPageElement.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/re4sw-background.jpg')`;
                                productPageElement.style.backgroundSize = 'cover';
                                productPageElement.style.backgroundPosition = 'center';
                                productPageElement.style.backgroundAttachment = 'fixed'; // ✅ تمت إضافة هذا السطر
                                productPageElement.style.border = '1px solid #888';

                            } else if (productId === 'silent_hill_f_offline') {
                                // خلفية سايلنت هيل
                                productPageElement.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/silenthillf-background.jpg')`;
                                productPageElement.style.backgroundSize = 'cover';
                                productPageElement.style.backgroundPosition = 'center';
                                productPageElement.style.backgroundAttachment = 'fixed'; // ✅ تمت إضافة هذا السطر
                                productPageElement.style.border = '1px solid #888';

                            } else if (productId === 'mafia') {
                                // خلفية مافيا
                                productPageElement.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/mafia-background.jpg')`;
                                productPageElement.style.backgroundSize = 'cover';
                                productPageElement.style.backgroundPosition = 'center';
                                productPageElement.style.backgroundAttachment = 'fixed'; // ✅ تمت إضافة هذا السطر
                                productPageElement.style.border = '1px solid #888';

                            } else if (productId === 'residentevil_offline') {
                                // خلفية ريزدنت إيفل 8
                                productPageElement.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/re8-background.jpg')`;
                                productPageElement.style.backgroundSize = 'cover';
                                productPageElement.style.backgroundPosition = 'center';
                                productPageElement.style.backgroundAttachment = 'fixed'; // ✅ تمت إضافة هذا السطر
                                productPageElement.style.border = '1px solid #888';

                            } else if (productId === 'residentevil7_offline') {
                                // خلفية ريزدنت إيفل 7
                                productPageElement.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/re7-background.jpg')`;
                                productPageElement.style.backgroundSize = 'cover';
                                productPageElement.style.backgroundPosition = 'center';
                                productPageElement.style.backgroundAttachment = 'fixed'; // ✅ تمت إضافة هذا السطر
                                productPageElement.style.border = '1px solid #888';

                            } else if (productId === 'black_myth_wukong_offline') {
                                // خلفية بلاك ميث ووكونج
                                productPageElement.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/wukong-background.jpg')`;
                                productPageElement.style.backgroundSize = 'cover';
                                productPageElement.style.backgroundPosition = 'center';
                                productPageElement.style.backgroundAttachment = 'fixed'; // ✅ تمت إضافة هذا السطر
                                productPageElement.style.border = '1px solid #888';

                            } else if (productId === 'ac_shadows_offline') {
                                // خلفية أساسنز كريد شادوز
                                productPageElement.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/ac-shadows-background.jpg')`;
                                productPageElement.style.backgroundSize = 'cover';
                                productPageElement.style.backgroundPosition = 'center';
                                productPageElement.style.backgroundAttachment = 'fixed'; // ✅ تمت إضافة هذا السطر
                                productPageElement.style.border = '1px solid #888';

                            } else if (productId === 'ghostoftsushima_offline') {
                                // خلفية جوست أوف تسوشيما
                                productPageElement.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/tsushima-background.jpg')`;
                                productPageElement.style.backgroundSize = 'cover';
                                productPageElement.style.backgroundPosition = 'center';
                                productPageElement.style.backgroundAttachment = 'fixed'; // ✅ تمت إضافة هذا السطر
                                productPageElement.style.border = '1px solid #888';

                            } else if (productId === 'witcher3_offline') {
                                // خلفية ذا ويتشر 3
                                productPageElement.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/witcher3-background.jpg')`;
                                productPageElement.style.backgroundSize = 'cover';
                                productPageElement.style.backgroundPosition = 'center';
                                productPageElement.style.backgroundAttachment = 'fixed'; // ✅ تمت إضافة هذا السطر
                                productPageElement.style.border = '1px solid #888';

                            } else if (productId === 'eldenring_offline') {
                                // خلفية إلدن رينج
                                productPageElement.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/eldenring-background.jpg')`;
                                productPageElement.style.backgroundSize = 'cover';
                                productPageElement.style.backgroundPosition = 'center';
                                productPageElement.style.backgroundAttachment = 'fixed'; // ✅ تمت إضافة هذا السطر
                                productPageElement.style.border = '1px solid #888';

                            } else if (productId === 'ragnarok_offline') {
                                // خلفية جود أوف وور راجناروك
                                productPageElement.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/ragnarok-background.jpg')`;
                                productPageElement.style.backgroundSize = 'cover';
                                productPageElement.style.backgroundPosition = 'center';
                                productPageElement.style.backgroundAttachment = 'fixed'; // ✅ تمت إضافة هذا السطر
                                productPageElement.style.border = '1px solid #888';

                            } else if (productId === 'tlou1_offline') {
                                // خلفية ذا لاست أوف أس 1
                                productPageElement.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/tlou1-background.jpg')`;
                                productPageElement.style.backgroundSize = 'cover';
                                productPageElement.style.backgroundPosition = 'center';
                                productPageElement.style.backgroundAttachment = 'fixed'; // ✅ تمت إضافة هذا السطر
                                productPageElement.style.border = '1px solid #888';
                            } else if (productId === 'cyberpunk_re4_bundle') {
                                // خلفية باندل الباندل
                                productPageElement.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/cyberpunk_re4_bundle.png')`;
                                productPageElement.style.backgroundSize = 'cover';
                                productPageElement.style.backgroundPosition = 'center';
                                productPageElement.style.backgroundAttachment = 'fixed';
                                productPageElement.style.border = '1px solid #888';
                            } else if (productId === 'silksong_offline') {
                                // خلفية Hollow Knight: Silksong
                                productPageElement.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/silksong-background.jpg')`;
                                productPageElement.style.backgroundSize = 'cover';
                                productPageElement.style.backgroundPosition = 'center';
                                productPageElement.style.backgroundAttachment = 'fixed';
                                productPageElement.style.border = '1px solid #888';
                            } else if (productId === 'gow_got_bundle') {
                                // خلفية باندل البلايستيشن فان بوي
                                productPageElement.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/gow_got_bundle.png')`;
                                productPageElement.style.backgroundSize = 'cover';
                                productPageElement.style.backgroundPosition = 'center';
                                productPageElement.style.backgroundAttachment = 'fixed';
                                productPageElement.style.border = '1px solid #888';
                            } else if (productId === 'tlou_bundle') {
                                // خلفية باندل The Last of Us الكاملة
                                productPageElement.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/tlou2_1.jpg')`;
                                productPageElement.style.backgroundSize = 'cover';
                                productPageElement.style.backgroundPosition = 'center';
                                productPageElement.style.backgroundAttachment = 'fixed';
                                productPageElement.style.border = '1px solid #888';
                            } else if (productId === 'silent_hollow_bundle') {
                                // خلفية باندل الرعب والغموض
                                productPageElement.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/silent_hollow_bundle.png')`;
                                productPageElement.style.backgroundSize = 'cover';
                                productPageElement.style.backgroundPosition = 'center';
                                productPageElement.style.backgroundAttachment = 'fixed';
                                productPageElement.style.border = '1px solid #888';
                            } else {
                                // إرجاع الخلفية الافتراضية لجميع المنتجات الأخرى
                                productPageElement.style.backgroundImage = 'linear-gradient(145deg, #1f1133, #110e1a)';
                                productPageElement.style.border = '1px solid var(--main-purple)';
                                productPageElement.style.backgroundAttachment = 'scroll'; // التأكد من أن الخلفية الافتراضية متحركة
                            }


                            if (imageSliderInterval) {
                                clearInterval(imageSliderInterval);
                            }

                            const mainImage = document.getElementById('productPageImage');
                            const imagePlaceholder = document.querySelector('#mainImageContainer .main-image-placeholder');

                            imagePlaceholder.style.display = 'flex';
                            mainImage.style.display = 'none';

                            if (currentProduct.images && currentProduct.images.length > 0) {
                                let currentImageIndex = 0;
                                mainImage.src = currentProduct.images[currentImageIndex];

                                imageSliderInterval = setInterval(() => {
                                    currentImageIndex = (currentImageIndex + 1) % currentProduct.images.length;
                                    mainImage.style.opacity = 0;
                                    setTimeout(() => {
                                        mainImage.src = currentProduct.images[currentImageIndex];
                                        mainImage.style.opacity = 1;
                                    }, 300);
                                }, 2000);

                            } else {
                                mainImage.src = currentProduct.image;
                            }

                            mainImage.onload = () => {
                                imagePlaceholder.style.display = 'none';
                                mainImage.style.display = 'block';
                            };

                            document.getElementById('productPageTitle').textContent = currentProduct.title;
                            document.getElementById('productPagePrice').textContent = `${currentProduct.price} EGP`;
                            const shortDescElement = document.getElementById('productPageShortDescription');
                            shortDescElement.textContent = currentProduct.shortDescription || '';
                            shortDescElement.style.marginTop = '-150px'; // أضف هذا السطر
                            document.getElementById('productPageFullDescription').innerHTML = `<h2>الوصف :</h2>${currentProduct.fullDescription || ''}`;
                            document.getElementById('specs').innerHTML = currentProduct.specs || '<p>i5 4500 - gtx 750ti</p>';

                            const platformContainer = document.getElementById('productPagePlatform');
                            platformContainer.innerHTML = '';
                            if (currentProduct.platform) {
                                let platformName = '',
                                    platformIconSrc = '';
                                if (currentProduct.platform === 'steam') { platformName = 'Steam'; platformIconSrc = './images/steam.png'; }
                                else if (currentProduct.platform === 'microsoft') { platformName = 'Microsoft'; platformIconSrc = './images/microsoft.png'; }
                                else if (currentProduct.platform === 'riot') { platformName = 'Riot Games'; platformIconSrc = './images/riotgames.png'; }
                                else if (currentProduct.platform === 'roblox') { platformName = 'Roblox'; platformIconSrc = './images/robloxlogo.png'; }
                                else if (currentProduct.platform === 'epic') { platformName = 'Epic Games'; platformIconSrc = './images/epicgames.png'; }

                                if (platformName) {
                                    platformContainer.innerHTML = `
                                                                                                                                                                                                                                                                                                                                                                                                            <span>المنصة :</span>
                                                                                                                                                                                                                                                                                                                                                                                                            <strong>${platformName}</strong>
                                                                                                                                                                                                                                                                                                                                                                                                            <img src="${platformIconSrc}" alt="${platformName} Logo">`;
                                }
                            }

                            const quantityInput = document.getElementById('productPageQuantity');
                            quantityInput.value = 1;
                            document.getElementById('decreaseProductPageQuantity').onclick = () => {
                                if (quantityInput.value > 1) quantityInput.value--;
                            };
                            document.getElementById('increaseProductPageQuantity').onclick = () => {
                                quantityInput.value++;
                            };

                            document.getElementById('addToCartBtn').onclick = (event) => {
                                const quantity = parseInt(quantityInput.value);
                                addToCartHandler(event, currentProduct.id, quantity);
                            };

                            const wishlistBtn = document.getElementById('productPageWishlistBtn');
                            if (wishlistBtn) {
                                // 1. التأكد من حالة المنتج (هل هو في الويش ليست؟)
                                // (تأكد أن مصفوفة wishlist معرفة في بداية ملف الـ JS: let wishlist = ... )
                                let myWishlist = JSON.parse(localStorage.getItem('my_wishlist')) || [];
                                const isInWishlist = myWishlist.includes(currentProduct.id);

                                // 2. تحديث شكل الزر
                                if (isInWishlist) {
                                    wishlistBtn.classList.add('active');
                                    wishlistBtn.innerHTML = '<i class="fas fa-heart"></i>'; // قلب ممتلئ
                                } else {
                                    wishlistBtn.classList.remove('active');
                                    wishlistBtn.innerHTML = '<i class="far fa-heart"></i>'; // قلب فارغ
                                }

                                // 3. تشغيل الزر عند الضغط
                                // (تأكد أن دالة toggleWishlist موجودة في ملف الـ JS)
                                wishlistBtn.onclick = function () {
                                    toggleWishlist(currentProduct.id, this);
                                };
                            }

                            setupTabs();
                            loadComments(productId);
                            updateProductPageAverageRating(productId);

                            loadRelatedProducts(productId);
                        }



                        // ======================================================
                        // START: دالة عرض المنتجات المشابهة (النسخة الذكية)
                        // ======================================================
                        function loadRelatedProducts(currentProductId) {
                            const container = document.getElementById('related-products-container');
                            const section = document.getElementById('related-products-section');
                            container.innerHTML = ''; // تفريغ الحاوية

                            const currentProduct = productsData[currentProductId];
                            if (!currentProduct) {
                                section.style.display = 'none';
                                return;
                            }

                            let relatedProducts = [];
                            let productIds = Object.keys(productsData);

                            // 1. المحاولة الأولى: البحث حسب الفئة (Category)
                            if (currentProduct.category) {
                                relatedProducts = productIds
                                    .filter(id => id !== currentProductId && productsData[id].category === currentProduct.category)
                                    .map(id => productsData[id]);
                            }

                            // 2. المحاولة الثانية (إذا لم نجد ما يكفي): البحث حسب المنصة (Platform)
                            if (relatedProducts.length < 4 && currentProduct.platform) {
                                const platformProducts = productIds
                                    .filter(id => id !== currentProductId && productsData[id].platform === currentProduct.platform)
                                    .map(id => productsData[id]);

                                // إضافة المنتجات الجديدة مع التأكد من عدم تكرارها
                                platformProducts.forEach(p => {
                                    if (!relatedProducts.some(rp => rp.id === p.id)) {
                                        relatedProducts.push(p);
                                    }
                                });
                            }

                            // 3. المحاولة الثالثة (إذا لم نجد ما يكفي): إضافة منتجات عشوائية
                            if (relatedProducts.length < 4) {
                                // خلط المنتجات عشوائيًا
                                const shuffledIds = productIds.sort(() => 0.5 - Math.random());

                                shuffledIds.forEach(id => {
                                    if (relatedProducts.length >= 4) return;
                                    // التأكد من أنه ليس المنتج الحالي أو منتج مكرر
                                    if (id !== currentProductId && !relatedProducts.some(rp => rp.id === id)) {
                                        relatedProducts.push(productsData[id]);
                                    }
                                });
                            }

                            const finalProductsToShow = relatedProducts.slice(0, 4);

                            if (finalProductsToShow.length > 0) {
                                section.style.display = 'block';
                                finalProductsToShow.forEach(product => {
                                    renderProductItem(product, container, 'related');
                                });
                            } else {
                                section.style.display = 'none';
                            }
                        }
                        // ======================================================
                        // END: دالة عرض المنتجات المشابهة
                        // ======================================================

                        function setupTabs() {
                            const tabContainers = document.querySelectorAll('.tabs-container');
                            tabContainers.forEach(container => {
                                const tabButtons = container.querySelectorAll('.tab-button');
                                const tabContents = container.querySelectorAll('.tab-content');

                                tabButtons.forEach(button => {
                                    button.onclick = () => {
                                        tabButtons.forEach(btn => btn.classList.remove('active'));
                                        button.classList.add('active');

                                        const targetTabId = button.dataset.tab;
                                        tabContents.forEach(content => {
                                            if (content.id === targetTabId) {
                                                content.classList.add('active');
                                            } else {
                                                content.classList.remove('active');
                                            }
                                        });
                                    };
                                });
                            });
                        }

                        function updateSteamProductTotal() {
                            if (!currentProduct || !currentProduct.id.startsWith('steam')) {
                                return;
                            }

                            const quantityInput = document.getElementById('quantityInput');
                            let quantity = parseInt(quantityInput.value);

                            if (isNaN(quantity) || quantity < 1) {
                                quantity = 1;
                                quantityInput.value = 1;
                            }

                            const basePrice = currentProduct.price;
                            const totalPrice = basePrice * quantity;

                            document.getElementById('totalPriceDisplay').textContent = totalPrice;

                            const finalTitle = `${currentProduct.title} (x${quantity})`;
                            document.getElementById('vodafone_product_price').value = totalPrice;
                            document.getElementById('paypal_product_price').value = totalPrice;
                            document.getElementById('vodafone_product_name').value = finalTitle;
                            document.getElementById('paypal_product_name').value = finalTitle;
                        }

                        // ✅✅ الكود الصحيح والكامل للدالة - قم باستبدال الدالة القديمة بهذه ✅✅
                        function openPaymentModal(productId, mode = 'buyNow', customPrice = null, customTitle = null, customExtraData = {}) {
                            currentProduct = {
                                ...productsData[productId]
                            };
                            if (customPrice !== null) {
                                currentProduct.price = customPrice;
                            }
                            if (customTitle !== null) {
                                currentProduct.title = customTitle;
                            }

                            const gmailInputGroup = document.getElementById('gmail-input-group');
                            const modal = document.getElementById('paymentModal');
                            const modalImageElement = document.getElementById('modalImage');
                            modalImageElement.src = currentProduct.image;
                            modalImageElement.classList.add('product-modal-image');
                            document.getElementById('modalTitle').textContent = currentProduct.title;

                            const infoContainer = document.getElementById('modalProductInfo');
                            infoContainer.innerHTML = '';

                            let platformHTML = '';
                            if (currentProduct.platform) {
                                let platformName = '',
                                    platformIconSrc = '';
                                if (currentProduct.platform === 'steam') {
                                    platformName = 'Steam';
                                    platformIconSrc = './images/steam.png';
                                } else if (currentProduct.platform === 'microsoft') {
                                    platformName = 'Microsoft';
                                    platformIconSrc = './images/microsoft.png';
                                } else if (currentProduct.platform === 'riot') {
                                    platformName = 'Riot Games';
                                    platformIconSrc = './images/riotgames.png';
                                } else if (currentProduct.platform === 'roblox') {
                                    platformName = 'Roblox';
                                    platformIconSrc = './images/robloxlogo.png';
                                } else if (currentProduct.platform === 'epic') {
                                    platformName = 'Epic Games';
                                    platformIconSrc = './images/epicgames.png';
                                } else if (currentProduct.platform === 'hoyoverse') {
                                    platformName = 'Genshin Impact';
                                    platformIconSrc = './images/hoyoverse.png';
                                } else if (currentProduct.platform === 'activision') {
                                    platformName = 'Call of Duty';
                                    platformIconSrc = './images/activision.png';
                                } else if (currentProduct.platform === 'discord') {
                                    platformName = 'Discord';
                                    platformIconSrc = './images/discord.png';
                                } else if (currentProduct.platform === 'playstation') {
                                    platformName = 'PlayStation';
                                    platformIconSrc = './images/playstation-icon.png';
                                }

                                if (platformName) {
                                    platformHTML = `
    <div class="platform-display" style="display: flex; align-items: center; justify-content: flex-start; direction: rtl; gap: 5px; width: 100%;">
        <span style="color: #bbb; margin-left: 5px;">المنصة:</span>
        
        <div style="display: flex; align-items: center; gap: 5px;">
            <strong style="color: white; line-height: 1;">${platformName}</strong>
            <img src="${platformIconSrc}" alt="${platformName}" style="height: 20px; width: auto; vertical-align: middle;">
        </div>
    </div>
    `;
                                }                 
                            }

                            const descriptionHTML = currentProduct.fullDescription ? `<div class="description-display">${currentProduct.fullDescription}</div>` : '';
                            infoContainer.innerHTML = platformHTML + descriptionHTML;

                            const accountDetailsContainer = document.getElementById('account-details-container');
                            const riotIdGroup = document.getElementById('riot-id-group');
                            const genshinIdGroup = document.getElementById('genshin-id-group');
                            const marvelRivalsIdGroup = document.getElementById('marvel-rivals-id-group');
                            const steamFriendCodeGroup = document.getElementById('steam-friend-code-group');
                            const steamProfileLinkGroup = document.getElementById('steam-profile-link-group');
                            const subscriptionGroup = document.getElementById('subscription-group');
                            const discordUsernameGroup = document.getElementById('discord-username-group');
                            const priceDisplayElement = document.getElementById('modalPrice');
                            const actionButton = document.getElementById('modal-action-button');

                            accountDetailsContainer.style.display = 'none';
                            riotIdGroup.style.display = 'none';
                            if (genshinIdGroup) genshinIdGroup.style.display = 'none';
                            if (marvelRivalsIdGroup) marvelRivalsIdGroup.style.display = 'none';
                            steamFriendCodeGroup.style.display = 'none';
                            steamProfileLinkGroup.style.display = 'none';
                            subscriptionGroup.style.display = 'none';
                            discordUsernameGroup.style.display = 'none';
                            priceDisplayElement.style.display = 'block';
                            if (gmailInputGroup) gmailInputGroup.style.display = 'none';

                            if (document.getElementById('gmail_input')) document.getElementById('gmail_input').required = false;
                            if (document.getElementById('genshin_id_input')) document.getElementById('genshin_id_input').required = false;
                            if (document.getElementById('riot_id_input')) document.getElementById('riot_id_input').required = false;
                            if (document.getElementById('steam_friend_code_input')) document.getElementById('steam_friend_code_input').required = false;
                            if (document.getElementById('steam_profile_link_input')) document.getElementById('steam_profile_link_input').required = false;
                            if (document.getElementById('account_email')) document.getElementById('account_email').required = false;
                            if (document.getElementById('account_password')) document.getElementById('account_password').required = false;
                            if (document.getElementById('account_contact')) document.getElementById('account_contact').required = false;
                            if (document.getElementById('marvel_rivals_id_input')) document.getElementById('marvel_rivals_id_input').required = false;
                            if (document.getElementById('discord_username_input')) document.getElementById('discord_username_input').required = false;

                            if (currentProduct.requiresDiscordUsername) {
                                discordUsernameGroup.style.display = 'flex';
                                document.getElementById('discord_username_input').required = true;
                            } else if (currentProduct.platform === 'hoyoverse') {
                                if (genshinIdGroup) genshinIdGroup.style.display = 'block';
                                if (document.getElementById('genshin_id_input')) document.getElementById('genshin_id_input').required = true;
                            } else if (currentProduct.requiresMarvelId) {
                                if (marvelRivalsIdGroup) marvelRivalsIdGroup.style.display = 'block';
                                if (document.getElementById('marvel_rivals_id_input')) document.getElementById('marvel_rivals_id_input').required = true;
                            } else if (currentProduct.platform === 'epic' || currentProduct.platform === 'roblox' || currentProduct.requiresAccountDetails) {
                                accountDetailsContainer.style.display = 'flex';
                                document.getElementById('account_email').required = true;
                                document.getElementById('account_password').required = true;
                                document.getElementById('account_contact').required = true;
                            } else if (currentProduct.platform === 'riot') {
                                riotIdGroup.style.display = 'block';
                                document.getElementById('riot_id_input').required = true;
                            } else if (currentProduct.requiresSteamFriendCode) {
                                steamFriendCodeGroup.style.display = 'block';
                                document.getElementById('steam_friend_code_input').required = true;
                            } else if (currentProduct.requiresSteamProfileLink) {
                                steamProfileLinkGroup.style.display = 'block';
                                document.getElementById('steam_profile_link_input').required = true;
                            }
                            else if (currentProduct.requiresGmail) { // ✅✅ أضف هذا البلوك
                                if (gmailInputGroup) gmailInputGroup.style.display = 'flex';
                                if (document.getElementById('gmail_input')) document.getElementById('gmail_input').required = true;
                            }


                            if (currentProduct.options) {
                                subscriptionGroup.style.display = 'block';
                                const optionsContainer = document.getElementById('subscription-options-container');
                                optionsContainer.innerHTML = '';

                                if (currentProduct.id === 'ps_plus_subscription') {
                                    optionsContainer.className = 'tabbed-layout';

                                    const tabsDiv = document.createElement('div');
                                    tabsDiv.className = 'tier-tabs';
                                    optionsContainer.appendChild(tabsDiv);

                                    const contentDiv = document.createElement('div');
                                    contentDiv.className = 'tier-content-container';
                                    optionsContainer.appendChild(contentDiv);

                                    const tiers = {
                                        essential: 'Essential',
                                        extra: 'Extra',
                                        deluxe: 'Deluxe'
                                    };

                                    for (const tierId in tiers) {
                                        const tierName = tiers[tierId];
                                        const tabButton = document.createElement('button');
                                        tabButton.className = 'tier-tab-button';
                                        tabButton.textContent = tierName;
                                        tabButton.dataset.tier = tierId;
                                        tabsDiv.appendChild(tabButton);

                                        const tierContent = document.createElement('div');
                                        tierContent.id = `tier-content-${tierId}`;
                                        tierContent.className = 'tier-content';
                                        contentDiv.appendChild(tierContent);
                                    }

                                    for (const key in currentProduct.options) {
                                        const optionData = currentProduct.options[key];
                                        const tierId = key.split('_')[0];
                                        const tierContent = document.getElementById(`tier-content-${tierId}`);

                                        if (tierContent) {
                                            const optionLabel = document.createElement('label');
                                            optionLabel.className = 'subscription-option-label';
                                            optionLabel.innerHTML = `<input type="radio" name="subscriptionPeriod" value="${key}" onchange="updateModalPriceForSubscription()"><div class="subscription-option-card"><span class="period">${optionData.title}</span><span class="price">${optionData.price} EGP</span></div>`;
                                            tierContent.appendChild(optionLabel);
                                        }
                                    }

                                    const tabButtons = tabsDiv.querySelectorAll('.tier-tab-button');
                                    const tierContents = contentDiv.querySelectorAll('.tier-content');

                                    function activateTab(tierId) {
                                        tabButtons.forEach(btn => btn.classList.toggle('active', btn.dataset.tier === tierId));
                                        tierContents.forEach(content => content.classList.toggle('active', content.id === `tier-content-${tierId}`));
                                        const activeRadios = document.querySelectorAll('input[name="subscriptionPeriod"]:checked');
                                        activeRadios.forEach(radio => radio.checked = false);
                                        updateModalPriceForSubscription();
                                    }

                                    tabButtons.forEach(button => button.addEventListener('click', () => activateTab(button.dataset.tier)));
                                    activateTab('essential');

                                } else {
                                    optionsContainer.className = '';
                                    const optionKeys = Object.keys(currentProduct.options);
                                    if (optionKeys.length === 1) {
                                        optionsContainer.classList.add('single-option');
                                    }
                                    for (const key in currentProduct.options) {
                                        const optionData = currentProduct.options[key];
                                        const optionLabel = document.createElement('label');
                                        optionLabel.className = 'subscription-option-label';
                                        const checkedAttribute = '';
                                        optionLabel.innerHTML = `<input type="radio" name="subscriptionPeriod" value="${key}" ${checkedAttribute} onchange="updateModalPriceForSubscription()"><div class="subscription-option-card"><span class="period">${optionData.title}</span><span class="price">${optionData.price} EGP</span></div>`;
                                        optionsContainer.appendChild(optionLabel);
                                    }
                                }
                                updateModalPriceForSubscription();

                            } else {
                                priceDisplayElement.innerHTML = `<span class="price-badge">السعر: ${currentProduct.price} EGP</span>`;
                            }

                            if (mode === 'addToCartMode') {
                                actionButton.textContent = 'تأكيد وإضافة للسلة';
                                actionButton.onclick = () => handleAddToCartFromModal();
                            } else {
                                actionButton.textContent = 'اذهب للدفع';
                                actionButton.onclick = () => goToPaymentDetails();
                            }
                            showModal('paymentModal');
                        }

                        // ✅ دالة جديدة لمعالجة الاشتراك
                        function handleSubscriptionAction(mode) {
                            const selectedRadio = document.querySelector('input[name="subscriptionPeriod"]:checked');
                            if (!selectedRadio) {
                                // إذا لم يتم اختيار مدة، اعرض رسالة الخطأ المنبثقة
                                showInfoToast("يجب اختيار مدة الاشتراك.", 3000, 'error'); // ✅ أضفنا النوع 'error'
                                return; // أوقف العملية
                            }

                            // إذا تم الاختيار، أكمل العملية بناءً على الوضع
                            if (mode === 'buyNow') {
                                goToPaymentDetails();
                            } else {
                                handleAddToCartFromModal();
                            }
                        }

                        // دالة showInfoToast المعدلة لتقبل نوع الرسالة
                        function showInfoToast(message, duration, type = 'info') {
                            const container = document.getElementById('toast-container');
                            const toast = document.createElement('div');
                            toast.className = `toast-notification ${type}`; // استخدام النوع الجديد
                            toast.textContent = message;
                            container.appendChild(toast);

                            setTimeout(() => {
                                toast.classList.add('show');
                            }, 10);

                            setTimeout(() => {
                                toast.classList.remove('show');
                                toast.addEventListener('transitionend', () => {
                                    if (toast.parentElement) {
                                        toast.remove();
                                    }
                                });
                            }, duration);
                        }

                        // أضف هذه الدالة الجديدة بالكامل مع باقي الدوال
                        function handleAddToCartFromModal() {
                            const extraData = {};
                            let isValid = true;

                            if (currentProduct.requiresSteamFriendCode) {
                                const friendCode = document.getElementById('steam_friend_code_input').value;
                                if (!friendCode) {
                                    alert('الرجاء إدخال كود الصداقة.');
                                    isValid = false;
                                } else {
                                    extraData['Steam Friend Code'] = friendCode;
                                }
                            } else if (currentProduct.requiresSteamProfileLink) {
                                const profileLink = document.getElementById('steam_profile_link_input').value;
                                if (!profileLink) {
                                    alert('الرجاء إدخال رابط بروفايل ستيم.');
                                    isValid = false;
                                } else {
                                    extraData['Steam Profile Link'] = profileLink;
                                }
                            } else if (currentProduct.platform === 'riot') {
                                const riotId = document.getElementById('riot_id_input').value;
                                if (!riotId || !riotId.includes('#')) {
                                    alert('الرجاء إدخال Riot ID صحيح.');
                                    isValid = false;
                                } else {
                                    extraData['Riot ID'] = riotId;
                                }
                            } else if (currentProduct.platform === 'hoyoverse') {
                                const genshinId = document.getElementById('genshin_id_input').value;
                                if (!genshinId) {
                                    alert('الرجاء إدخال Genshin UID.');
                                    isValid = false;
                                } else {
                                    extraData['Genshin UID'] = genshinId;
                                }
                            } else if (currentProduct.id.startsWith('marvelRivals')) {
                                const marvelRivalsId = document.getElementById('marvel_rivals_id_input').value;
                                if (!marvelRivalsId) {
                                    alert('الرجاء إدخال Marvel Rivals ID.');
                                    isValid = false;
                                } else {
                                    extraData['Marvel Rivals ID'] = marvelRivalsId;
                                }
                            } else if (currentProduct.platform === 'epic' || currentProduct.platform === 'roblox' || currentProduct.requiresAccountDetails) {
                                const accountEmail = document.getElementById('account_email').value;
                                const accountPassword = document.getElementById('account_password').value;
                                const accountContact = document.getElementById('account_contact').value;
                                if (!accountEmail || !accountPassword || !accountContact) {
                                    alert('الرجاء إدخال جميع بيانات الحساب المطلوبة.');
                                    isValid = false;
                                } else {
                                    extraData['Account Email'] = accountEmail;
                                    extraData['Account Password'] = accountPassword;
                                    extraData['Contact Method'] = accountContact;
                                }
                            }

                            if (currentProduct.options) {
                                const selectedRadio = document.querySelector('input[name="subscriptionPeriod"]:checked');
                                if (!selectedRadio) {
                                    alert('يجب اختيار مدة الاشتراك.');
                                    isValid = false;
                                } else {
                                    const period = selectedRadio.value;
                                    const selectedOption = currentProduct.options[period];
                                    extraData.price = selectedOption.price;
                                    extraData.title = `${currentProduct.title} (${selectedOption.title})`;
                                    extraData.selectedOption = selectedOption;
                                }
                            }

                            if (isValid) {
                                performAddToCart(currentProduct.id, 1, null, extraData);
                                closeModal('paymentModal');
                            }
                        }


                        function updateModalPriceForSubscription() {
                            const selectedRadio = document.querySelector('input[name="subscriptionPeriod"]:checked');
                            if (!selectedRadio) {
                                // إذا لم يتم اختيار أي خيار، استخدم سعر المنتج الرئيسي
                                let price = currentProduct.price;
                                let currencySymbol = 'EGP';

                                if (currentCurrency === 'USD') {
                                    price = (price / exchangeRate).toFixed(2);
                                    currencySymbol = 'USD';
                                }

                                document.getElementById('modalPrice').innerHTML = `<span class="price-badge">السعر: ${price} ${currencySymbol}</span>`;
                                document.getElementById('vodafone_product_price').value = price;
                                document.getElementById('paypal_product_price').value = price;
                                document.getElementById('vodafone_product_name').value = currentProduct.title;
                                document.getElementById('paypal_product_name').value = currentProduct.title;
                                return;
                            }

                            const period = selectedRadio.value;
                            const selectedOption = currentProduct.options[period];
                            let price = selectedOption.price;
                            let currencySymbol = 'EGP';

                            // ✅ هذا هو الجزء الصحيح: يتم تطبيق سعر الصرف على سعر الخيار المختار
                            if (currentCurrency === 'USD') {
                                price = (price / exchangeRate).toFixed(2);
                                currencySymbol = 'USD';
                            }

                            const title = `${currentProduct.title} (${selectedOption.title})`;

                            document.getElementById('modalPrice').innerHTML = `<span class="price-badge">السعر: ${price} ${currencySymbol}</span>`;
                            document.getElementById('vodafone_product_price').value = price;
                            document.getElementById('paypal_product_price').value = price;
                            document.getElementById('vodafone_product_name').value = title;
                            document.getElementById('paypal_product_name').value = title;
                        }

                        function startPaymentTimer(duration, display, form) {
                            clearInterval(paymentTimerInterval);
                            let timer = duration;
                            const submitButton = form.querySelector('button[type="submit"]');

                            paymentTimerInterval = setInterval(function () {
                                let minutes = parseInt(timer / 60, 10);
                                let seconds = parseInt(timer % 60, 10);

                                minutes = minutes < 10 ? "0" + minutes : minutes;
                                seconds = seconds < 10 ? "0" + seconds : seconds;

                                display.textContent = minutes + ":" + seconds;
                                display.classList.remove('expired');

                                if (--timer < 0) {
                                    clearInterval(paymentTimerInterval);
                                    display.textContent = "انتهت المهلة";
                                    display.classList.add('expired');
                                    if (submitButton) submitButton.disabled = true;
                                }
                            }, 1000);
                        }

        function goToPaymentDetails() {
            saveOrderToFirebase();
                            let finalPrice;
                            let finalTitle;
                            const extraData = {};
                            let isValid = true;

                            // التحقق من حقول الاشتراك أولاً
                            if (currentProduct.options) {
                                const selectedRadio = document.querySelector('input[name="subscriptionPeriod"]:checked');
                                if (!selectedRadio) {
                                    showInfoToast('يجب اختيار مدة الاشتراك.', 3000, 'error');
                                    return;
                                }
                                const period = selectedRadio.value;
                                const selectedOption = currentProduct.options[period];
                                finalPrice = selectedOption.price;
                                finalTitle = `${currentProduct.title} (${selectedOption.title})`;
                            } else {
                                finalPrice = currentProduct.price;
                                finalTitle = currentProduct.title;
                            }

                            // ✅ التعديل يبدأ من هنا
                            // التحقق من الحقول المطلوبة بناءً على نوع المنتج
                            if (currentProduct.requiresSteamFriendCode) {
                                const friendCodeInput = document.getElementById('steam_friend_code_input');
                                if (!friendCodeInput.value) {
                                    showInfoToast('الرجاء إدخال كود الصداقة الخاص بك.', 3000, 'error');
                                    return;
                                }
                                extraData['Steam Friend Code'] = friendCodeInput.value;
                            } else if (currentProduct.requiresSteamProfileLink) {
                                const profileLink = document.getElementById('steam_profile_link_input');
                                if (!profileLink.value) {
                                    showInfoToast('الرجاء إدخال رابط بروفايل ستيم.', 3000, 'error');
                                    return;
                                }
                                extraData['Steam Profile Link'] = profileLink.value;
                            } else if (currentProduct.platform === 'riot') {
                                const riotIdInput = document.getElementById('riot_id_input');
                                if (!riotIdInput.value || !riotIdInput.value.includes('#')) {
                                    showInfoToast('الرجاء إدخال Riot ID صحيح بالشكل التالي: Name#TAG.', 3000, 'error');
                                    return;
                                }
                                extraData['Riot ID'] = riotIdInput.value;
                            } else if (currentProduct.platform === 'hoyoverse') {
                                const genshinIdInput = document.getElementById('genshin_id_input');
                                if (!genshinIdInput.value) {
                                    showInfoToast('الرجاء إدخال Genshin UID.', 3000, 'error');
                                    return;
                                }
                            } else if (currentProduct.requiresGmail) { // ✅✅ أضف هذا البلوك
                                const gmailInput = document.getElementById('gmail_input');
                                if (!gmailInput.value || !gmailInput.value.includes('@')) {
                                    showInfoToast('الرجاء إدخال إيميل جوجل (الجيميل) صحيح.', 3000, 'error');
                                    isValid = false; // امنع المتابعة
                                    return; // أوقف الدالة
                                }
                                extraData['Gmail (Email)'] = gmailInput.value;
                                extraData['Genshin UID'] = genshinIdInput.value;
                            } else if (currentProduct.requiresMarvelId) {
                                const marvelRivalsIdInput = document.getElementById('marvel_rivals_id_input');
                                if (!marvelRivalsIdInput.value) {
                                    showInfoToast('الرجاء إدخال Marvel Rivals ID.', 3000, 'error');
                                    return;
                                }
                                extraData['Marvel Rivals ID'] = marvelRivalsIdInput.value;
                            } else if (currentProduct.platform === 'epic' || currentProduct.platform === 'roblox' || currentProduct.requiresAccountDetails) {
                                const accountEmail = document.getElementById('account_email');
                                const accountPassword = document.getElementById('account_password');
                                const accountContact = document.getElementById('account_contact');
                                if (!accountEmail.value || !accountPassword.value || !accountContact.value) {
                                    showInfoToast('الرجاء إدخال جميع بيانات الحساب المطلوبة.', 3000, 'error');
                                    return;
                                }
                                extraData['Account Email'] = accountEmail.value;
                                extraData['Account Password'] = accountPassword.value;
                                extraData['Contact Method'] = accountContact.value;
                            }
                            // ✅ التعديل ينتهي هنا

                            const method = document.getElementById('modalPaymentMethod').value;
                            showPaymentDetails(method, finalPrice, finalTitle, extraData);
                        }

                        function generateStarsHTML(rating) {
                            let starsHTML = '';
                            for (let i = 1; i <= 5; i++) {
                                const starClass = i <= rating ? 'star filled' : 'star';
                                starsHTML += `<span class="${starClass}">&#9733;</span>`;
                            }
                            return `<div class="comment-rating">${starsHTML}</div>`;
                        }

                        function markHelpful(event, productId, commentIndex) {
                            const comments = JSON.parse(localStorage.getItem(`comments_${productId}`)) || [];
                            if (comments[commentIndex]) {
                                if (!comments[commentIndex].helpfulCount) {
                                    comments[commentIndex].helpfulCount = 0;
                                }
                                comments[commentIndex].helpfulCount++;
                                localStorage.setItem(`comments_${productId}`, JSON.stringify(comments));

                                const button = event.target;
                                const countSpan = button.nextElementSibling;
                                countSpan.textContent = `(${comments[commentIndex].helpfulCount})`;
                                button.disabled = true;
                            }
                        }

                        function loadComments(productId) {
                            const commentsContainer = document.getElementById('commentList');
                            const loadMoreBtn = document.getElementById('loadMoreComments');

                            allComments = JSON.parse(localStorage.getItem(`comments_${productId}`)) || [];
                            allComments.sort((a, b) => new Date(b.date) - new Date(a.date));

                            commentsContainer.innerHTML = '';
                            commentsLoaded = 0;

                            if (allComments.length === 0) {
                                commentsContainer.innerHTML = `<p style="text-align: center; color: #ccc;">لا توجد تعليقات حتى الآن. كن أول من يعلق!</p>`;
                                loadMoreBtn.style.display = 'none';
                            } else {
                                renderMoreComments();
                                if (allComments.length > commentsPerPage) {
                                    loadMoreBtn.style.display = 'block';
                                } else {
                                    loadMoreBtn.style.display = 'none';
                                }
                            }

                            loadMoreBtn.onclick = renderMoreComments;
                        }

                        function renderMoreComments() {
                            const commentsContainer = document.getElementById('commentList');
                            const loadMoreBtn = document.getElementById('loadMoreComments');
                            const startIndex = commentsLoaded;
                            const commentsToLoad = allComments.slice(startIndex, startIndex + commentsPerPage);

                            commentsToLoad.forEach((comment, index) => {
                                const absoluteIndex = startIndex + index;
                                const commentItem = document.createElement('div');
                                commentItem.className = 'comment-card';

                                const starsHTML = generateStarsHTML(comment.rating || 0);
                                const helpfulCount = comment.helpfulCount || 0;

                                commentItem.innerHTML = `
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <div class="comment-card-header">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <span class="comment-author">${comment.name}</span>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ${starsHTML}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <p class="comment-text">${comment.text}</p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <div class="comment-footer">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <span>هل كان هذا التقييم مفيداً؟</span>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <button class="helpful-btn" onclick="markHelpful(event, '${currentProduct.id}', ${absoluteIndex})">نعم</button>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <span>(${helpfulCount})</span>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </div>`;
                                commentsContainer.appendChild(commentItem);
                            });

                            commentsLoaded += commentsToLoad.length;
                            if (commentsLoaded >= allComments.length) {
                                loadMoreBtn.style.display = 'none';
                            }
                        }

                        function submitComment(event) {
                            event.preventDefault();
                            const name = document.getElementById('commentName').value;
                            const text = document.getElementById('commentText').value;
                            const rating = document.getElementById('commentRating').value;
                            const productId = currentProduct.id;

                            if (!name) {
                                alert('الرجاء إدخال اسمك.');
                                return;
                            }
                            if (parseInt(rating) === 0) {
                                alert('الرجاء إضافة تقييم للمنتج.');
                                return;
                            }

                            const newComment = {
                                name,
                                text: text || " ",
                                rating: parseInt(rating),
                                date: new Date().toISOString(),
                                helpfulCount: 0
                            };
                            const comments = JSON.parse(localStorage.getItem(`comments_${productId}`)) || [];
                            comments.unshift(newComment);
                            localStorage.setItem(`comments_${productId}`, JSON.stringify(comments));

                            document.getElementById('commentName').value = '';
                            document.getElementById('commentText').value = '';
                            document.getElementById('commentRating').value = '0';
                            document.getElementById('ratingStars').dataset.rating = '0';

                            loadComments(productId);
                            updateProductPageAverageRating(productId);
                        }


                        function updateProductPageAverageRating(productId) {
                            const ratingContainer = document.getElementById('productPageAverageRating');
                            if (!ratingContainer) return;

                            const comments = JSON.parse(localStorage.getItem(`comments_${productId}`)) || [];

                            const totalRating = comments.reduce((sum, comment) => sum + (comment.rating || 0), 0);
                            const averageRating = totalRating / comments.length;
                            const roundedAverage = Math.round(averageRating);

                            let starsHTML = '';
                            for (let i = 1; i <= 5; i++) {
                                const starClass = i <= roundedAverage ? 'star' : 'star empty';
                                starsHTML += `<span class="${starClass}">&#9733;</span>`;
                            }

             
        }

        // --- (الكود المعدل) ---
                        function updateCartCount() {
                            const totalItems = Object.values(cart).reduce((total, item) => total + item.quantity, 0);

                            // 1. تحديث زر السلة العائم (للكومبيوتر)
                            const cartCountDesktop = document.getElementById('cart-count');
                            if (cartCountDesktop) {
                                cartCountDesktop.textContent = totalItems;
                            }

                            // 2. ✅ (الإضافة الجديدة) تحديث زر السلة السفلي (للموبايل)
                            const cartCountMobile = document.getElementById('mobile-cart-count');
                            if (cartCountMobile) {
                                cartCountMobile.textContent = totalItems;
                            }
                        }




                        function markCouponAsUsed() {
                            if (!activeCouponCode || !activeCouponType) return;

                            if (activeCouponType === 'consumable') {
                                // --- حذف نسخة واحدة من المحفظة (خصم الـ Inventory) ---
                                let inventory = JSON.parse(localStorage.getItem('my_coupon_inventory')) || [];
                                const index = inventory.indexOf(activeCouponCode);
                                if (index > -1) {
                                    inventory.splice(index, 1); // حذف عنصر واحد فقط
                                    localStorage.setItem('my_coupon_inventory', JSON.stringify(inventory));
                                    console.log(`Code ${activeCouponCode} consumed and removed from inventory.`);
                                }
                            }
                            else if (activeCouponType === 'static') {
                                // --- تسجيل الكود ككود عام مستخدم (إضافة للقائمة السوداء) ---
                                let usedGlobal = JSON.parse(localStorage.getItem('used_global_coupons')) || [];
                                if (!usedGlobal.includes(activeCouponCode)) {
                                    usedGlobal.push(activeCouponCode);
                                    localStorage.setItem('used_global_coupons', JSON.stringify(usedGlobal));
                                    console.log(`Code ${activeCouponCode} marked as used forever.`);
                                }
                            }

                            // تصفير المتغيرات العامة (ضروري جداً)
                            activeCouponCode = "";
                            currentDiscount = 0;
                            activeCouponType = "";
                        }


                        function renderCart() {
                            const cartItemsContainer = document.getElementById('cartItemsContainer');
                            const cartTotalContainer = document.getElementById('cartTotalContainer');
                            const currencySymbol = currentCurrency;
                            cartItemsContainer.innerHTML = '';
                            let total = 0;

                            if (Object.keys(cart).length === 0) {
                                cartItemsContainer.innerHTML = `<p style="text-align: center; color: #ccc;">سلتك فارغة.</p>`;
                            } else {
                                for (const productId in cart) {
                                    const item = cart[productId];
                                    let itemPrice = item.price;

                                    if (item.options && item.selectedOption) {
                                        itemPrice = item.selectedOption.price;
                                    }

                                    let displayedPrice = itemPrice;
                                    if (currentCurrency === 'USD') {
                                        displayedPrice = (itemPrice / exchangeRate).toFixed(2);
                                    }

                                    let extraInfoHTML = '';
                                    if (item.riot_id) {
                                        extraInfoHTML = `<div class="cart-item-extra-info">ID: ${item.riot_id}</div>`;
                                    } else if (item.steam_friend_code) {
                                        extraInfoHTML = `<div class="cart-item-extra-info">Friend Code: ${item.steam_friend_code}</div>`;
                                    } else if (item.account_email) {
                                        extraInfoHTML = `<div class="cart-item-extra-info">Account: ${item.account_email}</div>`;
                                    } else if (item.selectedOption) {
                                        extraInfoHTML = `<div class="cart-item-extra-info">المدة: ${item.selectedOption.title}</div>`;
                                    }

                                    const itemElement = document.createElement('div');
                                    itemElement.className = 'cart-modal-item';
                                    itemElement.innerHTML = `
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <img src="${item.image}" alt="${item.title}">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <div class="item-details">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <div style="display: flex; justify-content: space-between; align-items: flex-start; width: 100%;">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <h4>${item.title}</h4>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <button class="remove-item-btn" onclick="removeFromCart('${item.id}', '${item.selectedOption ? item.selectedOption.title : ''}')">&times;</button>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <p>${displayedPrice} ${currencySymbol}</p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ${extraInfoHTML}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <div class="quantity-controls">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <button onclick="changeQuantity('${productId}', -1)">-</button>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <span>${item.quantity}</span>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <button onclick="changeQuantity('${productId}', 1)">+</button>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                            `;
                                    cartItemsContainer.appendChild(itemElement);
                                    total += itemPrice * item.quantity;
                                }
                            }

                            const originalTotal = total;
                            let finalTotal = total;

                            if (appliedDiscount) {
                                const discountAmount = finalTotal * (appliedDiscount.percentage / 100);
                                finalTotal -= discountAmount;
                            }

                            let displayedOriginalTotal = originalTotal.toFixed(2);
                            let displayedFinalTotal = finalTotal.toFixed(2);

                            if (currentCurrency === 'USD') {
                                displayedOriginalTotal = (originalTotal / exchangeRate).toFixed(2);
                                displayedFinalTotal = (finalTotal / exchangeRate).toFixed(2);
                            }

                            if (appliedDiscount) {
                                cartTotalContainer.innerHTML = `
                                                                                                                                                                                                                                                                                                                                                                                                                                                            الإجمالي: <span class="original-price">${displayedOriginalTotal} ${currencySymbol}</span>
                                                                                                                                                                                                                                                                                                                                                                                                                                                            <span id="cartTotalPrice">${displayedFinalTotal}</span> ${currencySymbol}
                                                                                                                                                                                                                                                                                                                                                                                                                                                        `;
                            } else {
                                cartTotalContainer.innerHTML = `الإجمالي: <span id="cartTotalPrice">${displayedFinalTotal}</span> ${currencySymbol}`;
                            }
                        }

                        function changeQuantity(productId, change) {
                            if (cart[productId]) {
                                cart[productId].quantity += change;
                                if (cart[productId].quantity <= 0) {
                                    delete cart[productId];
                                }
                                localStorage.setItem('cart', JSON.stringify(cart));
                                updateCartCount();
                                renderCart();
                            }
                        }

                        function removeFromCart(productId) {
                            if (cart[productId]) {
                                delete cart[productId];
                                localStorage.setItem('cart', JSON.stringify(cart));
                                updateCartCount();
                                renderCart();
                            }
                        }

                        function goToCheckout() {
                            if (Object.keys(cart).length === 0) {
                                // 1. إغلاق نافذة السلة أولاً
                                closeModal('cartModal');

                                // 2. استدعاء دالة عرض رسالة الخطأ المخصصة (التي سنضيفها في الخطوة 2)
                                showEmptyCartModal();
                                return;
                            }
                            closeModal('cartModal');
                            showModal('checkoutModal');
                            renderCheckoutPaymentOptions();
                        }

                        function renderCheckoutPaymentOptions() {
                            const container = document.getElementById('checkoutPaymentOptionsContainer');
                            container.innerHTML = '';

                            let total = Object.values(cart).reduce((sum, item) => sum + (item.price * item.quantity), 0);

                            if (appliedDiscount) {
                                const discountAmount = total * (appliedDiscount.percentage / 100);
                                total = total - discountAmount;
                            }

                            const vodafoneCard = document.createElement('div');
                            vodafoneCard.className = 'payment-method-card';
                            vodafoneCard.onclick = () => showPaymentDetails('vodafone', total);
                            vodafoneCard.innerHTML = `
                                                                                                                                                                                                                                                                                                                                                                                            <h3>
                                                                                                                                                                                                                                                                                                                                                                                                <img src="./images/vf-cash.png" alt="Vodafone Cash Logo">
                                                                                                                                                                                                                                                                                                                                                                                                 فودافون كاش - انستا باي - محفظة
                                                                                                                                                                                                                                                                                                                                                                                            </h3>
                                                                                                                                                                                                                                                                                                                                                                                            <p> الدفع عبر المحفظة الالكترونية</p>
                                                                                                                                                                                                                                                                                                                                                                                        `;
                            container.appendChild(vodafoneCard);

                            const paypalCard = document.createElement('div');
                            paypalCard.className = 'payment-method-card';
                            paypalCard.onclick = () => showPaymentDetails('paypal', total);
                            paypalCard.innerHTML = `
                                                                                                                                                                                                                                                                                                                                                                                            <h3>
                                                                                                                                                                                                                                                                                                                                                                                                <img src="./images/paypal.png" alt="PayPal Logo">
                                                                                                                                                                                                                                                                                                                                                                                                بايبال
                                                                                                                                                                                                                                                                                                                                                                                            </h3>
                                                                                                                                                                                                                                                                                                                                                                                            <p>الدفع عبر حساب بايبال</p>
                                                                                                                                                                                                                                                                                                                                                                                        `;
                            container.appendChild(paypalCard);

                            // ✅ إضافة بطاقة الدفع الجديدة بالكريديت كارد
                            const creditcardCard = document.createElement('div');
                            creditcardCard.className = 'payment-method-card';
                            creditcardCard.onclick = () => showPaymentDetails('creditcard', total);
                            creditcardCard.innerHTML = `
                                                                                                                                                                                                                                                                                                                                                                                            <h3>
                                                                                                                                                                                                                                                                                                                                                                                                <img src="./images/credit-card.png" alt="Credit Card Logo">
                                                                                                                                                                                                                                                                                                                                                                                                فيزا / ماستر كارد
                                                                                                                                                                                                                                                                                                                                                                                            </h3>
                                                                                                                                                                                                                                                                                                                                                                                            <p>الدفع ببطاقة الائتمان أو الخصم</p>
                                                                                                                                                                                                                                                                                                                                                                                        `;
                            container.appendChild(creditcardCard);
                        }

                        function showPaymentDetails(method, total, singleProductTitle = null, singleProductExtraData = {}) {
                            hasConfirmedOnce = false;
                            currentPaymentTotal = total;
                            closeModal('checkoutModal');
                            const paymentModal = document.getElementById('paymentModal');
                            if (!paymentModal.classList.contains('is-visible')) {
                                showModal('paymentModal');
                            }

                            const allSections = paymentModal.querySelectorAll('.modal-content-section');
                            allSections.forEach(section => section.classList.remove('is-visible'));

                            const detailsSection = document.getElementById(`${method}Details`);
                            if (detailsSection) {
                                detailsSection.classList.add('is-visible');

                                // --- ✅ بداية التعديل: بناء قائمة الملخص المنبثقة ---
                                let productSummaryText = '';
                                let detailedTooltipHTML = ''; // متغير لتخزين HTML القائمة

                                if (singleProductTitle) {
                                    // حالة منتج واحد (شراء مباشر)
                                    productSummaryText = singleProductTitle;
                                    detailedTooltipHTML = `
                                                                                                                                                        <div class="summary-tooltip-item">
                                                                                                                                                            <div style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 200px;">${singleProductTitle}</div>
                                                                                                                                                            <div><span class="qty">x1</span></div>
                                                                                                                                                        </div>
                                                                                                                                                    `;
                                } else if (Object.keys(cart).length > 0) {
                                    // حالة السلة
                                    const cartItems = Object.values(cart);
                                    if (cartItems.length === 1) {
                                        const item = cartItems[0];
                                        productSummaryText = item.selectedOption ? `${item.title} (${item.selectedOption.title}) (x${item.quantity})` : `${item.title} (x${item.quantity})`;
                                    } else {
                                        productSummaryText = `${cartItems[0].title} + ${cartItems.length - 1} منتجات أخرى`;
                                    }

                                    // بناء عناصر القائمة
                                    cartItems.forEach(item => {
                                        let itemPrice = item.price;
                                        if (item.selectedOption) itemPrice = item.selectedOption.price;

                                        // تنسيق السعر حسب العملة
                                        let displayPrice = itemPrice;
                                        if (currentCurrency === 'USD') {
                                            displayPrice = (itemPrice / exchangeRate).toFixed(2) + '$';
                                        } else {
                                            displayPrice = itemPrice + ' EGP';
                                        }

                                        detailedTooltipHTML += `
                                                                                                                                                            <div class="summary-tooltip-item">
                                                                                                                                                                <div style="max-width: 180px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                                                                                                                                                                    ${item.title} ${item.selectedOption ? `(${item.selectedOption.title})` : ''}
                                                                                                                                                                </div>
                                                                                                                                                                <div style="display: flex; align-items: center;">
                                                                                                                                                                    <span style="color: #bbb; font-size: 11px;">${displayPrice}</span>
                                                                                                                                                                    <span class="qty">x${item.quantity}</span>
                                                                                                                                                                </div>
                                                                                                                                                            </div>
                                                                                                                                                        `;
                                    });
                                }

                                // إضافة الإجمالي في نهاية القائمة
                                let totalDisplay = total;
                                let symbol = 'EGP';
                                if (currentCurrency === 'USD') {
                                    totalDisplay = (total / exchangeRate).toFixed(2);
                                    symbol = 'USD';
                                }

                                detailedTooltipHTML += `
                                                                                                                                                    <div class="summary-tooltip-total">
                                                                                                                                                        الإجمالي: ${totalDisplay} ${symbol}
                                                                                                                                                    </div>
                                                                                                                                                `;

                                const summaryDisplay = detailsSection.querySelector('.payment-summary-value');
                                if (summaryDisplay) {
                                    // حقن النص + القائمة المخفية + أيقونة المعلومات
                                    summaryDisplay.innerHTML = `
                                                                                                                                                        ${productSummaryText}
                                                                                                                                                        <i class="fas fa-info-circle" style="font-size:12px; margin-right:5px; color:var(--accent-yellow);"></i>
                                                                                                                                                        <div class="detailed-summary-tooltip">
                                                                                                                                                            ${detailedTooltipHTML}
                                                                                                                                                        </div>
                                                                                                                                                    `;
                                    // تغيير شكل الماوس ليشير إلى وجود تفاعل
                                    summaryDisplay.parentElement.style.cursor = 'pointer';
                                }
                                // --- ✅ نهاية التعديل ---

                                const summaryContainer = detailsSection.querySelector('.order-summary-container');
                                if (summaryContainer) {
                                    summaryContainer.innerHTML = '';
                                    let summaryHTML = '<h4>ملخص الطلب</h4>';
                                    if (singleProductTitle) {
                                        summaryHTML += `<div class="summary-item"><strong>الخدمة:</strong> <span>${singleProductTitle}</span></div>`;
                                        for (const key in singleProductExtraData) {
                                            if (key.toLowerCase().includes('password')) continue;
                                            summaryHTML += `<div class="summary-item"><strong>${key}:</strong> <span>${singleProductExtraData[key]}</span></div>`;
                                        }
                                    } else if (Object.keys(cart).length > 0) {
                                        Object.values(cart).forEach(item => {
                                            const itemTitle = item.selectedOption ? `${item.title} (${item.selectedOption.title})` : item.title;
                                            summaryHTML += `<div class="summary-item"><strong>- ${itemTitle} (x${item.quantity})</strong></div>`;
                                        });
                                    }
                                    summaryContainer.innerHTML = summaryHTML;
                                }

                                let productSummary = '';
                                const allExtraData = {};
                                if (singleProductTitle) {
                                    productSummary = singleProductTitle;
                                    Object.assign(allExtraData, singleProductExtraData);
                                } else {
                                    const extraDataLines = [];
                                    productSummary = Object.values(cart).map(item => {
                                        let title = item.title;
                                        if (item['Bundle Contents']) {
                                            title += ` [الألعاب: ${item['Bundle Contents']}]`;
                                            extraDataLines.push(`Bundle: ${item['Bundle Contents']}`);
                                            allExtraData['Bundle Contents'] = item['Bundle Contents'];
                                        }
                                        if (item.selectedOption) title = `${item.title} (${item.selectedOption.title})`;
                                        if (item['Genshin UID']) extraDataLines.push(`[${title}] UID: ${item['Genshin UID']}`);
                                        if (item['Riot ID']) extraDataLines.push(`[${title}] Riot ID: ${item['Riot ID']}`);
                                        if (item['Steam Profile Link']) extraDataLines.push(`[${title}] Profile Link: ${item['Steam Profile Link']}`);
                                        if (item['Steam Friend Code']) extraDataLines.push(`[${title}] Friend Code: ${item['Steam Friend Code']}`);
                                        if (item['Account Email']) extraDataLines.push(`[${title}] Account: ${item['Account Email']}`);
                                        if (item['Discord Username']) extraDataLines.push(`[Decorations] Discord User: ${item['Discord Username']}`);
                                        if (item['Account Password']) extraDataLines.push(`[${title}] Password: ${item['Account Password']}`);
                                        if (item['Contact Method']) extraDataLines.push(`[${title}] Contact: ${item['Contact Method']}`);
                                        if (item['Marvel Rivals ID']) extraDataLines.push(`[${title}] Marvel Rivals ID: ${item['Marvel Rivals ID']}`);
                                        return `${title} (x${item.quantity})`;
                                    }).join(' | ');
                                    if (extraDataLines.length > 0) allExtraData['Extra Data'] = extraDataLines.join(' || ');
                                }

                                let displayedPrice = total;
                                let currencySymbol = 'EGP';
                                if (['paypal', 'creditcard'].includes(method)) {
                                    displayedPrice = (total / exchangeRate).toFixed(2);
                                    currencySymbol = 'USD';
                                } else if (currentCurrency === 'USD') {
                                    displayedPrice = (total / exchangeRate).toFixed(2);
                                    currencySymbol = 'USD';
                                }

                                const totalAmountText = `${displayedPrice} ${currencySymbol}`;
                                const timerDisplay = detailsSection.querySelector('.payment-timer-value');
                                const totalAmountSpan = detailsSection.querySelector('.payment-total-amount-value');
                                const paymentAmountDisplay = detailsSection.querySelector(`#${method}AmountDisplay`);
                                if (totalAmountSpan) totalAmountSpan.textContent = totalAmountText;
                                if (paymentAmountDisplay) paymentAmountDisplay.textContent = totalAmountText;

                                const form = document.getElementById(`${method}Form`);
                                if (form) {
                                    form.querySelector(`#${method}_product_name`).value = productSummary;
                                    form.querySelector(`#${method}_product_price`).value = displayedPrice;
                                    for (const key in allExtraData) {
                                        const input = form.querySelector(`input[name="${key}"]`);
                                        if (input) input.value = allExtraData[key];
                                    }
                                    startPaymentTimer(3600, timerDisplay, form);
                                }
                                const user = firebase.auth().currentUser;
                                if (user && user.email) {
                                    const emailInput = detailsSection.querySelector('input[name="email"]');
                                    if (emailInput) {
                                        emailInput.value = user.email;
                                    }
                                }
                            }
                        }

                        function submitFeedback() {
                            const name = document.getElementById('feedback-name').value;
                            const feedbackText = document.getElementById('feedback-text').value;
                            const messageElement = document.getElementById('feedback-message');

                            if (!feedbackText.trim()) {
                                messageElement.textContent = "من فضلك اكتب ملاحظاتك قبل الإرسال.";
                                messageElement.style.color = 'red';
                                return;
                            }

                            const formData = new FormData();
                            formData.append('name', name || 'غير محدد');
                            formData.append('feedback', feedbackText);

                            fetch(formspreeEndpoints.feedback, {
                                method: 'POST',
                                body: formData,
                                headers: { 'Accept': 'application/json' }
                            })
                                .then(response => {
                                    if (response.ok) {
                                        messageElement.textContent = "شكراً لمشاركتك! تم إرسال ملاحظاتك بنجاح.";
                                        messageElement.style.color = '#00ff00';
                                        document.getElementById('feedback-name').value = '';
                                        document.getElementById('feedback-text').value = '';
                                    } else {
                                        response.json().then(data => {
                                            messageElement.textContent = data.errors ? data.errors.map(error => error.message).join(", ") : "حدث خطأ ما. يرجى المحاولة مرة أخرى.";
                                        });
                                        messageElement.style.color = 'red';
                                    }
                                })
                                .catch(() => {
                                    messageElement.textContent = "حدث خطأ في الاتصال. يرجى التحقق من اتصالك بالإنترنت.";
                                    messageElement.style.color = 'red';
                                });
                        }

                        function submitCreditCardOrder() {
                            // 1. الحصول على قيمة الإيميل من الحقل المرئي
                            const emailInput = document.getElementById('creditcard_email_input');
                            const emailValue = emailInput.value;

                            // 2. التحقق من أن حقل الإيميل ليس فارغًا
                            if (!emailValue.trim() || !emailValue.includes('@')) {
                                showInfoToast('الرجاء إدخال بريد إلكتروني صحيح لتأكيد الطلب.', 4000, 'error');
                                return; // إيقاف العملية إذا كان الحقل فارغًا أو غير صالح
                            }

                            // 3. وضع قيمة الإيميل في الحقل المخفي داخل الفورم
                            document.getElementById('creditcard_email').value = emailValue;

                            // 4. الحصول على الفورم المخفي
                            const form = document.getElementById('creditcardForm');

                            // 5. استدعاء الدالة المسؤولة عن إظهار التحميل وإرسال البيانات
                            handlePaymentSubmit(form);
                        }

                        // --- كود إخفاء شاشة التحميل واللوجو (مُعدل ومحسّن) ---
                        document.addEventListener('DOMContentLoaded', function () {

                            // 1. إخفاء شاشة التحميل
                            const loadingScreen = document.getElementById('loading-screen');
                            if (loadingScreen) {
                                setTimeout(() => {
                                    loadingScreen.classList.add('hidden');
                                }, 3000); // 3 ثواني
                            }

                            // 2. إيستر إيج اللوجو (Rage Quit)
                            let logoClicks = 0;
                            let logoTimer;
                            const logoLink = document.querySelector('#navbar .logo-area a');

                            if (logoLink) {
                                logoLink.addEventListener('click', (e) => {
                                    e.preventDefault();
                                    clearTimeout(logoTimer);
                                    logoClicks++;

                                    if (logoClicks === 5) {
                                        // ✅ استخدام الإشعار الجديد
                                        showGameAlert("😤 Chill bro! It's just a store.", "error");
                                        logoClicks = 0;
                                    } else {
                                        logoTimer = setTimeout(() => {
                                            window.location.hash = '#home';
                                            logoClicks = 0;
                                        }, 500);
                                    }
                                });
                            }

                        });


    </script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

    <script>



      <!-- ✅ تحميل Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

    <script>
/* =========================
                   🔥 تهيئة Firebase (أساسي)
                   ========================= */
const firebaseConfig = {
                  apiKey: "AIzaSyAsrl6fyQ65lGU22WlTsm8HDtjhKYKw4bs",
                  authDomain: "berlin-storegoe-login.firebaseapp.com",
                  projectId: "berlin-storegoe-login",
                  storageBucket: "berlin-storegoe-login.firebasestorage.app",
                  messagingSenderId: "429636991312",
                  appId: "1:429636991312:web:38bb70e5186173ae809455"
};

// منع إعادة التهيئة لو الصفحة فيها Firebase قبل كده
if (!firebase.apps.length) {
                  firebase.initializeApp(firebaseConfig);
}

const db = firebase.firestore();

/* ==================================================
                   ✅ دالة قوية لجلب وعرض العروض الحصرية (نهائية)
                   ================================================== */
                 function loadSpecialOffers() {
                     console.log("🚀 تحميل العروض الحصرية مع الترتيب...");

                 const section = document.getElementById('games-section');
                 const container = document.getElementById('gamesContainer');

                 if (!section || !container) {
                     console.error("❌ games-section أو gamesContainer مش موجودين");
                 return;
          }

                 // رسالة تحميل
                 container.innerHTML = `
                 <p id="special-loading-msg"
                     style="color:#ccc;width:100%;text-align:center; padding: 20px;">
                     📡 جاري تحميل العروض الحصرية...
                 </p>
                 `;

                 const loadingMsg = document.getElementById('special-loading-msg');

                 // تأكيد Firebase
                 if (typeof firebase === 'undefined' || !firebase.apps.length) {
                     loadingMsg.innerHTML = '<span style="color:red">❌ Firebase غير جاهز</span>';
                 return;
          }

                 const db = firebase.firestore();

                 // جلب العروض (بدون ترتيب من السيرفر لتجنب مشاكل الـ Index)
                 db.collection("special_offers").get()
            .then((querySnapshot) => {

              if (querySnapshot.empty) {
                     loadingMsg.innerHTML = '<span style="color:orange">⚠️ لا توجد عروض حالياً</span>';
                 return;
              }

                 // 1. تحويل البيانات لمصفوفة عشان نعرف نرتبها
                 let productsList = [];
              querySnapshot.forEach((doc) => {
                     let data = doc.data();
                 data.id = doc.id; // ضمان وجود الـ ID
                 // لو المنتج ملوش رقم ترتيب، نديله رقم كبير (9999) عشان يظهر في الآخر
                 data.sortOrder = (data.sortOrder !== undefined) ? Number(data.sortOrder) : 9999;
                 productsList.push(data);
              });

              // 2. ترتيب المصفوفة (من الرقم الصغير للكبير)
              // هذا هو السطر السحري اللي بيخلي الترتيب يشتغل زي الداشبورد
              productsList.sort((a, b) => a.sortOrder - b.sortOrder);

                 // 3. مسح المحتوى القديم (رسالة التحميل)
                 container.innerHTML = '';

              // 4. عرض المنتجات المرتبة
              productsList.forEach((data) => {

                // حفظ في الذاكرة عشان زرار الشراء يشتغل
                if (typeof productsData !== 'undefined') {
                     productsData[data.id] = data;
                }

                 // رسم الكارت
                 if (typeof renderProductItem === 'function') {
                     renderProductItem(data, container, 'special_offers', true);
                } else {
                     // رسم احتياطي
                     container.innerHTML += `
                    <div class="product-card">
                      <img src="${data.image}" onerror="this.src='https://placehold.co/200'">
                      <h3>${data.title}</h3>
                      <p class="price">${data.price} EGP</p>
                    </div>
                  `;
                }
              });

                 console.log(`✅ تم تحميل وترتيب ${productsList.length} عرض.`);

            })
            .catch((error) => {
                     console.error("🔥 Error:", error);
                 if(loadingMsg) loadingMsg.innerHTML = `<span style="color:red">❌ ${error.message}</span>`;
            });
}

// تشغيل الدالة
window.addEventListener('load', () => {
          setTimeout(loadSpecialOffers, 1000);
});


                        /* ========================================== */
                        /* 🌸 DETECTIVE CONAN EASTER EGG (Mai Kuraki) */
                        /* ========================================== */

                        // متغير لتخزين الصوت عشان نقدر نوقفه لو اشتغل تاني
                        let maiAudio = null;

                        function triggerMaiKurakiEffect() {
                            // 1. إيقاف أي موسيقى أخرى شغالة (مثل كايتو كيد)
                            if (typeof currentKaitoMusic !== 'undefined' && currentKaitoMusic) {
                                currentKaitoMusic.pause();
                                currentKaitoMusic.currentTime = 0;
                            }

                            // 2. إيقاف نفس الأغنية لو كانت شغالة
                            if (maiAudio) {
                                maiAudio.pause();
                                maiAudio.currentTime = 0;
                            }

                            // 3. تشغيل الأغنية
                            // ⚠️ تأكد أن اسم الملف في فولدر sounds هو conan_mai.mp3
                            maiAudio = new Audio('./sounds/conan_mai.mp3');
                            maiAudio.volume = 0.6;

                            maiAudio.play().then(() => {
                                console.log("🌸 Mai Kuraki Song Started...");

                                // 4. إظهار إشعار (Toast) بكلمات الأغنية أو اسم الأغنية
                                if (typeof showInfoToast === 'function') {
                                    showInfoToast("🎶 Detective conan Kimi to Koi by mai kuraki", 5000, 'info');
                                }

                                // 5. تأثير بصري بسيط (اختياري): تغيير لون حدود البحث للوردي
                                const searchInput = document.getElementById('navbarProductSearch');
                                if (searchInput) {
                                    searchInput.style.borderColor = "#ff69b4"; // وردي
                                    searchInput.style.boxShadow = "0 0 15px #ff69b4";

                                    // إرجاع اللون للطبيعي بعد 5 ثواني
                                    setTimeout(() => {
                                        searchInput.style.borderColor = "";
                                        searchInput.style.boxShadow = "";
                                    }, 5000);
                                }

                            }).catch(error => {
                                console.error("❌ فشل تشغيل الأغنية:", error);
                                alert("تأكد أن ملف الصوت conan_mai.mp3 موجود داخل مجلد sounds");
                            });
                        }

                        let isFrameModified = false; // متغير لتتبع تغيير الإطار

                        function applyUserFrame(frameClass) {
                            // 1. ✅ أهم سطر: حفظ الإطار في الذاكرة عشان لما تعمل ريفريش يفضل موجود
                            localStorage.setItem('user_active_frame', frameClass);

                            // 2. تحديد الصور اللي هيطبق عليها الإطار
                            const avatarElements = [
                                document.getElementById('nav-user-img'),      // صورة الناف بار
                                document.getElementById('currentProfilePic'), // صورة البروفايل الكبيرة
                                document.getElementById('dropdown-user-img')  // صورة القائمة المنسدلة
                            ];

                            avatarElements.forEach(img => {
                                if (img) {
                                    // مسح أي إطارات قديمة الأول
                                    img.classList.remove('frame-inferno', 'frame-cyber');

                                    // لو الإطار مش "default" أو فاضي، طبقه
                                    if (frameClass && frameClass !== 'default') {
                                        img.classList.add(frameClass);

                                        // 🛑 إلغاء حدود الرانك (الذهبي/الماسي) عشان شكل الإطار يبان صح
                                        img.style.border = 'none';
                                        img.style.boxShadow = 'none';

                                    } else {
                                        // لو رجعنا للافتراضي، نرجع حدود الرانك تاني
                                        // (بنجيب دالة الرانك الموجودة عندك عشان ترجع الستايل الأصلي)
                                        const ordersElem = document.getElementById('total-completed-orders');
                                        const orders = ordersElem ? parseInt(ordersElem.textContent) : 0;

                                        if (typeof applyUserRankUI === 'function') {
                                            applyUserRankUI(orders);
                                        }
                                    }
                                }
                            });
                        }

                        function renderFramesSelection() {
                            const container = document.getElementById('frames-selection-container');
                            if (!container) return;

                            container.innerHTML = '';

                            const allFrames = [
                                { id: 'default', name: 'افتراضي', class: 'default' },
                                { id: 'frame-inferno', name: 'الجحيم', class: 'frame-inferno' },
                                { id: 'frame-cyber', name: 'سايبر', class: 'frame-cyber' },
                                { id: 'frame-toxic', name: 'السموم', class: 'frame-toxic' },
                                { id: 'frame-galaxy', name: 'المجرة', class: 'frame-galaxy' }
                            ];

                            const ownedFrames = JSON.parse(localStorage.getItem('unlocked_frames')) || ['default'];
                            const activeFrame = localStorage.getItem('user_active_frame') || 'default';

                            allFrames.forEach(frame => {
                                const isOwned = ownedFrames.includes(frame.class) || frame.id === 'default';
                                const isActive = activeFrame === frame.class;

                                const frameOption = document.createElement('div');
                                frameOption.className = `frame-option-btn ${isActive ? 'active-frame' : ''} ${!isOwned ? 'locked' : ''} ${frame.class}`;

                                if (isOwned) {
                                    frameOption.onclick = () => {
                                        // 1. تحديث الشكل البصري (Selection)
                                        document.querySelectorAll('.frame-option-btn').forEach(b => b.classList.remove('active-frame'));
                                        frameOption.classList.add('active-frame');

                                        // 2. تطبيق الإطار فوراً
                                        applyUserFrame(frame.class);

                                        // 3. ✅✅ تفعيل زر الحفظ (الجزء الجديد) ✅✅
                                        isFrameModified = true;
                                        const saveBtn = document.querySelector('.profile-actions-container .confirm-payment-btn');
                                        if (saveBtn) {
                                            saveBtn.disabled = false; // تفعيل الزر
                                            saveBtn.innerHTML = '<i class="fas fa-save"></i> حفظ التغييرات'; // إرجاع النص الأصلي
                                            saveBtn.style.background = ''; // إزالة أي لون رمادي
                                        }
                                    };
                                    frameOption.title = frame.name;
                                } else {
                                    frameOption.title = "هذا الإطار مغلق، اشتره من المتجر";
                                    frameOption.onclick = () => {
                                        showInfoToast("يجب شراء هذا الإطار من متجر المكافآت أولاً!", 3000, 'error');
                                    };
                                }

                                frameOption.innerHTML = `<div style="width:100%; height:100%; border-radius:50%;"></div>`;
                                container.appendChild(frameOption);
                            });
                        }

                        // دالة مساعدة لتوليد كود البادج حسب الرقم
                        function getStockHtml(stock) {
                            // لو مفيش ستوك محدد، نعتبره متوفر
                            if (stock === undefined || stock === null) return '';

                            if (stock === 0) {
                                return `<div class="stock-badge stock-out">🚫 نفذت الكمية</div>`;
                            } else if (stock <= 5) {
                                return `<div class="stock-badge stock-low">🔥 متبقى ${stock} فقط!</div>`;
                            } else {
                                return `<div class="stock-badge stock-high">✅ متوفر بكثرة</div>`;
                            }
                        }

                        // --- داخل اللوب اللي بيرسم الكروت (مثلاً في loadOfflineSteamGames) ---
                        // وانت بتعمل productsData.forEach أو for loop...

                        // 1. هات كود البادج
                        const stockBadge = getStockHtml(product.stock);

                        // 2. زر الشراء (عشان نلغيه لو الكمية خلصت)
                        let buyButtonState = '';
                        let buyButtonText = 'أضف للسلة';
                        if (product.stock === 0) {
                            buyButtonState = 'disabled style="background: #555; cursor: not-allowed; border-color: #555;"';
                            buyButtonText = 'غير متاح';
                        }

                        const randomStock = Math.floor(Math.random() * 5) + 1;

                        const cardHTML = `
                                                                                                            <div class="product-item--offline" style="width: 100% !important; margin: 0 !important; padding: 10px !important; border-radius: 12px; position: relative; overflow: hidden;">

                                                                                                                <div class="product-image-wrapper" style="height: 120px !important; margin-bottom: 10px;">
                                                                                                                    <img src="${product.image}" alt="${product.title}" loading="lazy">
                                                                                                                </div>

                                                                                                                <h3 style="font-size: 14px !important; min-height: 40px; margin-bottom: 5px;">${product.title}</h3>

                                                                                                                <div style="color: #ff4757; font-size: 12px; font-weight: bold; margin-bottom: 8px; display: flex; align-items: center; justify-content: center; gap: 5px;">
                                                                                                                    <i class="fas fa-fire-alt" style="animation: pulse 1.5s infinite;"></i>
                                                                                                                    متبقي ${randomStock} نسخ فقط!
                                                                                                                </div>

                                                                                                                <p class="product-price" style="color: #66c0f4; font-size: 16px; font-weight: bold;">${product.price} EGP</p>

                                                                                                                <button class="buy-btn" onclick="addToCart('${product.id}', 1)" style="width: 100%; background-color: #66c0f4; color: #1b2838; border: none; font-weight: bold;">
                                                                                                                    أضف للسلة
                                                                                                                </button>

                                                                                                            </div>
                                                                                                        `;

                        // إضافة الكارت للكونتينر
                        if (container) container.innerHTML += cardHTML;

                        // ======================================================
                        // 1. تعريف المتغيرات العامة والدوال المساعدة
                        // ======================================================
                        window.isLoginMode = true;

                        // دالة تحديث نصوص النافذة (تبديل بين دخول وإنشاء حساب)
                        function updateAuthModalUI() {
                            const authTitle = document.getElementById('authTitle');
                            const submitBtn = document.getElementById('submitAuthBtn');
                            const toggleText = document.getElementById('toggleAuthText');
                            const toggleBtn = document.getElementById('toggleAuthBtn');

                            if (window.isLoginMode) {
                                if (authTitle) authTitle.textContent = "تسجيل الدخول";
                                if (submitBtn) submitBtn.textContent = "تسجيل الدخول";
                                if (toggleText) toggleText.textContent = "ليس لديك حساب؟";
                                if (toggleBtn) toggleBtn.textContent = "إنشاء حساب جديد";
                            } else {
                                if (authTitle) authTitle.textContent = "إنشاء حساب جديد";
                                if (submitBtn) submitBtn.textContent = "إنشاء حساب";
                                if (toggleText) toggleText.textContent = "لديك حساب بالفعل؟";
                                if (toggleBtn) toggleBtn.textContent = "تسجيل الدخول";
                            }
                        }

                        // ======================================================
                        // 2. الدالة الأساسية لفتح النافذة (التي تبحث عنها الأزرار)
                        // ======================================================
                        window.openAuthModal = function (mode) {
                            const modal = document.getElementById('authModal');
                            const overlay = document.getElementById('overlay');

                            // تحديد الوضع بناءً على الزر
                            if (mode === 'login') {
                                window.isLoginMode = true;
                            } else {
                                window.isLoginMode = false;
                            }

                            // تحديث النصوص
                            updateAuthModalUI();

                            // إظهار النافذة
                            if (modal && overlay) {
                                modal.style.display = 'flex';
                                overlay.style.display = 'block';
                                // تأخير بسيط لتفعيل الأنيميشن
                                setTimeout(() => {
                                    modal.classList.add('is-visible');
                                }, 10);
                            } else {
                                console.error("خطأ: عنصر النافذة (authModal) أو الخلفية (overlay) غير موجود في الصفحة.");
                            }
                        };

                        // دالة لإغلاق النافذة
                        window.closeAuthModal = function () {
                            const modal = document.getElementById('authModal');
                            const overlay = document.getElementById('overlay');

                            if (modal) {
                                modal.classList.remove('is-visible');
                                setTimeout(() => {
                                    modal.style.display = 'none';
                                }, 300);
                            }
                            if (overlay) overlay.style.display = 'none';
                        };

                        // ======================================================
                        // 3. تهيئة فايربيس ومراقبة المستخدم (بعد تحميل الصفحة)
                        // ======================================================
                        document.addEventListener('DOMContentLoaded', function () {

                            // التأكد من أن مكتبة فايربيس محملة
                            if (typeof firebase === 'undefined') {
                                console.error("خطأ: لم يتم تحميل مكتبة Firebase بشكل صحيح.");
                                return;
                            }

                            // إعدادات المشروع (Config) - ضرورية عشان الاتصال يشتغل
                            const firebaseConfig = {
                                apiKey: "AIzaSyAsrl6fyQ65lGU22WlTsm8HDtjhKYKw4bs",
                                authDomain: "berlin-storegoe-login.firebaseapp.com",
                                projectId: "berlin-storegoe-login",
                                storageBucket: "berlin-storegoe-login.firebasestorage.app",
                                messagingSenderId: "429636991312",
                                appId: "1:429636991312:web:38bb70e5186173ae809455",
                                measurementId: "G-WGF1G0B6FD"
                            };

                            // تهيئة التطبيق إذا لم يكن مهيأ
                            if (!firebase.apps.length) {
                                firebase.initializeApp(firebaseConfig);
                            }

                            const auth = firebase.auth();

                            // عناصر الأزرار الرئيسية في الهيدر
                            const mainLoginBtn = document.getElementById('btn-login');
                            const mainSignupBtn = document.getElementById('btn-signup');

                            // مراقب حالة تسجيل الدخول
                            auth.onAuthStateChanged((user) => {
                                if (user) {
                                    console.log("✅ المستخدم مسجل دخول:", user.email);

                                    // 1. توجيه المستخدم إذا كان في صفحة الدخول
                                    if (window.location.hash === '#my-orders-auth-page') {
                                        window.location.hash = '#my-orders-page';
                                        if (typeof fetchUserOrders === 'function') fetchUserOrders();
                                    }

                                    // 2. تحديث واجهة المستخدم (إخفاء زر الدخول)
                                    if (mainLoginBtn) mainLoginBtn.style.display = 'none';

                                    // 3. تحديث زر "إنشاء حساب" ليصبح اسم المستخدم
                                    if (mainSignupBtn) {
                                        const username = user.displayName || user.email.split('@')[0];
                                        mainSignupBtn.textContent = "👤 " + username;

                                        // عند الضغط عليه يفتح صفحة الطلبات بدلاً من نافذة التسجيل
                                        mainSignupBtn.onclick = function (e) {
                                            e.preventDefault();
                                            window.location.hash = '#my-orders-page';
                                            if (typeof fetchUserOrders === 'function') fetchUserOrders();
                                        };
                                    }

                                } else {
                                    console.log("❌ المستخدم غير مسجل.");

                                    // إعادة الأزرار لطبيعتها
                                    if (mainLoginBtn) {
                                        mainLoginBtn.style.display = 'inline-block';
                                        mainLoginBtn.onclick = () => window.openAuthModal('login');
                                    }
                                    if (mainSignupBtn) {
                                        mainSignupBtn.textContent = "إنشاء حساب جديد";
                                        mainSignupBtn.style.display = 'inline-block';
                                        mainSignupBtn.onclick = () => window.openAuthModal('signup');
                                    }
                                }
                            });
                        });
    </script>
    <script>
                        // =========================================================
                        // 💎 LOCAL POINTS SYSTEM (نظام النقاط المحلي)
                        // =========================================================

                        const POINTS_STORAGE_KEY = 'berlin_store_bp'; // مفتاح التخزين
                        let userPoints = 0; // المتغير العام للنقاط

                        // 1. دالة تهيئة النقاط عند فتح الموقع
                        function initPointsSystem() {
                            // محاولة جلب النقاط المحفوظة
                            const savedPoints = localStorage.getItem(POINTS_STORAGE_KEY);

                            if (savedPoints !== null) {
                                // لو فيه نقاط محفوظة، حملها
                                userPoints = parseInt(savedPoints);
                            } else {
                                // لو أول مرة يدخل، اديله هدية ترحيب (مثلاً 500 نقطة)
                                userPoints = 500;
                                savePointsLocal(); // حفظ الهدية
                            }

                            updatePointsUI(); // تحديث الشاشة
                            console.log(`💰 Loaded Points: ${userPoints} BP`);
                        }

                        // 2. دالة حفظ النقاط في الذاكرة
                        function savePointsLocal() {
                            localStorage.setItem(POINTS_STORAGE_KEY, userPoints);
                            updatePointsUI(); // تحديث الواجهة فوراً بعد الحفظ
                        }

                        // 3. دالة تحديث الأرقام في الشاشة (الهيدر، البروفايل، المتجر)
                        function updatePointsUI() {
                            const uiElements = [
                                'shop-current-points',  // في متجر المكافآت
                                'user-points-display',  // في البروفايل
                                'user-points-val',      // في أماكن أخرى
                                'shop-user-points'      // احتياطي
                            ];

                            uiElements.forEach(id => {
                                const element = document.getElementById(id);
                                if (element) {
                                    // عمل تأثير عداد سريع للأرقام
                                    element.textContent = userPoints;
                                }
                            });
                        }

                        // 4. دالة إضافة نقاط (استخدمها عند إتمام الطلب)
                        function addPoints(amount) {
                            userPoints += amount;
                            savePointsLocal();
                            showInfoToast(`🎉 مبروك! كسبت ${amount} نقطة BP`, 3000, 'success');
                        }

                        // =========================================================
                        // 🛍️ تعديل دالة شراء المكافآت (لتعمل مع النظام الجديد)
                        // =========================================================

                        // استبدال دالة buyReward القديمة بهذه النسخة
                        function buyReward(itemId) {
                            // البحث عن المنتج
                            const item = REWARD_SHOP_ITEMS.find(i => i.id === itemId);
                            if (!item) return;

                            // التحقق من الرصيد
                            if (userPoints < item.price) {
                                showInfoToast(`❌ رصيدك غير كافٍ! تحتاج ${item.price - userPoints} نقطة إضافية.`, 3000, 'error');

                                // اهتزاز كارت المنتج كفيدباك
                                const card = event.target.closest('.reward-card');
                                if (card) {
                                    card.style.animation = "shake 0.4s ease-in-out";
                                    setTimeout(() => card.style.animation = "", 400);
                                }
                                return;
                            }

                            // --- ✅ عملية الشراء الناجحة ---

                            // 1. خصم النقاط
                            userPoints -= item.price;

                            // 2. الحفظ
                            savePointsLocal();

                            // 3. تسليم الجائزة
                            processRewardDelivery(item);
                        }

                        // تشغيل النظام عند تحميل الصفحة
                        document.addEventListener('DOMContentLoaded', () => {
                            initPointsSystem();
                        });
                        function openRewardShop() {
                            // إخفاء جميع الأقسام الأخرى
                            document.querySelectorAll('.section').forEach(s => s.style.display = 'none');

                            // إظهار قسم المتجر
                            const shopSection = document.getElementById('reward-shop-section');
                            if (shopSection) {
                                shopSection.style.display = 'block';

                                // تحديث رصيد النقاط في الهيدر
                                const pointsDisplay = document.getElementById('shop-user-points');
                                if (pointsDisplay && typeof userPoints !== 'undefined') {
                                    pointsDisplay.textContent = userPoints;
                                }

                                // رسم المنتجات
                                renderRewardShopItems();

                                // الصعود لأعلى الصفحة
                                window.scrollTo(0, 0);
                            } else {
                                console.error("❌ عنصر #reward-shop-section غير موجود في HTML");
                            }
                        }

                        // 2. دالة رسم المنتجات (الكروت)
                        function renderRewardShopItems() {
                            const container = document.getElementById('shop-items-grid');
                            if (!container) return;

                            container.innerHTML = ''; // تنظيف المحتوى القديم

                            // التأكد من وجود المصفوفة (التي أضفناها سابقاً)
                            if (typeof REWARD_SHOP_ITEMS === 'undefined' || REWARD_SHOP_ITEMS.length === 0) {
                                container.innerHTML = '<p style="text-align:center; width:100%; color:#aaa;">لا توجد مكافآت متاحة حالياً.</p>';
                                return;
                            }

                            // إنشاء الكروت
                            REWARD_SHOP_ITEMS.forEach(item => {
                                const card = document.createElement('div');
                                card.className = 'reward-card';

                                // التأكد من وجود صورة (صورة افتراضية لو مفيش)
                                const imgSrc = item.image || './images/gift-box.png';

                                card.innerHTML = `
                                                                                                                            <div class="reward-image-box">
                                                                                                                                <img src="${imgSrc}" alt="${item.title}">
                                                                                                                            </div>
                                                                                                                            <div class="reward-info">
                                                                                                                                <h3>${item.title}</h3>
                                                                                                                                <p class="reward-desc">${item.description}</p>
                                                                                                                                <span class="reward-price">${item.price} BP</span>
                                                                                                                                <button onclick="buyReward('${item.id}')" class="buy-reward-btn">
                                                                                                                                    شراء الآن
                                                                                                                                </button>
                                                                                                                            </div>
                                                                                                                        `;

                                container.appendChild(card);
                            });
                        }
                        // كود تشغيل الإطار المحفوظ عند تحميل الصفحة
                        document.addEventListener('DOMContentLoaded', () => {

                            // 1. محاولة جلب الإطار المحفوظ من الذاكرة
                            const savedFrame = localStorage.getItem('user_active_frame');

                            // 2. لو لقينا إطار محفوظ، طبقه فوراً
                            if (savedFrame && savedFrame !== 'default') {
                                applyUserFrame(savedFrame);
                            }
                        });

    </script>

    <script>
                        // 📱 كود تفعيل تفاعل اللمس (Haptic Feedback Simulation)
                        document.addEventListener('DOMContentLoaded', () => {

                            // 1. حدد كل العناصر اللي عايزها تتحرك لما تدوس عليها
                            const interactables = document.querySelectorAll('button, a, .product-item, .category-btn, .subscription-item, .nav-link, .rental-card, .service-offer-card');

                            interactables.forEach(el => {
                                // لما صباعك يلمس الشاشة
                                el.addEventListener('touchstart', function () {
                                    this.classList.add('tap-active');
                                }, { passive: true });

                                // لما تشيل صباعك
                                el.addEventListener('touchend', function () {
                                    // تأخير بسيط جداً عشان الحركة تلحق تبان للعين
                                    setTimeout(() => {
                                        this.classList.remove('tap-active');
                                    }, 100);
                                }, { passive: true });

                                // لو صباعك اتحرك (يعني بتعمل سكرول مش بتدوس) إلغي الحركة
                                el.addEventListener('touchmove', function () {
                                    this.classList.remove('tap-active');
                                }, { passive: true });
                            });
                        });
    </script>

    <script>
                        // ✅ كود جلب المنتجات للموقع الرئيسي
                        function loadGamesToHome() {
                            console.log("🚀 بدء تحميل المنتجات...");
                            const gamesContainer = document.getElementById('gamesContainer');
                            if (!gamesContainer) return;

                            // 1. المنتجات الثابتة (عشان تظهر فوراً)
                            const staticGamesIds = [
                                'gta', 'minecraft', 'splitfiction', 'mafia', 'rust',
                                'wallpaperEngine', 'hollowknight', 'rdr2', 'battlefield_6', 'fc_26'
                            ];

                            // دالة الرسم
                            const renderList = (list) => {
                                gamesContainer.innerHTML = '';
                                list.forEach(item => {
                                    if (item) {
                                        renderProductItem(item, gamesContainer, 'games', true);
                                    }
                                });
                            };

                            // عرض الثابت فوراً
                            let currentDisplayList = [];
                            staticGamesIds.forEach(id => {
                                if (productsData[id]) currentDisplayList.push(productsData[id]);
                            });
                            renderList(currentDisplayList);

                            // 2. جلب المنتجات الإضافية من الداشبورد
                            try {
                                if (typeof firebase !== 'undefined' && firebase.apps.length) {
                                    const db = firebase.firestore();
                                    db.collection("best_sellers_products").orderBy("createdAt", "desc").get()
                                        .then((querySnapshot) => {
                                            if (!querySnapshot.empty) {
                                                const newProducts = [];
                                                querySnapshot.forEach((doc) => {
                                                    const data = doc.data();
                                                    // تسجيل المنتج في الذاكرة عشان زر الشراء يشتغل
                                                    productsData[data.id] = data;
                                                    newProducts.push(data);
                                                });

                                                // دمج المنتجات الجديدة (في الأول) مع القديمة
                                                const combinedList = [...newProducts, ...currentDisplayList];
                                                renderList(combinedList);
                                                console.log(`✅ تم تحميل ${newProducts.length} منتج إضافي من الداشبورد`);
                                            }
                                        })
                                        .catch((e) => console.log("⚠️ خطأ بسيط في جلب الإضافات: ", e));
                                }
                            } catch (err) {
                                console.log("⚠️ مشكلة في الفايربيس، جاري العمل بالمنتجات الثابتة فقط.");
                            }
                        }

                        // تشغيل الكود عند تحميل الصفحة
                        document.addEventListener('DOMContentLoaded', function () {
                            loadGamesToHome();
                        });
    </script>

    <script>
            firebase.auth().onAuthStateChanged((user) => {
                const btn = document.getElementById('admin-dashboard-btn');

                // زيادة تأكيد: إخفاء الزر في البداية
                if (btn) btn.style.setProperty('display', 'none', 'important');

                if (user && btn) {
                    // قائمة الأدمنز (الحروف لازم تكون مظبوطة)
                    const admins = [
                        "sameh1234.elgamal@gmail.com",
                        "samamorshedy10@gmail.com"
                    ];

                    // لو الإيميل الحالي موجود في القائمة
                    if (admins.includes(user.email)) {
                        // إظهار الزر
                        btn.style.display = 'flex';
                    }
                }
            });

         // ============================================================
         // ✅ دالة حفظ الطلب في الداشبورد (تعتمد على currentProduct)
         // ============================================================
         function saveOrderToFirebase() {
    // التأكد من وجود منتج
    if (typeof currentProduct === 'undefined' || !currentProduct) return;

         // 1. تجميع البيانات الإضافية (حسب العميل كتب إيه)
         let customerDetails = "";

         // تجميع البيانات من الحقول المحتملة
         const inputs = {
             "Email/Pass": document.getElementById('account_email')?.value ? `Email: ${document.getElementById('account_email').value} | Pass: ${document.getElementById('account_password').value}` : null,
         "Riot ID": document.getElementById('riot_id_input')?.value,
         "Genshin UID": document.getElementById('genshin_id_input')?.value,
         "Steam Code": document.getElementById('steam_friend_code_input')?.value,
         "Marvel ID": document.getElementById('marvel_rivals_id_input')?.value,
         "Discord": document.getElementById('discord_username_input')?.value,
         "Gmail": document.getElementById('gmail_input')?.value,
         "Contact": document.getElementById('account_contact')?.value
    };

         // دمج البيانات الموجودة فقط في نص واحد
         for (const [key, value] of Object.entries(inputs)) {
        if (value) customerDetails += `${key}: ${value} || `;
    }

         // 2. تجهيز بيانات الطلب
         const orderData = {
             orderId: Math.floor(100000 + Math.random() * 900000).toString(), // رقم سداسي عشوائي
         userName: document.getElementById('account_contact')?.value || "Guest Customer",
         userEmail: customerDetails || "No Details", // هنا بنحط تفاصيل الحساب أو الآيدي
         totalPrice: currentProduct.price, // السعر من المتغير مباشرة
         status: "pending", // الحالة: قيد المراجعة
         createdAt: firebase.firestore.FieldValue.serverTimestamp(),
         platform: currentProduct.platform || "Web",
         items: [
         {
             title: currentProduct.title,
         price: currentProduct.price,
         image: currentProduct.image
            }
         ]
    };

         // 3. الإرسال للفايربيس
         db.collection('orders').add(orderData)
    .then((docRef) => {
             console.log("✅ تم تسجيل الطلب في الداشبورد: ", docRef.id);
    })
    .catch((error) => {
             console.error("❌ فشل تسجيل الطلب: ", error);
    });
}

    </script>

</body>

</html>


